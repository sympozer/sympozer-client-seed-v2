!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.rdfstore=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c||a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(){function d(a){this.message=a}var a=void 0!==c?c:this,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";d.prototype=new Error,d.prototype.name="InvalidCharacterError",a.btoa||(a.btoa=function(a){for(var c,e,f=0,g=b,h="";a.charAt(0|f)||(g="=",f%1);h+=g.charAt(63&c>>8-f%1*8)){if((e=a.charCodeAt(f+=.75))>255)throw new d("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");c=c<<8|e}return h}),a.atob||(a.atob=function(a){if(a=a.replace(/=+$/,""),a.length%4==1)throw new d("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,f,c=0,g=0,h="";f=a.charAt(g++);~f&&(e=c%4?64*e+f:f,c++%4)?h+=String.fromCharCode(255&e>>(-2*c&6)):0)f=b.indexOf(f);return h})}()},{}],2:[function(a,b,c){!function(a){"use strict";function i(a){var b=a.charCodeAt(0);return b===c?62:b===e?63:b<f?-1:b<f+10?b-f+26+26:b<h+26?b-h:b<g+26?b-g+26:void 0}function j(a){function l(a){h[k++]=a}var c,d,e,f,g,h;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=a.length;g="="===a.charAt(j-2)?2:"="===a.charAt(j-1)?1:0,h=new b(3*a.length/4-g),e=g>0?a.length-4:a.length;var k=0;for(c=0,d=0;c<e;c+=4,d+=3)f=i(a.charAt(c))<<18|i(a.charAt(c+1))<<12|i(a.charAt(c+2))<<6|i(a.charAt(c+3)),l((16711680&f)>>16),l((65280&f)>>8),l(255&f);return 2===g?(f=i(a.charAt(c))<<2|i(a.charAt(c+1))>>4,l(255&f)):1===g&&(f=i(a.charAt(c))<<10|i(a.charAt(c+1))<<4|i(a.charAt(c+2))>>2,l(f>>8&255),l(255&f)),h}function k(a){function h(a){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a)}function i(a){return h(a>>18&63)+h(a>>12&63)+h(a>>6&63)+h(63&a)}var b,f,g,c=a.length%3,e="";for(b=0,g=a.length-c;b<g;b+=3)f=(a[b]<<16)+(a[b+1]<<8)+a[b+2],e+=i(f);switch(c){case 1:f=a[a.length-1],e+=h(f>>2),e+=h(f<<4&63),e+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],e+=h(f>>10),e+=h(f>>4&63),e+=h(f<<2&63),e+="="}return e}var b="undefined"!=typeof Uint8Array?Uint8Array:Array,c="+".charCodeAt(0),e="/".charCodeAt(0),f="0".charCodeAt(0),g="a".charCodeAt(0),h="A".charCodeAt(0);a.toByteArray=j,a.fromByteArray=k}(void 0===c?this.base64js={}:c)},{}],3:[function(a,b,c){(function(c,d){(function(){"use strict";function e(a){return"function"==typeof a||"object"==typeof a&&null!==a}function f(a){return"function"==typeof a}function g(a){return"object"==typeof a&&null!==a}function o(a){m=a}function p(a){n=a}function v(){var a=c.nextTick,b=c.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate),function(){a(B)}}function w(){return function(){l(B)}}function x(){var a=0,b=new s(B),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function y(){var a=new MessageChannel;return a.port1.onmessage=B,function(){a.port2.postMessage(0)}}function z(){return function(){setTimeout(B,1)}}function B(){for(var a=0;a<j;a+=2){(0,A[a])(A[a+1]),A[a]=void 0,A[a+1]=void 0}j=0}function C(){try{var b=a,c=b("vertx");return l=c.runOnLoop||c.runOnContext,w()}catch(a){return z()}}function E(){}function J(){return new TypeError("You cannot resolve a promise with itself")}function K(){return new TypeError("A promises callback cannot return that same promise.")}function L(a){try{return a.then}catch(a){return I.error=a,I}}function M(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function N(a,b,c){n(function(a){var d=!1,e=M(c,b,function(c){d||(d=!0,b!==c?Q(a,c):S(a,c))},function(b){d||(d=!0,T(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,T(a,e))},a)}function O(a,b){b._state===G?S(a,b._result):b._state===H?T(a,b._result):U(b,void 0,function(b){Q(a,b)},function(b){T(a,b)})}function P(a,b){if(b.constructor===a.constructor)O(a,b);else{var c=L(b);c===I?T(a,I.error):void 0===c?S(a,b):f(c)?N(a,b,c):S(a,b)}}function Q(a,b){a===b?T(a,J()):e(b)?P(a,b):S(a,b)}function R(a){a._onerror&&a._onerror(a._result),V(a)}function S(a,b){a._state===F&&(a._result=b,a._state=G,0!==a._subscribers.length&&n(V,a))}function T(a,b){a._state===F&&(a._state=H,a._result=b,n(R,a))}function U(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+G]=c,e[f+H]=d,0===f&&a._state&&n(V,a)}function V(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?Z(c,d,e,f):e(f);a._subscribers.length=0}}function W(){this.error=null}function Y(a,b){try{return a(b)}catch(a){return X.error=a,X}}function Z(a,b,c,d){var g,h,i,j,e=f(c);if(e){if(g=Y(c,d),g===X?(j=!0,h=g.error,g=null):i=!0,b===g)return void T(b,K())}else g=d,i=!0;b._state!==F||(e&&i?Q(b,g):j?T(b,h):a===G?S(b,g):a===H&&T(b,g))}function $(a,b){try{b(function(c){Q(a,c)},function(c){T(a,c)})}catch(b){T(a,b)}}function _(a,b){var c=this;c._instanceConstructor=a,c.promise=new a(E),c._validateInput(b)?(c._input=b,c.length=b.length,c._remaining=b.length,c._init(),0===c.length?S(c.promise,c._result):(c.length=c.length||0,c._enumerate(),0===c._remaining&&S(c.promise,c._result))):T(c.promise,c._validationError())}function ba(a){return new aa(this,a).promise}function da(a){function e(a){Q(c,a)}function f(a){T(c,a)}var b=this,c=new b(E);if(!i(a))return T(c,new TypeError("You must pass an array to race.")),c;for(var d=a.length,g=0;c._state===F&&g<d;g++)U(b.resolve(a[g]),void 0,e,f);return c}function fa(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(E);return Q(c,a),c}function ha(a){var b=this,c=new b(E);return T(c,a),c}function ka(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function la(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function na(a){this._id=ja++,this._state=void 0,this._result=void 0,this._subscribers=[],E!==a&&(f(a)||ka(),this instanceof na||la(),$(this,a))}function oa(){var a;if(void 0!==d)a=d;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;b&&"[object Promise]"===Object.prototype.toString.call(b.resolve())&&!b.cast||(a.Promise=ma)}var h;h=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var l,m,D,i=h,j=0,n=({}.toString,function(b,c){A[j]=b,A[j+1]=c,2===(j+=2)&&(m?m(B):D())}),q="undefined"!=typeof window?window:void 0,r=q||{},s=r.MutationObserver||r.WebKitMutationObserver,t=void 0!==c&&"[object process]"==={}.toString.call(c),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,A=new Array(1e3);D=t?v():s?x():u?y():void 0===q&&"function"==typeof a?C():z();var F=void 0,G=1,H=2,I=new W,X=new W;_.prototype._validateInput=function(a){return i(a)},_.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},_.prototype._init=function(){this._result=new Array(this.length)};var aa=_;_.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===F&&e<b;e++)a._eachEntry(d[e],e)},_.prototype._eachEntry=function(a,b){var c=this,d=c._instanceConstructor;g(a)?a.constructor===d&&a._state!==F?(a._onerror=null,c._settledAt(a._state,b,a._result)):c._willSettleAt(d.resolve(a),b):(c._remaining--,c._result[b]=a)},_.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===F&&(d._remaining--,a===H?T(e,c):d._result[b]=c),0===d._remaining&&S(e,d._result)},_.prototype._willSettleAt=function(a,b){var c=this;U(a,void 0,function(a){c._settledAt(G,b,a)},function(a){c._settledAt(H,b,a)})};var ca=ba,ea=da,ga=fa,ia=ha,ja=0,ma=na;na.all=ca,na.race=ea,na.resolve=ga,na.reject=ia,na._setScheduler=o,na._setAsap=p,na._asap=n,na.prototype={constructor:na,then:function(a,b){var c=this,d=c._state;if(d===G&&!a||d===H&&!b)return this;var e=new this.constructor(E),f=c._result;if(d){var g=arguments[d-1];n(function(){Z(d,e,g,f)})}else U(c,e,a,b);return e},catch:function(a){return this.then(null,a)}};var pa=oa,qa={Promise:ma,polyfill:pa};"function"==typeof define&&define.amd?define(function(){return qa}):void 0!==b&&b.exports?b.exports=qa:void 0!==this&&(this.ES6Promise=qa),pa()}).call(this)}).call(this,a("7YKIPe"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"7YKIPe":10}],4:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if((b=arguments[1])instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(d=arguments.length,f=new Array(d-1),i=1;i<d;i++)f[i-1]=arguments[i];c.apply(this,f)}else if(g(c)){for(d=arguments.length,f=new Array(d-1),i=1;i<d;i++)f[i-1]=arguments[i];for(j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f)}return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned){var c;c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function d(){this.removeListener(a,d),c||(c=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var c=!1;return d.listener=b,this.on(a,d),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){return this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.listenerCount=function(a,b){return a._events&&a._events[b]?e(a._events[b])?1:a._events[b].length:0}},{}],5:[function(a,b,c){},{}],6:[function(a,b,c){function f(a,b,c){if(!(this instanceof f))return new f(a,b,c);var d=typeof a;if("base64"===b&&"string"===d)for(a=E(a);a.length%4!=0;)a+="=";var e;if("number"===d)e=H(a);else if("string"===d)e=f.byteLength(a,b);else{if("object"!==d)throw new Error("First argument needs to be a number, array or string.");e=H(a.length)}var g;f._useTypedArrays?g=f._augment(new Uint8Array(e)):(g=this,g.length=e,g._isBuffer=!0);var h;if(f._useTypedArrays&&"number"==typeof a.byteLength)g._set(a);else if(J(a))for(h=0;h<e;h++)f.isBuffer(a)?g[h]=a.readUInt8(h):g[h]=a[h];else if("string"===d)g.write(a,0,b);else if("number"===d&&!f._useTypedArrays&&!c)for(h=0;h<e;h++)g[h]=0;return g}function g(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d))>e&&(d=e):d=e;var g=b.length;U(g%2==0,"Invalid hex string"),d>g/2&&(d=g/2);for(var h=0;h<d;h++){var i=parseInt(b.substr(2*h,2),16);U(!isNaN(i),"Invalid hex string"),a[c+h]=i}return f._charsWritten=2*h,h}function h(a,b,c,d){return f._charsWritten=P(L(b),a,c,d)}function i(a,b,c,d){return f._charsWritten=P(M(b),a,c,d)}function j(a,b,c,d){return i(a,b,c,d)}function k(a,b,c,d){return f._charsWritten=P(O(b),a,c,d)}function l(a,b,c,d){return f._charsWritten=P(N(b),a,c,d)}function m(a,b,c){return 0===b&&c===a.length?d.fromByteArray(a):d.fromByteArray(a.slice(b,c))}function n(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;f<c;f++)a[f]<=127?(d+=Q(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+Q(e)}function o(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(a[e]);return d}function p(a,b,c){return o(a,b,c)}function q(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;f++)e+=K(a[f]);return e}function r(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function s(a,b,c,d){d||(U("boolean"==typeof c,"missing or invalid endian"),U(void 0!==b&&null!==b,"missing offset"),U(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(f=a[b],b+1<e&&(f|=a[b+1]<<8)):(f=a[b]<<8,b+1<e&&(f|=a[b+1])),f}}function t(a,b,c,d){d||(U("boolean"==typeof c,"missing or invalid endian"),U(void 0!==b&&null!==b,"missing offset"),U(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(b+2<e&&(f=a[b+2]<<16),b+1<e&&(f|=a[b+1]<<8),f|=a[b],b+3<e&&(f+=a[b+3]<<24>>>0)):(b+1<e&&(f=a[b+1]<<16),b+2<e&&(f|=a[b+2]<<8),b+3<e&&(f|=a[b+3]),f+=a[b]<<24>>>0),f}}function u(a,b,c,d){if(d||(U("boolean"==typeof c,"missing or invalid endian"),U(void 0!==b&&null!==b,"missing offset"),U(b+1<a.length,"Trying to read beyond buffer length")),!(b>=a.length)){var f=s(a,b,c,!0);return 32768&f?-1*(65535-f+1):f}}function v(a,b,c,d){if(d||(U("boolean"==typeof c,"missing or invalid endian"),U(void 0!==b&&null!==b,"missing offset"),U(b+3<a.length,"Trying to read beyond buffer length")),!(b>=a.length)){var f=t(a,b,c,!0);return 2147483648&f?-1*(4294967295-f+1):f}}function w(a,b,c,d){return d||(U("boolean"==typeof c,"missing or invalid endian"),U(b+3<a.length,"Trying to read beyond buffer length")),e.read(a,b,c,23,4)}function x(a,b,c,d){return d||(U("boolean"==typeof c,"missing or invalid endian"),U(b+7<a.length,"Trying to read beyond buffer length")),e.read(a,b,c,52,8)}function y(a,b,c,d,e){e||(U(void 0!==b&&null!==b,"missing value"),U("boolean"==typeof d,"missing or invalid endian"),U(void 0!==c&&null!==c,"missing offset"),U(c+1<a.length,"trying to write beyond buffer length"),R(b,65535));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,2);g<h;g++)a[c+g]=(b&255<<8*(d?g:1-g))>>>8*(d?g:1-g)}function z(a,b,c,d,e){e||(U(void 0!==b&&null!==b,"missing value"),U("boolean"==typeof d,"missing or invalid endian"),U(void 0!==c&&null!==c,"missing offset"),U(c+3<a.length,"trying to write beyond buffer length"),R(b,4294967295));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,4);g<h;g++)a[c+g]=b>>>8*(d?g:3-g)&255}function A(a,b,c,d,e){e||(U(void 0!==b&&null!==b,"missing value"),U("boolean"==typeof d,"missing or invalid endian"),U(void 0!==c&&null!==c,"missing offset"),U(c+1<a.length,"Trying to write beyond buffer length"),S(b,32767,-32768)),c>=a.length||(b>=0?y(a,b,c,d,e):y(a,65535+b+1,c,d,e))}function B(a,b,c,d,e){e||(U(void 0!==b&&null!==b,"missing value"),U("boolean"==typeof d,"missing or invalid endian"),U(void 0!==c&&null!==c,"missing offset"),U(c+3<a.length,"Trying to write beyond buffer length"),S(b,2147483647,-2147483648)),c>=a.length||(b>=0?z(a,b,c,d,e):z(a,4294967295+b+1,c,d,e))}function C(a,b,c,d,f){f||(U(void 0!==b&&null!==b,"missing value"),U("boolean"==typeof d,"missing or invalid endian"),U(void 0!==c&&null!==c,"missing offset"),U(c+3<a.length,"Trying to write beyond buffer length"),T(b,3.4028234663852886e38,-3.4028234663852886e38)),c>=a.length||e.write(a,b,c,d,23,4)}function D(a,b,c,d,f){f||(U(void 0!==b&&null!==b,"missing value"),U("boolean"==typeof d,"missing or invalid endian"),U(void 0!==c&&null!==c,"missing offset"),U(c+7<a.length,"Trying to write beyond buffer length"),T(b,1.7976931348623157e308,-1.7976931348623157e308)),c>=a.length||e.write(a,b,c,d,52,8)}function E(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function G(a,b,c){return"number"!=typeof a?c:(a=~~a)>=b?b:a>=0?a:(a+=b,a>=0?a:0)}function H(a){return a=~~Math.ceil(+a),a<0?0:a}function I(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function J(a){return I(a)||f.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function K(a){return a<16?"0"+a.toString(16):a.toString(16)}function L(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(d<=127)b.push(a.charCodeAt(c));else{var e=c;d>=55296&&d<=57343&&c++;for(var f=encodeURIComponent(a.slice(e,c+1)).substr(1).split("%"),g=0;g<f.length;g++)b.push(parseInt(f[g],16))}}return b}function M(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function N(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=a.charCodeAt(f),c=b>>8,d=b%256,e.push(d),e.push(c);return e}function O(a){return d.toByteArray(a)}function P(a,b,c,d){for(var f=0;f<d&&!(f+c>=b.length||f>=a.length);f++)b[f+c]=a[f];return f}function Q(a){try{return decodeURIComponent(a)}catch(a){return String.fromCharCode(65533)}}function R(a,b){U("number"==typeof a,"cannot write a non-number as a number"),U(a>=0,"specified a negative value for writing an unsigned value"),U(a<=b,"value is larger than maximum value for type"),U(Math.floor(a)===a,"value has a fractional component")}function S(a,b,c){U("number"==typeof a,"cannot write a non-number as a number"),U(a<=b,"value larger than maximum allowed value"),U(a>=c,"value smaller than minimum allowed value"),U(Math.floor(a)===a,"value has a fractional component")}function T(a,b,c){U("number"==typeof a,"cannot write a non-number as a number"),U(a<=b,"value larger than maximum allowed value"),U(a>=c,"value smaller than minimum allowed value")}function U(a,b){if(!a)throw new Error(b||"Failed assertion")}var d=a("base64-js"),e=a("ieee754");c.Buffer=f,c.SlowBuffer=f,c.INSPECT_MAX_BYTES=50,f.poolSize=8192,f._useTypedArrays=function(){try{var a=new ArrayBuffer(0),b=new Uint8Array(a);return b.foo=function(){return 42},42===b.foo()&&"function"==typeof b.subarray}catch(a){return!1}}(),f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.isBuffer=function(a){return!(null===a||void 0===a||!a._isBuffer)},f.byteLength=function(a,b){var c;switch(a+="",b||"utf8"){case"hex":c=a.length/2;break;case"utf8":case"utf-8":c=L(a).length;break;case"ascii":case"binary":case"raw":c=a.length;break;case"base64":c=O(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;default:throw new Error("Unknown encoding")}return c},f.concat=function(a,b){if(U(I(a),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===a.length)return new f(0);if(1===a.length)return a[0];var c;if("number"!=typeof b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var d=new f(b),e=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(d,e),e+=g.length}return d},f.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var e=d;d=b,b=c,c=e}b=Number(b)||0;var f=this.length-b;c?(c=Number(c))>f&&(c=f):c=f,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=g(this,a,b,c);break;case"utf8":case"utf-8":m=h(this,a,b,c);break;case"ascii":m=i(this,a,b,c);break;case"binary":m=j(this,a,b,c);break;case"base64":m=k(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=l(this,a,b,c);break;default:throw new Error("Unknown encoding")}return m},f.prototype.toString=function(a,b,c){var d=this;if(a=String(a||"utf8").toLowerCase(),b=Number(b)||0,(c=void 0!==c?Number(c):c=d.length)===b)return"";var e;switch(a){case"hex":e=q(d,b,c);break;case"utf8":case"utf-8":e=n(d,b,c);break;case"ascii":e=o(d,b,c);break;case"binary":e=p(d,b,c);break;case"base64":e=m(d,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":e=r(d,b,c);break;default:throw new Error("Unknown encoding")}return e},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.copy=function(a,b,c,d){var e=this;if(c||(c=0),d||0===d||(d=this.length),b||(b=0),d!==c&&0!==a.length&&0!==e.length){U(d>=c,"sourceEnd < sourceStart"),U(b>=0&&b<a.length,"targetStart out of bounds"),U(c>=0&&c<e.length,"sourceStart out of bounds"),U(d>=0&&d<=e.length,"sourceEnd out of bounds"),d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var g=d-c;if(g<100||!f._useTypedArrays)for(var h=0;h<g;h++)a[h+b]=this[h+c];else a._set(this.subarray(c,c+g),b)}},f.prototype.slice=function(a,b){var c=this.length;if(a=G(a,c,0),b=G(b,c,c),f._useTypedArrays)return f._augment(this.subarray(a,b));for(var d=b-a,e=new f(d,void 0,!0),g=0;g<d;g++)e[g]=this[g+a];return e},f.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},f.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},f.prototype.readUInt8=function(a,b){if(b||(U(void 0!==a&&null!==a,"missing offset"),U(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length))return this[a]},f.prototype.readUInt16LE=function(a,b){return s(this,a,!0,b)},f.prototype.readUInt16BE=function(a,b){return s(this,a,!1,b)},f.prototype.readUInt32LE=function(a,b){return t(this,a,!0,b)},f.prototype.readUInt32BE=function(a,b){return t(this,a,!1,b)},f.prototype.readInt8=function(a,b){if(b||(U(void 0!==a&&null!==a,"missing offset"),U(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length)){return 128&this[a]?-1*(255-this[a]+1):this[a]}},f.prototype.readInt16LE=function(a,b){return u(this,a,!0,b)},f.prototype.readInt16BE=function(a,b){return u(this,a,!1,b)},f.prototype.readInt32LE=function(a,b){return v(this,a,!0,b)},f.prototype.readInt32BE=function(a,b){return v(this,a,!1,b)},f.prototype.readFloatLE=function(a,b){return w(this,a,!0,b)},f.prototype.readFloatBE=function(a,b){return w(this,a,!1,b)},f.prototype.readDoubleLE=function(a,b){return x(this,a,!0,b)},f.prototype.readDoubleBE=function(a,b){return x(this,a,!1,b)},f.prototype.writeUInt8=function(a,b,c){c||(U(void 0!==a&&null!==a,"missing value"),U(void 0!==b&&null!==b,"missing offset"),U(b<this.length,"trying to write beyond buffer length"),R(a,255)),b>=this.length||(this[b]=a)},f.prototype.writeUInt16LE=function(a,b,c){y(this,a,b,!0,c)},f.prototype.writeUInt16BE=function(a,b,c){y(this,a,b,!1,c)},f.prototype.writeUInt32LE=function(a,b,c){z(this,a,b,!0,c)},f.prototype.writeUInt32BE=function(a,b,c){z(this,a,b,!1,c)},f.prototype.writeInt8=function(a,b,c){c||(U(void 0!==a&&null!==a,"missing value"),U(void 0!==b&&null!==b,"missing offset"),U(b<this.length,"Trying to write beyond buffer length"),S(a,127,-128)),b>=this.length||(a>=0?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c))},f.prototype.writeInt16LE=function(a,b,c){A(this,a,b,!0,c)},f.prototype.writeInt16BE=function(a,b,c){A(this,a,b,!1,c)},f.prototype.writeInt32LE=function(a,b,c){B(this,a,b,!0,c)},f.prototype.writeInt32BE=function(a,b,c){B(this,a,b,!1,c)},f.prototype.writeFloatLE=function(a,b,c){C(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){C(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){D(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){D(this,a,b,!1,c)},f.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),"string"==typeof a&&(a=a.charCodeAt(0)),U("number"==typeof a&&!isNaN(a),"value is not a number"),U(c>=b,"end < start"),c!==b&&0!==this.length){U(b>=0&&b<this.length,"start out of bounds"),U(c>=0&&c<=this.length,"end out of bounds");for(var d=b;d<c;d++)this[d]=a}},f.prototype.inspect=function(){for(var a=[],b=this.length,d=0;d<b;d++)if(a[d]=K(this[d]),d===c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},f.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(f._useTypedArrays)return new f(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;b<c;b+=1)a[b]=this[b];return a.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var F=f.prototype;f._augment=function(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=F.get,a.set=F.set,a.write=F.write,a.toString=F.toString,a.toLocaleString=F.toString,a.toJSON=F.toJSON,a.copy=F.copy,a.slice=F.slice,a.readUInt8=F.readUInt8,a.readUInt16LE=F.readUInt16LE,a.readUInt16BE=F.readUInt16BE,a.readUInt32LE=F.readUInt32LE,a.readUInt32BE=F.readUInt32BE,a.readInt8=F.readInt8,a.readInt16LE=F.readInt16LE,a.readInt16BE=F.readInt16BE,a.readInt32LE=F.readInt32LE,a.readInt32BE=F.readInt32BE,a.readFloatLE=F.readFloatLE,a.readFloatBE=F.readFloatBE,a.readDoubleLE=F.readDoubleLE,a.readDoubleBE=F.readDoubleBE,a.writeUInt8=F.writeUInt8,a.writeUInt16LE=F.writeUInt16LE,a.writeUInt16BE=F.writeUInt16BE,a.writeUInt32LE=F.writeUInt32LE,a.writeUInt32BE=F.writeUInt32BE,a.writeInt8=F.writeInt8,a.writeInt16LE=F.writeInt16LE,a.writeInt16BE=F.writeInt16BE,a.writeInt32LE=F.writeInt32LE,a.writeInt32BE=F.writeInt32BE,a.writeFloatLE=F.writeFloatLE,a.writeFloatBE=F.writeFloatBE,a.writeDoubleLE=F.writeDoubleLE,a.writeDoubleBE=F.writeDoubleBE,a.fill=F.fill,a.inspect=F.inspect,a.toArrayBuffer=F.toArrayBuffer,a}},{"base64-js":2,ieee754:23}],7:[function(a,b,c){var d=b.exports,f=(a("events").EventEmitter,a("./lib/request")),g=a("url");d.request=function(a,b){"string"==typeof a&&(a=g.parse(a)),a||(a={}),a.host||a.port||(a.port=parseInt(window.location.port,10)),!a.host&&a.hostname&&(a.host=a.hostname),a.scheme||(a.scheme=window.location.protocol.split(":")[0]),a.host||(a.host=window.location.hostname||window.location.host),/:/.test(a.host)&&(a.port||(a.port=a.host.split(":")[1]),a.host=a.host.split(":")[0]),a.port||(a.port="https"==a.scheme?443:80);var c=new f(new h,a);return b&&c.on("response",b),c},d.get=function(a,b){a.method="GET";var c=d.request(a,b);return c.end(),c},d.Agent=function(){},d.Agent.defaultMaxSockets=4;var h=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var a=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],b=0;b<a.length;b++)try{var c=new window.ActiveXObject(a[b]);return function(){if(c){var d=c;return c=null,d}return new window.ActiveXObject(a[b])}}catch(a){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();d.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":8,events:4,url:36}],8:[function(a,b,c){var d=a("stream"),e=a("./response"),f=a("Base64"),g=a("inherits"),h=b.exports=function(a,b){var c=this;c.writable=!0,c.xhr=a,c.body=[],c.uri=(b.scheme||"http")+"://"+b.host+(b.port?":"+b.port:"")+(b.path||"/"),void 0===b.withCredentials&&(b.withCredentials=!0);try{a.withCredentials=b.withCredentials}catch(a){}if(a.open(b.method||"GET",c.uri,!0),c._headers={},b.headers)for(var d=i(b.headers),g=0;g<d.length;g++){var h=d[g];if(c.isSafeRequestHeader(h)){var j=b.headers[h];c.setHeader(h,j)}}b.auth&&this.setHeader("Authorization","Basic "+f.btoa(b.auth));var k=new e;k.on("close",function(){c.emit("close")}),k.on("ready",function(){c.emit("response",k)}),a.onreadystatechange=function(){a.__aborted||k.handle(a)}};g(h,d),h.prototype.setHeader=function(a,b){this._headers[a.toLowerCase()]=b},h.prototype.getHeader=function(a){return this._headers[a.toLowerCase()]},h.prototype.removeHeader=function(a){delete this._headers[a.toLowerCase()]},h.prototype.write=function(a){this.body.push(a)},h.prototype.destroy=function(a){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},h.prototype.end=function(a){void 0!==a&&this.body.push(a);for(var b=i(this._headers),c=0;c<b.length;c++){var d=b[c],e=this._headers[d];if(j(e))for(var f=0;f<e.length;f++)this.xhr.setRequestHeader(d,e[f]);else this.xhr.setRequestHeader(d,e)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(j(this.body[0])){for(var g=[],c=0;c<this.body.length;c++)g.push.apply(g,this.body[c]);this.xhr.send(g)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var h=0,c=0;c<this.body.length;c++)h+=this.body[c].length;for(var g=new this.body[0].constructor(h),k=0,c=0;c<this.body.length;c++)for(var l=this.body[c],f=0;f<l.length;f++)g[k++]=l[f];this.xhr.send(g)}else{for(var g="",c=0;c<this.body.length;c++)g+=this.body[c].toString();this.xhr.send(g)}},h.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],h.prototype.isSafeRequestHeader=function(a){return!!a&&-1===k(h.unsafeHeaders,a.toLowerCase())};var i=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b},j=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},k=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}},{"./response":9,Base64:1,inherits:24,stream:15}],9:[function(a,b,c){function h(a){for(var b=a.getAllResponseHeaders().split(/\r?\n/),c={},d=0;d<b.length;d++){var e=b[d];if(""!==e){var f=e.match(/^([^:]+):\s*(.*)/);if(f){var g=f[1].toLowerCase(),h=f[2];void 0!==c[g]?i(c[g])?c[g].push(h):c[g]=[c[g],h]:c[g]=h}else c[e]=!0}}return c}var d=a("stream"),e=a("util"),f=b.exports=function(a){this.offset=0,this.readable=!0};e.inherits(f,d);var g={streaming:!0,status2:!0};f.prototype.getResponse=function(a){var b=String(a.responseType).toLowerCase();return"blob"===b?a.responseBlob||a.response:"arraybuffer"===b?a.response:a.responseText},f.prototype.getHeader=function(a){return this.headers[a.toLowerCase()]},f.prototype.handle=function(a){if(2===a.readyState&&g.status2){try{this.statusCode=a.status,this.headers=h(a)}catch(a){g.status2=!1}g.status2&&this.emit("ready")}else if(g.streaming&&3===a.readyState){try{this.statusCode||(this.statusCode=a.status,this.headers=h(a),this.emit("ready"))}catch(a){}try{this._emitData(a)}catch(a){g.streaming=!1}}else 4===a.readyState&&(this.statusCode||(this.statusCode=a.status,this.emit("ready")),this._emitData(a),a.error?this.emit("error",this.getResponse(a)):this.emit("end"),this.emit("close"))},f.prototype._emitData=function(a){var b=this.getResponse(a);if(b.toString().match(/ArrayBuffer/))return this.emit("data",new Uint8Array(b,this.offset)),void(this.offset=b.byteLength);b.length>this.offset&&(this.emit("data",b.slice(this.offset)),this.offset=b.length)};var i=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{stream:15,util:38}],10:[function(a,b,c){function e(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){c.shift()()}},!0),function(b){c.push(b),window.postMessage("process-tick","*")}}return function(b){setTimeout(b,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=e,d.addListener=e,d.once=e,d.off=e,d.removeListener=e,d.removeAllListeners=e,d.emit=e,d.binding=function(a){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(a){throw new Error("process.chdir is not supported")}},{}],11:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var n,o,p,q,l=a[k].replace(h,"%20"),m=l.indexOf(c);m>=0?(n=l.substr(0,m),o=l.substr(m+1)):(n=l,o=""),p=decodeURIComponent(n),q=decodeURIComponent(o),d(g,p)?e(g[p])?g[p].push(q):g[p]=[g[p],q]:g[p]=q}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],12:[function(a,b,c){"use strict";function f(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var d=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?f(g(a),function(f){var g=encodeURIComponent(d(f))+c;return e(a[f])?a[f].map(function(a){return g+encodeURIComponent(d(a))}).join(b):g+encodeURIComponent(d(a[f]))}).join(b):h?encodeURIComponent(d(h))+c+encodeURIComponent(d(a)):""};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],13:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":11,"./encode":12}],14:[function(a,b,c){function h(a){if(!(this instanceof h))return new h(a);f.call(this,a),g.call(this,a),a&&!1===a.readable&&(this.readable=!1),a&&!1===a.writable&&(this.writable=!1),this.allowHalfOpen=!0,a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){if(!this.allowHalfOpen&&!this._writableState.ended){var a=this;e(function(){a.end()})}}b.exports=h;var d=a("inherits"),e=a("process/browser.js").nextTick,f=a("./readable.js"),g=a("./writable.js");d(h,f),h.prototype.write=g.prototype.write,h.prototype.end=g.prototype.end,h.prototype._write=g.prototype._write},{"./readable.js":18,"./writable.js":20,inherits:24,"process/browser.js":16}],15:[function(a,b,c){function f(){d.call(this)}b.exports=f;var d=a("events").EventEmitter;a("inherits")(f,d),f.Readable=a("./readable.js"),f.Writable=a("./writable.js"),f.Duplex=a("./duplex.js"),f.Transform=a("./transform.js"),f.PassThrough=a("./passthrough.js"),f.Stream=f,f.prototype.pipe=function(a,b){function e(b){a.writable&&!1===a.write(b)&&c.pause&&c.pause()}function f(){c.readable&&c.resume&&c.resume()}function h(){g||(g=!0,a.end())}function i(){g||(g=!0,"function"==typeof a.destroy&&a.destroy())}function j(a){if(k(),0===d.listenerCount(this,"error"))throw a}function k(){c.removeListener("data",e),a.removeListener("drain",f),c.removeListener("end",h),c.removeListener("close",i),c.removeListener("error",j),a.removeListener("error",j),c.removeListener("end",k),c.removeListener("close",k),a.removeListener("close",k)}var c=this;c.on("data",e),a.on("drain",f),a._isStdio||b&&!1===b.end||(c.on("end",h),c.on("close",i));var g=!1;return c.on("error",j),a.on("error",j),c.on("end",k),c.on("close",k),a.on("close",k),a.emit("pipe",c),a}},{"./duplex.js":14,"./passthrough.js":17,"./readable.js":18,"./transform.js":19,"./writable.js":20,events:4,inherits:24}],16:[function(a,b,c){var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){c.shift()()}},!0),function(b){c.push(b),window.postMessage("process-tick","*")}}return function(b){setTimeout(b,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.binding=function(a){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(a){throw new Error("process.chdir is not supported")}},{}],17:[function(a,b,c){function f(a){if(!(this instanceof f))return new f(a);d.call(this,a)}b.exports=f;var d=a("./transform.js");a("inherits")(f,d),f.prototype._transform=function(a,b,c){c(null,a)}},{"./transform.js":19,inherits:24}],18:[function(a,b,c){(function(c){function j(b,c){b=b||{};var d=b.highWaterMark;this.highWaterMark=d||0===d?d:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(h||(h=a("string_decoder").StringDecoder),this.decoder=new h(b.encoding),this.encoding=b.encoding)}function k(a){if(!(this instanceof k))return new k(a);this._readableState=new j(a,this),this.readable=!0,e.call(this)}function l(a,b,c,d,e){var f=q(b,c);if(f)a.emit("error",f);else if(null===c||void 0===c)b.reading=!1,b.ended||r(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var g=new Error("stream.push() after EOF");a.emit("error",g)}else if(b.endEmitted&&e){var g=new Error("stream.unshift() after end event");a.emit("error",g)}else!b.decoder||e||d||(c=b.decoder.write(c)),b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):(b.reading=!1,b.buffer.push(c)),b.needReadable&&s(a),u(a,b);else e||(b.reading=!1);return m(b)}function m(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function o(a){if(a>=n)a=n;else{a--;for(var b=1;b<32;b<<=1)a|=a>>b;a++}return a}function p(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:isNaN(a)||null===a?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:a<=0?0:(a>b.highWaterMark&&(b.highWaterMark=o(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function q(a,b){var c=null;return f.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||c||(c=new TypeError("Invalid non-string/buffer chunk")),c}function r(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,b.length>0?s(a):B(a)}function s(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(b.emittedReadable=!0,b.sync?g(function(){t(a)}):t(a))}function t(a){a.emit("readable")}function u(a,b){b.readingMore||(b.readingMore=!0,g(function(){v(a,b)}))}function v(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function w(a){return function(){var c=a._readableState;0===--c.awaitDrain&&x(a)}}function x(a){function e(a,d,e){!1===a.write(c)&&b.awaitDrain++}var c,b=a._readableState;for(b.awaitDrain=0;b.pipesCount&&null!==(c=a.read());)if(1===b.pipesCount?e(b.pipes,0,null):C(b.pipes,e),a.emit("data",c),b.awaitDrain>0)return;if(0===b.pipesCount)return b.flowing=!1,void(d.listenerCount(a,"data")>0&&z(a));b.ranOut=!0}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,x(this))}function z(a,b){if(a._readableState.flowing)throw new Error("Cannot switch to old mode now.");var d=b||!1,f=!1;a.readable=!0,a.pipe=e.prototype.pipe,a.on=a.addListener=e.prototype.on,a.on("readable",function(){f=!0;for(var b;!d&&null!==(b=a.read());)a.emit("data",b);null===b&&(f=!1,a._readableState.needReadable=!0)}),a.pause=function(){d=!0,this.emit("pause")},a.resume=function(){d=!1,f?g(function(){a.emit("readable")}):this.read(0),this.emit("resume")},a.emit("readable")}function A(a,b){var h,c=b.buffer,d=b.length,e=!!b.decoder,g=!!b.objectMode;if(0===c.length)return null;if(0===d)h=null;else if(g)h=c.shift();else if(!a||a>=d)h=e?c.join(""):f.concat(c,d),c.length=0;else if(a<c[0].length){var i=c[0];h=i.slice(0,a),c[0]=i.slice(a)}else if(a===c[0].length)h=c.shift();else{h=e?"":new f(a);for(var j=0,k=0,l=c.length;k<l&&j<a;k++){var i=c[0],m=Math.min(a-j,i.length);e?h+=i.slice(0,m):i.copy(h,j,0,m),m<i.length?c[0]=i.slice(m):c.shift(),j+=m}}return h}function B(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");!b.endEmitted&&b.calledRead&&(b.ended=!0,g(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function C(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function D(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}b.exports=k,k.ReadableState=j;var h,d=a("events").EventEmitter,e=a("./index.js"),f=a("buffer").Buffer,g=a("process/browser.js").nextTick;a("inherits")(k,e),k.prototype.push=function(a,b){var c=this._readableState;return"string"!=typeof a||c.objectMode||(b=b||c.defaultEncoding)!==c.encoding&&(a=new f(a,b),b=""),l(this,c,a,b,!1)},k.prototype.unshift=function(a){return l(this,this._readableState,a,"",!0)},k.prototype.setEncoding=function(b){h||(h=a("string_decoder").StringDecoder),this._readableState.decoder=new h(b),this._readableState.encoding=b};var n=8388608;k.prototype.read=function(a){var b=this._readableState;b.calledRead=!0;var c=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return s(this),null;if(0===(a=p(a,b))&&b.ended)return 0===b.length&&B(this),null;var d=b.needReadable;b.length-a<=b.highWaterMark&&(d=!0),(b.ended||b.reading)&&(d=!1),d&&(b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=p(c,b));var e;return e=a>0?A(a,b):null,null===e&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),b.ended&&!b.endEmitted&&0===b.length&&B(this),e},k.prototype._read=function(a){this.emit("error",new Error("not implemented"))},k.prototype.pipe=function(a,b){function j(a){a===e&&m()}function k(){a.end()}function m(){a.removeListener("close",p),a.removeListener("finish",q),a.removeListener("drain",l),a.removeListener("error",o),a.removeListener("unpipe",j),e.removeListener("end",k),e.removeListener("end",m),a._writableState&&!a._writableState.needDrain||l()}function o(b){r(),0===n&&0===d.listenerCount(a,"error")&&a.emit("error",b)}function p(){a.removeListener("finish",q),r()}function q(){a.removeListener("close",p),r()}function r(){e.unpipe(a)}var e=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=a;break;case 1:f.pipes=[f.pipes,a];break;default:f.pipes.push(a)}f.pipesCount+=1;var h=(!b||!1!==b.end)&&a!==c.stdout&&a!==c.stderr,i=h?k:m;f.endEmitted?g(i):e.once("end",i),a.on("unpipe",j);var l=w(e);a.on("drain",l);var n=d.listenerCount(a,"error");return a.once("error",o),a.once("close",p),a.once("finish",q),a.emit("pipe",e),f.flowing||(this.on("readable",y),f.flowing=!0,g(function(){x(e)})),a},k.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,this.removeListener("readable",y),b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,this.removeListener("readable",y),b.flowing=!1;for(var e=0;e<d;e++)c[e].emit("unpipe",this);return this}var e=D(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},k.prototype.on=function(a,b){var c=e.prototype.on.call(this,a,b);if("data"!==a||this._readableState.flowing||z(this),"readable"===a&&this.readable){var d=this._readableState;d.readableListening||(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading?d.length&&s(this,d):this.read(0))}return c},k.prototype.addListener=k.prototype.on,k.prototype.resume=function(){z(this),this.read(0),this.emit("resume")},k.prototype.pause=function(){z(this,!0),this.emit("pause")},k.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(b.decoder&&(e=b.decoder.write(e)),e&&(b.objectMode||e.length)){d.push(e)||(c=!0,a.pause())}});for(var e in a)"function"==typeof a[e]&&void 0===this[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));return C(["error","close","destroy","pause","resume"],function(b){a.on(b,function(a){return d.emit.apply(d,b,a)})}),d._read=function(b){c&&(c=!1,a.resume())},d},k._fromList=A}).call(this,a("7YKIPe"))},{"./index.js":15,"7YKIPe":10,buffer:6,events:4,inherits:24,"process/browser.js":16,string_decoder:21}],19:[function(a,b,c){function f(a,b){this.afterTransform=function(a,c){return g(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function g(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function h(a){if(!(this instanceof h))return new h(a);d.call(this,a);var c=(this._transformState=new f(a,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(a){i(c,a)}):i(c)})}function i(a,b){if(b)return a.emit("error",b);var c=a._writableState,e=(a._readableState,a._transformState);if(c.length)throw new Error("calling transform done when ws.length != 0");if(e.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=h;var d=a("./duplex.js");a("inherits")(h,d),h.prototype.push=function(a,b){return this._transformState.needTransform=!1,d.prototype.push.call(this,a,b)},h.prototype._transform=function(a,b,c){throw new Error("not implemented")},h.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},h.prototype._read=function(a){var b=this._transformState;b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./duplex.js":14,inherits:24}],20:[function(a,b,c){function j(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function k(a,b){a=a||{};var c=a.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.objectMode=!!a.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var d=!1===a.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){t(b,a)},this.writecb=null,this.writelen=0,this.buffer=[]}function l(a){if(!(this instanceof l||this instanceof g.Duplex))return new l(a);this._writableState=new k(a,this),this.writable=!0,g.call(this)}function m(a,b,c){var d=new Error("write after end");a.emit("error",d),h(function(){c(d)})}function n(a,b,c,d){var e=!0;if(!i.isBuffer(c)&&"string"!=typeof c&&null!==c&&void 0!==c&&!b.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");a.emit("error",f),h(function(){d(f)}),e=!1}return e}function o(a,b,c){return a.objectMode||!1===a.decodeStrings||"string"!=typeof b||(b=new i(b,c)),b}function p(a,b,c,d,e){c=o(b,c,d);var f=b.objectMode?1:c.length;b.length+=f;var g=b.length<b.highWaterMark;return b.needDrain=!g,b.writing?b.buffer.push(new j(c,d,e)):q(a,b,f,c,d,e),g}function q(a,b,c,d,e,f){b.writelen=c,b.writecb=f,b.writing=!0,b.sync=!0,a._write(d,e,b.onwrite),b.sync=!1}function r(a,b,c,d,e){c?h(function(){e(d)}):e(d),a.emit("error",d)}function s(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function t(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if(s(c),b)r(a,c,d,b,e);else{var f=x(a,c);f||c.bufferProcessing||!c.buffer.length||w(a,c),d?h(function(){u(a,c,f,e)}):u(a,c,f,e)}}function u(a,b,c,d){c||v(a,b),d(),c&&y(a,b)}function v(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function w(a,b){b.bufferProcessing=!0;for(var c=0;c<b.buffer.length;c++){var d=b.buffer[c],e=d.chunk,f=d.encoding,g=d.callback;if(q(a,b,b.objectMode?1:e.length,e,f,g),b.writing){c++;break}}b.bufferProcessing=!1,c<b.buffer.length?b.buffer=b.buffer.slice(c):b.buffer.length=0}function x(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function y(a,b){var c=x(a,b);return c&&(b.finished=!0,a.emit("finish")),c}function z(a,b,c){b.ending=!0,y(a,b),c&&(b.finished?h(c):a.once("finish",c)),b.ended=!0}b.exports=l,l.WritableState=k;var d="undefined"!=typeof Uint8Array?function(a){return a instanceof Uint8Array}:function(a){return a&&a.constructor&&"Uint8Array"===a.constructor.name},e="undefined"!=typeof ArrayBuffer?function(a){return a instanceof ArrayBuffer}:function(a){return a&&a.constructor&&"ArrayBuffer"===a.constructor.name},f=a("inherits"),g=a("./index.js"),h=a("process/browser.js").nextTick,i=a("buffer").Buffer;f(l,g),l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},l.prototype.write=function(a,b,c){var f=this._writableState,g=!1;return"function"==typeof b&&(c=b,b=null),!i.isBuffer(a)&&d(a)&&(a=new i(a)),e(a)&&"undefined"!=typeof Uint8Array&&(a=new i(new Uint8Array(a))),i.isBuffer(a)?b="buffer":b||(b=f.defaultEncoding),"function"!=typeof c&&(c=function(){}),f.ended?m(this,f,c):n(this,f,a,c)&&(g=p(this,f,a,b,c)),g},l.prototype._write=function(a,b,c){c(new Error("not implemented"))},l.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),void 0!==a&&null!==a&&this.write(a,b),d.ending||d.finished||z(this,d,c)}},{"./index.js":15,buffer:6,inherits:24,"process/browser.js":16}],21:[function(a,b,c){function e(a){if(a&&!d.isEncoding(a))throw new Error("Unknown encoding: "+a)}function g(a){return a.toString(this.encoding)}function h(a){var b=this.charReceived=a.length%2;return this.charLength=b?2:0,b}function i(a){var b=this.charReceived=a.length%3;return this.charLength=b?3:0,b}var d=a("buffer").Buffer,f=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),e(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=h;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=i;break;default:return void(this.write=g)}this.charBuffer=new d(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(a){for(var b="",c=0;this.charLength;){var d=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,c,d),this.charReceived+=d-c,c=d,this.charReceived<this.charLength)return"";b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var e=b.charCodeAt(b.length-1);if(!(e>=55296&&e<=56319)){if(this.charReceived=this.charLength=0,d==a.length)return b;a=a.slice(d,a.length);break}this.charLength+=this.surrogateSize,b=""}var f=this.detectIncompleteChar(a),g=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-f,g),this.charReceived=f,g-=f),b+=a.toString(this.encoding,0,g);var g=b.length-1,e=b.charCodeAt(g);if(e>=55296&&e<=56319){var h=this.surrogateSize;return this.charLength+=h,this.charReceived+=h,this.charBuffer.copy(this.charBuffer,h,0,h),this.charBuffer.write(b.charAt(b.length-1),this.encoding),b.substring(0,g)}return b},f.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(b<=2&&c>>4==14){this.charLength=3;break}if(b<=3&&c>>3==30){this.charLength=4;break}}return b},f.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:6}],22:[function(a,b,c){var d=a("http"),e=b.exports;for(var f in d)d.hasOwnProperty(f)&&(e[f]=d[f]);e.request=function(a,b){return a||(a={}),a.scheme="https",a.protocol="https:",d.request.call(this,a,b)}},{http:7}],23:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],24:[function(a,b,c){"function"==typeof Object.create?b.exports=function(b,c){b.super_=c,b.prototype=Object.create(c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(b,c){b.super_=c;var d=function(){};d.prototype=c.prototype,b.prototype=new d,b.prototype.constructor=b}},{}],25:[function(a,b,c){},{}],26:[function(a,b,c){(function(c,d,e){!function(){var f=void 0!==c&&c.versions&&c.versions.node,g=!f&&("undefined"!=typeof window||"undefined"!=typeof self);g&&void 0===d&&("undefined"!=typeof window?d=window:"undefined"!=typeof self?d=self:"undefined"!=typeof $&&(d=$));var h=function(b){function h(){}function G(a){for(var b=[],c=Object.keys(a).sort(),d=0;d<c.length;++d){var e=c[d],f=a[e];ma(f)||(f=[f]);for(var g=0;g<f.length;++g){var h=f[g];if(null!==h){if(!oa(h))throw new E("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:a});b.push({"@value":h,"@language":e.toLowerCase()})}}}return b}function H(a,b){if(ma(b))for(var c=0;c<b.length;++c)b[c]=H(a,b[c]);else if(xa(b))b["@list"]=H(a,b["@list"]);else if(ka(b)){ya(b)&&(b["@id"]=a.getId(b["@id"]));for(var d=Object.keys(b).sort(),e=0;e<d.length;++e){var f=d[e];"@id"!==f&&(b[f]=H(a,b[f]))}}return b}function I(a,c,d){if(null===d||void 0===d)return null;var e=fa(a,c,{vocab:!0});if("@id"===e)return fa(a,d,{base:!0});if("@type"===e)return fa(a,d,{vocab:!0,base:!0});var f=b.getContextValue(a,c,"@type");if("@id"===f||"@graph"===e&&oa(d))return{"@id":fa(a,d,{base:!0})};if("@vocab"===f)return{"@id":fa(a,d,{vocab:!0,base:!0})};if(ja(e))return d;var g={};if(null!==f)g["@type"]=f;else if(oa(d)){var h=b.getContextValue(a,c,"@language");null!==h&&(g["@language"]=h)}return-1===["boolean","number","string"].indexOf(typeof d)&&(d=d.toString()),g["@value"]=d,g}function J(a,b,c){for(var d=[],e=Object.keys(a).sort(),f=0;f<e.length;++f)for(var g=e[f],h=a[g],i=Object.keys(h).sort(),j=0;j<i.length;++j){var k=i[j],l=h[k];if("@type"===k)k=x;else if(ja(k))continue;for(var m=0;m<l.length;++m){var n=l[m],o={};if(o.type=0===g.indexOf("_:")?"blank node":"IRI",o.value=g,za(g)){var p={};if(p.type=0===k.indexOf("_:")?"blank node":"IRI",p.value=k,za(k)&&("blank node"!==p.type||c.produceGeneralizedRdf))if(xa(n))K(n["@list"],b,o,p,d);else{var q=L(n);q&&d.push({subject:o,predicate:p,object:q})}}}}return d}function K(a,b,c,d,e){for(var f={type:"IRI",value:u},g={type:"IRI",value:v},h={type:"IRI",value:w},i=0;i<a.length;++i){var j=a[i],k={type:"blank node",value:b.getId()};e.push({subject:c,predicate:d,object:k}),c=k,d=f;var l=L(j);l&&e.push({subject:c,predicate:d,object:l}),d=g}e.push({subject:c,predicate:d,object:h})}function L(a){var b={};if(wa(a)){b.type="literal";var c=a["@value"],d=a["@type"]||null;sa(c)?(b.value=c.toString(),b.datatype=d||o):qa(c)||d===p?(qa(c)||(c=parseFloat(c)),b.value=c.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),b.datatype=d||p):pa(c)?(b.value=c.toFixed(0),b.datatype=d||q):"@language"in a?(b.value=c,b.datatype=d||B,b.language=a["@language"]):(b.value=c,b.datatype=d||r)}else{var e=ka(a)?a["@id"]:a;b.type=0===e.indexOf("_:")?"blank node":"IRI",b.value=e}return"IRI"!==b.type||za(b.value)?b:null}function M(a,b){if("IRI"===a.type||"blank node"===a.type)return{"@id":a.value};var c={"@value":a.value};if(a.language)c["@language"]=a.language;else{var d=a.datatype;if(d||(d=r),b){if(d===o)"true"===c["@value"]?c["@value"]=!0:"false"===c["@value"]&&(c["@value"]=!1);else if(ra(c["@value"]))if(d===q){var e=parseInt(c["@value"],10);e.toFixed(0)===c["@value"]&&(c["@value"]=e)}else d===p&&(c["@value"]=parseFloat(c["@value"]));-1===[o,q,p,r].indexOf(d)&&(c["@type"]=d)}else d!==r&&(c["@type"]=d)}return c}function N(a,b){for(var c=["subject","predicate","object"],d=0;d<c.length;++d){var e=c[d];if(a[e].type!==b[e].type||a[e].value!==b[e].value)return!1}return a.object.language===b.object.language&&a.object.datatype===b.object.datatype}function Q(a,c,d,e,f,g){if(ma(a))for(var h=0;h<a.length;++h)Q(a[h],c,d,e,void 0,g);else{if(!ka(a))return void(g&&g.push(a));if(wa(a)){if("@type"in a){var i=a["@type"];0===i.indexOf("_:")&&(a["@type"]=i=e.getId(i))}return void(g&&g.push(a))}if("@type"in a)for(var j=a["@type"],h=0;h<j.length;++h){var i=j[h];0===i.indexOf("_:")&&e.getId(i)}ta(f)&&(f=ya(a)?e.getId(a["@id"]):a["@id"]),g&&g.push({"@id":f});var k=c[d],l=k[f]=k[f]||{};l["@id"]=f;for(var m=Object.keys(a).sort(),n=0;n<m.length;++n){var o=m[n];if("@id"!==o)if("@reverse"!==o)if("@graph"!==o)if("@type"!==o&&ja(o)){if("@index"===o&&o in l&&(a[o]!==l[o]||a[o]["@id"]!==l[o]["@id"]))throw new E("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:l});l[o]=a[o]}else{var x=a[o];if(0===o.indexOf("_:")&&(o=e.getId(o)),0!==x.length)for(var y=0;y<x.length;++y){var z=x[y];if("@type"===o&&(z=0===z.indexOf("_:")?e.getId(z):z),ua(z)||va(z)){var A=ya(z)?e.getId(z["@id"]):z["@id"];b.addValue(l,o,{"@id":A},{propertyIsArray:!0,allowDuplicate:!1}),Q(z,c,d,e,A)}else if(xa(z)){var B=[];Q(z["@list"],c,d,e,f,B),z={"@list":B},b.addValue(l,o,z,{propertyIsArray:!0,allowDuplicate:!1})}else Q(z,c,d,e,f),b.addValue(l,o,z,{propertyIsArray:!0,allowDuplicate:!1})}else b.addValue(l,o,[],{propertyIsArray:!0})}else{f in c||(c[f]={});var w="@merged"===d?d:f;Q(a[o],c,w,e)}else{var p={"@id":f},q=a["@reverse"];for(var r in q)for(var s=q[r],t=0;t<s.length;++t){var u=s[t],v=u["@id"];ya(u)&&(v=e.getId(v)),Q(u,c,d,e,v),b.addValue(k[v],r,p,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function R(a){for(var b=a["@default"],c=Object.keys(a).sort(),d=0;d<c.length;++d){var e=c[d];if("@default"!==e){var f=a[e],g=b[e];g?"@graph"in g||(g["@graph"]=[]):b[e]=g={"@id":e,"@graph":[]};for(var h=g["@graph"],i=Object.keys(f).sort(),j=0;j<i.length;++j){var k=f[i[j]];va(k)||h.push(k)}}}return b}function S(a,b,c,d,e){W(c),c=c[0];for(var f=a.options,g={embed:V(c,f,"embed"),explicit:V(c,f,"explicit"),requireAll:V(c,f,"requireAll")},h=X(a,b,c,g),i=Object.keys(h).sort(),j=0;j<i.length;++j){var k=i[j],l=h[k];if("@link"===g.embed&&k in a.link)$(d,e,a.link[k]);else{null===e&&(a.uniqueEmbeds={});var m={};if(m["@id"]=k,a.link[k]=m,"@never"===g.embed||U(l,a.subjectStack))$(d,e,m);else{"@last"===g.embed&&(k in a.uniqueEmbeds&&Z(a,k),a.uniqueEmbeds[k]={parent:d,property:e}),a.subjectStack.push(l);for(var n=Object.keys(l).sort(),o=0;o<n.length;o++){var p=n[o];if(ja(p))m[p]=Aa(l[p]);else if(!g.explicit||p in c)for(var q=l[p],r=0;r<q.length;++r){var s=q[r];if(xa(s)){var t={"@list":[]};$(m,p,t);var u=s["@list"];for(var v in u)if(s=u[v],va(s)){var w=p in c?c[p][0]["@list"]:T(g);S(a,[s["@id"]],w,t,"@list")}else $(t,"@list",Aa(s))}else if(va(s)){var w=p in c?c[p]:T(g);S(a,[s["@id"]],w,m,p)}else $(m,p,Aa(s))}}for(var n=Object.keys(c).sort(),o=0;o<n.length;++o){var p=n[o];if(!ja(p)){var x=c[p][0];if(!(V(x,f,"omitDefault")||p in m)){var z="@null";"@default"in x&&(z=Aa(x["@default"])),ma(z)||(z=[z]),m[p]=[{"@preserve":z}]}}}$(d,e,m),a.subjectStack.pop()}}}}function T(a){var b={};for(var c in a)void 0!==a[c]&&(b["@"+c]=[a[c]]);return[b]}function U(a,b){for(var c=b.length-1;c>=0;--c)if(b[c]["@id"]===a["@id"])return!0;return!1}function V(a,b,c){var d="@"+c,e=d in a?a[d][0]:b[c];return"embed"===c&&(!0===e?e="@last":!1===e?e="@never":"@always"!==e&&"@never"!==e&&"@link"!==e&&(e="@last")),e}function W(a){if(!ma(a)||1!==a.length||!ka(a[0]))throw new E("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:a})}function X(a,b,c,d){for(var e={},f=0;f<b.length;++f){var g=b[f],h=a.subjects[g];Y(h,c,d)&&(e[g]=h)}return e}function Y(a,c,d){if("@type"in c&&(1!==c["@type"].length||!ka(c["@type"][0]))){for(var e=c["@type"],f=0;f<e.length;++f)if(b.hasValue(a,"@type",e[f]))return!0;return!1}var g=!0,h=!1;for(var i in c){if(ja(i)){if("@id"!==i&&"@type"!==i)continue;if(g=!1,"@id"===i&&oa(c[i])){if(a[i]!==c[i])return!1;h=!0;continue}}if(g=!1,i in a){if(ma(c[i])&&0===c[i].length&&void 0!==a[i])return!1;h=!0}else{var j=ma(c[i])&&ka(c[i][0])&&"@default"in c[i][0];if(d.requireAll&&!j)return!1}}return g||h}function Z(a,c){var d=a.uniqueEmbeds,e=d[c],f=e.parent,g=e.property,h={"@id":c};if(ma(f)){for(var i=0;i<f.length;++i)if(b.compareValues(f[i],h)){f[i]=h;break}}else{var j=ma(f[g]);b.removeValue(f,g,h,{propertyIsArray:j}),b.addValue(f,g,h,{propertyIsArray:j})}var k=function(a){for(var b=Object.keys(d),c=0;c<b.length;++c){var e=b[c];e in d&&ka(d[e].parent)&&d[e].parent["@id"]===a&&(delete d[e],k(e))}};k(c)}function $(a,c,d){ka(a)?b.addValue(a,c,d,{propertyIsArray:!0}):a.push(d)}function _(a,c,d){if(ma(c)){for(var e=[],f=0;f<c.length;++f){var g=_(a,c[f],d);null!==g&&e.push(g)}c=e}else if(ka(c)){if("@preserve"in c)return"@null"===c["@preserve"]?null:c["@preserve"];if(wa(c))return c;if(xa(c))return c["@list"]=_(a,c["@list"],d),c;var h=ca(a,"@id");if(h in c){var i=c[h];if(i in d.link){var j=d.link[i].indexOf(c);if(-1!==j)return d.link[i][j];d.link[i].push(c)}else d.link[i]=[c]}for(var k in c){var g=_(a,c[k],d),l=b.getContextValue(a,k,"@container");d.compactArrays&&ma(g)&&1===g.length&&null===l&&(g=g[0]),c[k]=g}}return c}function aa(a,b){return a.length<b.length?-1:b.length<a.length?1:a===b?0:a<b?-1:1}function ba(a,b,c,d,e,f){null===f&&(f="@null");var g=[];if("@id"!==f&&"@reverse"!==f||!va(c))g.push(f);else{"@reverse"===f&&g.push("@reverse");var h=ca(a,c["@id"],null,{vocab:!0});h in a.mappings&&a.mappings[h]&&a.mappings[h]["@id"]===c["@id"]?g.push.apply(g,["@vocab","@id"]):g.push.apply(g,["@id","@vocab"])}g.push("@none");for(var i=a.inverse[b],j=0;j<d.length;++j){var k=d[j];if(k in i)for(var l=i[k][e],m=0;m<g.length;++m){var n=g[m];if(n in l)return l[n]}}return null}function ca(a,b,c,d,e){if(null===b)return b;ta(c)&&(c=null),ta(e)&&(e=!1),d=d||{};var f=a.getInverse();if(ja(b))return b in f?f[b]["@none"]["@type"]["@none"]:b;if(d.vocab&&b in f){var g=a["@language"]||"@none",h=[];ka(c)&&"@index"in c&&h.push("@index");var i="@language",j="@null";if(e)i="@type",j="@reverse",h.push("@set");else if(xa(c)){"@index"in c||h.push("@list");for(var k=c["@list"],l=0===k.length?g:null,m=null,n=0;n<k.length;++n){var o=k[n],p="@none",q="@none";if(wa(o)?"@language"in o?p=o["@language"]:"@type"in o?q=o["@type"]:p="@null":q="@id",null===l?l=p:p!==l&&wa(o)&&(l="@none"),null===m?m=q:q!==m&&(m="@none"),"@none"===l&&"@none"===m)break}l=l||"@none",m=m||"@none","@none"!==m?(i="@type",j=m):j=l}else wa(c)?"@language"in c&&!("@index"in c)?(h.push("@language"),j=c["@language"]):"@type"in c&&(i="@type",j=c["@type"]):(i="@type",j="@id"),h.push("@set");h.push("@none");var r=ba(a,b,c,h,i,j);if(null!==r)return r}if(d.vocab&&"@vocab"in a){var s=a["@vocab"];if(0===b.indexOf(s)&&b!==s){var t=b.substr(s.length);if(!(t in a.mappings))return t}}for(var u=null,v=0,w=[],x=a.fastCurieMap,y=b.length-1;v<y&&b[v]in x;++v)""in(x=x[b[v]])&&w.push(x[""][0]);for(var n=w.length-1;n>=0;--n)for(var z=w[n],A=z.terms,B=0;B<A.length;++B){var C=A[B]+":"+b.substr(z.iri.length),D=!(C in a.mappings)||null===c&&a.mappings[C]["@id"]===b;D&&(null===u||aa(C,u)<0)&&(u=C)}return null!==u?u:d.vocab?b:ha(a["@base"],b)}function da(a,c,d){if(wa(d)){var e=b.getContextValue(a,c,"@type"),f=b.getContextValue(a,c,"@language"),g=b.getContextValue(a,c,"@container"),h="@index"in d&&"@index"!==g;if(!h&&(d["@type"]===e||d["@language"]===f))return d["@value"];var i=Object.keys(d).length,j=1===i||2===i&&"@index"in d&&!h,k="@language"in a,l=oa(d["@value"]),m=a.mappings[c]&&null===a.mappings[c]["@language"];if(j&&(!k||!l||m))return d["@value"];var n={};return h&&(n[ca(a,"@index")]=d["@index"]),"@type"in d?n[ca(a,"@type")]=ca(a,d["@type"],null,{vocab:!0}):"@language"in d&&(n[ca(a,"@language")]=d["@language"]),n[ca(a,"@value")]=d["@value"],n}var o=fa(a,c,{vocab:!0}),e=b.getContextValue(a,c,"@type"),p=ca(a,d["@id"],null,{vocab:"@vocab"===e});if("@id"===e||"@vocab"===e||"@graph"===o)return p;var n={};return n[ca(a,"@id")]=p,n}function ea(a,b,c,d){if(c in d){if(d[c])return;throw new E("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:b,term:c})}if(d[c]=!1,ja(c))throw new E("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:b,term:c});if(""===c)throw new E("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:b});a.mappings[c]&&delete a.mappings[c];var e=b[c];if(null===e||ka(e)&&null===e["@id"])return a.mappings[c]=null,void(d[c]=!0);if(oa(e)&&(e={"@id":e}),!ka(e))throw new E("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:b});var f=a.mappings[c]={};if(f.reverse=!1,"@reverse"in e){if("@id"in e)throw new E("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:b});var g=e["@reverse"];if(!oa(g))throw new E("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});var h=fa(a,g,{vocab:!0,base:!1},b,d);if(!za(h))throw new E("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});f["@id"]=h,f.reverse=!0}else if("@id"in e){var h=e["@id"];if(!oa(h))throw new E("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});if(h!==c){if(h=fa(a,h,{vocab:!0,base:!1},b,d),!za(h)&&!ja(h))throw new E("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});f["@id"]=h}}var i=c.indexOf(":");if(f._termHasColon=-1!==i,!("@id"in f))if(f._termHasColon){var j=c.substr(0,i);if(j in b&&ea(a,b,j,d),a.mappings[j]){var k=c.substr(i+1);f["@id"]=a.mappings[j]["@id"]+k}else f["@id"]=c}else{if(!("@vocab"in a))throw new E("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b,term:c});f["@id"]=a["@vocab"]+c}if(d[c]=!0,"@type"in e){var l=e["@type"];if(!oa(l))throw new E("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:b});if("@id"!==l&&"@vocab"!==l){if(l=fa(a,l,{vocab:!0,base:!1},b,d),!za(l))throw new E("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:b});if(0===l.indexOf("_:"))throw new E("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:b})}f["@type"]=l}if("@container"in e){var m=e["@container"];if("@list"!==m&&"@set"!==m&&"@index"!==m&&"@language"!==m)throw new E("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:b});if(f.reverse&&"@index"!==m&&"@set"!==m&&null!==m)throw new E("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:b});f["@container"]=m}if("@language"in e&&!("@type"in e)){var n=e["@language"];if(null!==n&&!oa(n))throw new E("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:b});null!==n&&(n=n.toLowerCase()),f["@language"]=n}var h=f["@id"];if("@context"===h||"@preserve"===h)throw new E("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:b})}function fa(a,c,d,e,f){if(null===c||ja(c))return c;if(c=String(c),e&&c in e&&!0!==f[c]&&ea(a,e,c,f),d=d||{},d.vocab){var g=a.mappings[c];if(null===g)return null;if(g)return g["@id"]}var h=c.indexOf(":");if(-1!==h){var i=c.substr(0,h),j=c.substr(h+1);if("_"===i||0===j.indexOf("//"))return c;e&&i in e&&ea(a,e,i,f);var g=a.mappings[i];return g?g["@id"]+j:c}if(d.vocab&&"@vocab"in a)return a["@vocab"]+c;var k=c;return d.base&&(k=b.prependBase(a["@base"],k)),k}function ga(a,c){if(null===a)return c;if(-1!==c.indexOf(":"))return c;oa(a)&&(a=b.url.parse(a||""));var d=b.url.parse(c),e={protocol:a.protocol||""};if(null!==d.authority)e.authority=d.authority,e.path=d.path,e.query=d.query;else if(e.authority=a.authority,""===d.path)e.path=a.path,null!==d.query?e.query=d.query:e.query=a.query;else{if(0===d.path.indexOf("/"))e.path=d.path;else{var f=a.path;""!==d.path&&(f=f.substr(0,f.lastIndexOf("/")+1),f.length>0&&"/"!==f.substr(-1)&&(f+="/"),f+=d.path),e.path=f}e.query=d.query}e.path=La(e.path,!!e.authority);var g=e.protocol;return null!==e.authority&&(g+="//"+e.authority),g+=e.path,null!==e.query&&(g+="?"+e.query),null!==d.fragment&&(g+="#"+d.fragment),""===g&&(g="./"),g}function ha(a,c){if(null===a)return c;oa(a)&&(a=b.url.parse(a||""));var d="";if(""!==a.href?d+=(a.protocol||"")+"//"+(a.authority||""):c.indexOf("//")&&(d+="//"),0!==c.indexOf(d))return c;for(var e=b.url.parse(c.substr(d.length)),f=a.normalizedPath.split("/"),g=e.normalizedPath.split("/"),h=e.fragment||e.query?0:1;f.length>0&&g.length>h&&f[0]===g[0];)f.shift(),g.shift();var i="";if(f.length>0){f.pop();for(var j=0;j<f.length;++j)i+="../"}return i+=g.join("/"),null!==e.query&&(i+="?"+e.query),null!==e.fragment&&(i+="#"+e.fragment),""===i&&(i="./"),i}function ia(a){function d(){var a=this;if(a.inverse)return a.inverse;for(var b=a.inverse={},c=a.fastCurieMap={},d={},g=a["@language"]||"@none",h=a.mappings,i=Object.keys(h).sort(aa),j=0;j<i.length;++j){var k=i[j],l=h[k];if(null!==l){var m=l["@container"]||"@none",n=l["@id"];ma(n)||(n=[n]);for(var o=0;o<n.length;++o){var p=n[o],q=b[p],r=ja(p);if(q)r||l._termHasColon||d[p].push(k);else if(b[p]=q={},!r&&!l._termHasColon){d[p]=[k];var s={iri:p,terms:d[p]};p[0]in c?c[p[0]].push(s):c[p[0]]=[s]}if(q[m]||(q[m]={"@language":{},"@type":{}}),q=q[m],l.reverse)f(l,k,q["@type"],"@reverse");else if("@type"in l)f(l,k,q["@type"],l["@type"]);else if("@language"in l){var t=l["@language"]||"@null";f(l,k,q["@language"],t)}else f(l,k,q["@language"],g),f(l,k,q["@type"],"@none"),f(l,k,q["@language"],"@none")}}}for(var u in c)e(c,u,1);return b}function e(a,b,c){for(var g,h,d=a[b],f=a[b]={},i=0;i<d.length;++i)g=d[i].iri,h=c>=g.length?"":g[c],h in f?f[h].push(d[i]):f[h]=[d[i]];for(var b in f)""!==b&&e(f,b,c+1)}function f(a,b,c,d){d in c||(c[d]=b)}function g(){var a={};return a["@base"]=this["@base"],a.mappings=Aa(this.mappings),a.clone=this.clone,a.inverse=null,a.getInverse=this.getInverse,"@language"in this&&(a["@language"]=this["@language"]),"@vocab"in this&&(a["@vocab"]=this["@vocab"]),a}return{"@base":b.url.parse(a.base||""),mappings:{},inverse:null,getInverse:d,clone:g}}function ja(a){if(!oa(a))return!1;switch(a){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function ka(a){return"[object Object]"===Object.prototype.toString.call(a)}function la(a){return ka(a)&&0===Object.keys(a).length}function ma(a){return Array.isArray(a)}function na(a){if(!oa(a)&&!la(a)){var b=!1;if(ma(a)){b=!0;for(var c=0;c<a.length;++c)if(!oa(a[c])){b=!1;break}}if(!b)throw new E('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:a})}}function oa(a){return"string"==typeof a||"[object String]"===Object.prototype.toString.call(a)}function pa(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function qa(a){return pa(a)&&-1!==String(a).indexOf(".")}function ra(a){return!isNaN(parseFloat(a))&&isFinite(a)}function sa(a){return"boolean"==typeof a||"[object Boolean]"===Object.prototype.toString.call(a)}function ta(a){return void 0===a}function ua(a){var b=!1;if(ka(a)&&!("@value"in a||"@set"in a||"@list"in a)){b=Object.keys(a).length>1||!("@id"in a)}return b}function va(a){return ka(a)&&1===Object.keys(a).length&&"@id"in a}function wa(a){return ka(a)&&"@value"in a}function xa(a){return ka(a)&&"@list"in a}function ya(a){var b=!1;return ka(a)&&(b="@id"in a?0===a["@id"].indexOf("_:"):0===Object.keys(a).length||!("@value"in a||"@set"in a||"@list"in a)),b}function za(a){return oa(a)&&-1!==a.indexOf(":")}function Aa(a){if(a&&"object"==typeof a){var b;if(ma(a)){b=[];for(var c=0;c<a.length;++c)b[c]=Aa(a[c])}else if(ka(a)){b={};for(var d in a)b[d]=Aa(a[d])}else b=a.toString();return b}return a}function Ba(a,c,d,e){var f=Object.keys(c).length;if(ma(a)){for(var g=0;g<a.length;++g)Ba(a[g],c,d,e);return f<Object.keys(c).length}if(ka(a)){for(var h in a)if("@context"===h){var i=a[h];if(ma(i))for(var j=i.length,g=0;g<j;++g){var k=i[g];oa(k)&&(k=b.prependBase(e,k),d?(k=c[k],ma(k)?(Array.prototype.splice.apply(i,[g,1].concat(k)),g+=k.length-1,j=i.length):i[g]=k):k in c||(c[k]=!1))}else oa(i)&&(i=b.prependBase(e,i),d?a[h]=c[i]:i in c||(c[i]=!1))}else Ba(a[h],c,d,e);return f<Object.keys(c).length}return!1}function Ca(a,b,c){var d=null,e=b.documentLoader,f=function(a,b,c,e,g){if(Object.keys(b).length>D)return d=new E("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:D}),g(d);var h={},i=function(){Ba(a,h,!0,e),g(null,a)};Ba(a,h,!1,e)||i();var j=[];for(var k in h)!1===h[k]&&j.push(k);for(var l=j.length,m=0;m<j.length;++m)!function(a){if(a in b)return d=new E("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:a}),g(d);var e=Aa(b);e[a]=!0;var j=function(b,j){if(!d){var k=j?j.document:null;if(!b&&oa(k))try{k=JSON.parse(k)}catch(a){b=a}if(b?b=new E("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:a,cause:b}):ka(k)||(b=new E("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:a,cause:b})),b)return d=b,g(d);k="@context"in k?{"@context":k["@context"]}:{"@context":{}},j.contextUrl&&(ma(k["@context"])||(k["@context"]=[k["@context"]]),k["@context"].push(j.contextUrl)),f(k,e,c,a,function(b,c){if(b)return g(b);h[a]=c["@context"],0===(l-=1)&&i()})}},k=c(a,j);k&&"then"in k&&k.then(j.bind(null,null),j)}(j[m])};f(a,{},e,b.base,c)}function Da(a){for(var b="(?:<([^:]+:[^>]*)>)",c="(_:(?:[A-Za-z0-9]+))",d='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',e="(?:\\^\\^"+b+")",f="(?:@([a-z]+(?:-[a-z0-9]+)*))",g="(?:"+d+"(?:"+e+"|"+f+")?)",h="(?:#.*)?",i="[ \\t]+",j="[ \\t]*",k=/(?:\r\n)|(?:\n)|(?:\r)/g,l=new RegExp("^"+j+h+"$"),m="(?:"+b+"|"+c+")"+i,n=b+i,o="(?:"+b+"|"+c+"|"+g+")"+j,p="(?:\\.|(?:(?:"+b+"|"+c+")"+j+"\\.))",q=new RegExp("^"+j+m+n+o+p+j+h+"$"),s={},t=a.split(k),u=0,v=0;v<t.length;++v){var w=t[v];if(u++,!l.test(w)){var x=w.match(q);if(null===x)throw new E("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:u});var y={};if(ta(x[1])?y.subject={type:"blank node",value:x[2]}:y.subject={type:"IRI",value:x[1]},y.predicate={type:"IRI",value:x[3]},ta(x[4]))if(ta(x[5])){y.object={type:"literal"},ta(x[7])?ta(x[8])?y.object.datatype=r:(y.object.datatype=B,y.object.language=x[8]):y.object.datatype=x[7];var z=x[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");y.object.value=z}else y.object={type:"blank node",value:x[5]};else y.object={type:"IRI",value:x[4]};var A="@default";if(ta(x[9])?ta(x[10])||(A=x[10]):A=x[9],A in s){for(var C=!0,D=s[A],F=0;C&&F<D.length;++F)N(D[F],y)&&(C=!1);C&&D.push(y)}else s[A]=[y]}}return s}function Ea(a){var b=[];for(var c in a)for(var d=a[c],e=0;e<d.length;++e){var f=d[e];"@default"===c&&(c=null),b.push(Fa(f,c))}return b.sort().join("")}function Fa(a,b){var c=a.subject,d=a.predicate,e=a.object,f=b||null;"name"in a&&a.name&&(f=a.name.value);var g="";if("IRI"===c.type?g+="<"+c.value+">":g+=c.value,g+=" ","IRI"===d.type?g+="<"+d.value+">":g+=d.value,g+=" ","IRI"===e.type)g+="<"+e.value+">";else if("blank node"===e.type)g+=e.value;else{var h=e.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');g+='"'+h+'"',e.datatype===B?e.language&&(g+="@"+e.language):e.datatype!==r&&(g+="^^<"+e.datatype+">")}return null!==f&&void 0!==f&&(0!==f.indexOf("_:")?g+=" <"+f+">":g+=" "+f),g+=" .\n"}function Ga(a){var b={};b["@default"]=[];for(var c=a.getSubjects(),d=0;d<c.length;++d){var e=c[d];if(null!==e){var f=a.getSubjectTriples(e);if(null!==f){var g=f.predicates;for(var h in g)for(var i=g[h].objects,j=0;j<i.length;++j){var k=i[j],l={};0===e.indexOf("_:")?l.subject={type:"blank node",value:e}:l.subject={type:"IRI",value:e},0===h.indexOf("_:")?l.predicate={type:"blank node",value:h}:l.predicate={type:"IRI",value:h};var o=k.value;if(k.type===z){m||Ka();var p=new m;o="";for(var q=0;q<k.value.length;q++)k.value[q].nodeType===n.ELEMENT_NODE?o+=p.serializeToString(k.value[q]):k.value[q].nodeType===n.TEXT_NODE&&(o+=k.value[q].nodeValue)}l.object={},k.type===A?0===k.value.indexOf("_:")?l.object.type="blank node":l.object.type="IRI":(l.object.type="literal",k.type===y?k.language?(l.object.datatype=B,l.object.language=k.language):l.object.datatype=r:l.object.datatype=k.type),l.object.value=o,b["@default"].push(l)}}}}return b}function Ha(a){this.prefix=a,this.counter=0,this.existing={}}function La(a,b){var c="";0===a.indexOf("/")&&(c="/");for(var d=a.split("/"),e=[];d.length>0;)"."===d[0]||""===d[0]&&d.length>1?d.shift():".."!==d[0]?e.push(d.shift()):(d.shift(),b||e.length>0&&".."!==e[e.length-1]?e.pop():e.push(".."));return c+e.join("/")}b.compact=function(a,c,d,e){function g(a,b,d,f){if(a)return e(a);f.compactArrays&&!f.graph&&ma(b)?1===b.length?b=b[0]:0===b.length&&(b={}):f.graph&&ka(b)&&(b=[b]),ka(c)&&"@context"in c&&(c=c["@context"]),c=Aa(c),ma(c)||(c=[c]);var g=c;c=[];for(var h=0;h<g.length;++h)(!ka(g[h])||Object.keys(g[h]).length>0)&&c.push(g[h]);var i=c.length>0;if(1===c.length&&(c=c[0]),ma(b)){var j=ca(d,"@graph"),k=b;b={},i&&(b["@context"]=c),b[j]=k}else if(ka(b)&&i){var k=b;b={"@context":c};for(var l in k)b[l]=k[l]}e(null,b,d)}return arguments.length<2?b.nextTick(function(){e(new TypeError("Could not compact, too few arguments."))}):("function"==typeof d&&(e=d,d={}),d=d||{},null===c?b.nextTick(function(){e(new E("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))}):null===a?b.nextTick(function(){e(null,null)}):("base"in d||(d.base="string"==typeof a?a:""),"compactArrays"in d||(d.compactArrays=!0),"graph"in d||(d.graph=!1),"skipExpansion"in d||(d.skipExpansion=!1),"documentLoader"in d||(d.documentLoader=b.loadDocument),"link"in d||(d.link=!1),d.link&&(d.skipExpansion=!0),void function(a,c,d){if(c.skipExpansion)return b.nextTick(function(){d(null,a)});b.expand(a,c,d)}(a,d,function(a,f){if(a)return e(new E("Could not expand input before compaction.","jsonld.CompactError",{cause:a}));var h=ia(d);b.processContext(h,c,d,function(a,b){if(a)return e(new E("Could not process context before compaction.","jsonld.CompactError",{cause:a}));var c;try{c=(new F).compact(b,null,f,d)}catch(a){return e(a)}g(null,c,b,d)})})))},b.expand=function(a,c,d){function e(a){"base"in c||(c.base=a.documentUrl||"");var b={document:Aa(a.document),remoteContext:{"@context":a.contextUrl}};if("expandContext"in c){var e=Aa(c.expandContext);b.expandContext="object"==typeof e&&"@context"in e?e:{"@context":e}}Ca(b,c,function(a,b){if(a)return d(a);var e;try{var f=new F,g=ia(c),h=b.document,i=b.remoteContext["@context"];b.expandContext&&(g=f.processContext(g,b.expandContext["@context"],c)),i&&(g=f.processContext(g,i,c)),e=f.expand(g,null,h,c,!1),ka(e)&&"@graph"in e&&1===Object.keys(e).length?e=e["@graph"]:null===e&&(e=[]),ma(e)||(e=[e])}catch(a){return d(a)}d(null,e)})}if(arguments.length<1)return b.nextTick(function(){d(new TypeError("Could not expand, too few arguments."))});"function"==typeof c&&(d=c,c={}),c=c||{},"documentLoader"in c||(c.documentLoader=b.loadDocument),"keepFreeFloatingNodes"in c||(c.keepFreeFloatingNodes=!1),b.nextTick(function(){if("string"==typeof a){var b=function(a,b){if(a)return d(a);try{if(!b.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof b.document&&(b.document=JSON.parse(b.document))}catch(a){return d(new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:a,remoteDoc:b}))}e(b)},f=c.documentLoader(a,b);return void(f&&"then"in f&&f.then(b.bind(null,null),b))}e({contextUrl:null,documentUrl:null,document:a})})},b.flatten=function(a,c,d,e){if(arguments.length<1)return b.nextTick(function(){e(new TypeError("Could not flatten, too few arguments."))});"function"==typeof d?(e=d,d={}):"function"==typeof c&&(e=c,c=null,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=b.loadDocument),b.expand(a,d,function(a,f){if(a)return e(new E("Could not expand input before flattening.","jsonld.FlattenError",{cause:a}));var g;try{g=(new F).flatten(f)}catch(a){return e(a)}if(null===c)return e(null,g);d.graph=!0,d.skipExpansion=!0,b.compact(g,c,d,function(a,b){if(a)return e(new E("Could not compact flattened output.","jsonld.FlattenError",{cause:a}));e(null,b)})})},b.frame=function(a,c,d,e){function f(c){var g,f=c.document;f?(g=f["@context"],c.contextUrl?(g?ma(g)?g.push(c.contextUrl):g=[g,c.contextUrl]:g=c.contextUrl,f["@context"]=g):g=g||{}):g={},b.expand(a,d,function(a,c){if(a)return e(new E("Could not expand input before framing.","jsonld.FrameError",{cause:a}));var h=Aa(d);h.isFrame=!0,h.keepFreeFloatingNodes=!0,b.expand(f,h,function(a,d){if(a)return e(new E("Could not expand frame before framing.","jsonld.FrameError",{cause:a}));var f;try{f=(new F).frame(c,d,h)}catch(a){return e(a)}h.graph=!0,h.skipExpansion=!0,h.link={},b.compact(f,g,h,function(a,b,c){if(a)return e(new E("Could not compact framed output.","jsonld.FrameError",{cause:a}));var d=ca(c,"@graph");h.link={},b[d]=_(c,b[d],h),e(null,b)})})})}if(arguments.length<2)return b.nextTick(function(){e(new TypeError("Could not frame, too few arguments."))});"function"==typeof d&&(e=d,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=b.loadDocument),"embed"in d||(d.embed="@last"),d.explicit=d.explicit||!1,"requireAll"in d||(d.requireAll=!0),d.omitDefault=d.omitDefault||!1,b.nextTick(function(){if("string"==typeof c){var a=function(a,b){if(a)return e(a);try{if(!b.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof b.document&&(b.document=JSON.parse(b.document))}catch(a){return e(new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:a,remoteDoc:b}))}f(b)},b=d.documentLoader(c,a);return void(b&&"then"in b&&b.then(a.bind(null,null),a))}f({contextUrl:null,documentUrl:null,document:c})})},b.link=function(a,c,d,e){var f={};c&&(f["@context"]=c),f["@embed"]="@link",b.frame(a,f,d,e)},b.objectify=function(a,c,d,e){"function"==typeof d&&(e=d,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=b.loadDocument),b.expand(a,d,function(a,f){if(a)return e(new E("Could not expand input before linking.","jsonld.LinkError",{cause:a}));var g;try{g=(new F).flatten(f)}catch(a){return e(a)}d.graph=!0,d.skipExpansion=!0,b.compact(g,c,d,function(a,c,d){if(a)return e(new E("Could not compact flattened output before linking.","jsonld.LinkError",{cause:a}));var f=ca(d,"@graph"),g=c[f][0],h=function(a){if(ka(a)||ma(a)){if(ka(a)){if(h.visited[a["@id"]])return;h.visited[a["@id"]]=!0}for(var c in a){var e=a[c],f="@id"===b.getContextValue(d,c,"@type");if(ma(e)||ka(e)||f)if(oa(e)&&f)a[c]=e=g[e],h(e);else if(ma(e))for(var i=0;i<e.length;++i)oa(e[i])&&f?e[i]=g[e[i]]:ka(e[i])&&"@id"in e[i]&&(e[i]=g[e[i]["@id"]]),h(e[i]);else if(ka(e)){var j=e["@id"];a[c]=e=g[j],h(e)}}}};h.visited={},h(g),c.of_type={};for(var i in g)if("@type"in g[i]){var j=g[i]["@type"];ma(j)||(j=[j]);for(var k=0;k<j.length;++k)j[k]in c.of_type||(c.of_type[j[k]]=[]),c.of_type[j[k]].push(g[i])}e(null,c)})})},b.normalize=function(a,c,d){if(arguments.length<1)return b.nextTick(function(){d(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof c&&(d=c,c={}),c=c||{},"algorithm"in c||(c.algorithm="URGNA2012"),"base"in c||(c.base="string"==typeof a?a:""),"documentLoader"in c||(c.documentLoader=b.loadDocument),"inputFormat"in c){if("application/nquads"!==c.inputFormat)return d(new E("Unknown normalization input format.","jsonld.NormalizeError"));var e=Da(a);(new F).normalize(e,c,d)}else{var f=Aa(c);delete f.format,f.produceGeneralizedRdf=!1,b.toRDF(a,f,function(a,b){if(a)return d(new E("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:a}));(new F).normalize(b,c,d)})}},b.fromRDF=function(a,c,d){if(arguments.length<1)return b.nextTick(function(){d(new TypeError("Could not convert from RDF, too few arguments."))});"function"==typeof c&&(d=c,c={}),c=c||{},"useRdfType"in c||(c.useRdfType=!1),"useNativeTypes"in c||(c.useNativeTypes=!1),"format"in c||!oa(a)||"format"in c||(c.format="application/nquads"),b.nextTick(function(){function f(a,b,c){(new F).fromRDF(a,b,c)}var b;if(c.format){if(!(b=c.rdfParser||l[c.format]))return d(new E("Unknown input format.","jsonld.UnknownFormat",{format:c.format}))}else b=function(){return a};var e=!1;try{a=b(a,function(a,b){if(e=!0,a)return d(a);f(b,c,d)})}catch(a){if(!e)return d(a);throw a}if(a){if("then"in a)return a.then(function(a){f(a,c,d)},d);f(a,c,d)}})},b.toRDF=function(a,c,d){if(arguments.length<1)return b.nextTick(function(){d(new TypeError("Could not convert to RDF, too few arguments."))});"function"==typeof c&&(d=c,c={}),c=c||{},"base"in c||(c.base="string"==typeof a?a:""),"documentLoader"in c||(c.documentLoader=b.loadDocument),b.expand(a,c,function(a,b){if(a)return d(new E("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:a}));var e;try{if(e=F.prototype.toRDF(b,c),c.format){if("application/nquads"===c.format)return d(null,Ea(e));throw new E("Unknown output format.","jsonld.UnknownFormat",{format:c.format})}}catch(a){return d(a)}d(null,e)})},b.createNodeMap=function(a,c,d){if(arguments.length<1)return b.nextTick(function(){d(new TypeError("Could not create node map, too few arguments."))});"function"==typeof c&&(d=c,c={}),c=c||{},"base"in c||(c.base="string"==typeof a?a:""),"documentLoader"in c||(c.documentLoader=b.loadDocument),b.expand(a,c,function(a,b){if(a)return d(new E("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:a}));var e;try{e=(new F).createNodeMap(b,c)}catch(a){return d(a)}d(null,e)})},b.merge=function(a,c,d,e){function l(a,b){if(!g){if(a)return g=a,e(new E("Could not expand input before flattening.","jsonld.FlattenError",{cause:a}));f.push(b),0==--h&&m(f)}}function m(a){var f=!0;"mergeNodes"in d&&(f=d.mergeNodes);var i,g=d.namer||d.issuer||new Ha("_:b"),h={"@default":{}};try{for(var j=0;j<a.length;++j){var k=a[j];k=b.relabelBlankNodes(k,{issuer:new Ha("_:b"+j+"-")});var l=f||0===j?h:{"@default":{}};if(Q(k,l,"@default",g),l!==h)for(var m in l){var n=l[m];if(m in h){var o=h[m];for(var p in n)p in o||(o[p]=n[p])}else h[m]=n}}i=R(h)}catch(a){return e(a)}for(var q=[],r=Object.keys(i).sort(),s=0;s<r.length;++s){var t=i[r[s]];va(t)||q.push(t)}if(null===c)return e(null,q);d.graph=!0,d.skipExpansion=!0,b.compact(q,c,d,function(a,b){if(a)return e(new E("Could not compact merged output.","jsonld.MergeError",{cause:a}));e(null,b)})}if(arguments.length<1)return b.nextTick(function(){e(new TypeError("Could not merge, too few arguments."))});if(!ma(a))return b.nextTick(function(){e(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof d?(e=d,d={}):"function"==typeof c&&(e=c,c=null,d={}),d=d||{};for(var f=[],g=null,h=a.length,i=0;i<a.length;++i){var j={};for(var k in d)j[k]=d[k];b.expand(a[i],j,l)}},b.relabelBlankNodes=function(a,b){return b=b||{},H(b.namer||b.issuer||new Ha("_:b"),a)},b.prependBase=function(a,b){return ga(a,b)},b.documentLoader=function(a,c){var d=new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return f?c(d,{contextUrl:null,documentUrl:a,document:null}):b.promisify(function(a){a(d)})},b.loadDocument=function(a,c){var d=b.documentLoader(a,c);d&&"then"in d&&d.then(c.bind(null,null),c)},b.promises=function(c){c=c||{};var e=Array.prototype.slice,f=b.promisify,g=c.api||{},h=c.version||"jsonld.js";"string"==typeof c.api&&(c.version||(h=c.api),g={}),g.expand=function(a){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return f.apply(null,[b.expand].concat(e.call(arguments)))},g.compact=function(a,c){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var d=function(a,c,d,e){b.compact(a,c,d,function(a,b){e(a,b)})};return f.apply(null,[d].concat(e.call(arguments)))},g.flatten=function(a){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return f.apply(null,[b.flatten].concat(e.call(arguments)))},g.frame=function(a,c){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return f.apply(null,[b.frame].concat(e.call(arguments)))},g.fromRDF=function(a){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return f.apply(null,[b.fromRDF].concat(e.call(arguments)))},g.toRDF=function(a){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return f.apply(null,[b.toRDF].concat(e.call(arguments)))},g.normalize=function(a){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return f.apply(null,[b.normalize].concat(e.call(arguments)))},"jsonld.js"===h&&(g.link=function(a,c){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return f.apply(null,[b.link].concat(e.call(arguments)))},g.objectify=function(a){return f.apply(null,[b.objectify].concat(e.call(arguments)))},g.createNodeMap=function(a){return f.apply(null,[b.createNodeMap].concat(e.call(arguments)))},g.merge=function(a){return f.apply(null,[b.merge].concat(e.call(arguments)))});try{b.Promise=d.Promise||a("es6-promise").Promise}catch(a){var i=function(){throw new Error("Unable to find a Promise implementation.")};for(var j in g)g[j]=i}return g},b.promisify=function(c){if(!b.Promise)try{b.Promise=d.Promise||a("es6-promise").Promise}catch(a){throw new Error("Unable to find a Promise implementation.")}var e=Array.prototype.slice.call(arguments,1);return new b.Promise(function(a,b){c.apply(null,e.concat(function(c,d){c?b(c):a(d)}))})},b.promises({api:b.promises}),h.prototype=b.promises({version:"json-ld-1.0"}),h.prototype.toString=function(){return this instanceof h?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},b.JsonLdProcessor=h;var i=!!Object.defineProperty;if(i)try{Object.defineProperty({},"x",{})}catch(a){i=!1}i&&(Object.defineProperty(h,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(h.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:h})),g&&void 0===d.JsonLdProcessor&&(i?Object.defineProperty(d,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:h}):d.JsonLdProcessor=h);var j="function"==typeof setImmediate&&setImmediate,k=j?function(a){j(a)}:function(a){setTimeout(a,0)};"object"==typeof c&&"function"==typeof c.nextTick?b.nextTick=c.nextTick:b.nextTick=k,b.setImmediate=j?k:b.nextTick,b.parseLinkHeader=function(a){for(var b={},c=a.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),d=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,e=0;e<c.length;++e){var f=c[e].match(d);if(f){for(var g={target:f[1]},h=f[2],i=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;f=i.exec(h);)g[f[1]]=void 0===f[2]?f[3]:f[2];var j=g.rel||"";ma(b[j])?b[j].push(g):b[j]=j in b?[b[j],g]:g}}return b},b.RequestQueue=function(){this._requests={}},b.RequestQueue.prototype.wrapLoader=function(a){return this._loader=a,this._usePromise=1===a.length,this.add.bind(this)},b.RequestQueue.prototype.add=function(a,c){var d=this;if(!c&&!d._usePromise)throw new Error("callback must be specified.");if(d._usePromise)return new b.Promise(function(b,c){var e=d._requests[a];e||(e=d._requests[a]=d._loader(a).then(function(b){return delete d._requests[a],b}).catch(function(b){throw delete d._requests[a],b})),e.then(function(a){b(a)}).catch(function(a){c(a)})});a in d._requests?d._requests[a].push(c):(d._requests[a]=[c],d._loader(a,function(b,c){var e=d._requests[a];delete d._requests[a];for(var f=0;f<e.length;++f)e[f](b,c)}))},b.DocumentCache=function(a){this.order=[],this.cache={},this.size=a||50,this.expires=3e4},b.DocumentCache.prototype.get=function(a){if(a in this.cache){var b=this.cache[a];if(b.expires>=+new Date)return b.ctx;delete this.cache[a],this.order.splice(this.order.indexOf(a),1)}return null},b.DocumentCache.prototype.set=function(a,b){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(a),this.cache[a]={ctx:b,expires:+new Date+this.expires}},b.ActiveContextCache=function(a){this.order=[],this.cache={},this.size=a||100},b.ActiveContextCache.prototype.get=function(a,b){var c=JSON.stringify(a),d=JSON.stringify(b),e=this.cache[c];return e&&d in e?e[d]:null},b.ActiveContextCache.prototype.set=function(a,b,c){if(this.order.length===this.size){var d=this.order.shift();delete this.cache[d.activeCtx][d.localCtx]}var e=JSON.stringify(a),f=JSON.stringify(b);this.order.push({activeCtx:e,localCtx:f}),e in this.cache||(this.cache[e]={}),this.cache[e][f]=Aa(c)},b.cache={activeCtx:new b.ActiveContextCache},b.documentLoaders={},b.documentLoaders.jquery=function(a,c){function f(d,e){return 0!==d.indexOf("http:")&&0!==d.indexOf("https:")?e(new E('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null}):c.secure&&0!==d.indexOf("https")?e(new E('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null}):void a.ajax({url:d,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(a,c,f){var g={contextUrl:null,documentUrl:d,document:a},h=f.getResponseHeader("Content-Type"),i=f.getResponseHeader("Link");if(i&&"application/ld+json"!==h){if(i=b.parseLinkHeader(i)[C],ma(i))return e(new E("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:d}),g);i&&(g.contextUrl=i.target)}e(null,g)},error:function(a,b,c){e(new E("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:d,cause:c}),{contextUrl:null,documentUrl:d,document:null})}})}c=c||{};var d=new b.RequestQueue;return("usePromise"in c?c.usePromise:"undefined"!=typeof Promise)?d.wrapLoader(function(a){return b.promisify(f,a)}):d.wrapLoader(f)},b.documentLoaders.node=function(c){function k(a,i,j){function o(c,d,f){if(l={contextUrl:null,documentUrl:a,document:f||null},c)return j(new E("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:c}),l);var g=h.STATUS_CODES[d.statusCode];if(d.statusCode>=400)return j(new E("URL could not be dereferenced: "+g,"jsonld.InvalidUrl",{code:"loading document failed",url:a,httpStatusCode:d.statusCode}),l);if(d.headers.link&&"application/ld+json"!==d.headers["content-type"]){var m=b.parseLinkHeader(d.headers.link)[C];if(ma(m))return j(new E("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a}),l);m&&(l.contextUrl=m.target)}if(d.statusCode>=300&&d.statusCode<400&&d.headers.location)return i.length===e?j(new E("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:a,httpStatusCode:d.statusCode,redirects:i}),l):-1!==i.indexOf(a)?j(new E("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:a,httpStatusCode:d.statusCode,redirects:i}),l):(i.push(a),k(d.headers.location,i,j));i.push(a),j(c,l)}if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))return j(new E('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a}),{contextUrl:null,documentUrl:a,document:null});if(c.secure&&0!==a.indexOf("https"))return j(new E('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a}),{contextUrl:null,documentUrl:a,document:null});var l=null;if(null!==l)return j(null,l);var m={Accept:g};for(var n in c.headers)m[n]=c.headers[n];f({url:a,headers:m,strictSSL:d,followRedirect:!1},o)}c=c||{};var d=!("strictSSL"in c)||c.strictSSL,e="maxRedirects"in c?c.maxRedirects:-1,f="request"in c?c.request:a("request"),g="application/ld+json, application/json",h=a("http"),i=new b.RequestQueue;if(c.usePromise)return i.wrapLoader(function(a){return b.promisify(k,a,[])});var j=c.headers||{};if("Accept"in j||"accept"in j)throw new RangeError('Accept header may not be specified as an option; only "'+g+'" is supported.');return i.wrapLoader(function(a,b){k(a,[],b)})},b.documentLoaders.xhr=function(a){function f(d,e){if(0!==d.indexOf("http:")&&0!==d.indexOf("https:"))return e(new E('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null});if(a.secure&&0!==d.indexOf("https"))return e(new E('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null});var f=a.xhr||XMLHttpRequest,g=new f;g.onload=function(){if(g.status>=400)return e(new E("URL could not be dereferenced: "+g.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:d,httpStatusCode:g.status}),{contextUrl:null,documentUrl:d,document:null});var h,a={contextUrl:null,documentUrl:d,document:g.response},f=g.getResponseHeader("Content-Type");if(c.test(g.getAllResponseHeaders())&&(h=g.getResponseHeader("Link")),h&&"application/ld+json"!==f){if(h=b.parseLinkHeader(h)[C],ma(h))return e(new E("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:d}),a);h&&(a.contextUrl=h.target)}e(null,a)},g.onerror=function(){e(new E("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null})},g.open("GET",d,!0),g.setRequestHeader("Accept","application/ld+json, application/json"),g.send()}a=a||{};var c=/(^|(\r\n))link:/i,d=new b.RequestQueue;return("usePromise"in a?a.usePromise:"undefined"!=typeof Promise)?d.wrapLoader(function(a){return b.promisify(f,a)}):d.wrapLoader(f)},b.useDocumentLoader=function(a){if(!(a in b.documentLoaders))throw new E('Unknown document loader type: "'+a+'"',"jsonld.UnknownDocumentLoader",{type:a});b.documentLoader=b.documentLoaders[a].apply(b,Array.prototype.slice.call(arguments,1))},b.processContext=function(a,c){var d={},e=2;arguments.length>3&&(d=arguments[2]||{},e+=1);var f=arguments[e];if("base"in d||(d.base=""),"documentLoader"in d||(d.documentLoader=b.loadDocument),null===c)return f(null,ia(d));c=Aa(c),ka(c)&&"@context"in c||(c={"@context":c}),Ca(c,d,function(b,c){if(b)return f(b);try{c=(new F).processContext(a,c,d)}catch(a){return f(a)}f(null,c)})},b.hasProperty=function(a,b){var c=!1;if(b in a){var d=a[b];c=!ma(d)||d.length>0}return c},b.hasValue=function(a,c,d){var e=!1;if(b.hasProperty(a,c)){var f=a[c],g=xa(f);if(ma(f)||g){g&&(f=f["@list"]);for(var h=0;h<f.length;++h)if(b.compareValues(d,f[h])){e=!0;break}}else ma(d)||(e=b.compareValues(d,f))}return e},b.addValue=function(a,c,d,e){if(e=e||{},"propertyIsArray"in e||(e.propertyIsArray=!1),"allowDuplicate"in e||(e.allowDuplicate=!0),ma(d)){0!==d.length||!e.propertyIsArray||c in a||(a[c]=[]);for(var f=0;f<d.length;++f)b.addValue(a,c,d[f],e)}else if(c in a){var g=!e.allowDuplicate&&b.hasValue(a,c,d);ma(a[c])||g&&!e.propertyIsArray||(a[c]=[a[c]]),g||a[c].push(d)}else a[c]=e.propertyIsArray?[d]:d},b.getValues=function(a,b){var c=a[b]||[];return ma(c)||(c=[c]),c},b.removeProperty=function(a,b){delete a[b]},b.removeValue=function(a,c,d,e){"propertyIsArray"in(e=e||{})||(e.propertyIsArray=!1);var f=b.getValues(a,c).filter(function(a){return!b.compareValues(a,d)});0===f.length?b.removeProperty(a,c):1!==f.length||e.propertyIsArray?a[c]=f:a[c]=f[0]},b.compareValues=function(a,b){return a===b||(!(!wa(a)||!wa(b)||a["@value"]!==b["@value"]||a["@type"]!==b["@type"]||a["@language"]!==b["@language"]||a["@index"]!==b["@index"])||!!(ka(a)&&"@id"in a&&ka(b)&&"@id"in b)&&a["@id"]===b["@id"])},b.getContextValue=function(a,b,c){var d=null;if(null===b)return d;if("@language"===c&&c in a&&(d=a[c]),a.mappings[b]){var e=a.mappings[b];ta(c)?d=e:c in e&&(d=e[c])}return d};var l={};if(b.registerRDFParser=function(a,b){l[a]=b},b.unregisterRDFParser=function(a){delete l[a]},f){if(void 0===m)var m=null;if(void 0===n)var n={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var o="http://www.w3.org/2001/XMLSchema#boolean",p="http://www.w3.org/2001/XMLSchema#double",q="http://www.w3.org/2001/XMLSchema#integer",r="http://www.w3.org/2001/XMLSchema#string",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",t=s+"List",u=s+"first",v=s+"rest",w=s+"nil",x=s+"type",y=s+"PlainLiteral",z=s+"XMLLiteral",A=s+"object",B=s+"langString",C="http://www.w3.org/ns/json-ld#context",D=10,E=function(a,b,c){f?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=b||"jsonld.Error",this.message=a||"An unspecified JSON-LD error occurred.",this.details=c||{}};f?a("util").inherits(E,Error):"undefined"!=typeof Error&&(E.prototype=new Error);var F=function(){};F.prototype.compact=function(a,c,d,e){if(ma(d)){for(var f=[],g=0;g<d.length;++g){var h=this.compact(a,c,d[g],e);null!==h&&f.push(h)}if(e.compactArrays&&1===f.length){var i=b.getContextValue(a,c,"@container");null===i&&(f=f[0])}return f}if(ka(d)){if(e.link&&"@id"in d&&d["@id"]in e.link)for(var j=e.link[d["@id"]],g=0;g<j.length;++g)if(j[g].expanded===d)return j[g].compacted;if(wa(d)||va(d)){var f=da(a,c,d);return e.link&&va(d)&&(d["@id"]in e.link||(e.link[d["@id"]]=[]),e.link[d["@id"]].push({expanded:d,compacted:f})),f}var k="@reverse"===c,f={};e.link&&"@id"in d&&(d["@id"]in e.link||(e.link[d["@id"]]=[]),e.link[d["@id"]].push({expanded:d,compacted:f}));for(var l=Object.keys(d).sort(),m=0;m<l.length;++m){var n=l[m],o=d[n];if("@id"!==n&&"@type"!==n)if("@reverse"!==n)if("@index"!==n)if("@graph"!==n&&"@list"!==n&&ja(n)){var r=ca(a,n);b.addValue(f,r,o)}else{if(0===o.length){var w=ca(a,n,o,{vocab:!0},k);b.addValue(f,w,o,{propertyIsArray:!0})}for(var q=0;q<o.length;++q){var x=o[q],w=ca(a,n,x,{vocab:!0},k),i=b.getContextValue(a,w,"@container"),y=xa(x),z=null;y&&(z=x["@list"]);var A=this.compact(a,w,y?z:x,e);if(y)if(ma(A)||(A=[A]),"@list"!==i){var B={};B[ca(a,"@list")]=A,A=B,"@index"in x&&(A[ca(a,"@index")]=x["@index"])}else if(w in f)throw new E('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===i||"@index"===i){var C;w in f?C=f[w]:f[w]=C={},"@language"===i&&wa(A)&&(A=A["@value"]),b.addValue(C,x[i],A)}else{var s=!e.compactArrays||"@set"===i||"@list"===i||ma(A)&&0===A.length||"@list"===n||"@graph"===n;b.addValue(f,w,A,{propertyIsArray:s})}}}else{var i=b.getContextValue(a,c,"@container");if("@index"===i)continue;var r=ca(a,n);b.addValue(f,r,o)}else{var p=this.compact(a,"@reverse",o,e);for(var t in p)if(a.mappings[t]&&a.mappings[t].reverse){var u=p[t],i=b.getContextValue(a,t,"@container"),v="@set"===i||!e.compactArrays;b.addValue(f,t,u,{propertyIsArray:v}),delete p[t]}if(Object.keys(p).length>0){var r=ca(a,n);b.addValue(f,r,p)}}else{var p;if(oa(o))p=ca(a,o,null,{vocab:"@type"===n});else{p=[];for(var q=0;q<o.length;++q)p.push(ca(a,o[q],null,{vocab:!0}))}var r=ca(a,n),s=ma(p)&&0===o.length;b.addValue(f,r,p,{propertyIsArray:s})}}return f}return d},F.prototype.expand=function(a,c,d,e,f){var g=this;if(null===d||void 0===d)return null;if(!ma(d)&&!ka(d))return f||null!==c&&"@graph"!==fa(a,c,{vocab:!0})?I(a,c,d):null;if(ma(d)){var h=[],i=b.getContextValue(a,c,"@container");f=f||"@list"===i;for(var j=0;j<d.length;++j){var k=g.expand(a,c,d[j],e);if(f&&(ma(k)||xa(k)))throw new E("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==k&&(ma(k)?h=h.concat(k):h.push(k))}return h}"@context"in d&&(a=g.processContext(a,d["@context"],e));for(var l=fa(a,c,{vocab:!0}),h={},m=Object.keys(d).sort(),n=0;n<m.length;++n){var q,o=m[n],p=d[o];if("@context"!==o){var r=fa(a,o,{vocab:!0});if(null!==r&&(za(r)||ja(r))){if(ja(r)){if("@reverse"===l)throw new E("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:p});if(r in h)throw new E("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:r})}if("@id"===r&&!oa(p)){if(!e.isFrame)throw new E('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:p});if(!ka(p))throw new E('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:p})}if("@type"===r&&na(p),"@graph"===r&&!ka(p)&&!ma(p))throw new E('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:p});if("@value"===r&&(ka(p)||ma(p)))throw new E('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:p});if("@language"===r){if(null===p)continue;if(!oa(p))throw new E('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:p});p=p.toLowerCase()}if("@index"===r&&!oa(p))throw new E('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:p});if("@reverse"!==r){var i=b.getContextValue(a,o,"@container");if("@language"===i&&ka(p))q=G(p);else if("@index"===i&&ka(p))q=function(c){for(var d=[],f=Object.keys(p).sort(),h=0;h<f.length;++h){var i=f[h],j=p[i];ma(j)||(j=[j]),j=g.expand(a,c,j,e,!1);for(var k=0;k<j.length;++k){var l=j[k];"@index"in l||(l["@index"]=i),d.push(l)}}return d}(o);else{var x="@list"===r;if(x||"@set"===r){var y=c;if(x&&"@graph"===l&&(y=null),q=g.expand(a,y,p,e,x),x&&xa(q))throw new E("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else q=g.expand(a,o,p,e,!1)}if(null!==q||"@value"===r)if("@list"===r||xa(q)||"@list"!==i||(q=ma(q)?q:[q],q={"@list":q}),a.mappings[o]&&a.mappings[o].reverse){var t=h["@reverse"]=h["@reverse"]||{};ma(q)||(q=[q]);for(var v=0;v<q.length;++v){var w=q[v];if(wa(w)||xa(w))throw new E('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});b.addValue(t,r,w,{propertyIsArray:!0})}}else{var z=-1===["@index","@id","@type","@value","@language"].indexOf(r);b.addValue(h,r,q,{propertyIsArray:z})}}else{if(!ka(p))throw new E('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:p});if("@reverse"in(q=g.expand(a,"@reverse",p,e)))for(var s in q["@reverse"])b.addValue(h,s,q["@reverse"][s],{propertyIsArray:!0});var t=h["@reverse"]||null;for(var s in q)if("@reverse"!==s){null===t&&(t=h["@reverse"]={}),b.addValue(t,s,[],{propertyIsArray:!0});for(var u=q[s],v=0;v<u.length;++v){var w=u[v];if(wa(w)||xa(w))throw new E('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});b.addValue(t,s,w,{propertyIsArray:!0})}}}}}}m=Object.keys(h);var A=m.length;if("@value"in h){if("@type"in h&&"@language"in h)throw new E('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});var B=A-1;if("@type"in h&&(B-=1),"@index"in h&&(B-=1),"@language"in h&&(B-=1),0!==B)throw new E('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});if(null===h["@value"])h=null;else{if("@language"in h&&!oa(h["@value"]))throw new E("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:h});if("@type"in h&&(!za(h["@type"])||0===h["@type"].indexOf("_:")))throw new E('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:h})}}else if("@type"in h&&!ma(h["@type"]))h["@type"]=[h["@type"]];else if("@set"in h||"@list"in h){if(A>1&&!(2===A&&"@index"in h))throw new E('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:h});"@set"in h&&(h=h["@set"],m=Object.keys(h),A=m.length)}else 1===A&&"@language"in h&&(h=null);return!ka(h)||e.keepFreeFloatingNodes||f||null!==c&&"@graph"!==l||(0===A||"@value"in h||"@list"in h||1===A&&"@id"in h)&&(h=null),h},F.prototype.createNodeMap=function(a,b){b=b||{};var c=b.namer||b.issuer||new Ha("_:b"),d={"@default":{}};return Q(a,d,"@default",c),R(d)},F.prototype.flatten=function(a){for(var b=this.createNodeMap(a),c=[],d=Object.keys(b).sort(),e=0;e<d.length;++e){var f=b[d[e]];va(f)||c.push(f)}return c},F.prototype.frame=function(a,b,c){var d={options:c,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},e=new Ha("_:b");Q(a,d.graphs,"@merged",e),d.subjects=d.graphs["@merged"];var f=[];return S(d,Object.keys(d.subjects).sort(),b,f,null),f},F.prototype.normalize=function(a,b,c){return"URDNA2015"===b.algorithm?new O(b).main(a,c):"URGNA2012"===b.algorithm?new P(b).main(a,c):void c(new Error("Invalid RDF Dataset Normalization algorithm: "+b.algorithm))},F.prototype.fromRDF=function(a,c,d){var e={},f={"@default":e},g={};for(var h in a){var i=a[h];h in f||(f[h]={}),"@default"===h||h in e||(e[h]={"@id":h});for(var j=f[h],k=0;k<i.length;++k){var l=i[k],m=l.subject.value,n=l.predicate.value,o=l.object;m in j||(j[m]={"@id":m});var p=j[m],q="IRI"===o.type||"blank node"===o.type;if(!q||o.value in j||(j[o.value]={"@id":o.value}),n!==x||c.useRdfType||!q){var r=M(o,c.useNativeTypes);if(b.addValue(p,n,r,{propertyIsArray:!0}),q)if(o.value===w){var s=j[o.value];"usages"in s||(s.usages=[]),s.usages.push({node:p,property:n,value:r})}else o.value in g?g[o.value]=!1:g[o.value]={node:p,property:n,value:r}}else b.addValue(p,"@type",o.value,{propertyIsArray:!0})}}for(var h in f){var y=f[h];if(w in y){for(var z=y[w],A=0;A<z.usages.length;++A){for(var B=z.usages[A],p=B.node,C=B.property,D=B.value,E=[],F=[],G=Object.keys(p).length;C===v&&ka(g[p["@id"]])&&ma(p[u])&&1===p[u].length&&ma(p[v])&&1===p[v].length&&(3===G||4===G&&ma(p["@type"])&&1===p["@type"].length&&p["@type"][0]===t)&&(E.push(p[u][0]),F.push(p["@id"]),B=g[p["@id"]],p=B.node,C=B.property,D=B.value,G=Object.keys(p).length,0===p["@id"].indexOf("_:")););if(C===u){if(p["@id"]===w)continue;D=y[D["@id"]][v][0],E.pop(),F.pop()}delete D["@id"],D["@list"]=E.reverse();for(var H=0;H<F.length;++H)delete y[F[H]]}delete z.usages}}for(var I=[],J=Object.keys(e).sort(),A=0;A<J.length;++A){var K=J[A],p=e[K];if(K in f)for(var i=p["@graph"]=[],y=f[K],L=Object.keys(y).sort(),N=0;N<L.length;++N){var O=y[L[N]];va(O)||i.push(O)}va(p)||I.push(p)}d(null,I)},F.prototype.toRDF=function(a,b){var c=new Ha("_:b"),d={"@default":{}};Q(a,d,"@default",c);for(var e={},f=Object.keys(d).sort(),g=0;g<f.length;++g){var h=f[g];("@default"===h||za(h))&&(e[h]=J(d[h],c,b))}return e},F.prototype.processContext=function(a,c,d){ka(c)&&"@context"in c&&ma(c["@context"])&&(c=c["@context"]);var e=ma(c)?c:[c];if(0===e.length)return a.clone();for(var f=a,g=0;g<e.length;++g){var h=e[g];if(null!==h){if(ka(h)&&"@context"in h&&(h=h["@context"]),!ka(h))throw new E("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:h});if(b.cache.activeCtx){var i=b.cache.activeCtx.get(a,h);if(i){f=a=i;continue}}a=f,f=f.clone();var j={};if("@base"in h){var k=h["@base"];if(null===k)k=null;else{if(!oa(k))throw new E('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h});if(""!==k&&!za(k))throw new E('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h})}null!==k&&(k=b.url.parse(k||"")),f["@base"]=k,j["@base"]=!0}if("@vocab"in h){var l=h["@vocab"];if(null===l)delete f["@vocab"];else{if(!oa(l))throw new E('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});if(!za(l))throw new E('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});f["@vocab"]=l}j["@vocab"]=!0}if("@language"in h){var l=h["@language"];if(null===l)delete f["@language"];else{if(!oa(l))throw new E('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:h});f["@language"]=l.toLowerCase()}j["@language"]=!0}for(var m in h)ea(f,h,m,j);b.cache.activeCtx&&b.cache.activeCtx.set(a,h,f)}else f=a=ia(d)}return f};var O=function(){var a={subject:"s",object:"o",name:"g"},c=function(a){a=a||{},this.name="URDNA2015",this.options=a,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new Ha("_:c14n"),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH="maxCallStackDepth"in a?a.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in a?a.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice="timeSlice"in a?a.timeSlice:10};return c.prototype.doWork=function(a,c){var d=this.schedule;if(d.totalDepth>=d.MAX_TOTAL_DEPTH)return c(new Error("Maximum total call stack depth exceeded; normalization aborting."));!function e(){if(d.depth===d.MAX_DEPTH)return d.depth=0,d.running=!1,b.nextTick(e);var f=(new Date).getTime();if(d.running||(d.start=(new Date).getTime(),d.deadline=d.start+d.timeSlice),f<d.deadline)return d.running=!0,d.depth++,d.totalDepth++,a(function(a,b){d.depth--,d.totalDepth--,c(a,b)});d.depth=0,d.running=!1,b.setImmediate(e)}()},c.prototype.forEach=function(a,b,c){var e,g,d=this,f=0;if(ma(a))g=a.length,e=function(){return f!==g&&(e.value=a[f++],e.key=f,!0)};else{var h=Object.keys(a);g=h.length,e=function(){return f!==g&&(e.key=h[f++],e.value=a[e.key],!0)}}!function a(f,g){return f?c(f):e()?d.doWork(function(){b(e.value,e.key,a)}):void c()}()},c.prototype.waterfall=function(a,b){var c=this;c.forEach(a,function(a,b,d){c.doWork(a,d)},b)},c.prototype.whilst=function(a,b,c){var d=this;!function e(f){return f?c(f):a()?void d.doWork(b,e):c()}()},c.prototype.main=function(a,b){var c=this;c.schedule.start=(new Date).getTime();var d;if(c.options.format&&"application/nquads"!==c.options.format)return b(new E("Unknown output format.","jsonld.UnknownFormat",{format:c.options.format}));var e={};c.waterfall([function(b){c.forEach(a,function(a,b,d){"@default"===b&&(b=null),c.forEach(a,function(a,d,f){null!==b&&(0===b.indexOf("_:")?a.name={type:"blank node",value:b}:a.name={type:"IRI",value:b}),c.quads.push(a),c.forEachComponent(a,function(b){if("blank node"===b.type){var d=b.value;d in c.blankNodeInfo?c.blankNodeInfo[d].quads.push(a):(e[d]=!0,c.blankNodeInfo[d]={quads:[a]})}}),f()},d)},b)},function(a){var b=!0;c.whilst(function(){return b},function(a){b=!1,c.hashToBlankNodes={},c.waterfall([function(a){c.forEach(e,function(a,b,d){c.hashFirstDegreeQuads(b,function(a,e){if(a)return d(a);e in c.hashToBlankNodes?c.hashToBlankNodes[e].push(b):c.hashToBlankNodes[e]=[b],d()})},a)},function(a){var d=Object.keys(c.hashToBlankNodes).sort();c.forEach(d,function(a,d,f){var g=c.hashToBlankNodes[a];if(g.length>1)return f();var h=g[0];c.canonicalIssuer.getId(h),delete e[h],delete c.hashToBlankNodes[a],b=!0,f()},a)}],a)},a)},function(a){var b=Object.keys(c.hashToBlankNodes).sort();c.forEach(b,function(a,b,d){var e=[],f=c.hashToBlankNodes[a];c.waterfall([function(a){c.forEach(f,function(a,b,d){if(c.canonicalIssuer.hasId(a))return d();var f=new Ha("_:b");f.getId(a),c.hashNDegreeQuads(a,f,function(a,b){if(a)return d(a);e.push(b),d()})},a)},function(a){e.sort(function(a,b){return a.hash<b.hash?-1:a.hash>b.hash?1:0}),c.forEach(e,function(a,b,d){for(var e in a.issuer.existing)c.canonicalIssuer.getId(e);d()},a)}],d)},a)},function(a){var b=[];c.waterfall([function(a){c.forEach(c.quads,function(a,d,e){c.forEachComponent(a,function(a){"blank node"===a.type&&0!==a.value.indexOf(c.canonicalIssuer.prefix)&&(a.value=c.canonicalIssuer.getId(a.value))}),b.push(Fa(a)),e()},a)},function(a){if(b.sort(),"application/nquads"===c.options.format)return d=b.join(""),a();d=Da(b.join("")),a()}],a)}],function(a){b(a,d)})},c.prototype.hashFirstDegreeQuads=function(a,b){var c=this,d=c.blankNodeInfo[a];if("hash"in d)return b(null,d.hash);var e=[],f=d.quads;c.forEach(f,function(b,d,f){var g={predicate:b.predicate};c.forEachComponent(b,function(b,d){g[d]=c.modifyFirstDegreeComponent(a,b,d)}),e.push(Fa(g)),f()},function(a){if(a)return b(a);e.sort(),d.hash=Ja.hashNQuads(c.name,e),b(null,d.hash)})},c.prototype.modifyFirstDegreeComponent=function(a,b){return"blank node"!==b.type?b:(b=Aa(b),b.value=b.value===a?"_:a":"_:z",b)},c.prototype.hashRelatedBlankNode=function(a,b,c,d,e){var g,f=this;f.waterfall([function(b){return f.canonicalIssuer.hasId(a)?(g=f.canonicalIssuer.getId(a),b()):c.hasId(a)?(g=c.getId(a),b()):void f.hashFirstDegreeQuads(a,function(a,c){if(a)return b(a);g=c,b()})}],function(a){if(a)return e(a);var c=new Ja(f.name);return c.update(d),"g"!==d&&c.update(f.getRelatedPredicate(b)),c.update(g),e(null,c.digest())})},c.prototype.getRelatedPredicate=function(a){return"<"+a.predicate.value+">"},c.prototype.hashNDegreeQuads=function(a,b,c){var e,d=this,f=new Ja(d.name);d.waterfall([function(c){d.createHashToRelated(a,b,function(a,b){if(a)return c(a);e=b,c()})},function(a){var c=Object.keys(e).sort();d.forEach(c,function(a,c,g){f.update(a);var i,h="",j=new Ia(e[a]);d.whilst(function(){return j.hasNext()},function(a){var c=j.next(),e=b.clone(),f="",g=[];d.waterfall([function(b){d.forEach(c,function(b,c,i){if(d.canonicalIssuer.hasId(b)?f+=d.canonicalIssuer.getId(b):(e.hasId(b)||g.push(b),f+=e.getId(b)),0!==h.length&&f.length>=h.length&&f>h)return a();i()},b)},function(b){d.forEach(g,function(b,c,g){d.hashNDegreeQuads(b,e,function(c,d){return c?g(c):(f+=e.getId(b),f+="<"+d.hash+">",e=d.issuer,0!==h.length&&f.length>=h.length&&f>h?a():void g())})},b)},function(a){(0===h.length||f<h)&&(h=f,i=e),a()}],a)},function(a){if(a)return g(a);f.update(h),b=i,g()})},a)}],function(a){c(a,{hash:f.digest(),issuer:b})})},c.prototype.createHashToRelated=function(b,c,d){var e=this,f={},g=e.blankNodeInfo[b].quads;e.forEach(g,function(d,g,h){e.forEach(d,function(g,h,i){if("predicate"===h||"blank node"!==g.type||g.value===b)return i();var j=g.value,k=a[h];e.hashRelatedBlankNode(j,d,c,k,function(a,b){if(a)return i(a);b in f?f[b].push(j):f[b]=[j],i()})},h)},function(a){d(a,f)})},c.prototype.forEachComponent=function(a,b){for(var c in a)"predicate"!==c&&b(a[c],c,a)},c}(),P=function(){var a=function(a){O.call(this,a),this.name="URGNA2012"};return a.prototype=new O,a.prototype.modifyFirstDegreeComponent=function(a,b,c){return"blank node"!==b.type?b:(b=Aa(b),b.value="name"===c?"_:g":b.value===a?"_:a":"_:z",b)},a.prototype.getRelatedPredicate=function(a){return a.predicate.value},a.prototype.createHashToRelated=function(a,b,c){var d=this,e={},f=d.blankNodeInfo[a].quads;d.forEach(f,function(c,f,g){var h,i;if("blank node"===c.subject.type&&c.subject.value!==a)i=c.subject.value,h="p";else{if("blank node"!==c.object.type||c.object.value===a)return g();i=c.object.value,h="r"}d.hashRelatedBlankNode(i,c,b,h,function(a,b){b in e?e[b].push(i):e[b]=[i],g()})},function(a){c(a,e)})},a}();Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on non-object");var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}),b.registerRDFParser("application/nquads",Da),b.registerRDFParser("rdfa-api",Ga),b.IdentifierIssuer=Ha,b.UniqueNamer=Ha,Ha.prototype.clone=function(){var a=new Ha(this.prefix);return a.counter=this.counter,a.existing=Aa(this.existing),a},Ha.prototype.getId=function(a){if(a&&a in this.existing)return this.existing[a];var b=this.prefix+this.counter;return this.counter+=1,a&&(this.existing[a]=b),b},Ha.prototype.getName=Ha.prototype.getName,Ha.prototype.hasId=function(a){return a in this.existing},Ha.prototype.isNamed=Ha.prototype.hasId;var Ia=function(a){this.list=a.sort(),this.done=!1,this.left={};for(var b=0;b<a.length;++b)this.left[a[b]]=!0};Ia.prototype.hasNext=function(){return!this.done},Ia.prototype.next=function(){for(var a=this.list.slice(),b=null,c=0,d=this.list.length,e=0;e<d;++e){var f=this.list[e],g=this.left[f];(null===b||f>b)&&(g&&e>0&&f>this.list[e-1]||!g&&e<d-1&&f>this.list[e+1])&&(b=f,c=e)}if(null===b)this.done=!0;else{var h=this.left[b]?c-1:c+1;this.list[c]=this.list[h],this.list[h]=b;for(var e=0;e<d;++e)this.list[e]>b&&(this.left[this.list[e]]=!this.left[this.list[e]])}return a};var Ja=function(a){if(!(this instanceof Ja))return new Ja(a);if(-1===["URDNA2015","URGNA2012"].indexOf(a))throw new Error("Invalid RDF Dataset Normalization algorithm: "+a);Ja._init.call(this,a)};if(Ja.hashNQuads=function(a,b){for(var c=new Ja(a),d=0;d<b.length;++d)c.update(b[d]);return c.digest()},function(b){if(b){var c=a("crypto");return Ja._init=function(a){a="URDNA2015"===a?"sha256":"sha1",this.md=c.createHash(a)},Ja.prototype.update=function(a){return this.md.update(a,"utf8")},void(Ja.prototype.digest=function(){return this.md.digest("hex")})}Ja._init=function(a){a="URDNA2015"===a?new f.Algorithm:new e.Algorithm,this.md=new d(a)},Ja.prototype.update=function(a){return this.md.update(a)},Ja.prototype.digest=function(){return this.md.digest().toHex()};var d=function(a){if(!(this instanceof d))return new d(a);if(this._algorithm=a,!d._padding||d._padding.length<this._algorithm.blockSize){d._padding=String.fromCharCode(128);for(var b=String.fromCharCode(0),c=64;c>0;)1&c&&(d._padding+=b),(c>>>=1)>0&&(b+=b)}this.start()};d.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var a=this._algorithm.messageLengthSize/4,b=0;b<a;++b)this.fullMessageLength.push(0);return this._input=new d.ByteBuffer,this.state=this._algorithm.start(),this},d.prototype.update=function(a){a=new d.ByteBuffer(unescape(encodeURIComponent(a))),this.messageLength+=a.length();var b=a.length();b=[b/4294967296>>>0,b>>>0];for(var c=this.fullMessageLength.length-1;c>=0;--c)this.fullMessageLength[c]+=b[1],b[1]=b[0]+(this.fullMessageLength[c]/4294967296>>>0),this.fullMessageLength[c]=this.fullMessageLength[c]>>>0,b[0]=b[1]/4294967296>>>0;for(this._input.putBytes(a.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},d.prototype.digest=function(){var a=new d.ByteBuffer;a.putBytes(this._input.bytes());var b=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,c=b&this._algorithm.blockSize-1;a.putBytes(d._padding.substr(0,this._algorithm.blockSize-c));for(var e=new d.ByteBuffer,f=0;f<this.fullMessageLength.length;++f)e.putInt32(this.fullMessageLength[f]<<3|this.fullMessageLength[f+1]>>>28);this._algorithm.writeMessageLength(a,e);var g=this._algorithm.digest(this.state.copy(),a),h=new d.ByteBuffer;return g.write(h),h},d.ByteBuffer=function(a){this.data="string"==typeof a?a:"",this.read=0},d.ByteBuffer.prototype.putInt32=function(a){this.data+=String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a)},d.ByteBuffer.prototype.getInt32=function(){var a=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,a},d.ByteBuffer.prototype.putBytes=function(a){this.data+=a},d.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},d.ByteBuffer.prototype.length=function(){return this.data.length-this.read},d.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},d.ByteBuffer.prototype.toHex=function(){for(var a="",b=this.read;b<this.data.length;++b){var c=this.data.charCodeAt(b);c<16&&(a+="0"),a+=c.toString(16)}return a};var e={_w:null};e.Algorithm=function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},e.Algorithm.prototype.start=function(){return e._w||(e._w=new Array(80)),e._createState()},e.Algorithm.prototype.writeMessageLength=function(a,b){a.putBytes(b.bytes())},e.Algorithm.prototype.digest=function(a,b){for(var c,d,f,g,h,i,j,k,l=b.length(),m=e._w;l>=64;){for(d=a.h0,f=a.h1,g=a.h2,h=a.h3,i=a.h4,k=0;k<16;++k)c=b.getInt32(),m[k]=c,j=h^f&(g^h),c=(d<<5|d>>>27)+j+i+1518500249+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;k<20;++k)c=m[k-3]^m[k-8]^m[k-14]^m[k-16],c=c<<1|c>>>31,m[k]=c,j=h^f&(g^h),c=(d<<5|d>>>27)+j+i+1518500249+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;k<32;++k)c=m[k-3]^m[k-8]^m[k-14]^m[k-16],c=c<<1|c>>>31,m[k]=c,j=f^g^h,c=(d<<5|d>>>27)+j+i+1859775393+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;k<40;++k)c=m[k-6]^m[k-16]^m[k-28]^m[k-32],c=c<<2|c>>>30,m[k]=c,j=f^g^h,c=(d<<5|d>>>27)+j+i+1859775393+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;k<60;++k)c=m[k-6]^m[k-16]^m[k-28]^m[k-32],c=c<<2|c>>>30,m[k]=c,j=f&g|h&(f^g),c=(d<<5|d>>>27)+j+i+2400959708+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;for(;k<80;++k)c=m[k-6]^m[k-16]^m[k-28]^m[k-32],c=c<<2|c>>>30,m[k]=c,j=f^g^h,c=(d<<5|d>>>27)+j+i+3395469782+c,i=h,h=g,g=f<<30|f>>>2,f=d,d=c;a.h0=a.h0+d|0,a.h1=a.h1+f|0,a.h2=a.h2+g|0,a.h3=a.h3+h|0,a.h4=a.h4+i|0,l-=64}return a},e._createState=function(){var a={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return a.copy=function(){var b=e._createState();return b.h0=a.h0,b.h1=a.h1,b.h2=a.h2,b.h3=a.h3,b.h4=a.h4,b},a.write=function(b){b.putInt32(a.h0),b.putInt32(a.h1),b.putInt32(a.h2),b.putInt32(a.h3),b.putInt32(a.h4)},a};var f={_k:null,_w:null};f.Algorithm=function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},f.Algorithm.prototype.start=function(){return f._k||f._init(),f._createState()},f.Algorithm.prototype.writeMessageLength=function(a,b){a.putBytes(b.bytes())},f.Algorithm.prototype.digest=function(a,b){for(var c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s=b.length(),t=f._k,u=f._w;s>=64;){for(j=0;j<16;++j)u[j]=b.getInt32();for(;j<64;++j)c=u[j-2],c=(c>>>17|c<<15)^(c>>>19|c<<13)^c>>>10,d=u[j-15],d=(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,u[j]=c+u[j-7]+d+u[j-16]|0;for(k=a.h0,l=a.h1,m=a.h2,n=a.h3,o=a.h4,p=a.h5,q=a.h6,r=a.h7,j=0;j<64;++j)g=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),h=q^o&(p^q),e=(k>>>2|k<<30)^(k>>>13|k<<19)^(k>>>22|k<<10),i=k&l|m&(k^l),c=r+g+h+t[j]+u[j],d=e+i,r=q,q=p,p=o,o=n+c|0,n=m,m=l,l=k,k=c+d|0;a.h0=a.h0+k|0,a.h1=a.h1+l|0,a.h2=a.h2+m|0,a.h3=a.h3+n|0,a.h4=a.h4+o|0,a.h5=a.h5+p|0,a.h6=a.h6+q|0,a.h7=a.h7+r|0,s-=64}return a},f._createState=function(){var a={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return a.copy=function(){var b=f._createState();return b.h0=a.h0,b.h1=a.h1,b.h2=a.h2,b.h3=a.h3,b.h4=a.h4,b.h5=a.h5,b.h6=a.h6,b.h7=a.h7,b},a.write=function(b){b.putInt32(a.h0),b.putInt32(a.h1),b.putInt32(a.h2),b.putInt32(a.h3),b.putInt32(a.h4),b.putInt32(a.h5),b.putInt32(a.h6),b.putInt32(a.h7)},a},f._init=function(){f._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],f._w=new Array(64)}}(f),!m)var Ka=function(){m=a("xmldom").XMLSerializer};if(b.url={},b.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},b.url.parse=function(a,c){for(var d={},e=b.url.parsers[c||"full"],f=e.regex.exec(a),g=e.keys.length;g--;)d[e.keys[g]]=void 0===f[g]?null:f[g];return d.normalizedPath=La(d.path,!!d.authority),d},f?b.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&b.useDocumentLoader("xhr"),f){b.use=function(c){switch(c){case"request":b.request=a("jsonld-request");break;default:throw new E("Unknown extension.","jsonld.UnknownExtension",{extension:c})}};var Ma={exports:{},filename:e};a("pkginfo")(Ma,"version"),b.version=Ma.exports.version}return b},i=function(){return h(function(){return i()})};!f&&"function"==typeof define&&define.amd?define([],function(){return h(i),i}):(h(i),"function"==typeof a&&void 0!==b&&b.exports&&(b.exports=i),g&&("undefined"==typeof jsonld?jsonld=jsonldjs=i:jsonldjs=i))}()}).call(this,a("7YKIPe"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/../node_modules/jsonld/js")},{"7YKIPe":10,crypto:25,"es6-promise":3,http:25,"jsonld-request":25,pkginfo:25,request:25,util:25,xmldom:25}],27:[function(a,b,c){var d=a;a=function(){};var c=b.exports={Lexer:a("./lib/N3Lexer"),Parser:a("./lib/N3Parser"),Writer:a("./lib/N3Writer"),Store:a("./lib/N3Store"),StreamParser:a("./lib/N3StreamParser"),StreamWriter:a("./lib/N3StreamWriter"),Util:a("./lib/N3Util")};Object.keys(c).forEach(function(a){Object.defineProperty(c,a,{configurable:!0,enumerable:!0,get:function(){return delete c[a],c[a]=d("./lib/N3"+a)}})})},{"./lib/N3Lexer":28,"./lib/N3Parser":29,"./lib/N3Store":30,"./lib/N3StreamParser":31,"./lib/N3StreamWriter":32,"./lib/N3Util":33,"./lib/N3Writer":34}],28:[function(a,b,c){function i(a){if(!(this instanceof i))return new i(a);if(a&&a.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var b=this;this._tokenize=this.tokenize,this.tokenize=function(a,c){this._tokenize(a,function(a,d){!a&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(d.type)?c&&c(a,d):c&&c(a||b._syntaxError(d.type,c=null))})}}}var d=String.fromCharCode,e="function"==typeof setImmediate?setImmediate:function(b){setTimeout(b,0)},f=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,g={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},h=/[\x00-\x20<>\\"\{\}\|\^\`]/;i.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(a,b){function o(b){a(b._syntaxError(/^\S*/.exec(c)[0]))}for(var c=this._input;;){for(var d;d=this._newline.exec(c);)c=c.substr(d[0].length,c.length),this._line++;if((d=this._whitespace.exec(c))&&(c=c.substr(d[0].length,c.length)),this._endOfFile.test(c))return b&&a(c=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=c;var m,e=this._line,f="",g="",i="",j=c[0],k=null,l=0,n=!1;switch(j){case"^":if(1===c.length)break;if("^"!==c[1])return o(this);if(this._prevTokenType="^",c=c.substr(2),"<"!==c[0]){n=!0;break}case"<":if(k=this._unescapedIri.exec(c))f="IRI",g=k[1];else if(k=this._iri.exec(c)){if(null===(m=this._unescape(k[1]))||h.test(m))return o(this);f="IRI",g=m}break;case"_":((k=this._blank.exec(c))||b&&(k=this._blank.exec(c+" ")))&&(f="prefixed",i="_",g=k[1]);break;case'"':case"'":if(k=this._unescapedString.exec(c))f="literal",g=k[0];else if(k=this._singleQuotedString.exec(c)){if(null===(m=this._unescape(k[0])))return o(this);f="literal",g=m.replace(/^'|'$/g,'"')}else if(k=this._tripleQuotedString.exec(c)){if(m=k[1]||k[2],this._line+=m.split(/\r\n|\r|\n/).length-1,null===(m=this._unescape(m)))return o(this);f="literal",g=m.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(k=this._langcode.exec(c))?(f="langcode",g=k[1]):(k=this._keyword.exec(c))&&(f=k[0]);break;case".":if(1===c.length?b:c[1]<"0"||c[1]>"9"){f=".",l=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(k=this._number.exec(c))&&(f="literal",g='"'+k[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(k[1]?"double":/^[+\-]?\d+$/.test(k[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(k=this._sparqlKeyword.exec(c))?f=k[0].toUpperCase():n=!0;break;case"f":case"t":(k=this._boolean.exec(c))?(f="literal",g='"'+k[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):n=!0;break;case"a":(k=this._shortPredicates.exec(c))?(f="abbreviation",g="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):n=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":l=1,f=j;break;default:n=!0}if(n&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(k=this._prefix.exec(c))?((k=this._prefixed.exec(c))||b&&(k=this._prefixed.exec(c+" ")))&&(f="prefixed",i=k[1]||"",g=this._unescape(k[2])):(f="prefix",g=k[1]||"")),"^"===this._prevTokenType&&(f="IRI"===f||"prefixed"===f?"type":""),!f)return b||!/^'''|^"""/.test(c)&&/\n|\r/.test(c)?o(this):this._input=c;a(null,{line:e,type:f,value:g,prefix:i}),this._prevTokenType=f,c=c.substr(l||k[0].length,c.length)}},_unescape:function(a){try{return a.replace(f,function(a,b,c,e){var f;if(b){if(f=parseInt(b,16),isNaN(f))throw new Error;return d(f)}if(c){if(f=parseInt(c,16),isNaN(f))throw new Error;return f<=65535?d(f):d(55296+(f-=65536)/1024,56320+(1023&f))}var h=g[e];if(!h)throw new Error;return h})}catch(a){return null}},_syntaxError:function(a){return this._input=null,new Error('Syntax error: unexpected "'+a+'" on line '+this._line+".")},tokenize:function(a,b){function d(a){null!==c._input&&(c._input+=a,c._tokenizeToEnd(b,!1))}function f(){null!==c._input&&c._tokenizeToEnd(b,!0)}var c=this;this._line=1,"string"==typeof a?(this._input=a,e(function(){c._tokenizeToEnd(b,!0)})):(this._input="",a&&"function"!=typeof a?("function"==typeof a.setEncoding&&a.setEncoding("utf8"),a.on("data",d),a.on("end",f)):(this.addChunk=d,this.end=f,b||(b=a)))}},b.exports=i},{}],29:[function(a,b,c){function n(a){if(!(this instanceof n))return new n(a);this._tripleStack=[],this._graph=null,a=a||{},this._setBase(a.documentIRI);var b="string"==typeof a.format&&a.format.match(/\w*$/)[0].toLowerCase(),c="turtle"===b,e="trig"===b,f=/triple/.test(b),g=/quad/.test(b),h=f||g;(this._supportsNamedGraphs=!c)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(c||e||f),h&&(this._base="",this._resolveIRI=function(a){return this._error("Disallowed relative IRI",a),this._callback=o,this._subject=null}),this._blankNodePrefix="string"!=typeof a.blankNodePrefix?"":"_:"+a.blankNodePrefix.replace(/^_:/,""),this._lexer=a.lexer||new d({lineMode:h})}function o(){}var d=a("./N3Lexer"),e="http://www.w3.org/1999/02/22-rdf-syntax-ns#",f=e+"nil",g=e+"first",h=e+"rest",i=/^[a-z][a-z0-9+.-]*:/i,j=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,k=/(?:^|\/)\.\.?(?:$|[\/#?])/,l=0,m=0;n._resetBlankNodeIds=function(){l=m=0},n.prototype={_setBase:function(a){if(a){if(a.indexOf("#")>=0)throw new Error("Invalid base IRI "+a)}else a=null;(this._base=a)&&(this._basePath=a.replace(/[^\/?]*(?:\?.*)?$/,""),a=a.match(j),this._baseRoot=a[0],this._baseScheme=a[1])},_readInTopContext:function(a){switch(a.type){case"eof":return null!==this._graph?this._error("Unclosed graph",a):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(a)}},_readSubject:function(a){switch(this._predicate=null,a.type){case"IRI":null===this._base||i.test(a.value)?this._subject=a.value:this._subject=this._resolveIRI(a);break;case"prefixed":var b=this._prefixes[a.prefix];if(void 0===b)return this._error('Undefined prefix "'+a.prefix+':"',a);this._subject=b+a.value;break;case"[":return this._subject="_:b"+m++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:f,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(a);default:return this._error("Expected subject but got "+a.type,a)}return this._readPredicateOrNamedGraph},_readPredicate:function(a){var b=a.type;switch(b){case"IRI":case"abbreviation":null===this._base||i.test(a.value)?this._predicate=a.value:this._predicate=this._resolveIRI(a);break;case"prefixed":if("_"===a.prefix)return this._error("Disallowed blank node as predicate",a);var c=this._prefixes[a.prefix];if(void 0===c)return this._error('Undefined prefix "'+a.prefix+':"',a);this._predicate=c+a.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+b,a):(this._subject=null,"]"===b?this._readBlankNodeTail(a):this._readPunctuation(a));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',a)}return this._readObject},_readObject:function(a){switch(a.type){case"IRI":null===this._base||i.test(a.value)?this._object=a.value:this._object=this._resolveIRI(a);break;case"prefixed":var b=this._prefixes[a.prefix];if(void 0===b)return this._error('Undefined prefix "'+a.prefix+':"',a);this._object=b+a.value;break;case"literal":return this._object=a.value,this._readDataTypeOrLang;case"[":var c="_:b"+m++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:c,type:"blank"}),this._subject=c,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:f,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',a)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(a){return"{"===a.type?this._readGraph(a):this._readPredicate(a)},_readGraph:function(a){return"{"!==a.type?this._error("Expected graph but got "+a.type,a):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(a){return"]"===a.type?(this._subject=null,this._readBlankNodeTail(a)):(this._predicate=null,this._readPredicate(a))},_readBlankNodeTail:function(a){if("]"!==a.type)return this._readBlankNodePunctuation(a);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var b=this._tripleStack.pop();return this._subject=b.subject,null!==b.object?(this._predicate=b.predicate,this._object=b.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(a){switch(a.type){case"type":var b;if(""===a.prefix)b=null===this._base||i.test(a.value)?a.value:this._resolveIRI(a);else{var c=this._prefixes[a.prefix];if(void 0===c)return this._error('Undefined prefix "'+a.prefix+':"',a);b=c+a.value}return this._object+="^^"+b,this._getTripleEndReader();case"langcode":return this._object+="@"+a.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,a)}},_readListItem:function(a){var b=null,c=null,d=this._subject,e=this._tripleStack,j=e[e.length-1],k=this._readListItem;switch(a.type){case"IRI":b=null===this._base||i.test(a.value)?a.value:this._resolveIRI(a);break;case"prefixed":var l=this._prefixes[a.prefix];if(void 0===l)return this._error('Undefined prefix "'+a.prefix+':"',a);b=l+a.value;break;case"literal":b=a.value,k=this._readDataTypeOrLang;break;case"[":c="_:b"+m++,b="_:b"+m++,e.push({subject:c,predicate:g,object:b,type:"blank"}),this._subject=b,k=this._readBlankNodeHead;break;case"(":c="_:b"+m++,e.push({subject:c,predicate:g,object:f,type:"list"}),this._subject=null,k=this._readListItem;break;case")":if(e.pop(),0!==e.length&&"list"===e[e.length-1].type&&this._callback(null,{subject:j.subject,predicate:j.predicate,object:j.object,graph:this._graph||""}),this._subject=j.subject,null===j.predicate){if(k=this._readPredicate,j.subject===f)return k}else if(this._predicate=j.predicate,this._object=j.object,k=this._getTripleEndReader(),j.object===f)return k;c=f;break;default:return this._error('Expected list item instead of "'+a.type+'"',a)}return null===c&&(this._subject=c="_:b"+m++),null===d?j.object===f?j.object=c:j.subject=c:this._callback(null,{subject:d,predicate:h,object:c,graph:this._graph||""}),null!==b&&this._callback(null,{subject:c,predicate:g,object:b,graph:this._graph||""}),k},_readPunctuation:function(a){var b,c=this._subject,d=this._graph;switch(a.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",a);this._graph=null;case".":this._subject=null,b=this._readInTopContext;break;case";":b=this._readPredicate;break;case",":b=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){d=null===this._base||i.test(a.value)?a.value:this._resolveIRI(a),c=this._subject,b=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){var e=this._prefixes[a.prefix];if(void 0===e)return this._error('Undefined prefix "'+a.prefix+':"',a);d=e+a.value,b=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',a)}return null!==c&&this._callback(null,{subject:c,predicate:this._predicate,object:this._object,graph:d||""}),b},_readBlankNodePunctuation:function(a){var b;switch(a.type){case";":b=this._readPredicate;break;case",":b=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',a)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),b},_readQuadPunctuation:function(a){return"."!==a.type?this._error("Expected dot to follow quad",a):this._readInTopContext},_readPrefix:function(a){return"prefix"!==a.type?this._error("Expected prefix to follow @prefix",a):(this._prefix=a.value,this._readPrefixIRI)},_readPrefixIRI:function(a){if("IRI"!==a.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',a);var b;return b=null===this._base||i.test(a.value)?a.value:this._resolveIRI(a),this._prefixes[this._prefix]=b,this._prefixCallback(this._prefix,b),this._readDeclarationPunctuation},_readBaseIRI:function(a){if("IRI"!==a.type)return this._error("Expected IRI to follow base declaration",a);try{this._setBase(null===this._base||i.test(a.value)?a.value:this._resolveIRI(a))}catch(b){this._error(b.message,a)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(a){switch(a.type){case"IRI":case"prefixed":return this._readSubject(a),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",a)}},_readNamedGraphBlankLabel:function(a){return"]"!==a.type?this._error("Invalid graph label",a):(this._subject="_:b"+m++,this._readGraph)},_readDeclarationPunctuation:function(a){return this._sparqlStyle?this._readInTopContext(a):"."!==a.type?this._error("Expected declaration to end with a dot",a):this._readInTopContext},_getTripleEndReader:function(){var a=this._tripleStack;if(0===a.length)return this._readPunctuation;switch(a[a.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(a,b){this._callback(new Error(a+" at line "+b.line+"."))},_resolveIRI:function(a){var b=a.value;switch(b[0]){case void 0:return this._base;case"#":return this._base+b;case"?":return this._base.replace(/(?:\?.*)?$/,b);case"/":return("/"===b[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(b);default:return this._removeDotSegments(this._basePath+b)}},_removeDotSegments:function(a){if(!k.test(a))return a;for(var b="",c=a.length,d=-1,e=-1,f=0,g="/";d<c;){switch(g){case":":if(e<0&&"/"===a[++d]&&"/"===a[++d])for(;(e=d+1)<c&&"/"!==a[e];)d=e;break;case"?":case"#":d=c;break;case"/":if("."===a[d+1])switch(g=a[++d+1]){case"/":b+=a.substring(f,d-1),f=d+1;break;case void 0:case"?":case"#":return b+a.substring(f,d)+a.substr(d+1);case".":if(void 0===(g=a[++d+1])||"/"===g||"?"===g||"#"===g){if(b+=a.substring(f,d-2),(f=b.lastIndexOf("/"))>=e&&(b=b.substr(0,f)),"/"!==g)return b+"/"+a.substr(d+1);f=d+1}}}g=a[++d]}return b+a.substring(f)},parse:function(a,b,c){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+l+++"_","function"==typeof a&&(c=b,b=a,a=null),this._callback=b||o,this._prefixCallback=c||o;var d=this;this._lexer.tokenize(a,function(a,b){null!==a?(d._callback(a),d._callback=o):void 0!==d._readCallback&&(d._readCallback=d._readCallback(b))}),a||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},b.exports=n},{"./N3Lexer":28}],30:[function(a,b,c){function e(a,b){if(!(this instanceof e))return new e(a,b);this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,b||!a||a[0]||(b=a,a=null),b=b||{},this._prefixes=Object.create(null),b.prefixes&&this.addPrefixes(b.prefixes),this.defaultGraph=b.defaultGraph||"http://example.org/#defaultGraph",a&&this.addTriples(a)}var d=a("./N3Util").expandPrefixedName;e.prototype={get size(){var a=this._size;if(null!==a)return a;var c,d,b=this._graphs;for(var e in b)for(var f in c=b[e].subjects)for(var g in d=c[f])a+=Object.keys(d[g]).length;return this._size=a},_addToIndex:function(a,b,c,d){var e=a[b]||(a[b]={}),f=e[c]||(e[c]={}),g=d in f;return g||(f[d]=null),!g},_removeFromIndex:function(a,b,c,d){var g,e=a[b],f=e[c];delete f[d];for(g in f)return;delete e[c];for(g in e)return;delete a[b]},_findInIndex:function(a,b,c,d,e,f,g,h){var j,k,l,i=[],m=!b+!c+!d,n=m>1?Object.keys(this._ids):this._entities;b&&((j=a,a={})[b]=j[b]);for(var o in a){var p=n[o];if(k=a[o]){c&&((j=k,k={})[c]=j[c]);for(var q in k){var r=n[q];if(l=k[q])for(var s=(d?d in l?[d]:[]:Object.keys(l)),t=s.length-1;t>=0;t--){var u={subject:"",predicate:"",object:"",graph:h};u[e]=p,u[f]=r,u[g]=n[s[t]],i.push(u)}}}}return i},_countInIndex:function(a,b,c,d){var f,g,h,e=0;b&&((f=a,a={})[b]=f[b]);for(var i in a)if(g=a[i]){c&&((f=g,g={})[c]=f[c]);for(var j in g)(h=g[j])&&(d?d in h&&e++:e+=Object.keys(h).length)}return e},addTriple:function(a,b,c,d){b||(d=a.graph,c=a.object,b=a.predicate,a=a.subject),d=d||this.defaultGraph;var e=this._graphs[d];e||(e=this._graphs[d]={subjects:{},predicates:{},objects:{}},Object.freeze(e));var f=this._ids,g=this._entities;a=f[a]||(f[g[++this._id]=a]=this._id),b=f[b]||(f[g[++this._id]=b]=this._id),c=f[c]||(f[g[++this._id]=c]=this._id);var h=this._addToIndex(e.subjects,a,b,c);return this._addToIndex(e.predicates,b,c,a),this._addToIndex(e.objects,c,a,b),this._size=null,h},addTriples:function(a){for(var b=a.length-1;b>=0;b--)this.addTriple(a[b])},addPrefix:function(a,b){this._prefixes[a]=b},addPrefixes:function(a){for(var b in a)this.addPrefix(b,a[b])},removeTriple:function(a,b,c,d){b||(d=a.graph,c=a.object,b=a.predicate,a=a.subject),d=d||this.defaultGraph;var e,f=this._ids,g=this._graphs;if(!(a=f[a]))return!1;if(!(b=f[b]))return!1;if(!(c=f[c]))return!1;if(!(e=g[d]))return!1;var h,i;if(!(h=e.subjects[a]))return!1;if(!(i=h[b]))return!1;if(!(c in i))return!1;this._removeFromIndex(e.subjects,a,b,c),this._removeFromIndex(e.predicates,b,c,a),this._removeFromIndex(e.objects,c,a,b),null!==this._size&&this._size--;for(a in e.subjects)return!0;return delete g[d],!0},removeTriples:function(a){for(var b=a.length-1;b>=0;b--)this.removeTriple(a[b])},find:function(a,b,c,e){var f=this._prefixes;return this.findByIRI(d(a,f),d(b,f),d(c,f),d(e,f))},findByIRI:function(a,b,c,d){var g,i,j,k,e=[],f={},h=this._ids;d?f[d]=this._graphs[d]:f=this._graphs;for(var l in f)if(g=f[l]){if(a&&!(i=h[a]))return e;if(b&&!(j=h[b]))return e;if(c&&!(k=h[c]))return e;i?k?e.push(this._findInIndex(g.objects,k,i,j,"object","subject","predicate",l)):e.push(this._findInIndex(g.subjects,i,j,null,"subject","predicate","object",l)):j?e.push(this._findInIndex(g.predicates,j,k,null,"predicate","object","subject",l)):k?e.push(this._findInIndex(g.objects,k,null,null,"object","subject","predicate",l)):e.push(this._findInIndex(g.subjects,null,null,null,"subject","predicate","object",l))}return 1===e.length?e[0]:e.concat.apply([],e)},count:function(a,b,c,e){var f=this._prefixes;return this.countByIRI(d(a,f),d(b,f),d(c,f),d(e,f))},countByIRI:function(a,b,c,d){d=d||this.defaultGraph;var e=this._graphs[d],f=this._ids;return e?a&&!(a=f[a])?0:b&&!(b=f[b])?0:c&&!(c=f[c])?0:a?c?this._countInIndex(e.objects,c,a,b):this._countInIndex(e.subjects,a,b,c):b?this._countInIndex(e.predicates,b,c,a):this._countInIndex(e.objects,c,a,b):0},createBlankNode:function(a){var b,c;if(a)for(b=a="_:"+a,c=1;this._ids[b];)b=a+c++;else do{b="_:b"+this._blankNodeIndex++}while(this._ids[b]);return this._ids[b]=++this._id,b}},b.exports=e},{"./N3Util":33}],31:[function(a,b,c){function g(a){if(!(this instanceof g))return new g(a);d.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var b=this,c=new f(a);c.parse(function(a,c){c&&b.push(c)||a&&b.emit("error",a)},this.emit.bind(this,"prefix")),this._transform=function(a,b,d){c.addChunk(a),d()},this._flush=function(a){c.end(),a()}}var d=a("stream").Transform,e=a("util"),f=a("./N3Parser.js");e.inherits(g,d),b.exports=g},{"./N3Parser.js":29,stream:15,util:38}],32:[function(a,b,c){function g(a){if(!(this instanceof g))return new g(a);d.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var b=this,c=new f({write:function(a,c,d){b.push(a),d&&d()},end:function(a){b.push(null),a&&a()}},a);this._transform=function(a,b,d){c.addTriple(a,d)},this._flush=function(a){c.end(a)}}var d=a("stream").Transform,e=a("util"),f=a("./N3Writer.js");e.inherits(g,d),b.exports=g},{"./N3Writer.js":34,stream:15,util:38}],33:[function(a,b,c){function k(a,b){for(var c in j)b?a.prototype[c]=l(j[c]):a[c]=j[c];return a}function l(a){return function(b){return a(this,b)}}var d="http://www.w3.org/2001/XMLSchema#",e=d+"string",f=d+"integer",g=d+"decimal",h=d+"boolean",i="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",j={isIRI:function(a){if(!a)return a;var b=a[0];return'"'!==b&&"_"!==b},isLiteral:function(a){return a&&'"'===a[0]},isBlank:function(a){return a&&"_:"===a.substr(0,2)},getLiteralValue:function(a){var b=/^"([^]*)"/.exec(a);if(!b)throw new Error(a+" is not a literal");return b[1]},getLiteralType:function(a){var b=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(a);if(!b)throw new Error(a+" is not a literal");return b[1]||(b[2]?i:e)},getLiteralLanguage:function(a){var b=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(a);if(!b)throw new Error(a+" is not a literal");return b[1]?b[1].toLowerCase():""},isPrefixedName:function(a){return a&&/^[^:\/"']*:[^:\/"']+$/.test(a)},expandPrefixedName:function(a,b){var d,e,f,c=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(a);return c&&(d=c[1],e=b[d],f=c.index),void 0===e?a:0===f?e+a.substr(d.length+1):a.substr(0,f+3)+e+a.substr(f+d.length+4)},createIRI:function(a){return a&&'"'===a[0]?j.getLiteralValue(a):a},createLiteral:function(a,b){if(!b)switch(typeof a){case"boolean":b=h;break;case"number":if(isFinite(a)){b=a%1==0?f:g;break}default:return'"'+a+'"'}return'"'+a+(/^[a-z]+(-[a-z0-9]+)*$/i.test(b)?'"@'+b.toLowerCase():'"^^'+b)},prefix:function(a){return j.prefixes({"":a})("")},prefixes:function(a){function d(a,c){if(c||!(a in b)){var d=Object.create(null);c=c||"",b[a]=function(a){return d[a]||(d[a]=c+a)}}return b[a]}var b=Object.create(null);for(var c in a)d(c,a[c]);return d}};b.exports=k(k)},{}],34:[function(a,b,c){function j(a,b){if(!(this instanceof j))return new j(a,b);if(a&&"function"!=typeof a.write&&(b=a,a=null),b=b||{},a)this._outputStream=a,this._endStream=void 0===b.end||!!b.end;else{var c="";this._outputStream={write:function(a,b,d){c+=a,d&&d()},end:function(a){a&&a(null,c)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(b.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),b.prefixes&&this.addPrefixes(b.prefixes))}function k(a){var b=i[a];return void 0===b&&(1===a.length?(b=a.charCodeAt(0).toString(16),b="\\u0000".substr(0,6-b.length)+b):(b=(1024*(a.charCodeAt(0)-55296)+a.charCodeAt(1)+9216).toString(16),b="\\U00000000".substr(0,10-b.length)+b)),b}var d=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,e="http://www.w3.org/1999/02/22-rdf-syntax-ns#",f=e+"type",g=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,h=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,i={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};j.prototype={_write:function(a,b){this._outputStream.write(a,"utf8",b)},_writeTriple:function(a,b,c,d,e){try{this._graph!==d&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(d?this._encodeIriOrBlankNode(d)+" {\n":"")),this._subject=null,this._graph="["!==d[0]?d:"]"),this._subject===a?this._predicate===b?this._write(", "+this._encodeObject(c),e):this._write(";\n    "+this._encodePredicate(this._predicate=b)+" "+this._encodeObject(c),e):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=a)+" "+this._encodePredicate(this._predicate=b)+" "+this._encodeObject(c),e)}catch(a){e&&e(a)}},_writeTripleLine:function(a,b,c,d,e){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(a)+" "+this._encodeIriOrBlankNode(b)+" "+this._encodeObject(c)+(d?" "+this._encodeIriOrBlankNode(d)+".\n":".\n"),e)}catch(a){e&&e(a)}},_encodeIriOrBlankNode:function(a){var b=a[0];if("["===b||"("===b||"_"===b&&":"===a[1])return a;g.test(a)&&(a=a.replace(h,k));var c=this._prefixRegex.exec(a);return c?c[1]?this._prefixIRIs[c[1]]+c[2]:a:"<"+a+">"},_encodeLiteral:function(a,b,c){return g.test(a)&&(a=a.replace(h,k)),c?'"'+a+'"@'+c:b?'"'+a+'"^^'+this._encodeIriOrBlankNode(b):'"'+a+'"'},_encodeSubject:function(a){if('"'===a[0])throw new Error("A literal as subject is not allowed: "+a);return"["===a[0]&&(this._subject="]"),this._encodeIriOrBlankNode(a)},_encodePredicate:function(a){if('"'===a[0])throw new Error("A literal as predicate is not allowed: "+a);return a===f?"a":this._encodeIriOrBlankNode(a)},_encodeObject:function(a){if('"'!==a[0])return this._encodeIriOrBlankNode(a);var b=d.exec(a);if(!b)throw new Error("Invalid literal: "+a);return this._encodeLiteral(b[1],b[2],b[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(a,b,c,d,e){void 0===c?this._writeTriple(a.subject,a.predicate,a.object,a.graph||"",b):"string"!=typeof d?this._writeTriple(a,b,c,"",d):this._writeTriple(a,b,c,d,e)},addTriples:function(a){for(var b=0;b<a.length;b++)this.addTriple(a[b])},addPrefix:function(a,b,c){var d={};d[a]=b,this.addPrefixes(d,c)},addPrefixes:function(a,b){var c=this._prefixIRIs,d=!1;for(var e in a){var f=a[e];/[#\/]$/.test(f)&&c[f]!==(e+=":")&&(d=!0,c[f]=e,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+e+" <"+f+">.\n"))}if(d){var g="",h="";for(var i in c)g+=g?"|"+i:i,h+=(h?"|":"")+c[i];g=g.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+h+")[^/]*$|^("+g+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(d?"\n":"",b)},blank:function(a,b){var d,e,c=a;switch(void 0===a?c=[]:"string"==typeof a?c=[{predicate:a,object:b}]:"length"in a||(c=[a]),e=c.length){case 0:return"[]";case 1:if(d=c[0],"["!==d.object[0])return"[ "+this._encodePredicate(d.predicate)+" "+this._encodeObject(d.object)+" ]";default:for(var f="[",g=0;g<e;g++)d=c[g],d.predicate===a?f+=", "+this._encodeObject(d.object):(f+=(g?";\n  ":"\n  ")+this._encodePredicate(d.predicate)+" "+this._encodeObject(d.object),a=d.predicate);return f+"\n]"}},list:function(a){for(var b=a&&a.length||0,c=new Array(b),d=0;d<b;d++)c[d]=this._encodeObject(a[d]);return"("+c.join(" ")+")"},_prefixRegex:/$0^/,end:function(a){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var b=a&&function(c,d){b=null,a(c,d)};if(this._endStream)try{return this._outputStream.end(b)}catch(a){}b&&b()}},b.exports=j},{}],35:[function(a,b,c){(function(a){!function(d){function z(a){throw RangeError(u[a])}function A(a,b){for(var c=a.length;c--;)a[c]=b(a[c]);return a}function B(a,b){return A(a.split(t),b).join(".")}function C(a){for(var e,f,b=[],c=0,d=a.length;c<d;)e=a.charCodeAt(c++),e>=55296&&e<=56319&&c<d?(f=a.charCodeAt(c++),56320==(64512&f)?b.push(((1023&e)<<10)+(1023&f)+65536):(b.push(e),c--)):b.push(e);return b}function D(a){return A(a,function(a){var b="";return a>65535&&(a-=65536,b+=x(a>>>10&1023|55296),a=56320|1023&a),b+=x(a)}).join("")}function E(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:j}function F(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function G(a,b,c){var d=0;for(a=c?w(a/n):a>>1,a+=w(a/b);a>v*l>>1;d+=j)a=w(a/v);return w(d+(v+1)*a/(a+m))}function H(a){var d,h,m,n,r,s,t,u,v,x,b=[],c=a.length,e=0,f=p,g=o;for(h=a.lastIndexOf(q),h<0&&(h=0),m=0;m<h;++m)a.charCodeAt(m)>=128&&z("not-basic"),b.push(a.charCodeAt(m));for(n=h>0?h+1:0;n<c;){for(r=e,s=1,t=j;n>=c&&z("invalid-input"),u=E(a.charCodeAt(n++)),(u>=j||u>w((i-e)/s))&&z("overflow"),e+=u*s,v=t<=g?k:t>=g+l?l:t-g,!(u<v);t+=j)x=j-v,s>w(i/x)&&z("overflow"),s*=x;d=b.length+1,g=G(e-r,d,0==r),w(e/d)>i-f&&z("overflow"),f+=w(e/d),e%=d,b.splice(e++,0,f)}return D(b)}function I(a){var b,c,d,e,f,g,h,m,n,r,s,u,v,y,A,t=[];for(a=C(a),u=a.length,b=p,c=0,f=o,g=0;g<u;++g)(s=a[g])<128&&t.push(x(s));for(d=e=t.length,e&&t.push(q);d<u;){for(h=i,g=0;g<u;++g)(s=a[g])>=b&&s<h&&(h=s);for(v=d+1,h-b>w((i-c)/v)&&z("overflow"),c+=(h-b)*v,b=h,g=0;g<u;++g)if(s=a[g],s<b&&++c>i&&z("overflow"),s==b){for(m=c,n=j;r=n<=f?k:n>=f+l?l:n-f,!(m<r);n+=j)A=m-r,y=j-r,t.push(x(F(r+A%y,0))),m=w(A/y);t.push(x(F(m,0))),f=G(c,v,d==e),c=0,++d}++c,++b}return t.join("")}function J(a){return B(a,function(a){return r.test(a)?H(a.slice(4).toLowerCase()):a})}function K(a){return B(a,function(a){return s.test(a)?"xn--"+I(a):a})}var e="object"==typeof c&&c,f="object"==typeof b&&b&&b.exports==e&&b,g="object"==typeof a&&a;g.global!==g&&g.window!==g||(d=g);var h,y,i=2147483647,j=36,k=1,l=26,m=38,n=700,o=72,p=128,q="-",r=/^xn--/,s=/[^ -~]/,t=/\x2E|\u3002|\uFF0E|\uFF61/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=j-k,w=Math.floor,x=String.fromCharCode;if(h={version:"1.2.4",ucs2:{decode:C,encode:D},decode:H,encode:I,toASCII:K,toUnicode:J},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return h});else if(e&&!e.nodeType)if(f)f.exports=h;else for(y in h)h.hasOwnProperty(y)&&(e[y]=h[y]);else d.punycode=h}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],36:[function(a,b,c){function e(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function t(a,b,c){if(a&&y(a)&&a instanceof e)return a;var d=new e;return d.parse(a,b,c),d}function u(a){return x(a)&&(a=t(a)),a instanceof e?a.format():e.prototype.format.call(a)}function v(a,b){return t(a,!1,!0).resolve(b)}function w(a,b){return a?t(a,!1,!0).resolveObject(b):b}function x(a){return"string"==typeof a}function y(a){return"object"==typeof a&&null!==a}function z(a){return null===a}function A(a){return null==a}var d=a("punycode");c.parse=t,c.resolve=v,c.resolveObject=w,c.format=u,c.Url=e;var f=/^([a-z0-9.+-]+:)/i,g=/:[0-9]*$/,h=["<",">",'"',"`"," ","\r","\n","\t"],i=["{","}","|","\\","^","`"].concat(h),j=["'"].concat(i),k=["%","/","?",";","#"].concat(j),l=["/","?","#"],n=/^[a-z0-9A-Z_-]{0,63}$/,o=/^([a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},q={javascript:!0,"javascript:":!0},r={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},s=a("querystring");e.prototype.parse=function(a,b,c){if(!x(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var e=a;e=e.trim();var g=f.exec(e);if(g){g=g[0];var h=g.toLowerCase();this.protocol=h,e=e.substr(g.length)}if(c||g||e.match(/^\/\/[^@\/]+@[^@\/]+/)){var i="//"===e.substr(0,2);!i||g&&q[g]||(e=e.substr(2),this.slashes=!0)}if(!q[g]&&(i||g&&!r[g])){for(var t=-1,u=0;u<l.length;u++){var v=e.indexOf(l[u]);-1!==v&&(-1===t||v<t)&&(t=v)}var w,y;y=-1===t?e.lastIndexOf("@"):e.lastIndexOf("@",t),-1!==y&&(w=e.slice(0,y),e=e.slice(y+1),this.auth=decodeURIComponent(w)),t=-1;for(var u=0;u<k.length;u++){var v=e.indexOf(k[u]);-1!==v&&(-1===t||v<t)&&(t=v)}-1===t&&(t=e.length),this.host=e.slice(0,t),e=e.slice(t),this.parseHost(),this.hostname=this.hostname||"";var z="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!z)for(var A=this.hostname.split(/\./),u=0,B=A.length;u<B;u++){var C=A[u];if(C&&!C.match(n)){for(var D="",E=0,F=C.length;E<F;E++)C.charCodeAt(E)>127?D+="x":D+=C[E];if(!D.match(n)){var G=A.slice(0,u),H=A.slice(u+1),I=C.match(o);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(e="/"+H.join(".")+e),this.hostname=G.join(".");break}}}if(this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),!z){for(var J=this.hostname.split("."),K=[],u=0;u<J.length;++u){var L=J[u];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+d.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,z&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==e[0]&&(e="/"+e))}if(!p[h])for(var u=0,B=j.length;u<B;u++){var O=j[u],P=encodeURIComponent(O);P===O&&(P=escape(O)),e=e.split(O).join(P)}var Q=e.indexOf("#");-1!==Q&&(this.hash=e.substr(Q),e=e.slice(0,Q));var R=e.indexOf("?");if(-1!==R?(this.search=e.substr(R),this.query=e.substr(R+1),b&&(this.query=s.parse(this.query)),e=e.slice(0,R)):b&&(this.search="",this.query={}),e&&(this.pathname=e),r[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},e.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&y(this.query)&&Object.keys(this.query).length&&(f=s.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||r[b])&&!1!==e?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},e.prototype.resolve=function(a){return this.resolveObject(t(a,!1,!0)).format()},e.prototype.resolveObject=function(a){if(x(a)){var b=new e;b.parse(a,!1,!0),a=b}var c=new e;if(Object.keys(this).forEach(function(a){c[a]=this[a]},this),c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(c[b]=a[b])}),r[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c;if(a.protocol&&a.protocol!==c.protocol){if(!r[a.protocol])return Object.keys(a).forEach(function(b){c[b]=a[b]}),c.href=c.format(),c;if(c.protocol=a.protocol,a.host||q[a.protocol])c.pathname=a.pathname;else{for(var d=(a.pathname||"").split("/");d.length&&!(a.host=d.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),c.pathname=d.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var f=c.pathname||"",g=c.search||"";c.path=f+g}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var h=c.pathname&&"/"===c.pathname.charAt(0),i=a.host||a.pathname&&"/"===a.pathname.charAt(0),j=i||h||c.host&&a.pathname,k=j,l=c.pathname&&c.pathname.split("/")||[],d=a.pathname&&a.pathname.split("/")||[],m=c.protocol&&!r[c.protocol];if(m&&(c.hostname="",c.port=null,c.host&&(""===l[0]?l[0]=c.host:l.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===d[0]?d[0]=a.host:d.unshift(a.host)),a.host=null),j=j&&(""===d[0]||""===l[0])),i)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,l=d;else if(d.length)l||(l=[]),l.pop(),l=l.concat(d),c.search=a.search,c.query=a.query;else if(!A(a.search)){if(m){c.hostname=c.host=l.shift();var n=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");n&&(c.auth=n.shift(),c.host=c.hostname=n.shift())}return c.search=a.search,c.query=a.query,z(c.pathname)&&z(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!l.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var o=l.slice(-1)[0],p=(c.host||a.host)&&("."===o||".."===o)||""===o,s=0,t=l.length;t>=0;t--)o=l[t],"."==o?l.splice(t,1):".."===o?(l.splice(t,1),s++):s&&(l.splice(t,1),s--);if(!j&&!k)for(;s--;s)l.unshift("..");!j||""===l[0]||l[0]&&"/"===l[0].charAt(0)||l.unshift(""),p&&"/"!==l.join("/").substr(-1)&&l.push("");var u=""===l[0]||l[0]&&"/"===l[0].charAt(0);if(m){c.hostname=c.host=u?"":l.length?l.shift():"";var n=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");n&&(c.auth=n.shift(),c.host=c.hostname=n.shift())}return j=j||c.host&&l.length,j&&!u&&l.unshift(""),l.length?c.pathname=l.join("/"):(c.pathname=null,c.path=null),z(c.pathname)&&z(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},e.prototype.parseHost=function(){var a=this.host,b=g.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{punycode:35,querystring:13}],37:[function(a,b,c){b.exports=function(b){return b&&"object"==typeof b&&"function"==typeof b.copy&&"function"==typeof b.fill&&"function"==typeof b.readUInt8}},{}],38:[function(a,b,c){(function(b,d){function h(a,b){var d={seen:[],stylize:j};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),s(b)?d.showHidden=b:b&&c._extend(d,b),y(d.showHidden)&&(d.showHidden=!1),y(d.depth)&&(d.depth=2),y(d.colors)&&(d.colors=!1),y(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=i),l(d,a,d.depth)}function i(a,b){var c=h.styles[b];return c?"["+h.colors[c][0]+"m"+a+"["+h.colors[c][1]+"m":a}function j(a,b){return a}function k(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function l(a,b,d){if(a.customInspect&&b&&D(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return w(e)||(e=l(a,e,d)),e}var f=m(a,b);if(f)return f;var g=Object.keys(b),h=k(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),C(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return n(b);if(0===g.length){if(D(b)){var i=b.name?": "+b.name:"";return a.stylize("[Function"+i+"]","special")}if(z(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(B(b))return a.stylize(Date.prototype.toString.call(b),"date");if(C(b))return n(b)}var j="",s=!1,t=["{","}"];if(r(b)&&(s=!0,t=["[","]"]),D(b)){j=" [Function"+(b.name?": "+b.name:"")+"]"}if(z(b)&&(j=" "+RegExp.prototype.toString.call(b)),B(b)&&(j=" "+Date.prototype.toUTCString.call(b)),C(b)&&(j=" "+n(b)),0===g.length&&(!s||0==b.length))return t[0]+j+t[1];if(d<0)return z(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var v;return v=s?o(a,b,d,h,g):g.map(function(c){return p(a,b,d,h,c,s)}),a.seen.pop(),q(v,j,t)}function m(a,b){if(y(b))return a.stylize("undefined","undefined");if(w(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return v(b)?a.stylize(""+b,"number"):s(b)?a.stylize(""+b,"boolean"):t(b)?a.stylize("null","null"):void 0}function n(a){return"["+Error.prototype.toString.call(a)+"]"}function o(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)J(b,String(g))?f.push(p(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(p(a,b,c,d,e,!0))}),f}function p(a,b,c,d,e,f){var g,h,i;if(i=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},i.get?h=i.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):i.set&&(h=a.stylize("[Setter]","special")),J(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(i.value)<0?(h=t(c)?l(a,i.value,null):l(a,i.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),y(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function q(a,b,c){var d=0;return a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function r(a){return Array.isArray(a)}function s(a){return"boolean"==typeof a}function t(a){return null===a}function u(a){return null==a}function v(a){return"number"==typeof a}function w(a){return"string"==typeof a}function x(a){return"symbol"==typeof a}function y(a){return void 0===a}function z(a){return A(a)&&"[object RegExp]"===F(a)}function A(a){return"object"==typeof a&&null!==a}function B(a){return A(a)&&"[object Date]"===F(a)}function C(a){return A(a)&&("[object Error]"===F(a)||a instanceof Error)}function D(a){return"function"==typeof a}function E(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||void 0===a}function F(a){return Object.prototype.toString.call(a)}function G(a){return a<10?"0"+a.toString(10):a.toString(10)}function I(){var a=new Date,b=[G(a.getHours()),G(a.getMinutes()),G(a.getSeconds())].join(":");return[a.getDate(),H[a.getMonth()],b].join(" ")}function J(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var e=/%[sdj%]/g;c.format=function(a){if(!w(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(h(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(e,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(a){return"[Circular]"}default:return a}}),i=d[c];c<f;i=d[++c])t(i)||!A(i)?g+=" "+i:g+=" "+h(i);return g},c.deprecate=function(a,e){function g(){if(!f){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),f=!0}return a.apply(this,arguments)}if(y(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(!0===b.noDeprecation)return a;var f=!1;return g};var g,f={};c.debuglog=function(a){if(y(g)&&(g=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!f[a])if(new RegExp("\\b"+a+"\\b","i").test(g)){var d=b.pid;f[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else f[a]=function(){};return f[a]},c.inspect=h,h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=r,c.isBoolean=s,c.isNull=t,c.isNullOrUndefined=u,c.isNumber=v,c.isString=w,c.isSymbol=x,c.isUndefined=y,c.isRegExp=z,c.isObject=A,c.isDate=B,c.isError=C,c.isFunction=D,c.isPrimitive=E,c.isBuffer=a("./support/isBuffer");var H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",I(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!A(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("7YKIPe"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":37,"7YKIPe":10,inherits:24}],39:[function(a,b,c){function g(a,b){this.name="NonSupportedSparqlFeatureError",this.feature=a,this.message=b||"SPARQL feature "+a+" non supported"}function h(a){this.name=ParserError,this.message=a||"Error parsing SPARQL query"}var d=a("./parser"),e=a("./utils"),f=e;g.prototype=new Error,g.constructor=g,h.prototype=new Error,h.constructor=h,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(a){return d.parse(a)},AbstractQueryTree.prototype.parseExecutableUnit=function(a){if("select"===a.kind)return this.parseSelect(a);if("ask"===a.kind)return this.parseSelect(a);if("modify"===a.kind)return this.parseSelect(a);if("construct"===a.kind)return this.parseSelect(a);if("insertdata"===a.kind)return this.parseInsertData(a);if("deletedata"===a.kind)return this.parseInsertData(a);if("load"===a.kind)return a;if("clear"===a.kind)return a;if("drop"===a.kind)return a;if("create"===a.kind)return a;throw new Error("unknown executable unit: "+a.kind)},AbstractQueryTree.prototype.parseSelect=function(a){if(null==a)return console.log("error parsing query"),null;var b={freshCounter:0};return a.pattern=this.build(a.pattern,b),a},AbstractQueryTree.prototype.parseInsertData=function(a){return null==a?(console.log("error parsing query"),null):a},AbstractQueryTree.prototype.build=function(a,b){if("groupgraphpattern"===a.token)return this._buildGroupGraphPattern(a,b);if("basicgraphpattern"===a.token){var c={kind:"BGP",value:a.triplesContext};return c=AbstractQueryTree.translatePathExpressionsInBGP(c,b)}if("graphunionpattern"===a.token){return{kind:"UNION",value:[this.build(a.value[0],b),this.build(a.value[1],b)]}}if("graphgraphpattern"===a.token){return{kind:"GRAPH",value:this.build(a.value,b),graph:a.graph}}throw null!=a.token?new g(a.token,"Non implemented SPARQL graph pattern: '"+a.token+"'"):new h("Error parsing graph pattern: '"+JSON.stringify(a)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(a,b){for(var c,e,g,d=[],h=0;h<a.value.length;h++)if(a.value[h].predicate&&"path"===a.value[h].predicate.token){c=a.value[h],e=a.value.slice(h+1);var i=AbstractQueryTree.translatePathExpression(c,b),j=null;if("BGP"!==i.kind){if("ZERO_OR_MORE_PATH"===i.kind||"ONE_OR_MORE_PATH"===i.kind){if(g=d.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:d},rvalue:i}:i,"ZERO_OR_MORE_PATH"===i.kind)if("var"===i.y.token&&0===i.y.value.indexOf("fresh:")&&"var"===i.x.token&&0===i.x.value.indexOf("fresh:"))for(var k=0;k<a.value.length;k++)a.value[k].object&&"var"===a.value[k].object.token&&a.value[k].object.value===i.x.value&&(j=f.clone(a.value[k],!0),j.object=i.y);else if("var"===i.y.token&&0===i.y.value.indexOf("fresh:"))for(var k=0;k<a.value.length;k++)a.value[k].subject&&"var"===a.value[k].subject.token&&a.value[k].subject.value===i.y.value&&(j=f.clone(a.value[k],!0),j.subject=i.x);if(e.length>0){var l=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:e},b);if(null!=j){var m=d.concat([j]).concat(e);return{kind:"UNION",value:[{kind:"JOIN",lvalue:g,rvalue:l},{kind:"BGP",value:m}]}}return{kind:"JOIN",lvalue:g,rvalue:l}}return g}return i}d=d.concat(i.value)}else d.push(a.value[h]);return a.value=d,a},AbstractQueryTree.translatePathExpression=function(a,b){if("element"===a.predicate.kind){if("+"===a.predicate.modifier){a.predicate.modifier=null;var c=AbstractQueryTree.translatePathExpression(a,b);return{kind:"ONE_OR_MORE_PATH",path:c,x:a.subject,y:a.object}}if("*"===a.predicate.modifier){a.predicate.modifier=null;var c=AbstractQueryTree.translatePathExpression(a,b);return{kind:"ZERO_OR_MORE_PATH",path:c,x:a.subject,y:a.object}}return a.predicate=a.predicate.value,{kind:"BGP",value:[a]}}if("sequence"===a.predicate.kind){for(var i,j,d=a.subject,e=a.object,h=a.graph,k=[],l=0;l<a.predicate.value.length;l++)l!=a.predicate.value.length-1?(i={token:"var",value:"fresh:"+b.freshCounter},b.freshCounter++):i=e,j={subject:d,predicate:a.predicate.value[l],object:i},null!=h&&(j.graph=f.clone(h,!0)),k.push(j),l!=a.predicate.value.length-1&&(d=f.clone(i,!0));var m={kind:"BGP",value:k};return AbstractQueryTree.translatePathExpressionsInBGP(m,b)}throw new g("Non supported path expression "+a.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(a,b){for(var c=a.filters||[],d=a.binds||[],e={kind:"EMPTY_PATTERN"},f=0;f<a.patterns.length;f++){var g=a.patterns[f];if("optionalgraphpattern"===g.token){var h=this.build(g.value,b);e="FILTER"===h.kind?{kind:"LEFT_JOIN",lvalue:e,rvalue:h.value,filter:h.filter}:{kind:"LEFT_JOIN",lvalue:e,rvalue:h,filter:!0}}else{var h=this.build(g,b);e="EMPTY_PATTERN"==e.kind?h:{kind:"JOIN",lvalue:e,rvalue:h}}}if(e.binds=d,0!=c.length){if("EMPTY_PATTERN"===e.kind)return{kind:"FILTER",filter:c,value:e};if("LEFT_JOIN"===e.kind&&!0===e.filter)return{kind:"FILTER",filter:c,value:e};if("LEFT_JOIN"===e.kind)return{kind:"FILTER",filter:c,value:e};if("JOIN"===e.kind)return{kind:"FILTER",filter:c,value:e};if("UNION"===e.kind)return{kind:"FILTER",filter:c,value:e};if("GRAPH"===e.kind)return{kind:"FILTER",filter:c,value:e};if("BGP"===e.kind)return{kind:"FILTER",filter:c,value:e};throw new Error("Unknow kind of algebra expression: "+e.kind)}return e},AbstractQueryTree.prototype.collectBasicTriples=function(a,b){if(null==b&&(b=[]),"select"===a.kind)b=this.collectBasicTriples(a.pattern,b);else if("BGP"===a.kind)b=b.concat(a.value);else if("ZERO_OR_MORE_PATH"===a.kind)b=this.collectBasicTriples(a.path);else if("UNION"===a.kind)b=this.collectBasicTriples(a.value[0],b),b=this.collectBasicTriples(a.value[1],b);else if("GRAPH"===a.kind)b=this.collectBasicTriples(a.value,b);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)b=this.collectBasicTriples(a.lvalue,b),b=this.collectBasicTriples(a.rvalue,b);else if("FILTER"===a.kind)b=this.collectBasicTriples(a.value,b);else if("construct"===a.kind)b=this.collectBasicTriples(a.pattern,b);else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return b},AbstractQueryTree.prototype.bind=function(a,b){if(null!=a.graph&&a.graph.token&&"var"===a.graph.token&&null!=b[a.graph.value]&&(a.graph=b[a.graph.value]),null!=a.filter){for(var c=[],d=0;d<a.filter.length;d++)a.filter[d].value=this._bindFilter(a.filter[d].value,b),c.push(a.filter[d]);a.filter=c}if("select"===a.kind)a.pattern=this.bind(a.pattern,b);else if("BGP"===a.kind)a.value=this._bindTripleContext(a.value,b);else if("ZERO_OR_MORE_PATH"===a.kind)a.path=this._bindTripleContext(a.path,b),a.x&&"var"===a.x.token&&null!=b[a.x.value]&&(a.x=b[a.x.value]),a.y&&"var"===a.y.token&&null!=b[a.y.value]&&(a.y=b[a.y.value]);else if("UNION"===a.kind)a.value[0]=this.bind(a.value[0],b),a.value[1]=this.bind(a.value[1],b);else if("GRAPH"===a.kind)a.value=this.bind(a.value,b);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)a.lvalue=this.bind(a.lvalue,b),a.rvalue=this.bind(a.rvalue,b);else if("FILTER"===a.kind){var e=this;a.value=this.bind(a.value,b),a.filter=a.filter.map(function(a){return{token:"filter",value:e._bindFilter(a.value,b)}})}else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return a},AbstractQueryTree.prototype._bindTripleContext=function(a,b){for(var c=0;c<a.length;c++){delete a[c].graph,delete a[c].variables;for(var d in a[c]){var e=a[c][d];"var"===e.token&&null!=b[e.value]&&(a[c][d]=b[e.value])}}return a},AbstractQueryTree.prototype._bindFilter=function(a,b){if(null!=a.expressionType){var c=a.expressionType;if("relationalexpression"==c)a.op1=this._bindFilter(a.op1,b),a.op2=this._bindFilter(a.op2,b);else if("conditionalor"==c||"conditionaland"==c)for(var d=0;d<a.operands.length;d++)a.operands[d]=this._bindFilter(a.operands[d],b);else if("additiveexpression"==c){a.summand=this._bindFilter(a.summand,b);for(var d=0;d<a.summands.length;d++)a.summands[d].expression=this._bindFilter(a.summands[d].expression,b)}else if("builtincall"==c)for(var d=0;d<a.args.length;d++)a.args[d]=this._bindFilter(a.args[d],b);else if("multiplicativeexpression"==c){a.factor=this._bindFilter(a.factor,b);for(var d=0;d<a.factors.length;d++)a.factors[d].expression=this._bindFilter(a.factors[d].expression,b)}else if("unaryexpression"==c)a.expression=this._bindFilter(a.expression,b);else if("irireforfunction"==c)for(var d=0;d<a.factors.args;d++)a.args[d]=this._bindFilter(a.args[d],b);else if("atomic"==c&&"var"==a.primaryexpression&&null!=b[a.value.value]){var e=b[a.value.value];"uri"===e.token?a.primaryexpression="iri":a.primaryexpression="literal",a.value=e}}return a},AbstractQueryTree.prototype.replace=function(a,b,c,d){if(null!=a.graph&&a.graph.token&&a.graph.token===b.token&&a.graph.value==b.value&&(a.graph=f.clone(c,!0)),null!=a.filter){for(var e=[],g=0;g<a.filter.length;g++)a.filter[g].value=this._replaceFilter(a.filter[g].value,b,c,d),e.push(a.filter[g]);a.filter=e}if("select"===a.kind)a.pattern=this.replace(a.pattern,b,c,d);else if("BGP"===a.kind)a.value=this._replaceTripleContext(a.value,b,c,d);else if("ZERO_OR_MORE_PATH"===a.kind)a.path=this._replaceTripleContext(a.path,b,c,d),a.x&&a.x.token===b.token&&a.value===b.value&&(a.x=f.clone(c,!0)),a.y&&a.y.token===b.token&&a.value===b.value&&(a.y=f.clone(c,!0));else if("UNION"===a.kind)a.value[0]=this.replace(a.value[0],b,c,d),a.value[1]=this.replace(a.value[1],b,c,d);else if("GRAPH"===a.kind)a.value=this.replace(a.value,b,c);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)a.lvalue=this.replace(a.lvalue,b,c,d),a.rvalue=this.replace(a.rvalue,b,c,d);else if("FILTER"===a.kind)a.value=this._replaceFilter(a.value,b,c,d);else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return a},AbstractQueryTree.prototype._replaceTripleContext=function(a,b,c,d){for(var f=0;f<a.length;f++)for(var g in a[f]){var h=a[f][g];"var"===h.token&&"var"===b.token&&h.value===b.value?a[f][g]=c:"blank"===h.token&&"blank"===b.token&&h.value===b.value?a[f][g]=c:"literal"!==h.token&&"uri"!==h.token||"literal"!==b.token&&"uri"!==b.token||h.token!==b.token||e.lexicalFormTerm(h,d)[h.token]!==e.lexicalFormTerm(b,d)[h.token]||(a[f][g]=c)}return a},AbstractQueryTree.prototype._replaceFilter=function(a,b,c,d){if(null!=a.expressionType){var e=a.expressionType;if("relationalexpression"==e)a.op1=this._replaceFilter(a.op1,b,c,d),a.op2=this._replaceFilter(a.op2,b,c,d);else if("conditionalor"==e||"conditionaland"==e)for(var f=0;f<a.operands.length;f++)a.operands[f]=this._replaceFilter(a.operands[f],b,c,d);else if("additiveexpression"==e){a.summand=this._replaceFilter(a.summand,b,c,d);for(var f=0;f<a.summands.length;f++)a.summands[f].expression=this._replaceFilter(a.summands[f].expression,b,c,d)}else if("builtincall"==e)for(var f=0;f<a.args.length;f++)a.args[f]=this._replaceFilter(a.args[f],b,c,d);else if("multiplicativeexpression"==e){a.factor=this._replaceFilter(a.factor,b,c,d);for(var f=0;f<a.factors.length;f++)a.factors[f].expression=this._replaceFilter(a.factors[f].expression,b,c,d)}else if("unaryexpression"==e)a.expression=this._replaceFilter(a.expression,b,c,d);else if("irireforfunction"==e)for(var f=0;f<a.factors.args;f++)a.args[f]=this._replaceFilter(a.args[f],b,c,d);else if("atomic"==e){var g=null;a.primaryexpression==b.token&&a.value==b.value?g=c.value:"iri"==a.primaryexpression&&"uri"==b.token&&a.value==b.value&&(g=c.value),null!=g&&("uri"===c.token?a.primaryexpression="iri":a.primaryexpression=c.token,a.value=g)}}return a},AbstractQueryTree.prototype.treeWithUnion=function(a){if(null==a)return!1;if(null==a.kind)return!1;if("select"===a.kind)return this.treeWithUnion(a.pattern);if("BGP"===a.kind)return this.treeWithUnion(a.value);if("ZERO_OR_MORE_PATH"===a.kind)return!1;if("UNION"===a.kind){if(null==a.value[0].value||null==a.value[0].value.variables||null==a.value[1].value||null==a.value[1].value.variables)return!0;if(a.value[0].variables.join("/")===a.values[1].variables.join("/"))return!!this.treeWithUnion(a.value[0])||this.treeWithUnion(a.value[1])}else{if("GRAPH"===a.kind)return!1;if("LEFT_JOIN"!==a.kind&&"JOIN"!==a.kind)return"FILTER"!==a.kind&&(a.kind,!1);if(this.treeWithUnion(a.lvalue))return!0;this.treeWithUnion(a.rvalue)}},b.exports={AbstractQueryTree:AbstractQueryTree,NonSupportedSparqlFeatureError:g,SparqlParserError:h}},{"./parser":46,"./utils":57}],40:[function(a,b,c){"use strict";var d=a("./utils"),e=d,f=d.nextTick,g=-1,h=1,i=function(a,b){if(0!=arguments.length){this.order=a,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var c=this;this._diskWrite(this.root,function(a){c.root=a,c._updateRootNode(c.root,function(a){c.comparator=function(a,b){return a<b?-1:a>b?1:0},c.merger=null,null!=b&&b(c)})})}};i.prototype._allocateNode=function(){return new j},i.prototype._diskWrite=function(a,b){f(function(){b(a)})},i.prototype._diskRead=function(a,b){f(function(){b(a)})},i.prototype._diskDelete=function(a,b){f(function(){b()})},i.prototype._updateRootNode=function(a,b){b(a)},i.prototype.search=function(a,b,c){var d=this.root,e=this;e.__search(e,a,d,b,c)},i.prototype.__search=function(a,b,c,d,e){for(var f=0;f<c.numberActives&&1===a.comparator(b,c.keys[f].key);)f++;f<c.numberActives&&0===a.comparator(c.keys[f].key,b)?d(null!=e&&1==e?!0:c.keys[f].data):!0===c.isLeaf?d(null):a._diskRead(c.children[f],function(c){a.__search(a,b,c,d,e)})},i.prototype.walk=function(a,b){this.__walk(this,this.root,a,b)},i.prototype.__walk=function(a,b,c,d){var f=b.numberActives,g=0;if(b.isLeaf){for(g=0;g<b.numberActives;g++)c(b.keys[g]);return d()}e.whilst(function(){return g<f},function(d){a._diskRead(b.children[g],function(e){a.__walk(a,e,c,function(){a._diskRead(b.keys[g],function(a){c(a),g++,d()})})})},function(){a._diskRead(b.children[f],function(b){a.__walk(a,b,c,function(){d()})})})},i.prototype.walkNodes=function(a){this.__walkNodes(this,root,a,function(){})},i.prototype.__walkNodes=function(a,b,c,d){if(b.isLeaf)return c(b),d();c(b);var f=b.numberActives,g=0;e.whilst(function(){return g<f},function(d){a._diskRead(b.children[g],function(b){a.__walkNodes(a,b,c,function(){g++,d()})})},function(){a._diskRead(b.children[f],function(b){a.__walkNodes(a,b,c,function(){})})})},i.prototype._splitChild=function(a,b,c,d){var e=this._allocateNode();e.isLeaf=c.isLeaf,e.level=c.level,e.numberActives=this.order-1;var f=c.keys[this.order-1];c.keys[this.order-1]=null;for(var g=0;g<this.order-1;g++)e.keys[g]=c.keys[g+this.order],c.keys[g+this.order]=null,c.isLeaf||(e.children[g]=c.children[g+this.order],c.children[g+this.order]=null);for(c.isLeaf||(e.children[g]=c.children[g+this.order],c.children[g+this.order]=null),c.numberActives=this.order-1,g=a.numberActives+1;g>b+1;g--)a.children[g]=a.children[g-1];for(a.children[b+1]=e,g=a.numberActives;g>b;g--)a.keys[g]=a.keys[g-1];a.keys[b]=f,a.numberActives++;var h=this;this._diskWrite(e,function(e){h._diskWrite(a,function(a){a.children[b+1]=e,h._diskWrite(c,function(b){return d(a)})})})},i.prototype.insert=function(a,b,c){if(this.root.numberActives===2*this.order-1){var d=this._allocateNode();d.isLeaf=!1,d.level=this.root.level+1,d.numberActives=0,d.children[0]=this.root;var e=this;this._splitChild(d,0,this.root,function(f){d=f,e.root=d,e._updateRootNode(d,function(d){e._insertNonFull(d,a,b,c)})})}else this._insertNonFull(this.root,a,b,c)},i.prototype._insertNonFull=function(a,b,c,d){var e=a.numberActives-1;this.__insertNonFull(this,a,e,b,c,d)},i.prototype.__insertNonFull=function(a,b,c,d,e,f){if(b.isLeaf){for(;c>=0&&-1===a.comparator(d,b.keys[c].key);)b.keys[c+1]=b.keys[c],c--;c>=0&&0===a.comparator(d,b.keys[c].key)?b.keys[c]={key:d,data:e}:(b.keys[c+1]={key:d,data:e},b.numberActives++),a._diskWrite(b,function(a){return f(a)})}else{for(;c>=0&&-1===a.comparator(d,b.keys[c].key);)c--;c++;var g=a;a._diskRead(b.children[c],function(h){h.numberActives===2*g.order-1?g._splitChild(b,c,h,function(){1===g.comparator(d,b.keys[c].key)&&c++,g._diskRead(b.children[c],function(b){c=b.numberActives-1,g.__insertNonFull(a,b,c,d,e,f)})}):g._diskRead(b.children[c],function(b){c=b.numberActives-1,g.__insertNonFull(a,b,c,d,e,f)})})}},i.prototype.delete=function(a,b){var c=this.root;i.prototype.__deleteSearchNode(this,a,c,b)},i.prototype.__deleteSearchNode=function(a,b,c,d){var e=0;if(0===c.numberActives)return d(!1);for(;e<c.numberActives&&1===a.comparator(b,c.keys[e].key);)e++;var f=e;if(e<c.numberActives&&0===a.comparator(b,c.keys[e].key))return a.__deleteNodeFound(a,f,b,c,d);if(!0===c.isLeaf)return d(!1);var i=c;a._diskRead(c.children[e],function(c){if(null===c)return d(!1);var j=!1,k=!1,l=null,m=null;f===i.numberActives?(k=!0,m=i.children[f-1],l=i.children[f-1]):0===f?(j=!0,l=i.children[1],m=i.children[1]):(m=i.children[f-1],l=i.children[f+1]),a._diskRead(m,function(f){a._diskRead(l,function(l){!0===k&&(l=null),!0===j&&(f=null),c.numberActives===a.order-1&&null!=i?null!=l&&l.numberActives>a.order-1?a._moveKey(i,e,g,function(e){a.__deleteSearchNode(a,b,c,d)}):null!=f&&f.numberActives>a.order-1?a._moveKey(i,e,h,function(e){a.__deleteSearchNode(a,b,c,d)}):null!=f&&f.numberActives===a.order-1?a._mergeSiblings(i,e,g,function(c){a.__deleteSearchNode(a,b,c,d)}):null!=l&&l.numberActives===a.order-1&&a._mergeSiblings(i,e,h,function(c){a.__deleteSearchNode(a,b,c,d)}):a.__deleteSearchNode(a,b,c,d)})})})},i.prototype.__deleteNodeFound=function(a,b,c,d,e){return d.isLeaf&&d.numberActives>a.order-1?(a._deleteKeyFromNode(d,b,function(){e(!0)}),!0):d.isLeaf&&d===a.root?(a._deleteKeyFromNode(d,b,function(){e(!0)}),!0):(!1===d.isLeaf&&a._diskRead(d.children[b],function(f){f.numberActives>a.order-1?a._getMaxKeyPos(a,f,function(g){c=g.node.keys[g.index],d.keys[b]=c,a._diskWrite(d,function(b){b=f,c=c.key,a.__deleteSearchNode(a,c,b,e)})}):a._diskRead(d.children[b+1],function(g){g.numberActives>a.order-1?a._getMinKeyPos(a,g,function(f){c=f.node.keys[f.index],d.keys[b]=c,a._diskWrite(d,function(b){b=g,c=c.key,a.__deleteSearchNode(a,c,b,e)})}):f.numberActives===a.order-1&&g.numberActives===a.order-1&&a._mergeNodes(f,d.keys[b],g,function(f){d.children[b]=f,b++;for(var g=b;g<d.numberActives;g++)d.children[g]=d.children[g+1],d.keys[g-1]=d.keys[g];d.children[g]=null,d.keys[g-1]=null,d.numberActives--,0===d.numberActives&&a.root===d&&(a.root=f),a._diskWrite(d,function(b){a.__deleteSearchNode(a,c,f,e)})})})}),void(d.isLeaf&&d.numberActives>a.order-1&&a._deleteKeyFromNode(d,b,function(b){a.__deleteSearchNode(a,c,b,e)})))},i.prototype._moveKey=function(a,b,c,d){c===h&&b--;var e=this;e._diskRead(a.children[b],function(f){e._diskRead(a.children[b+1],function(h){if(c==g){f.keys[f.numberActives]=a.keys[b],f.children[f.numberActives+1]=h.children[0],h.children[0]=null,f.numberActives++,a.keys[b]=h.keys[0];for(var i=1;i<h.numberActives;i++)h.keys[i-1]=h.keys[i],h.children[i-1]=h.children[i];h.children[h.numberActives-1]=h.children[h.numberActives],h.numberActives--}else{h.children[h.numberActives+1]=h.children[h.numberActives];for(var i=h.numberActives;i>0;i--)h.children[i]=h.children[i-1],h.keys[i]=h.keys[i-1];h.keys[0]=null,h.children[0]=null,h.children[0]=f.children[f.numberActives],h.keys[0]=a.keys[b],h.numberActives++,f.children[f.numberActives]=null,a.keys[b]=f.keys[f.numberActives-1],f.keys[f.numberActives-1]=null,f.numberActives--}e._diskWrite(f,function(b){e._diskWrite(h,function(b){e._diskWrite(a,function(a){return d(a)})})})})})},i.prototype._mergeSiblings=function(a,b,c,d){var e,f,i,j;b===a.numberActives?(b--,i=a.children[a.numberActives-1],j=a.children[a.numberActives]):(i=a.children[b],j=a.children[b+1]);var k=this;k._diskRead(i,function(c){k._diskRead(j,function(g){var h=k._allocateNode();for(h.isLeaf=c.isLeaf,h.level=c.level,f=0;f<k.order-1;f++)h.keys[f]=c.keys[f],h.children[f]=c.children[f];for(h.keys[k.order-1]=a.keys[b],h.children[k.order-1]=c.children[k.order-1],f=0;f<k.order-1;f++)h.keys[f+k.order]=g.keys[f],h.children[f+k.order]=g.children[f];for(h.children[2*k.order-1]=g.children[k.order-1],a.children[b]=h,f=b;f<a.numberActives;f++)a.keys[f]=a.keys[f+1],a.children[f+1]=a.children[f+2];for(h.numberActives=c.numberActives+g.numberActives+1,a.numberActives--,e=a.numberActives;e<2*k.order-1;e++)a.keys[e]=null;0===a.numberActives&&k.root===a&&(k.root=h,h.level?h.isLeaf=!1:h.isLeaf=!0),k._diskWrite(h,function(b){k._diskWrite(a,function(a){k._diskDelete(c,function(){k._diskDelete(g,function(){if(k.root!==b)return d(b);k._updateRootNode(k.root,function(){return d(b)})})})})})})})},i.prototype._deleteKeyFromNode=function(a,b,c){var d=2*this.order-1;a.numberActives<d&&(d=a.numberActives);var e;if(!1===a.isLeaf)return!1;a.keys[b];for(e=b;e<d-1;e++)a.keys[e]=a.keys[e+1];a.keys.pop(),a.numberActives--,this._diskWrite(a,function(a){return c(a)})},i.prototype._mergeNodes=function(a,b,c,d){var e,f;for(e=this._allocateNode(),e.isLeaf=!0,f=0;f<a.numberActives;f++)e.keys[f]=a.keys[f],e.children[f]=a.children[f];for(e.children[a.numberActives]=a.children[a.numberActives],e.keys[a.numberActives]=b,f=0;f<c.numberActives;f++)e.keys[f+a.numberActives+1]=c.keys[f],e.children[f+a.numberActives+1]=c.children[f];e.children[2*this.order-1]=c.children[c.numberActives],e.numberActives=a.numberActives+c.numberActives+1,e.isLeaf=a.isLeaf,e.level=a.level;var g=this;this._diskWrite(e,function(b){g._diskDelete(a,function(){g._diskDelete(c,function(){return d(b)})})})},i.prototype.audit=function(a){var b=[],c=[],d=this,e=function(e){for(var f=0;f<c.length;f++)if(0===d.comparator(c[f],e)){var g=" !!! duplicated key "+e;!0===a&&console.log(g),b.push(g)}},f=null,d=this;return this.walkNodes(function(g){!0===a&&(console.log("--- Node at "+g.level+" level"),console.log(" - leaf? "+g.isLeaf),console.log(" - num actives? "+g.numberActives),console.log(" - keys: "));for(var h=g.numberActives;h<g.keys.length;h++)null!=g.keys[h]&&!0===a&&(console.log(" * warning : redundant key data"),b.push(" * warning : redundant key data"));for(var h=g.numberActives+1;h<g.children.length;h++)null!=g.children[h]&&!0===a&&(console.log(" * warning : redundant children data"),b.push(" * warning : redundant key data"));if(!1===g.isLeaf)for(var h=0;h<g.numberActives;h++){var i=this._diskRead(g.children[h]).keys[this._diskRead(g.children[h]).numberActives-1].key,j=this._diskRead(g.children[h+1]).keys[0].key;if(!0===a&&console.log("   "+g.keys[h].key+"("+i+","+j+")"),-1===d.comparator(g.keys[h].key,i)){var k=" !!! value max left "+i+" > key "+g.keys[h].key;!0===a&&console.log(k),b.push(k)}if(1===d.comparator(g.keys[h].key,j)){var k=" !!! value min right "+j+" < key "+g.keys[h].key;!0===a&&console.log(k),b.push(k)}e(g.keys[h].key),c.push(g.keys[h].key)}else{if(null===f)f=g.level;else if(f!=g.level){var k=" !!! Leaf node with wrong level value";!0===a&&console.log(k),b.push(k)}for(var h=0;h<g.numberActives;h++)!0===a&&console.log(" "+g.keys[h].key),e(g.keys[h].key),c.push(g.keys[h].key)}if(g!=d.root){if(g.numberActives>2*d.order-1){if(!0===a)var k=" !!!! MAX num keys restriction violated ";console.log(k),b.push(k)}if(g.numberActives<d.order-1){if(!0===a)var k=" !!!! MIN num keys restriction violated ";console.log(k),b.push(k)}}}),b},i.prototype._getMaxKeyPos=function(a,b,c){var d={};return null===b?c(null):!0===b.isLeaf?(d.node=b,d.index=b.numberActives-1,c(d)):(d.node=b,d.index=b.numberActives-1,a._diskRead(b.children[b.numberActives],function(b){return a._getMaxKeyPos(a,b,c)}),void 0)},i.prototype._getMinKeyPos=function(a,b,c){var d={};if(null===b&&c(null),!0===b.isLeaf)return d.node=b,d.index=0,c(d);d.node=b,d.index=0,a._diskRead(b.children[0],function(b){return a._getMinKeyPos(a,b,c)})};var j=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};b.exports={Tree:i,Node:j}},{"./utils":57}],41:[function(a,b,c){var d=a("./query_engine").QueryEngine,e=a("./quad_backend").QuadBackend,f=a("./persistent_quad_backend").PersistentQuadBackend,g=a("./lexicon").Lexicon,h=a("./persistent_lexicon").PersistentLexicon,i=a("./rdf_model"),j=a("./utils");Store=function(a,b){var c=null,i=null;if(0==arguments.length)i={};else if(1==arguments.length)i={},c=a;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";i=a,c=b}null==i.treeOrder&&(i.treeOrder=15);var j=g,k=e;!0===i.persistent&&(j=h,k=f),this.functionMap={};var l=this;this.customFns={},new j(function(a){var b=function(){new k(i,function(b){var e=function(){i.backend=b,i.lexicon=a,l.engine=new d(i),c(null,l)};i.overwrite?b.clear(e):e()})};!0===i.overwrite?a.clear(b):b()},i.name)},Store.prototype.rdf=i.rdf,Store.prototype.rdf.api=i,Store.prototype.registerCustomFunction=function(a,b){this.customFns[a]=b,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var a,b;if(1===arguments.length){a=arguments[0];var b=function(){}}else 2===arguments.length&&(a=arguments[0],b=arguments[1]);this.engine.execute(a,b)}},Store.prototype.executeWithEnvironment=function(){var a,b,c;if(3===arguments.length){a=arguments[0];var d=function(){};b=arguments[1],c=arguments[2]}else if(4===arguments.length){a=arguments[0];var d=arguments[3];b=arguments[1],c=arguments[2]}b=j.map(b,function(a){return{token:"uri",value:a}}),c=j.map(c,function(a){return{token:"uri",value:a}}),this.engine.execute(a,d,b,c)},Store.prototype.graph=function(){var a=null,b=null;if(1===arguments.length)b=arguments[0]||function(){},a=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";b=arguments[1]||function(){},a=arguments[0]}null!=this.rdf.resolve(a)&&(a=this.rdf.resolve(a)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",b)},Store.prototype.node=function(){var a=null,b=null,c=null;if(2===arguments.length)c=arguments[0],b=arguments[1]||function(){},a=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";c=arguments[0],a=arguments[1],b=arguments[2]||function(){}}null!=this.rdf.resolve(a)&&(a=this.rdf.resolve(a)),null!=this.rdf.resolve(c)&&(c=this.rdf.resolve(c)),this.engine.execute("CONSTRUCT { <"+c+"> ?p ?o } WHERE { GRAPH <"+a+"> { <"+c+"> ?p ?o } }",b)},Store.prototype.startObservingNode=function(){var a,b,c;2===arguments.length?(a=arguments[0],c=arguments[1],this.engine.callbacksBackend.observeNode(a,c,function(){})):3===arguments.length&&(a=arguments[0],b=arguments[1],c=arguments[2],this.engine.callbacksBackend.observeNode(a,b,c,function(){}))},Store.prototype.stopObservingNode=function(a){this.engine.callbacksBackend.stopObservingNode(a)},Store.prototype.startObservingQuery=function(){var a=arguments[0],b=arguments[1],c=arguments[2];null!=c?this.engine.callbacksBackend.observeQuery(a,b,c):this.engine.callbacksBackend.observeQuery(a,b,function(){})},Store.prototype.stopObservingQuery=function(a){this.engine.callbacksBackend.stopObservingQuery(a)},Store.prototype.subscribe=function(a,b,c,d,e){var f=this,g=function(a,b){var c=[],d={blanks:{},outCache:{}},g=[];j.each(b,function(a){var b=i.buildRDFResource(a.subject,g,f.engine,d),e=i.buildRDFResource(a.predicate,g,f.engine,d),h=i.buildRDFResource(a.object,g,f.engine,d);null!=b&&null!=e&&null!=h&&(a=new i.Triple(b,e,h),c.push(a))}),e(a,c)};this.functionMap[e]=g,this.engine.callbacksBackend.subscribe(a,b,c,d,g,function(){})},Store.prototype.unsubscribe=function(a){var b=this.functionMap[a];this.engine.callbacksBackend.unsubscribe(b),delete this.functionMap[a]},Store.prototype.setPrefix=function(a,b){this.rdf.setPrefix(a,b)},Store.prototype.setDefaultPrefix=function(a){this.rdf.setDefaultPrefix(a)},Store.prototype.insert=function(){var a,b,c;if(1===arguments.length)b=arguments[0],c=function(){};else if(2===arguments.length)b=arguments[0],c=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";b=arguments[0],a=this.rdf.createNamedNode(arguments[1]),c=arguments[2]||function(){}}var d="",e=this;b.forEach(function(a){d=d+e._nodeToQuery(a.subject)+e._nodeToQuery(a.predicate)+e._nodeToQuery(a.object)+"."}),d=null!=a?"INSERT DATA { GRAPH "+this._nodeToQuery(a)+" { "+d+" } }":"INSERT DATA { "+d+" }",this.engine.execute(d,c)},Store.prototype._nodeToQuery=function(a){if("NamedNode"===a.interfaceName){var b=this.rdf.resolve(a.valueOf());return null!=b?"<"+b+">":"<"+a.valueOf()+">"}return a.toString()},Store.prototype.delete=function(){var a,b,c;if(1===arguments.length)b=arguments[0],c=function(){};else if(2===arguments.length)b=arguments[0],c=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";b=arguments[0],a=this.rdf.createNamedNode(arguments[1]),c=arguments[2]||function(){}}var d="",e=this;b.forEach(function(a){d=d+e._nodeToQuery(a.subject)+e._nodeToQuery(a.predicate)+e._nodeToQuery(a.object)+"."}),d=null!=a?"DELETE DATA { GRAPH "+this._nodeToQuery(a)+" { "+d+" } }":"DELETE DATA { "+d+" }",this.engine.execute(d,c)},Store.prototype.clear=function(){var a,b;if(0===arguments.length){a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var b=function(){}}else if(1===arguments.length)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),b=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";a=this.rdf.createNamedNode(arguments[0]),b=arguments[1]||function(){}}var c="CLEAR GRAPH "+this._nodeToQuery(a);this.engine.execute(c,b)},Store.prototype.setBatchLoadEvents=function(a){this.engine.eventsOnBatchLoad=a},Store.prototype.registerDefaultNamespace=function(a,b){this.rdf.prefixes.set(a,b),this.engine.registerDefaultNamespace(a,b)},Store.prototype.registerDefaultProfileNamespaces=function(){var a=this.rdf.prefixes.values();for(var b in a)this.registerDefaultNamespace(b,a[b])},Store.prototype.load=function(){var a,b,c,d,e={};if(3===arguments.length)c=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),a=arguments[0],b=arguments[1],d=arguments[2]||function(){};else if(4===arguments.length)a=arguments[0],b=arguments[1],e=arguments[2],"string"==typeof e?(c=this.rdf.createNamedNode(e),e={}):(c=this.rdf.createNamedNode(e.graph||this.engine.lexicon.defaultGraphUri),delete e.graph),d=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===a){b=this.rdf.createNamedNode(b);var f="LOAD <"+b.valueOf()+"> INTO GRAPH <"+c.valueOf()+">";this.engine.execute(f,d)}else{var g=this,h=this.engine.rdfLoader.parsers[a];if(!h)return d(new Error("Cannot find parser for the provided media type:"+a));var i=function(a,b){a?d(a,b):g.engine.batchLoad(b,function(a){null!=a?d(null,a):d(new Error("Erro batch-loading triples."))})},j=[h,{token:"uri",value:c.valueOf()},b,e,i];b&&"string"==typeof b&&0===b.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,j):this.engine.rdfLoader.tryToParse.apply(null,j)}},Store.prototype.registerParser=function(a,b){this.engine.rdfLoader.registerParser(a,b)},Store.prototype.registeredGraphs=function(a){this.engine.lexicon.registeredGraphs(!0,function(b){var c=j.map(b,function(a){return new i.NamedNode(a)});a(null,c)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(a){NetworkTransport=a},Store.prototype.close=function(a){null==a&&(a=function(){}),this.engine.close?this.engine.close(a):a()},Store.VERSION="0.9.17";var k=function(){var a;(a=1==arguments.length?arguments[0]:2==arguments.length?arguments[1]:arguments[2])(new Error("Store#connect is not supported in the 0.9.X series of the library"))},l=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store};Store.yieldFrequency=function(a){j.yieldFrequency(a)},b.exports.Store=Store,b.exports.create=l,b.exports.connect=k},{"./lexicon":44,"./persistent_lexicon":47,"./persistent_quad_backend":48,"./quad_backend":49,"./query_engine":51,"./rdf_model":55,"./utils":57}],42:[function(a,b,c){var d=a("./utils"),e=a("./utils"),g=(a("./quad_index").QuadIndex,a("./quad_index").Pattern),h=a("./rdf_model"),i=a("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new i,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var a=0;a<this.indices.length;a++){var b=this.indices[a];this.indexMap[b]={},this.queriesIndexMap[b]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(a,b){this.updateInProgress[a].push(b)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(a){if(!0!==this.ongoingModification){var b=this;if(null!=this.updateInProgress){var c=b.updateInProgress;b.updateInProgress=null,this.sendNotification(Callbacks.deleted,c[Callbacks.deleted],function(){b.sendNotification(Callbacks.added,c[Callbacks.added],function(){b.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){b.dispatchQueries(function(){a(!0)})})})})}else a(!0)}else a(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(a,b,c){for(var d={},e=0;e<b.length;e++){var f=b[e];for(var g in this.indexMap){var h=this.indexMap[g],i=this.componentOrders[g];this._searchCallbacksInIndex(h,i,a,f,d),0!=this.pendingQueries.length&&(h=this.queriesIndexMap[g],this._searchQueriesInIndex(h,i,f))}}this.dispatchNotifications(d),null!=c&&c(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(a,b,c){for(var d=this.emptyNotificationsMap[a]||[],e=0;e<d.length;e++)d[e](a,b);c()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(a){for(var b in a){var c=this.callbacksMap[b],d=a[b][Callbacks.deleted];if(null!=d)try{c(Callbacks.deleted,d)}catch(a){}for(var e in a[b])if(e!=Callbacks.deleted)try{c(e,a[b][e])}catch(a){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(a,b,c,d,e){for(var f=d[1],d=d[0],g=0;g<b.length+1;g++){for(var h=a._||[],i=[],j=0;j<h.length;j++){var k=h[j];null!=this.callbacksMap[k]&&(e[k]=e[k]||{},e[k][c]=e[k][c]||[],e[k][c].push(d),i.push(k))}a._=i;var l=b[g];if(null==a[""+f[l]])break;a=a[""+f[l]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(a,b){var c=this.emptyNotificationsMap[a]||[];c.push(b),this.emptyNotificationsMap[a]=c},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(a,b){var c=this.emptyNotificationsMap[a];null!=c&&(c=d.reject(c,function(a){return a===b})),this.emptyNotificationsMap[a]=c},Callbacks.CallbacksBackend.prototype.subscribe=function(a,b,c,d,e,f){var h=this._tokenizeComponents(a,b,c,d),i={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,i);var j=this;this.engine.normalizeQuad(h,i,!0,function(a){for(var b=new g(a),c=j._indexForPattern(b),d=j.componentOrders[c],h=j.indexMap[c],i=0;i<d.length;i++){var k=d[i],l=a[k];if("_"===l){null==h._&&(h._=[]),j.callbackCounter++,h._.push(j.callbackCounter),j.callbacksMap[j.callbackCounter]=e,j.callbacksInverseMap[e]=j.callbackCounter;break}i===d.length-1?(h[l]=h[l]||{_:[]},j.callbackCounter++,h[l]._.push(j.callbackCounter),j.callbacksMap[j.callbackCounter]=e,j.callbacksInverseMap[e]=j.callbackCounter):(h[l]=h[l]||{},h=h[l])}null!=f&&f(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(a){var b=this.callbacksInverseMap[a];null!=b&&(delete this.callbacksInverseMap[a],delete this.callbacksMap[b])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(a,b,c,d){var e={};return null==a?e.subject=Callbacks.ANYTHING:0==a.indexOf("_:")?e.subject={token:"blank",value:a}:e.subject={token:"uri",value:a},e.predicate=null==b?Callbacks.ANYTHING:{token:"uri",value:b},e.object=null==c?Callbacks.ANYTHING:{token:"uri",value:c},e.graph=null==d?Callbacks.ANYTHING:{token:"uri",value:d},e},Callbacks.CallbacksBackend.prototype._indexForPattern=function(a){for(var b=a.indexKey,c=this.indices,e=0;e<c.length;e++)for(var f=c[e],g=this.componentOrders[f],h=0;h<g.length&&!1!==d.include(b,g[h]);h++)if(h==b.length-1)return f;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var a,b,c,d;4===arguments.length?(a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3]):(a=arguments[0],b=this.engine.lexicon.defaultGraphUri,c=arguments[1],d=arguments[2]);var e="CONSTRUCT { <"+a+"> ?p ?o } WHERE { GRAPH <"+b+"> { <"+a+"> ?p ?o } }",f=this,g={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,g);var i=[];this.engine.execute(e,function(b,e){if(b)d&&d(!1);else{var j=e,k=!1,l=function(a,b){if("eventsFlushed"===a&&k){k=!1;try{c(j)}catch(a){}}else if("eventsFlushed"!==a){k=!0;for(var d=0;d<b.length;d++){var e=b[d],l=h.buildRDFResource(e.subject,i,f.engine,g),m=h.buildRDFResource(e.predicate,i,f.engine,g),n=h.buildRDFResource(e.object,i,f.engine,g);null!=l&&null!=m&&null!=n&&(e=new h.Triple(l,m,n),a===Callbacks.added?j.add(e):a===Callbacks.deleted&&j.remove(e))}}};f.observersMap[c]=l,f.subscribeEmpty(Callbacks.eventsFlushed,l),f.subscribe(a,null,null,null,l,function(){try{c(j)}catch(a){}d&&d(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(a){var b=this.observersMap[a];return!!b&&(this.unsubscribe(b),this.unsubscribeEmpty(Callbacks.eventsFlushed,b),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(a,b,c){var d=this.aqt.parseQueryString(a),f=this.aqt.parseSelect(d.units[0]),h=this.aqt.collectBasicTriples(f),i=this,j={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,j);var k=this.queryCounter;this.queryCounter++,this.queriesMap[k]=a,this.queriesInverseMap[a]=k,this.queriesList.push(k),this.queriesCallbacksMap[k]=b,e.eachSeries(h,function(a,b){null==a.graph&&(a.graph=i.engine.lexicon.defaultGraphUriTerm),i.engine.normalizeQuad(a,j,!0,function(a){for(var c=new g(a),d=i._indexForPattern(c),e=i.componentOrders[d],f=i.queriesIndexMap[d],h=0;h<e.length;h++){var j=e[h],l=a[j];if("string"==typeof l){null==f._&&(f._=[]),f._.push(k);break}h===e.length-1?(f[l]=f[l]||{_:[]},f[l]._.push(k)):(f[l]=f[l]||{},f=f[l])}b()})},function(){i.engine.execute(a,function(a,c){a?console.log("ERROR in query callback "+c):b(c)}),null!=c&&c()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(a){var b=this.queriesInverseMap[a];null!=b&&(delete this.queriesInverseMap[a],delete this.queriesMap[b],this.queriesList=d.reject(this.queriesList,function(a){return a===b}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(a,b,c){for(var e=c[1],c=c[0],f=0;f<b.length+1;f++){for(var g=a._||[],h=[],i=0;i<g.length;i++){var j=g[i];d.include(this.pendingQueries,j)&&(d.remove(this.pendingQueries,function(a){return a===j}),this.matchedQueries.push(j)),null!=this.queriesMap[j]&&h.push(j)}a._=h;var k=b[f];if(null==a[""+e[k]])break;a=a[""+e[k]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(a){var c,d,b=this,f={};e.eachSeries(this.matchedQueries,function(a,e){null==f[a]?(f[a]=!0,c=b.queriesMap[a],d=b.queriesCallbacksMap[a],b.engine.execute(c,function(a,b){if(!a)try{d(b)}catch(a){}e()})):e()},function(){a()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,b.exports=Callbacks},{"./abstract_query_tree":39,"./quad_index":50,"./rdf_model":55,"./utils":57}],43:[function(a,b,c){var d=a("jsonld"),e=function(a,b,c){var e=null;d.normalize(a,{},function(a,d){if(a)c(a);else{var f=function(a){return"blank node"===a.type?{blank:a.value}:"IRI"===a.type?{token:"uri",value:a.value}:"literal"===a.type?null!=a.language?{literal:'"'+a.value+'"@'+a.language}:null!==a.datatype?{literal:'"'+a.value+'"^^<'+a.datatype+">"}:{literal:'"'+a.value+'"'}:void 0};e=[];var g=function(a,c,d){e.push({subject:f(a),predicate:f(c),object:f(d),graph:b})};for(var i in d)for(var j=d[i],k=0;k<j.length;k++){var l=j[k];g(l.subject,l.predicate,l.object)}c(null,e)}})};c.JSONLDParser={};var f=c.JSONLDParser;f.parser={async:!0,parse:function(a,b,c,d){try{"string"==typeof a&&(a=JSON.parse(a)),e(a,b,d)}catch(a){d(a)}}},b.exports={JSONLDParser:f}},{jsonld:26}],44:[function(a,b,c){var d=a("./utils"),e=a("./btree").Tree;Lexicon=function(a){var b=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,d.seq(function(a){new e(2,function(c){b.uris=c,a()})},function(a){new e(2,function(c){b.literals=c,a()})},function(a){new e(2,function(c){b.knownGraphs=c,a()})},function(a){new e(2,function(c){b.oidUris=c,a()})},function(a){new e(2,function(c){b.oidLiterals=c,a()})},function(a){new e(2,function(c){b.oidBlanks=c,a()})})(function(){null!=a&&a(b)})},Lexicon.prototype.registerGraph=function(a,b,c){a!=this.defaultGraphOid?this.knownGraphs.insert(a,b,function(){c()}):c()},Lexicon.prototype.registeredGraphs=function(a,b){var c=[];this.knownGraphs.walk(function(b){!0===a?c.push(b.data):c.push(b.key)},function(){b(c)})},Lexicon.prototype.registerUri=function(a,b){var c=this;a===this.defaultGraphUri?b(this.defaultGraphOid):this.uris.search(a,function(e){if(null==e){var f=c.oidCounter,g="u"+f;c.oidCounter++,d.seq(function(b){c.uris.insert(a,[f,0],function(){b()})},function(b){c.oidUris.insert(g,a,function(){b()})})(function(){b(f)})}else f=e[0],e[1]=e[1]+1,b(f)})},Lexicon.prototype.resolveUri=function(a,b){a===this.defaultGraphUri?b(this.defaultGraphOid):this.uris.search(a,function(a){b(null!=a?a[0]:-1)})},Lexicon.prototype.resolveUriCost=function(a,b){a===this.defaultGraphUri?b(0):this.uris.search(a,function(a){b(null!=a?a[1]:-1)})},Lexicon.prototype.registerBlank=function(a){var b=this.oidCounter;this.oidCounter++;var c=""+b;this.oidBlanks.insert(c,c,function(){a(b)})},Lexicon.prototype.resolveBlank=function(a,b){var c=this;this.oidBlanks.search(a,function(a){if(null!=a)b(a);else{var d=c.oidCounter;this.oidCounter++,b(""+d)}})},Lexicon.prototype.resolveBlankCost=function(a,b){b(0)},Lexicon.prototype.registerLiteral=function(a,b){var c=this;this.literals.search(a,function(e){if(null==e){var f=c.oidCounter,g="l"+f;c.oidCounter++,d.seq(function(b){c.literals.insert(a,[f,0],function(){b()})},function(b){c.oidLiterals.insert(g,a,function(){b()})})(function(){b(f)})}else{var f=e[0];e[1]=e[1]+1,b(f)}})},Lexicon.prototype.resolveLiteral=function(a,b){this.literals.search(a,function(a){b(null!=a?a[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(a,b){this.literals.search(a,function(a){b(null!=a?a[1]:-1)})},Lexicon.prototype.parseLiteral=function(a){var b=a.lastIndexOf("@");if(-1!=b&&'"'===a[b-1]&&null!=a.substring(b,a.length).match(/^@[a-zA-Z\-]+$/g)){var c=a.substring(1,b-1);return{token:"literal",value:c,lang:a.substring(b+1,a.length)}}var b=a.lastIndexOf("^^");if(-1!=b&&'"'===a[b-1]&&"<"===a[b+2]&&">"===a[a.length-1]){var c=a.substring(1,b-1);return{token:"literal",value:c,type:a.substring(b+3,a.length-1)}}var c=a.substring(1,a.length-1);return{token:"literal",value:c}},Lexicon.prototype.parseUri=function(a){return{token:"uri",value:a}},Lexicon.prototype.retrieve=function(a,b){var c=this;a===this.defaultGraphOid?b({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):d.seq(function(b,d){c.oidUris.search("u"+a,function(a){null!=a?d(null,c.parseUri(a)):d(null,null)})},function(b,d){null==b?c.oidLiterals.search("l"+a,function(a){null!=a?d(null,c.parseLiteral(a)):d(null,null)}):d(null,b)},function(b,d){null==b?c.oidBlanks.search(""+a,function(b){null!=b?d(null,{token:"blank",value:"_:"+a}):d(null,null)}):d(null,b)})(null,function(a,c){b(c)})},Lexicon.prototype.clear=function(a){var b=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,d.seq(function(a){new e(2,function(c){b.uris=c,a()})},function(a){new e(2,function(c){b.literals=c,a()})},function(a){new e(2,function(c){b.knownGraphs=c,a()})},function(a){new e(2,function(c){b.oidUris=c,a()})},function(a){new e(2,function(c){b.oidLiterals=c,a()})},function(a){new e(2,function(c){b.oidBlanks=c,a()})})(function(){null!=a&&a()})},Lexicon.prototype.unregister=function(a,b,c){var e=this;d.seq(function(c){e._unregisterTerm(a.subject.token,b.subject,c)},function(c){e._unregisterTerm(a.predicate.token,b.predicate,c)},function(c){e._unregisterTerm(a.object.token,b.object,c)},function(c){null!=a.graph?e._unregisterTerm(a.graph.token,b.graph,c):c()})(function(){c(!0)})},Lexicon.prototype._unregisterTerm=function(a,b,c){var e=this;if("uri"===a)if(b!=this.defaultGraphOid){var f="u"+b;e.oidUris.search(f,function(a){e.uris.search(a,function(g){var h=g[1];""+g[0]==""+b?0===h?d.seq(function(a){e.oidUris.delete(f,function(){a()})},function(b){e.uris.delete(a,function(){b()})},function(a){e.knownGraphs.delete(b,function(){a()})})(function(){c()}):e.uris.insert(a,[b,h-1],function(){c()}):c()})})}else c();else if("literal"===a){this.oidCounter++;var f="l"+b;e.oidLiterals.search(f,function(a){e.literals.search(a,function(g){var h=g[1];""+g[0]==""+b?0===h?d.seq(function(a){e.oidLiterals.delete(f,function(){a()})},function(b){e.literals.delete(a,function(){b()})})(function(){c()}):e.literals.insert(a,[b,h-1],function(){c()}):c()})})}else"blank"===a?e.oidBlanks.delete(""+b,function(){c()}):c()},b.exports={Lexicon:Lexicon}},{"./btree":40,"./utils":57}],45:[function(a,b,c){if(!a("./utils").isWorker()){var e=a("http"),f=a("https"),g=a("url");NetworkTransport={load:function(a,b,c,d){var h=null==d?3:d,i=g.parse(a,!0,!0),j={host:i.host,hostname:i.hostname,method:"GET",path:i.path,headers:{host:i.hostname,Accept:b}},k=null;"http:"===i.protocol?(j.port=i.port||80,k=e):"https:"===i.protocol&&(j.port=i.port||443,k=f);var l=k.request(j,function(a){var d=a.headers,e="";if("2"==(""+a.statusCode)[0])a.on("end",function(){c(null,{headers:d,data:e})}),a.on("data",function(a){e+=a});else if("3"==(""+a.statusCode)[0])if(0==h)c(new Error("Too many redirections"));else{var f=d.Location||d.location;null!=f?NetworkTransport.load(f,b,c,h-1):c(new Error("Redirection without location header"))}else c(new Error("HTTP error: "+a.statusCode))});l.on("error",c),l.end()}},b.exports={NetworkTransport:NetworkTransport}}},{"./utils":57,http:7,https:22,url:36}],46:[function(a,b,c){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a,c){function On(a,b){return{type:"literal",text:a,ignoreCase:b}}function Pn(a,b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function Rn(){return{type:"end"}}function Sn(a){return{type:"other",description:a}}function Tn(b){var d,c=Fn[b];if(c)return c;for(d=b-1;!Fn[d];)d--;for(c=Fn[d],c={line:c.line,column:c.column};d<b;)10===a.charCodeAt(d)?(c.line++,c.column=1):c.column++,d++;return Fn[b]=c,c}function Un(a,b){var c=Tn(a),d=Tn(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:d.line,column:d.column}}}function Vn(a){Dn<Gn||(Dn>Gn&&(Gn=Dn,Hn=[]),Hn.push(a))}function Xn(a,c,d){return new b(b.buildMessage(a,c),a,c,d)}function Yn(){return Zn()}function Zn(){var a;return a=$n(),a===d&&(a=Co()),a}function $n(){var a;return In++,a=_n(),In--,a===d&&(d,0===In&&Vn(g)),a}function _n(){var a,b,c,e;return In++,a=Dn,b=ao(),b!==d?(c=eo(),c===d&&(c=ho())===d&&(c=io())===d&&(c=jo()),c!==d?(e=Bo(),e!==d?(En=a,b=i(b,c,e),a=b):(Dn=a,a=d)):(Dn=a,a=d)):(Dn=a,a=d),In--,a===d&&(b=d,0===In&&Vn(h)),a}function ao(){var a,b,c,e,f;if(In++,a=Dn,b=bo(),b===d&&(b=null),b!==d){for(c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d){for(e=[],f=co();f!==d;)e.push(f),f=co();e!==d?(En=a,b=k(b,e),a=b):(Dn=a,a=d)}else Dn=a,a=d}else Dn=a,a=d;return In--,a===d&&(b=d,0===In&&Vn(j)),a}function bo(){var b,c,e,f,g;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,4)===m?(e=m,Dn+=4):(e=d,0===In&&Vn(n)),e===d&&(a.substr(Dn,4)===o?(e=o,Dn+=4):(e=d,0===In&&Vn(p))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(g=Aq(),g!==d?(En=b,c=q(g),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(l)),b}function co(){var b,c,e,f,g,h,i;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,6)===s?(e=s,Dn+=6):(e=d,0===In&&Vn(t)),e===d&&(a.substr(Dn,6)===u?(e=u,Dn+=6):(e=d,0===In&&Vn(v))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if((g=Bq())!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();h!==d?(i=Aq(),i!==d?(En=b,c=w(g,i),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(r)),b}function eo(){var a,b,c,e,f,g,h,i,j,k;if(In++,a=Dn,(b=go())!==d){for(c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d){for(e=[],f=ko();f!==d;)e.push(f),f=ko();if(e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if((g=oo())!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if((i=po())!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(k=zo(),k!==d?(En=a,b=y(b,e,g,i),a=b):(Dn=a,a=d)):(Dn=a,a=d)}else Dn=a,a=d;else Dn=a,a=d}else Dn=a,a=d;else Dn=a,a=d}else Dn=a,a=d}else Dn=a,a=d}else Dn=a,a=d;return In--,a===d&&(b=d,0===In&&Vn(x)),a}function fo(){var a,b,c,e;return In++,a=Dn,b=go(),b!==d?(c=oo(),c!==d?(e=po(),e!==d?(En=a,b=A(b,c,e),a=b):(Dn=a,a=d)):(Dn=a,a=d)):(Dn=a,a=d),In--,a===d&&(b=d,0===In&&Vn(z)),a}function go(){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,6)===C?(e=C,Dn+=6):(e=d,0===In&&Vn(D)),e===d&&(a.substr(Dn,6)===E?(e=E,Dn+=6):(e=d,0===In&&Vn(F))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if(a.substr(Dn,8)===G?(g=G,Dn+=8):(g=d,0===In&&Vn(H)),g===d&&(a.substr(Dn,8)===I?(g=I,Dn+=8):(g=d,0===In&&Vn(J))),g===d&&(a.substr(Dn,7)===K?(g=K,Dn+=7):(g=d,0===In&&Vn(L)),g===d&&(a.substr(Dn,7)===M?(g=M,Dn+=7):(g=d,0===In&&Vn(N)))),g===d&&(g=null),g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d){for(i=[],j=Dn,k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if((l=Zp())!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(k=[k,l,m],j=k):(Dn=j,j=d)}else Dn=j,j=d;else Dn=j,j=d;if(j===d){for(j=Dn,k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(40===a.charCodeAt(Dn)?(l=O,Dn++):(l=d,0===In&&Vn(P)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();if(m!==d)if((n=_p())!==d){for(o=[],p=Xq();p!==d;)o.push(p),p=Xq();if(o!==d)if(a.substr(Dn,2)===Q?(p=Q,Dn+=2):(p=d,0===In&&Vn(R)),p===d&&(a.substr(Dn,2)===S?(p=S,Dn+=2):(p=d,0===In&&Vn(T))),p!==d){for(q=[],r=Xq();r!==d;)q.push(r),r=Xq();if(q!==d)if((r=Zp())!==d){for(s=[],t=Xq();t!==d;)s.push(t),t=Xq();if(s!==d)if(41===a.charCodeAt(Dn)?(t=U,Dn++):(t=d,0===In&&Vn(V)),t!==d){for(u=[],v=Xq();v!==d;)u.push(v),v=Xq();u!==d?(k=[k,l,m,n,o,p,q,r,s,t,u],j=k):(Dn=j,j=d)}else Dn=j,j=d;else Dn=j,j=d}else Dn=j,j=d;else Dn=j,j=d}else Dn=j,j=d;else Dn=j,j=d}else Dn=j,j=d;else Dn=j,j=d}else Dn=j,j=d;else Dn=j,j=d}if(j!==d)for(;j!==d;){for(i.push(j),j=Dn,k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if((l=Zp())!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(k=[k,l,m],j=k):(Dn=j,j=d)}else Dn=j,j=d;else Dn=j,j=d;if(j===d){for(j=Dn,k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(40===a.charCodeAt(Dn)?(l=O,Dn++):(l=d,0===In&&Vn(P)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();if(m!==d)if((n=_p())!==d){for(o=[],p=Xq();p!==d;)o.push(p),p=Xq();if(o!==d)if(a.substr(Dn,2)===Q?(p=Q,Dn+=2):(p=d,0===In&&Vn(R)),p===d&&(a.substr(Dn,2)===S?(p=S,Dn+=2):(p=d,0===In&&Vn(T))),p!==d){for(q=[],r=Xq();r!==d;)q.push(r),r=Xq();if(q!==d)if((r=Zp())!==d){for(s=[],t=Xq();t!==d;)s.push(t),t=Xq();if(s!==d)if(41===a.charCodeAt(Dn)?(t=U,Dn++):(t=d,0===In&&Vn(V)),t!==d){for(u=[],v=Xq();v!==d;)u.push(v),v=Xq();u!==d?(k=[k,l,m,n,o,p,q,r,s,t,u],j=k):(Dn=j,j=d)}else Dn=j,j=d;else Dn=j,j=d}else Dn=j,j=d;else Dn=j,j=d}else Dn=j,j=d;else Dn=j,j=d}else Dn=j,j=d;else Dn=j,j=d}else Dn=j,j=d;else Dn=j,j=d}}else i=d;if(i===d){for(i=Dn,j=[],k=Xq();k!==d;)j.push(k),k=Xq();if(j!==d)if(42===a.charCodeAt(Dn)?(k=W,Dn++):(k=d,0===In&&Vn(X)),k!==d){for(l=[],m=Xq();m!==d;)l.push(m),m=Xq();l!==d?(j=[j,k,l],i=j):(Dn=i,i=d)}else Dn=i,i=d;else Dn=i,i=d}i!==d?(En=b,c=Y(g,i),b=c):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(B)),b}function ho(){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,9)===$?(e=$,Dn+=9):(e=d,0===In&&Vn(_)),e===d&&(a.substr(Dn,9)===aa?(e=aa,Dn+=9):(e=d,0===In&&Vn(ba))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if((g=pp())!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d){for(i=[],j=ko();j!==d;)i.push(j),j=ko();if(i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();if(j!==d)if((k=oo())!==d){for(l=[],m=Xq();m!==d;)l.push(m),m=Xq();l!==d?(m=po(),m!==d?(En=b,c=ca(g,i,k,m),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;if(b===d){for(b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,9)===$?(e=$,Dn+=9):(e=d,0===In&&Vn(_)),e===d&&(a.substr(Dn,9)===aa?(e=aa,Dn+=9):(e=d,0===In&&Vn(ba))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d){for(g=[],h=ko();h!==d;)g.push(h),h=ko();if(g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if(a.substr(Dn,5)===da?(i=da,Dn+=5):(i=d,0===In&&Vn(ea)),i===d&&(a.substr(Dn,5)===fa?(i=fa,Dn+=5):(i=d,0===In&&Vn(ga))),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();if(j!==d)if(123===a.charCodeAt(Dn)?(k=ha,Dn++):(k=d,0===In&&Vn(ia)),k!==d){for(l=[],m=Xq();m!==d;)l.push(m),m=Xq();if(l!==d)if(m=Wo(),m===d&&(m=null),m!==d){for(n=[],o=Xq();o!==d;)n.push(o),o=Xq();if(n!==d)if(125===a.charCodeAt(Dn)?(o=ja,Dn++):(o=d,0===In&&Vn(ka)),o!==d){for(p=[],q=Xq();q!==d;)p.push(q),q=Xq();p!==d?(q=po(),q!==d?(En=b,c=la(g,m,q),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}return In--,b===d&&(c=d,0===In&&Vn(Z)),b}function io(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,8)===na?(c=na,Dn+=8):(c=d,0===In&&Vn(oa)),c!==d){if(e=[],(f=Yp())!==d)for(;f!==d;)e.push(f),f=Yp();else e=d;if(e===d&&(42===a.charCodeAt(Dn)?(e=W,Dn++):(e=d,0===In&&Vn(X))),e!==d){for(f=[],g=ko();g!==d;)f.push(g),g=ko();f!==d?(g=oo(),g===d&&(g=null),g!==d?(h=po(),h!==d?(c=[c,e,f,g,h],b=c):(Dn=b,b=d)):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(ma)),b}function jo(){var b,c,e,f,g,h,i;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,3)===qa?(e=qa,Dn+=3):(e=d,0===In&&Vn(ra)),e===d&&(a.substr(Dn,3)===sa?(e=sa,Dn+=3):(e=d,0===In&&Vn(ta))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d){for(g=[],h=ko();h!==d;)g.push(h),h=ko();if(g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();h!==d?(i=oo(),i!==d?(En=b,c=ua(g,i),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(pa)),b}function ko(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,4)===wa?(c=wa,Dn+=4):(c=d,0===In&&Vn(xa)),c===d&&(a.substr(Dn,4)===ya?(c=ya,Dn+=4):(c=d,0===In&&Vn(za))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(f=lo(),f===d&&(f=mo()),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(En=b,c=Aa(f),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(va)),b}function lo(){var a,b,c;for(In++,a=Dn,b=[],c=Xq();c!==d;)b.push(c),c=Xq();return b!==d?(c=no(),c!==d?(En=a,b=Ca(c),a=b):(Dn=a,a=d)):(Dn=a,a=d),In--,a===d&&(b=d,0===In&&Vn(Ba)),a}function mo(){var b,c,e,f;if(In++,b=Dn,a.substr(Dn,5)===Ea?(c=Ea,Dn+=5):(c=d,0===In&&Vn(Fa)),c===d&&(a.substr(Dn,5)===Ga?(c=Ga,Dn+=5):(c=d,0===In&&Vn(Ha))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=no(),f!==d?(En=b,c=Ia(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Da)),b}function no(){var a;return In++,a=xq(),In--,a===d&&(d,0===In&&Vn(Ja)),a}function oo(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,5)===da?(c=da,Dn+=5):(c=d,0===In&&Vn(ea)),c===d&&(a.substr(Dn,5)===fa?(c=fa,Dn+=5):(c=d,0===In&&Vn(ga))),c===d&&(c=null),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=Xo())!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(En=b,c=La(f),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Ka)),b}function po(){var a,b,c,e,f;return In++,a=Dn,b=qo(),b===d&&(b=null),b!==d?(c=so(),c===d&&(c=null),c!==d?(e=uo(),e===d&&(e=null),e!==d?(f=wo(),f===d&&(f=null),f!==d?(En=a,b=Na(b,e,f),a=b):(Dn=a,a=d)):(Dn=a,a=d)):(Dn=a,a=d)):(Dn=a,a=d),In--,a===d&&(b=d,0===In&&Vn(Ma)),a}function qo(){var b,c,e,f,g,h,i;if(In++,b=Dn,a.substr(Dn,5)===Pa?(c=Pa,Dn+=5):(c=d,0===In&&Vn(Qa)),c===d&&(a.substr(Dn,5)===Ra?(c=Ra,Dn+=5):(c=d,0===In&&Vn(Sa))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(a.substr(Dn,2)===Ta?(f=Ta,Dn+=2):(f=d,0===In&&Vn(Ua)),f===d&&(a.substr(Dn,2)===Va?(f=Va,Dn+=2):(f=d,0===In&&Vn(Wa))),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d){if(h=[],(i=ro())!==d)for(;i!==d;)h.push(i),i=ro();else h=d;h!==d?(En=b,c=Xa(h),b=c):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Oa)),b}function ro(){var b,c,e,f,g,h,i,j,k,l,m;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if((e=kq())!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(En=b,c=Za(e),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;if(b===d){for(b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if((e=mp())!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(En=b,c=$a(e),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;if(b===d){for(b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(40===a.charCodeAt(Dn)?(e=O,Dn++):(e=d,0===In&&Vn(P)),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if((g=_p())!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d){if(i=Dn,a.substr(Dn,2)===Q?(j=Q,Dn+=2):(j=d,0===In&&Vn(R)),j===d&&(a.substr(Dn,2)===S?(j=S,Dn+=2):(j=d,0===In&&Vn(T))),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=Zp(),l!==d?(j=[j,k,l],i=j):(Dn=i,i=d)):(Dn=i,i=d)}else Dn=i,i=d;if(i===d&&(i=null),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();if(j!==d)if(41===a.charCodeAt(Dn)?(k=U,Dn++):(k=d,0===In&&Vn(V)),k!==d){for(l=[],m=Xq();m!==d;)l.push(m),m=Xq();l!==d?(En=b,c=_a(g,i),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;if(b===d){for(b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if((e=Zp())!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(En=b,c=ab(e),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}}}return In--,b===d&&(c=d,0===In&&Vn(Ya)),b}function so(){var b,c,e,f;if(In++,b=Dn,a.substr(Dn,6)===cb?(c=cb,Dn+=6):(c=d,0===In&&Vn(db)),c!==d){if(e=[],(f=to())!==d)for(;f!==d;)e.push(f),f=to();else e=d;e!==d?(c=[c,e],b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(bb)),b}function to(){var a;return In++,a=gp(),In--,a===d&&(d,0===In&&Vn(eb)),a}function uo(){var b,c,e,f,g,h,i,j;if(In++,b=Dn,a.substr(Dn,5)===gb?(c=gb,Dn+=5):(c=d,0===In&&Vn(hb)),c===d&&(a.substr(Dn,5)===ib?(c=ib,Dn+=5):(c=d,0===In&&Vn(jb))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(a.substr(Dn,2)===Ta?(f=Ta,Dn+=2):(f=d,0===In&&Vn(Ua)),f===d&&(a.substr(Dn,2)===Va?(f=Va,Dn+=2):(f=d,0===In&&Vn(Wa))),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d){if(h=[],(i=vo())!==d)for(;i!==d;)h.push(i),i=vo();else h=d;if(h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(En=b,c=kb(h),b=c):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(fb)),b}function vo(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,3)===mb?(c=mb,Dn+=3):(c=d,0===In&&Vn(nb)),c===d&&(a.substr(Dn,3)===ob?(c=ob,Dn+=3):(c=d,0===In&&Vn(pb)),c===d&&(a.substr(Dn,4)===qb?(c=qb,Dn+=4):(c=d,0===In&&Vn(rb)),c===d&&(a.substr(Dn,4)===sb?(c=sb,Dn+=4):(c=d,0===In&&Vn(tb))))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=jq())!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(En=b,c=ub(c,f),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d)if(b=Dn,c=gp(),c===d&&(c=Zp()),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(En=b,c=vb(c),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(lb)),b}function wo(){var a,b,c,e;return In++,a=Dn,b=Dn,c=xo(),c!==d?(e=yo(),e===d&&(e=null),e!==d?(c=[c,e],b=c):(Dn=b,b=d)):(Dn=b,b=d),b===d&&(b=Dn,c=yo(),c!==d?(e=xo(),e===d&&(e=null),e!==d?(c=[c,e],b=c):(Dn=b,b=d)):(Dn=b,b=d)),b!==d&&(En=a,b=xb(b)),a=b,In--,a===d&&(b=d,0===In&&Vn(wb)),a}function xo(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,5)===zb?(c=zb,Dn+=5):(c=d,0===In&&Vn(Ab)),c===d&&(a.substr(Dn,5)===Bb?(c=Bb,Dn+=5):(c=d,0===In&&Vn(Cb))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=Hq())!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(En=b,c=Db(f),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(yb)),b}function yo(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,6)===Fb?(c=Fb,Dn+=6):(c=d,0===In&&Vn(Gb)),c===d&&(a.substr(Dn,6)===Hb?(c=Hb,Dn+=6):(c=d,0===In&&Vn(Ib))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=Hq())!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(En=b,c=Jb(f),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Eb)),b}function zo(){var b,c,e,f,g,h,i,j,k;if(In++,b=Dn,a.substr(Dn,8)===Lb?(c=Lb,Dn+=8):(c=d,0===In&&Vn(Mb)),c!==d){for(e=[],f=Zp();f!==d;)e.push(f),f=Zp();if(e!==d)if(123===a.charCodeAt(Dn)?(f=ha,Dn++):(f=d,0===In&&Vn(ia)),f!==d){if(g=[],h=Dn,40===a.charCodeAt(Dn)?(i=O,Dn++):(i=d,0===In&&Vn(P)),i!==d){if(j=[],(k=Ao())!==d)for(;k!==d;)j.push(k),k=Ao();else j=d;j!==d?(41===a.charCodeAt(Dn)?(k=U,Dn++):(k=d,0===In&&Vn(V)),k!==d?(i=[i,j,k],h=i):(Dn=h,h=d)):(Dn=h,h=d)}else Dn=h,h=d;for(h===d&&(h=Wq());h!==d;){if(g.push(h),h=Dn,40===a.charCodeAt(Dn)?(i=O,Dn++):(i=d,0===In&&Vn(P)),i!==d){if(j=[],(k=Ao())!==d)for(;k!==d;)j.push(k),k=Ao();else j=d;j!==d?(41===a.charCodeAt(Dn)?(k=U,Dn++):(k=d,0===In&&Vn(V)),k!==d?(i=[i,j,k],h=i):(Dn=h,h=d)):(Dn=h,h=d)}else Dn=h,h=d;h===d&&(h=Wq())}g!==d?(125===a.charCodeAt(Dn)?(h=ja,Dn++):(h=d,0===In&&Vn(ka)),h!==d?(c=[c,e,f,g,h],b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return b===d&&(b=null),In--,b===d&&(c=d,0===In&&Vn(Kb)),b}function Ao(){var b;return In++,b=xq(),b===d&&(b=qq())===d&&(b=rq())===d&&(b=vq())===d&&(a.substr(Dn,5)===Ob?(b=Ob,Dn+=5):(b=d,0===In&&Vn(Pb))),In--,b===d&&(d,0===In&&Vn(Nb)),b}function Bo(){var b,c,e,f;return In++,b=Dn,c=Dn,a.substr(Dn,6)===Rb?(e=Rb,Dn+=6):(e=d,0===In&&Vn(Sb)),e===d&&(a.substr(Dn,6)===Tb?(e=Tb,Dn+=6):(e=d,0===In&&Vn(Ub))),e!==d?(f=ip(),f!==d?(e=[e,f],c=e):(Dn=c,c=d)):(Dn=c,c=d),c===d&&(c=null),c!==d&&(En=b,c=Vb(c)),b=c,In--,b===d&&(c=d,0===In&&Vn(Qb)),b}function Co(){var a;return In++,a=Do(),In--,a===d&&(d,0===In&&Vn(Wb)),a}function Do(){var b,c,e,f,g,h,i,j,k;if(In++,b=Dn,(c=ao())!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=Eo())!==d){for(g=Dn,h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if(59===a.charCodeAt(Dn)?(i=Yb,Dn++):(i=d,0===In&&Vn(Zb)),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(k=Do(),k===d&&(k=null),k!==d?(h=[h,i,j,k],g=h):(Dn=g,g=d)):(Dn=g,g=d)}else Dn=g,g=d;else Dn=g,g=d;g===d&&(g=null),g!==d?(En=b,c=$b(c,f,g),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Xb)),b}function Eo(){var a;return In++,a=Fo(),a===d&&(a=Go())===d&&(a=Ho())===d&&(a=Io())===d&&(a=Jo())===d&&(a=Ko())===d&&(a=Lo())===d&&(a=Mo()),In--,a===d&&(d,0===In&&Vn(_b)),a}function Fo(){var b,c,e,f,g,h,i,j,k;if(In++,b=Dn,a.substr(Dn,4)===bc?(c=bc,Dn+=4):(c=d,0===In&&Vn(cc)),c===d&&(a.substr(Dn,4)===dc?(c=dc,Dn+=4):(c=d,0===In&&Vn(ec))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=xq())!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d){if(h=Dn,a.substr(Dn,4)===fc?(i=fc,Dn+=4):(i=d,0===In&&Vn(gc)),i===d&&(a.substr(Dn,4)===hc?(i=hc,Dn+=4):(i=d,0===In&&Vn(ic))),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(k=Qo(),k!==d?(i=[i,j,k],h=i):(Dn=h,h=d)):(Dn=h,h=d)}else Dn=h,h=d;h===d&&(h=null),h!==d?(En=b,c=jc(f,h),b=c):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(ac)),b}function Go(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,5)===lc?(c=lc,Dn+=5):(c=d,0===In&&Vn(mc)),c===d&&(a.substr(Dn,5)===nc?(c=nc,Dn+=5):(c=d,0===In&&Vn(oc))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(a.substr(Dn,6)===pc?(f=pc,Dn+=6):(f=d,0===In&&Vn(qc)),f===d&&(a.substr(Dn,6)===rc?(f=rc,Dn+=6):(f=d,0===In&&Vn(sc))),f===d&&(f=null),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(h=Ro(),h!==d?(En=b,c=tc(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(kc)),b}function Ho(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,4)===vc?(c=vc,Dn+=4):(c=d,0===In&&Vn(wc)),c===d&&(a.substr(Dn,4)===xc?(c=xc,Dn+=4):(c=d,0===In&&Vn(yc))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(a.substr(Dn,6)===pc?(f=pc,Dn+=6):(f=d,0===In&&Vn(qc)),f===d&&(a.substr(Dn,6)===rc?(f=rc,Dn+=6):(f=d,0===In&&Vn(sc))),f===d&&(f=null),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(h=Ro(),h!==d?(En=b,c=zc(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(uc)),b}function Io(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,6)===Bc?(c=Bc,Dn+=6):(c=d,0===In&&Vn(Cc)),c===d&&(a.substr(Dn,6)===Dc?(c=Dc,Dn+=6):(c=d,0===In&&Vn(Ec))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(a.substr(Dn,6)===pc?(f=pc,Dn+=6):(f=d,0===In&&Vn(qc)),f===d&&(a.substr(Dn,6)===rc?(f=rc,Dn+=6):(f=d,0===In&&Vn(sc))),f===d&&(f=null),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(h=Qo(),h!==d?(En=b,c=Fc(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Ac)),b}function Jo(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,6)===Hc?(c=Hc,Dn+=6):(c=d,0===In&&Vn(Ic)),c===d&&(a.substr(Dn,6)===Jc?(c=Jc,Dn+=6):(c=d,0===In&&Vn(Kc))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(a.substr(Dn,4)===Lc?(f=Lc,Dn+=4):(f=d,0===In&&Vn(Mc)),f===d&&(a.substr(Dn,4)===Nc?(f=Nc,Dn+=4):(f=d,0===In&&Vn(Oc))),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(h=To(),h!==d?(En=b,c=Pc(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Gc)),b}function Ko(){var b,c,e,f,g;if(In++,b=Dn,a.substr(Dn,6)===Rc?(c=Rc,Dn+=6):(c=d,0===In&&Vn(Sc)),c===d&&(a.substr(Dn,6)===Tc?(c=Tc,Dn+=6):(c=d,0===In&&Vn(Uc))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(a.substr(Dn,4)===Lc?(f=Lc,Dn+=4):(f=d,0===In&&Vn(Mc)),f===d&&(a.substr(Dn,4)===Nc?(f=Nc,Dn+=4):(f=d,0===In&&Vn(Oc))),f!==d?(g=To(),g!==d?(En=b,c=Vc(g),b=c):(Dn=b,b=d)):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Qc)),b}function Lo(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,6)===Rc?(c=Rc,Dn+=6):(c=d,0===In&&Vn(Sc)),c===d&&(a.substr(Dn,6)===Tc?(c=Tc,Dn+=6):(c=d,0===In&&Vn(Uc))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(a.substr(Dn,5)===da?(f=da,Dn+=5):(f=d,0===In&&Vn(ea)),f===d&&(a.substr(Dn,5)===fa?(f=fa,Dn+=5):(f=d,0===In&&Vn(ga))),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(h=Xo(),h!==d?(En=b,c=Xc(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Wc)),b}function Mo(){var b,c,e,f,g,h,i,j,k,l,m,n;if(In++,b=Dn,c=Dn,a.substr(Dn,4)===Zc?(e=Zc,Dn+=4):(e=d,0===In&&Vn($c)),e===d&&(a.substr(Dn,4)===_c?(e=_c,Dn+=4):(e=d,0===In&&Vn(ad))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(g=xq(),g!==d?(e=[e,f,g],c=e):(Dn=c,c=d)):(Dn=c,c=d)}else Dn=c,c=d;if(c===d&&(c=null),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d){if(f=Dn,(g=No())!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();h!==d?(i=Oo(),i===d&&(i=null),i!==d?(g=[g,h,i],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;if(f===d&&(f=Oo()),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d){for(h=[],i=Po();i!==d;)h.push(i),i=Po();if(h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(a.substr(Dn,5)===da?(j=da,Dn+=5):(j=d,0===In&&Vn(ea)),j===d&&(a.substr(Dn,5)===fa?(j=fa,Dn+=5):(j=d,0===In&&Vn(ga))),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if((l=Xo())!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(En=b,c=bd(c,f,h,l),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Yc)),b}function No(){var b,c,e;return In++,b=Dn,a.substr(Dn,6)===Rc?(c=Rc,Dn+=6):(c=d,0===In&&Vn(Sc)),c===d&&(a.substr(Dn,6)===Tc?(c=Tc,Dn+=6):(c=d,0===In&&Vn(Uc))),c!==d?(e=So(),e!==d?(En=b,c=dd(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(cd)),b}function Oo(){var b,c,e;return In++,b=Dn,a.substr(Dn,6)===Hc?(c=Hc,Dn+=6):(c=d,0===In&&Vn(Ic)),c===d&&(a.substr(Dn,6)===Jc?(c=Jc,Dn+=6):(c=d,0===In&&Vn(Kc))),c!==d?(e=So(),e!==d?(En=b,c=dd(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(ed)),b}function Po(){var b,c,e,f,g,h,i,j;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,5)===gd?(e=gd,Dn+=5):(e=d,0===In&&Vn(hd)),e===d&&(a.substr(Dn,5)===id?(e=id,Dn+=5):(e=d,0===In&&Vn(jd))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d){if((g=xq())===d)if(g=Dn,a.substr(Dn,5)===Ea?(h=Ea,Dn+=5):(h=d,0===In&&Vn(Fa)),h===d&&(a.substr(Dn,5)===Ga?(h=Ga,Dn+=5):(h=d,0===In&&Vn(Ha))),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=xq(),j!==d?(h=[h,i,j],g=h):(Dn=g,g=d)):(Dn=g,g=d)}else Dn=g,g=d;g!==d?(En=b,c=kd(g),b=c):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(fd)),b}function Qo(){var b,c,e,f;if(In++,b=Dn,a.substr(Dn,5)===md?(c=md,Dn+=5):(c=d,0===In&&Vn(nd)),c===d&&(a.substr(Dn,5)===od?(c=od,Dn+=5):(c=d,0===In&&Vn(pd))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=xq(),f!==d?(En=b,c=qd(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(ld)),b}function Ro(){var b,c;return In++,b=Dn,c=Qo(),c!==d&&(En=b,c=La(c)),b=c,b===d&&(b=Dn,a.substr(Dn,7)===sd?(c=sd,Dn+=7):(c=d,0===In&&Vn(td)),c===d&&(a.substr(Dn,7)===ud?(c=ud,Dn+=7):(c=d,0===In&&Vn(vd))),c!==d&&(En=b,c=wd()),(b=c)===d&&(b=Dn,a.substr(Dn,5)===Ea?(c=Ea,Dn+=5):(c=d,0===In&&Vn(Fa)),c===d&&(a.substr(Dn,5)===Ga?(c=Ga,Dn+=5):(c=d,0===In&&Vn(Ha))),c!==d&&(En=b,c=xd()),(b=c)===d&&(b=Dn,a.substr(Dn,3)===yd?(c=yd,Dn+=3):(c=d,0===In&&Vn(zd)),c===d&&(a.substr(Dn,3)===Ad?(c=Ad,Dn+=3):(c=d,0===In&&Vn(Bd))),c!==d&&(En=b,c=Cd()),b=c))),In--,b===d&&(c=d,0===In&&Vn(rd)),b}function So(){var b,c,e,f,g,h,i,j,k;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(123===a.charCodeAt(Dn)?(e=ha,Dn++):(e=d,0===In&&Vn(ia)),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if((g=Uo())!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if(125===a.charCodeAt(Dn)?(i=ja,Dn++):(i=d,0===In&&Vn(ka)),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(En=b,c=Ed(g),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Dd)),b}function To(){var b,c,e,f,g,h,i,j,k;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(123===a.charCodeAt(Dn)?(e=ha,Dn++):(e=d,0===In&&Vn(ia)),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if((g=Uo())!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if(125===a.charCodeAt(Dn)?(i=ja,Dn++):(i=d,0===In&&Vn(ka)),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(En=b,c=Ed(g),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Fd)),b}function Uo(){var b,c,e,f,g,h,i;if(In++,b=Dn,c=Wo(),c===d&&(c=null),c!==d){for(e=[],f=Dn,g=Vo(),g!==d?(46===a.charCodeAt(Dn)?(h=Hd,Dn++):(h=d,0===In&&Vn(Id)),h===d&&(h=null),h!==d?(i=Wo(),i===d&&(i=null),i!==d?(g=[g,h,i],f=g):(Dn=f,f=d)):(Dn=f,f=d)):(Dn=f,f=d);f!==d;)e.push(f),f=Dn,g=Vo(),g!==d?(46===a.charCodeAt(Dn)?(h=Hd,Dn++):(h=d,0===In&&Vn(Id)),h===d&&(h=null),h!==d?(i=Wo(),i===d&&(i=null),i!==d?(g=[g,h,i],f=g):(Dn=f,f=d)):(Dn=f,f=d)):(Dn=f,f=d);e!==d?(En=b,c=Jd(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Gd)),b}function Vo(){var b,c,e,f,g,h,i,j,k,l,m,n,o;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,5)===md?(e=md,Dn+=5):(e=d,0===In&&Vn(nd)),e===d&&(a.substr(Dn,5)===od?(e=od,Dn+=5):(e=d,0===In&&Vn(pd))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if((g=Yp())!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if(123===a.charCodeAt(Dn)?(i=ha,Dn++):(i=d,0===In&&Vn(ia)),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();if(j!==d)if(k=Wo(),k===d&&(k=null),k!==d){for(l=[],m=Xq();m!==d;)l.push(m),m=Xq();if(l!==d)if(125===a.charCodeAt(Dn)?(m=ja,Dn++):(m=d,0===In&&Vn(ka)),m!==d){for(n=[],o=Xq();o!==d;)n.push(o),o=Xq();n!==d?(En=b,c=Ld(g,k),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Kd)),b}function Wo(){var b,c,e,f,g,h,i;if(In++,b=Dn,(c=rp())!==d){for(e=Dn,f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if(46===a.charCodeAt(Dn)?(g=Hd,Dn++):(g=d,0===In&&Vn(Id)),g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();h!==d?(i=Wo(),i===d&&(i=null),i!==d?(f=[f,g,h,i],e=f):(Dn=e,e=d)):(Dn=e,e=d)}else Dn=e,e=d;else Dn=e,e=d;e===d&&(e=null),e!==d?(En=b,c=Nd(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Md)),b}function Xo(){var b,c,e,f,g,h;if(In++,b=Dn,123===a.charCodeAt(Dn)?(c=ha,Dn++):(c=d,0===In&&Vn(ia)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=fo())!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(125===a.charCodeAt(Dn)?(h=ja,Dn++):(h=d,0===In&&Vn(ka)),h!==d?(En=b,c=Pd(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d)if(b=Dn,123===a.charCodeAt(Dn)?(c=ha,Dn++):(c=d,0===In&&Vn(ia)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=Yo())!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(125===a.charCodeAt(Dn)?(h=ja,Dn++):(h=d,0===In&&Vn(ka)),h!==d?(En=b,c=Pd(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Od)),b}function Yo(){var b,c,e,f,g,h,i,j,k,l;if(In++,b=Dn,c=Zo(),c===d&&(c=null),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d){if(f=[],g=Dn,(h=$o())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(46===a.charCodeAt(Dn)?(j=Hd,Dn++):(j=d,0===In&&Vn(Id)),j===d&&(j=null),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=Zo(),l===d&&(l=null),l!==d?(h=[h,i,j,k,l],g=h):(Dn=g,g=d)):(Dn=g,g=d)}else Dn=g,g=d;else Dn=g,g=d}else Dn=g,g=d;for(;g!==d;)if(f.push(g),g=Dn,(h=$o())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(46===a.charCodeAt(Dn)?(j=Hd,Dn++):(j=d,0===In&&Vn(Id)),j===d&&(j=null),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=Zo(),l===d&&(l=null),l!==d?(h=[h,i,j,k,l],g=h):(Dn=g,g=d)):(Dn=g,g=d)}else Dn=g,g=d;else Dn=g,g=d}else Dn=g,g=d;f!==d?(En=b,c=Rd(c,f),b=c):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Qd)),b}function Zo(){var b,c,e,f,g,h;if(In++,b=Dn,(c=Ap())!==d){for(e=Dn,f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(46===a.charCodeAt(Dn)?(g=Hd,Dn++):(g=d,0===In&&Vn(Id)),g!==d?(h=Zo(),h===d&&(h=null),h!==d?(f=[f,g,h],e=f):(Dn=e,e=d)):(Dn=e,e=d)):(Dn=e,e=d),e===d&&(e=null),e!==d?(En=b,c=Td(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Sd)),b}function $o(){var a;return In++,a=dp(),a===d&&(a=_o())===d&&(a=cp())===d&&(a=ap())===d&&(a=bp())===d&&(a=ep())===d&&(a=fp())===d&&(a=hp()),In--,a===d&&(d,0===In&&Vn(Ud)),a}function _o(){var b,c,e,f,g;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,8)===Wd?(e=Wd,Dn+=8):(e=d,0===In&&Vn(Xd)),e===d&&(a.substr(Dn,8)===Yd?(e=Yd,Dn+=8):(e=d,0===In&&Vn(Zd))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(g=Xo(),g!==d?(En=b,c=$d(g),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Vd)),b}function ap(){var b,c,e,f,g,h,i;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,5)===md?(e=md,Dn+=5):(e=d,0===In&&Vn(nd)),e===d&&(a.substr(Dn,5)===od?(e=od,Dn+=5):(e=d,0===In&&Vn(pd))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if((g=Yp())!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();h!==d?(i=Xo(),i!==d?(En=b,c=ae(g,i),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(_d)),b}function bp(){var b,c,e,f;return In++,b=Dn,a.substr(Dn,7)===ce?(c=ce,Dn+=7):(c=d,0===In&&Vn(de)),c!==d?(e=Yp(),e!==d?(f=Xo(),f!==d?(En=b,c=ee(e,f),b=c):(Dn=b,b=d)):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(be)),b}function cp(){var b,c,e,f;if(In++,b=Dn,a.substr(Dn,5)===ge?(c=ge,Dn+=5):(c=d,0===In&&Vn(he)),c===d&&(a.substr(Dn,5)===ie?(c=ie,Dn+=5):(c=d,0===In&&Vn(je))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=Xo(),f!==d?(En=b,c=ke(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(fe)),b}function dp(){var b,c,e,f,g,h,i,j;if(In++,b=Dn,(c=Xo())!==d){for(e=[],f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,5)===me?(h=me,Dn+=5):(h=d,0===In&&Vn(ne)),h===d&&(a.substr(Dn,5)===oe?(h=oe,Dn+=5):(h=d,0===In&&Vn(pe))),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=Xo(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;for(;f!==d;){for(e.push(f),f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,5)===me?(h=me,Dn+=5):(h=d,0===In&&Vn(ne)),h===d&&(a.substr(Dn,5)===oe?(h=oe,Dn+=5):(h=d,0===In&&Vn(pe))),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=Xo(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d}e!==d?(En=b,c=qe(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(le)),b}function ep(){var b,c,e,f,g;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,6)===se?(e=se,Dn+=6):(e=d,0===In&&Vn(te)),e===d&&(a.substr(Dn,6)===ue?(e=ue,Dn+=6):(e=d,0===In&&Vn(ve))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(g=gp(),g!==d?(En=b,c=we(g),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(re)),b}function fp(){var b,c,e,f,g,h,i,j,k,l,m,n,o;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,4)===ye?(e=ye,Dn+=4):(e=d,0===In&&Vn(ze)),e===d&&(a.substr(Dn,4)===Ae?(e=Ae,Dn+=4):(e=d,0===In&&Vn(Be))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if(40===a.charCodeAt(Dn)?(g=O,Dn++):(g=d,0===In&&Vn(P)),g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if((i=_p())!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();if(j!==d)if(a.substr(Dn,2)===S?(k=S,Dn+=2):(k=d,0===In&&Vn(T)),k===d&&(a.substr(Dn,2)===Q?(k=Q,Dn+=2):(k=d,0===In&&Vn(R))),k!==d){for(l=[],m=Xq();m!==d;)l.push(m),m=Xq();if(l!==d)if((m=Zp())!==d){for(n=[],o=Xq();o!==d;)n.push(o),o=Xq();n!==d?(41===a.charCodeAt(Dn)?(o=U,Dn++):(o=d,0===In&&Vn(V)),o!==d?(En=b,c=Ce(i,m),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(xe)),b}function gp(){var a;return In++,a=jq(),a===d&&(a=kq())===d&&(a=mp()),In--,a===d&&(d,0===In&&Vn(De)),a}function hp(){var b,c,e,f,g;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(a.substr(Dn,6)===Rb?(e=Rb,Dn+=6):(e=d,0===In&&Vn(Sb)),e===d&&(a.substr(Dn,6)===Tb?(e=Tb,Dn+=6):(e=d,0===In&&Vn(Ub))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(g=ip(),g!==d?(En=b,c=Fe(g),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Ee)),b}function ip(){var a;return In++,a=jp(),a===d&&(a=kp()),In--,a===d&&(d,0===In&&Vn(Ge)),a}function jp(){var b,c,e,f,g,h,i,j;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if((e=Zp())!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if(123===a.charCodeAt(Dn)?(g=ha,Dn++):(g=d,0===In&&Vn(ia)),g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d){for(i=[],j=lp();j!==d;)i.push(j),j=lp();i!==d?(125===a.charCodeAt(Dn)?(j=ja,Dn++):(j=d,0===In&&Vn(ka)),j!==d?(En=b,c=Ie(e,i),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(He)),b}function kp(){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d){if((e=Wq())===d)if(e=Dn,40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d){for(h=[],i=Zp();i!==d;)h.push(i),i=Zp();if(h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(41===a.charCodeAt(Dn)?(j=U,Dn++):(j=d,0===In&&Vn(V)),j!==d?(f=[f,g,h,i,j],e=f):(Dn=e,e=d)):(Dn=e,e=d)}else Dn=e,e=d}else Dn=e,e=d}else Dn=e,e=d;if(e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if(123===a.charCodeAt(Dn)?(g=ha,Dn++):(g=d,0===In&&Vn(ia)),g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d){for(i=[],j=Dn,k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(40===a.charCodeAt(Dn)?(l=O,Dn++):(l=d,0===In&&Vn(P)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();if(m!==d){for(n=[],o=lp();o!==d;)n.push(o),o=lp();if(n!==d){for(o=[],p=Xq();p!==d;)o.push(p),p=Xq();if(o!==d)if(41===a.charCodeAt(Dn)?(p=U,Dn++):(p=d,0===In&&Vn(V)),p!==d){for(q=[],r=Xq();r!==d;)q.push(r),r=Xq();q!==d?(k=[k,l,m,n,o,p,q],j=k):(Dn=j,j=d)}else Dn=j,j=d;else Dn=j,j=d}else Dn=j,j=d}else Dn=j,j=d}else Dn=j,j=d;else Dn=j,j=d;for(j===d&&(j=Wq());j!==d;){for(i.push(j),j=Dn,k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(40===a.charCodeAt(Dn)?(l=O,Dn++):(l=d,0===In&&Vn(P)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();if(m!==d){for(n=[],o=lp();o!==d;)n.push(o),o=lp();if(n!==d){for(o=[],p=Xq();p!==d;)o.push(p),p=Xq();if(o!==d)if(41===a.charCodeAt(Dn)?(p=U,Dn++):(p=d,0===In&&Vn(V)),p!==d){for(q=[],r=Xq();r!==d;)q.push(r),r=Xq();q!==d?(k=[k,l,m,n,o,p,q],j=k):(Dn=j,j=d)}else Dn=j,j=d;else Dn=j,j=d}else Dn=j,j=d}else Dn=j,j=d}else Dn=j,j=d;else Dn=j,j=d;j===d&&(j=Wq())}if(i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(125===a.charCodeAt(Dn)?(k=ja,Dn++):(k=d,0===In&&Vn(ka)),k!==d?(En=b,c=Ke(e,i),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Je)),b}function lp(){var b,c,e,f,g;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(e=Aq(),e===d&&(e=qq())===d&&(e=rq())===d&&(e=vq())===d&&(a.substr(Dn,5)===Ob?(e=Ob,Dn+=5):(e=d,0===In&&Vn(Pb))),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(En=b,c=ab(e),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Le)),b}function mp(){var a,b,c,e;if(In++,a=Dn,(b=xq())!==d){for(c=[],e=Xq();e!==d;)c.push(e),e=Xq();c!==d?(e=np(),e!==d?(En=a,b=Ne(b,e),a=b):(Dn=a,a=d)):(Dn=a,a=d)}else Dn=a,a=d;return In--,a===d&&(b=d,0===In&&Vn(Me)),a}function np(){var b,c,e,f,g,h,i,j,k,l,m,n;if(In++,b=Dn,c=Wq(),c!==d&&(En=b,c=Pe()),(b=c)===d)if(b=Dn,40===a.charCodeAt(Dn)?(c=O,Dn++):(c=d,0===In&&Vn(P)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(a.substr(Dn,8)===G?(f=G,Dn+=8):(f=d,0===In&&Vn(H)),f===d&&(a.substr(Dn,8)===I?(f=I,Dn+=8):(f=d,0===In&&Vn(J))),f===d&&(f=null),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d){if(j=[],k=Dn,44===a.charCodeAt(Dn)?(l=Qe,Dn++):(l=d,0===In&&Vn(Re)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(n=_p(),n!==d?(l=[l,m,n],k=l):(Dn=k,k=d)):(Dn=k,k=d)}else Dn=k,k=d;for(;k!==d;)if(j.push(k),k=Dn,44===a.charCodeAt(Dn)?(l=Qe,Dn++):(l=d,0===In&&Vn(Re)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(n=_p(),n!==d?(l=[l,m,n],k=l):(Dn=k,k=d)):(Dn=k,k=d)}else Dn=k,k=d;j!==d?(41===a.charCodeAt(Dn)?(k=U,Dn++):(k=d,0===In&&Vn(V)),k!==d?(En=b,c=Se(f,h,j),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Oe)),b}function op(){var b,c,e,f,g,h,i,j,k,l;if(In++,b=Dn,c=Wq(),c!==d&&(En=b,c=Pe()),(b=c)===d)if(b=Dn,40===a.charCodeAt(Dn)?(c=O,Dn++):(c=d,0===In&&Vn(P)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(f=xq(),f===d&&(f=_p()),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d){if(h=[],i=Dn,44===a.charCodeAt(Dn)?(j=Qe,Dn++):(j=d,0===In&&Vn(Re)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=xq(),l===d&&(l=_p()),l!==d?(j=[j,k,l],i=j):(Dn=i,i=d)):(Dn=i,i=d)}else Dn=i,i=d;for(;i!==d;)if(h.push(i),i=Dn,44===a.charCodeAt(Dn)?(j=Qe,Dn++):(j=d,0===In&&Vn(Re)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=xq(),l===d&&(l=_p()),l!==d?(j=[j,k,l],i=j):(Dn=i,i=d)):(Dn=i,i=d)}else Dn=i,i=d;h!==d?(41===a.charCodeAt(Dn)?(i=U,Dn++):(i=d,0===In&&Vn(V)),i!==d?(En=b,c=Ue(f,h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Te)),b}function pp(){var b,c,e,f,g,h;if(In++,b=Dn,123===a.charCodeAt(Dn)?(c=ha,Dn++):(c=d,0===In&&Vn(ia)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(f=qp(),f===d&&(f=null),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(125===a.charCodeAt(Dn)?(h=ja,Dn++):(h=d,0===In&&Vn(ka)),h!==d?(En=b,c=We(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Ve)),b}function qp(){var b,c,e,f,g,h,i;if(In++,b=Dn,(c=rp())!==d){for(e=Dn,f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if(46===a.charCodeAt(Dn)?(g=Hd,Dn++):(g=d,0===In&&Vn(Id)),g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();h!==d?(i=qp(),i===d&&(i=null),i!==d?(f=[f,g,h,i],e=f):(Dn=e,e=d)):(Dn=e,e=d)}else Dn=e,e=d;else Dn=e,e=d;e===d&&(e=null),e!==d?(En=b,c=Ye(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Xe)),b}function rp(){var a,b,c,e,f;for(In++,a=Dn,b=[],c=Xq();c!==d;)b.push(c),c=Xq();if(b!==d)if((c=Xp())!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=tp(),f!==d?(En=a,b=$e(c,f),a=b):(Dn=a,a=d)):(Dn=a,a=d)}else Dn=a,a=d;else Dn=a,a=d;if(a===d){for(a=Dn,b=[],c=Xq();c!==d;)b.push(c),c=Xq();if(b!==d)if((c=Qp())!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=up(),f!==d?(En=a,b=_e(c,f),a=b):(Dn=a,a=d)):(Dn=a,a=d)}else Dn=a,a=d;else Dn=a,a=d}return In--,a===d&&(b=d,0===In&&Vn(Ze)),a}function sp(){var b,c,e,f,g,h,i,j,k,l,m,n,o;if(In++,b=Dn,c=Dp(),c===d&&(c=Ep()),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=vp())!==d){for(g=[],h=Dn,i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(59===a.charCodeAt(Dn)?(j=Yb,Dn++):(j=d,0===In&&Vn(Zb)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d){if(l=Dn,m=Dp(),m===d&&(m=Ep()),m!==d){for(n=[],o=Xq();o!==d;)n.push(o),o=Xq();n!==d?(o=wp(),o!==d?(m=[m,n,o],l=m):(Dn=l,l=d)):(Dn=l,l=d)}else Dn=l,l=d;l===d&&(l=null),l!==d?(i=[i,j,k,l],h=i):(Dn=h,h=d)}else Dn=h,h=d}else Dn=h,h=d;else Dn=h,h=d;for(;h!==d;){for(g.push(h),h=Dn,i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(59===a.charCodeAt(Dn)?(j=Yb,Dn++):(j=d,0===In&&Vn(Zb)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d){if(l=Dn,m=Dp(),m===d&&(m=Ep()),m!==d){for(n=[],o=Xq();o!==d;)n.push(o),o=Xq();n!==d?(o=wp(),o!==d?(m=[m,n,o],l=m):(Dn=l,l=d)):(Dn=l,l=d)}else Dn=l,l=d;l===d&&(l=null),l!==d?(i=[i,j,k,l],h=i):(Dn=h,h=d)}else Dn=h,h=d}else Dn=h,h=d;else Dn=h,h=d}g!==d?(En=b,c=bf(c,f,g),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(af)),b}function tp(){var b,c,e,f,g,h,i,j,k,l,m,n,o;if(In++,b=Dn,(c=zp())!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=wp())!==d){for(g=[],h=Dn,i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(59===a.charCodeAt(Dn)?(j=Yb,Dn++):(j=d,0===In&&Vn(Zb)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d){if(l=Dn,(m=zp())!==d){for(n=[],o=Xq();o!==d;)n.push(o),o=Xq();n!==d?(o=wp(),o!==d?(m=[m,n,o],l=m):(Dn=l,l=d)):(Dn=l,l=d)}else Dn=l,l=d;l===d&&(l=null),l!==d?(i=[i,j,k,l],h=i):(Dn=h,h=d)}else Dn=h,h=d}else Dn=h,h=d;else Dn=h,h=d;for(;h!==d;){for(g.push(h),h=Dn,i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(59===a.charCodeAt(Dn)?(j=Yb,Dn++):(j=d,0===In&&Vn(Zb)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d){if(l=Dn,(m=zp())!==d){for(n=[],o=Xq();o!==d;)n.push(o),o=Xq();n!==d?(o=wp(),o!==d?(m=[m,n,o],l=m):(Dn=l,l=d)):(Dn=l,l=d)}else Dn=l,l=d;l===d&&(l=null),l!==d?(i=[i,j,k,l],h=i):(Dn=h,h=d)}else Dn=h,h=d}else Dn=h,h=d;else Dn=h,h=d}g!==d?(En=b,c=df(c,f,g),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(cf)),b}function up(){var a;return In++,a=tp(),a===d&&(a=null),In--,a===d&&(d,0===In&&Vn(ef)),a}function vp(){var b,c,e,f,g,h,i,j;if(In++,b=Dn,(c=xp())!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d){if(f=[],g=Dn,44===a.charCodeAt(Dn)?(h=Qe,Dn++):(h=d,0===In&&Vn(Re)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=xp(),j!==d?(h=[h,i,j],g=h):(Dn=g,g=d)):(Dn=g,g=d)}else Dn=g,g=d;for(;g!==d;)if(f.push(g),g=Dn,44===a.charCodeAt(Dn)?(h=Qe,Dn++):(h=d,0===In&&Vn(Re)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=xp(),j!==d?(h=[h,i,j],g=h):(Dn=g,g=d)):(Dn=g,g=d)}else Dn=g,g=d;f!==d?(En=b,c=gf(c,f),b=c):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(ff)),b}function wp(){var b,c,e,f,g,h,i,j;if(In++,b=Dn,(c=yp())!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d){if(f=[],g=Dn,44===a.charCodeAt(Dn)?(h=Qe,Dn++):(h=d,0===In&&Vn(Re)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=yp(),j!==d?(h=[h,i,j],g=h):(Dn=g,g=d)):(Dn=g,g=d)}else Dn=g,g=d;for(;g!==d;)if(f.push(g),g=Dn,44===a.charCodeAt(Dn)?(h=Qe,Dn++):(h=d,0===In&&Vn(Re)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=yp(),j!==d?(h=[h,i,j],g=h):(Dn=g,g=d)):(Dn=g,g=d)}else Dn=g,g=d;f!==d?(En=b,c=jf(c,f),b=c):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(hf)),b}function xp(){var a;return In++,a=Vp(),In--,a===d&&(d,0===In&&Vn(kf)),a}function yp(){var a;return In++,a=Wp(),In--,a===d&&(d,0===In&&Vn(lf)),a}function zp(){var b,c;return In++,b=Yp(),b===d&&(b=Dn,97===a.charCodeAt(Dn)?(c=nf,Dn++):(c=d,0===In&&Vn(of)),c!==d&&(En=b,c=pf()),b=c),In--,b===d&&(c=d,0===In&&Vn(mf)),b}function Ap(){var a,b,c,e,f;for(In++,a=Dn,b=[],c=Xq();c!==d;)b.push(c),c=Xq();if(b!==d)if((c=Xp())!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=Bp(),f!==d?(En=a,b=rf(c,f),a=b):(Dn=a,a=d)):(Dn=a,a=d)}else Dn=a,a=d;else Dn=a,a=d;if(a===d){for(a=Dn,b=[],c=Xq();c!==d;)b.push(c),c=Xq();if(b!==d)if((c=Pp())!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=Cp(),f!==d?(En=a,b=sf(c,f),a=b):(Dn=a,a=d)):(Dn=a,a=d)}else Dn=a,a=d;else Dn=a,a=d}return In--,a===d&&(b=d,0===In&&Vn(qf)),a}function Bp(){var b,c,e,f,g,h,i,j,k,l,m,n;if(In++,b=Dn,c=Dp(),c===d&&(c=Ep()),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=vp())!==d){for(g=[],h=Dn,i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(59===a.charCodeAt(Dn)?(j=Yb,Dn++):(j=d,0===In&&Vn(Zb)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=Dn,m=Dp(),m===d&&(m=Ep()),m!==d?(n=wp(),n!==d?(m=[m,n],l=m):(Dn=l,l=d)):(Dn=l,l=d),l===d&&(l=null),l!==d?(i=[i,j,k,l],h=i):(Dn=h,h=d)):(Dn=h,h=d)}else Dn=h,h=d;else Dn=h,h=d;for(;h!==d;){for(g.push(h),h=Dn,i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(59===a.charCodeAt(Dn)?(j=Yb,Dn++):(j=d,0===In&&Vn(Zb)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=Dn,m=Dp(),m===d&&(m=Ep()),m!==d?(n=wp(),n!==d?(m=[m,n],l=m):(Dn=l,l=d)):(Dn=l,l=d),l===d&&(l=null),l!==d?(i=[i,j,k,l],h=i):(Dn=h,h=d)):(Dn=h,h=d)}else Dn=h,h=d;else Dn=h,h=d}g!==d?(En=b,c=uf(c,f,g),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(tf)),b}function Cp(){var a;return In++,a=sp(),a===d&&(a=null),In--,a===d&&(d,0===In&&Vn(vf)),a}function Dp(){var a,b;return In++,a=Dn,b=Fp(),b!==d&&(En=a,b=xf(b)),a=b,In--,a===d&&(b=d,0===In&&Vn(wf)),a}function Ep(){var a;return In++,a=Zp(),In--,a===d&&(d,0===In&&Vn(yf)),a}function Fp(){var a;return In++,a=Gp(),In--,a===d&&(d,0===In&&Vn(zf)),a}function Gp(){var b,c,e,f,g,h;if(In++,b=Dn,(c=Hp())!==d){for(e=[],f=Dn,124===a.charCodeAt(Dn)?(g=Bf,Dn++):(g=d,0===In&&Vn(Cf)),g!==d?(h=Hp(),h!==d?(g=[g,h],f=g):(Dn=f,f=d)):(Dn=f,f=d);f!==d;)e.push(f),f=Dn,124===a.charCodeAt(Dn)?(g=Bf,Dn++):(g=d,0===In&&Vn(Cf)),g!==d?(h=Hp(),h!==d?(g=[g,h],f=g):(Dn=f,f=d)):(Dn=f,f=d);e!==d?(En=b,c=Df(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Af)),b}function Hp(){var b,c,e,f,g,h;if(In++,b=Dn,(c=Jp())!==d){for(e=[],f=Dn,47===a.charCodeAt(Dn)?(g=Ff,Dn++):(g=d,0===In&&Vn(Gf)),g!==d?(h=Jp(),h!==d?(g=[g,h],f=g):(Dn=f,f=d)):(Dn=f,f=d);f!==d;)e.push(f),f=Dn,47===a.charCodeAt(Dn)?(g=Ff,Dn++):(g=d,0===In&&Vn(Gf)),g!==d?(h=Jp(),h!==d?(g=[g,h],f=g):(Dn=f,f=d)):(Dn=f,f=d);e!==d?(En=b,c=Hf(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Ef)),b}function Ip(){var a,b,c;return In++,a=Dn,b=Lp(),b!==d?(c=Kp(),c===d&&(c=null),c!==d?(En=a,b=Jf(b,c),a=b):(Dn=a,a=d)):(Dn=a,a=d),In--,a===d&&(b=d,0===In&&Vn(If)),a}function Jp(){var b,c,e;return In++,b=Ip(),b===d&&(b=Dn,94===a.charCodeAt(Dn)?(c=Lf,Dn++):(c=d,0===In&&Vn(Mf)),c!==d?(e=Ip(),e!==d?(En=b,c=Nf(e),b=c):(Dn=b,b=d)):(Dn=b,b=d)),In--,b===d&&(c=d,0===In&&Vn(Kf)),b}function Kp(){var b,c,e,f,g,h,i,j,k;return In++,42===a.charCodeAt(Dn)?(b=W,Dn++):(b=d,0===In&&Vn(X)),b===d&&(63===a.charCodeAt(Dn)?(b=Pf,Dn++):(b=d,0===In&&Vn(Qf)),b===d&&(43===a.charCodeAt(Dn)?(b=Rf,Dn++):(b=d,0===In&&Vn(Sf)),b===d&&(b=Dn,123===a.charCodeAt(Dn)?(c=ha,Dn++):(c=d,0===In&&Vn(ia)),c!==d?(e=Dn,f=Op(),f!==d?(g=Dn,44===a.charCodeAt(Dn)?(h=Qe,Dn++):(h=d,0===In&&Vn(Re)),h!==d?(125===a.charCodeAt(Dn)?(i=ja,Dn++):(i=d,0===In&&Vn(ka)),i===d&&(i=Dn,j=Op(),j!==d?(125===a.charCodeAt(Dn)?(k=ja,Dn++):(k=d,0===In&&Vn(ka)),k!==d?(j=[j,k],i=j):(Dn=i,i=d)):(Dn=i,i=d)),i!==d?(h=[h,i],g=h):(Dn=g,g=d)):(Dn=g,g=d),g===d&&(125===a.charCodeAt(Dn)?(g=ja,Dn++):(g=d,0===In&&Vn(ka))),g!==d?(f=[f,g],e=f):(Dn=e,e=d)):(Dn=e,e=d),e===d&&(e=Dn,44===a.charCodeAt(Dn)?(f=Qe,Dn++):(f=d,0===In&&Vn(Re)),f!==d?(g=Op(),g!==d?(125===a.charCodeAt(Dn)?(h=ja,Dn++):(h=d,0===In&&Vn(ka)),h!==d?(f=[f,g,h],e=f):(Dn=e,e=d)):(Dn=e,e=d)):(Dn=e,e=d)),e!==d?(c=[c,e],b=c):(Dn=b,b=d)):(Dn=b,b=d)))),In--,b===d&&(c=d,0===In&&Vn(Of)),b}function Lp(){var b,c,e,f;return In++,b=xq(),b===d&&(b=Dn,97===a.charCodeAt(Dn)?(c=nf,Dn++):(c=d,0===In&&Vn(of)),c!==d&&(En=b,c=pf()),(b=c)===d&&(b=Dn,33===a.charCodeAt(Dn)?(c=Uf,Dn++):(c=d,0===In&&Vn(Vf)),c!==d?(e=Mp(),e!==d?(c=[c,e],b=c):(Dn=b,b=d)):(Dn=b,b=d),b===d&&(b=Dn,40===a.charCodeAt(Dn)?(c=O,Dn++):(c=d,0===In&&Vn(P)),c!==d?(e=Fp(),e!==d?(41===a.charCodeAt(Dn)?(f=U,Dn++):(f=d,0===In&&Vn(V)),f!==d?(En=b,c=Pd(e),b=c):(Dn=b,b=d)):(Dn=b,b=d)):(Dn=b,b=d)))),In--,b===d&&(c=d,0===In&&Vn(Tf)),b}function Mp(){var b,c,e,f,g,h,i,j;if((b=Np())===d)if(b=Dn,40===a.charCodeAt(Dn)?(c=O,Dn++):(c=d,0===In&&Vn(P)),c!==d){if(e=Dn,(f=Np())!==d){for(g=[],h=Dn,124===a.charCodeAt(Dn)?(i=Bf,Dn++):(i=d,0===In&&Vn(Cf)),i!==d?(j=Np(),j!==d?(i=[i,j],h=i):(Dn=h,h=d)):(Dn=h,h=d);h!==d;)g.push(h),h=Dn,124===a.charCodeAt(Dn)?(i=Bf,Dn++):(i=d,0===In&&Vn(Cf)),i!==d?(j=Np(),j!==d?(i=[i,j],h=i):(Dn=h,h=d)):(Dn=h,h=d);g!==d?(f=[f,g],e=f):(Dn=e,e=d)}else Dn=e,e=d;e===d&&(e=null),e!==d?(41===a.charCodeAt(Dn)?(f=U,Dn++):(f=d,0===In&&Vn(V)),f!==d?(c=[c,e,f],b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return b}function Np(){var b,c,e;return In++,b=xq(),b===d&&(97===a.charCodeAt(Dn)?(b=nf,Dn++):(b=d,0===In&&Vn(of)),b===d&&(b=Dn,94===a.charCodeAt(Dn)?(c=Lf,Dn++):(c=d,0===In&&Vn(Mf)),c!==d?(e=xq(),e===d&&(97===a.charCodeAt(Dn)?(e=nf,Dn++):(e=d,0===In&&Vn(of))),e!==d?(c=[c,e],b=c):(Dn=b,b=d)):(Dn=b,b=d))),In--,b===d&&(c=d,0===In&&Vn(Wf)),b}function Op(){var a;return In++,a=Hq(),In--,a===d&&(d,0===In&&Vn(Xf)),a}function Pp(){var a,b;return In++,a=Dn,b=Tp(),b!==d&&(En=a,b=Zf(b)),a=b,a===d&&(a=Rp()),In--,a===d&&(b=d,0===In&&Vn(Yf)),a}function Qp(){var a,b;return In++,a=Dn,b=Up(),b!==d&&(En=a,b=_f(b)),a=b,a===d&&(a=Sp()),In--,a===d&&(b=d,0===In&&Vn($f)),a}function Rp(){var b,c,e,f,g,h,i,j;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(91===a.charCodeAt(Dn)?(e=bg,Dn++):(e=d,0===In&&Vn(cg)),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if((g=Bp())!==d)if(93===a.charCodeAt(Dn)?(h=dg,Dn++):(h=d,0===In&&Vn(eg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(En=b,c=fg(g),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(ag)),b}function Sp(){var b,c,e,f,g,h,i,j,k;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(91===a.charCodeAt(Dn)?(e=bg,Dn++):(e=d,0===In&&Vn(cg)),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if((g=tp())!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if(93===a.charCodeAt(Dn)?(i=dg,Dn++):(i=d,0===In&&Vn(eg)),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(En=b,c=hg(g),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(gg)),b}function Tp(){var b,c,e,f,g,h,i,j,k;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(40===a.charCodeAt(Dn)?(e=O,Dn++):(e=d,0===In&&Vn(P)),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d){if(g=[],(h=Vp())!==d)for(;h!==d;)g.push(h),h=Vp();else g=d;if(g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if(41===a.charCodeAt(Dn)?(i=U,Dn++):(i=d,0===In&&Vn(V)),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(En=b,c=jg(g),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(ig)),b}function Up(){var b,c,e,f,g,h,i,j,k;for(In++,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if(40===a.charCodeAt(Dn)?(e=O,Dn++):(e=d,0===In&&Vn(P)),e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d){if(g=[],(h=Wp())!==d)for(;h!==d;)g.push(h),h=Wp();else g=d;if(g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if(41===a.charCodeAt(Dn)?(i=U,Dn++):(i=d,0===In&&Vn(V)),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(En=b,c=jg(g),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(kg)),b}function Vp(){var a,b,c,e,f,g;for(In++,a=Dn,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if((e=Xp())!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(c=[c,e,f],b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;if(b===d){for(b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if((e=Pp())!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(c=[c,e,f],b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}return b!==d&&(En=a,b=mg(b)),a=b,In--,a===d&&(b=d,0===In&&Vn(lg)),a}function Wp(){var a,b,c,e,f,g;for(In++,a=Dn,b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if((e=Xp())!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(c=[c,e,f],b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;if(b===d){for(b=Dn,c=[],e=Xq();e!==d;)c.push(e),e=Xq();if(c!==d)if((e=Qp())!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();f!==d?(c=[c,e,f],b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}return b!==d&&(En=a,b=mg(b)),a=b,In--,a===d&&(b=d,0===In&&Vn(ng)),a}function Xp(){var a;return In++,a=Zp(),a===d&&(a=$p()),In--,a===d&&(d,0===In&&Vn(og)),a}function Yp(){var a;return In++,a=Zp(),a===d&&(a=xq()),In--,a===d&&(d,0===In&&Vn(pg)),a}function Zp(){var a,b,c,e,f;for(In++,a=Dn,b=[],c=Xq();c!==d;)b.push(c),c=Xq();if(b!==d)if(c=Eq(),c===d&&(c=Fq()),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(En=a,b=rg(c),a=b):(Dn=a,a=d)}else Dn=a,a=d;else Dn=a,a=d;return In--,a===d&&(b=d,0===In&&Vn(qg)),a}function $p(){var a;return In++,a=xq(),a===d&&(a=qq())===d&&(a=rq())===d&&(a=vq())===d&&(a=zq())===d&&(a=Wq()),In--,a===d&&(d,0===In&&Vn(sg)),a}function _p(){var a;return In++,a=aq(),In--,a===d&&(d,0===In&&Vn(tg)),a}function aq(){var b,c,e,f,g,h,i,j;if(In++,b=Dn,(c=bq())!==d){for(e=[],f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,2)===vg?(h=vg,Dn+=2):(h=d,0===In&&Vn(wg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=bq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;for(;f!==d;){for(e.push(f),f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,2)===vg?(h=vg,Dn+=2):(h=d,0===In&&Vn(wg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=bq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d}e!==d?(En=b,c=xg(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(ug)),b}function bq(){var b,c,e,f,g,h,i,j;if(In++,b=Dn,(c=cq())!==d){for(e=[],f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,2)===zg?(h=zg,Dn+=2):(h=d,0===In&&Vn(Ag)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=cq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;for(;f!==d;){for(e.push(f),f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,2)===zg?(h=zg,Dn+=2):(h=d,0===In&&Vn(Ag)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=cq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d}e!==d?(En=b,c=Bg(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(yg)),b}function cq(){var a;return In++,a=dq(),In--,a===d&&(d,0===In&&Vn(Cg)),a}function dq(){var b,c,e,f,g,h,i,j,k,l,m,n,o;if(In++,b=Dn,(c=eq())!==d){for(e=[],f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(61===a.charCodeAt(Dn)?(h=Eg,Dn++):(h=d,0===In&&Vn(Fg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,2)===Gg?(h=Gg,Dn+=2):(h=d,0===In&&Vn(Hg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(60===a.charCodeAt(Dn)?(h=Ig,Dn++):(h=d,0===In&&Vn(Jg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(62===a.charCodeAt(Dn)?(h=Kg,Dn++):(h=d,0===In&&Vn(Lg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,2)===Mg?(h=Mg,Dn+=2):(h=d,0===In&&Vn(Ng)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,2)===Og?(h=Og,Dn+=2):(h=d,0===In&&Vn(Pg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(73===a.charCodeAt(Dn)?(h=Qg,Dn++):(h=d,0===In&&Vn(Rg)),h===d&&(105===a.charCodeAt(Dn)?(h=Sg,Dn++):(h=d,0===In&&Vn(Tg))),h!==d)if(78===a.charCodeAt(Dn)?(i=Ug,Dn++):(i=d,0===In&&Vn(Vg)),i===d&&(110===a.charCodeAt(Dn)?(i=Wg,Dn++):(i=d,0===In&&Vn(Xg))),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(k=op(),k!==d?(g=[g,h,i,j,k],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(78===a.charCodeAt(Dn)?(h=Ug,Dn++):(h=d,0===In&&Vn(Vg)),h===d&&(110===a.charCodeAt(Dn)?(h=Wg,Dn++):(h=d,0===In&&Vn(Xg))),h!==d)if(79===a.charCodeAt(Dn)?(i=Yg,Dn++):(i=d,0===In&&Vn(Zg)),i===d&&(111===a.charCodeAt(Dn)?(i=$g,Dn++):(i=d,0===In&&Vn(_g))),i!==d)if(84===a.charCodeAt(Dn)?(j=ah,Dn++):(j=d,0===In&&Vn(bh)),j===d&&(116===a.charCodeAt(Dn)?(j=ch,Dn++):(j=d,0===In&&Vn(dh))),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(73===a.charCodeAt(Dn)?(l=Qg,Dn++):(l=d,0===In&&Vn(Rg)),l===d&&(105===a.charCodeAt(Dn)?(l=Sg,Dn++):(l=d,0===In&&Vn(Tg))),l!==d)if(78===a.charCodeAt(Dn)?(m=Ug,Dn++):(m=d,0===In&&Vn(Vg)),m===d&&(110===a.charCodeAt(Dn)?(m=Wg,Dn++):(m=d,0===In&&Vn(Xg))),m!==d){for(n=[],o=Xq();o!==d;)n.push(o),o=Xq();n!==d?(o=op(),o!==d?(g=[g,h,i,j,k,l,m,n,o],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;else Dn=f,f=d}else Dn=f,f=d;else Dn=f,f=d;else Dn=f,f=d;else Dn=f,f=d}}}}}}}for(;f!==d;){for(e.push(f),f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(61===a.charCodeAt(Dn)?(h=Eg,Dn++):(h=d,0===In&&Vn(Fg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,2)===Gg?(h=Gg,Dn+=2):(h=d,0===In&&Vn(Hg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(60===a.charCodeAt(Dn)?(h=Ig,Dn++):(h=d,0===In&&Vn(Jg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(62===a.charCodeAt(Dn)?(h=Kg,Dn++):(h=d,0===In&&Vn(Lg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,2)===Mg?(h=Mg,Dn+=2):(h=d,0===In&&Vn(Ng)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,2)===Og?(h=Og,Dn+=2):(h=d,0===In&&Vn(Pg)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=eq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(73===a.charCodeAt(Dn)?(h=Qg,Dn++):(h=d,0===In&&Vn(Rg)),h===d&&(105===a.charCodeAt(Dn)?(h=Sg,Dn++):(h=d,0===In&&Vn(Tg))),h!==d)if(78===a.charCodeAt(Dn)?(i=Ug,Dn++):(i=d,0===In&&Vn(Vg)),i===d&&(110===a.charCodeAt(Dn)?(i=Wg,Dn++):(i=d,0===In&&Vn(Xg))),i!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(k=op(),k!==d?(g=[g,h,i,j,k],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(78===a.charCodeAt(Dn)?(h=Ug,Dn++):(h=d,0===In&&Vn(Vg)),h===d&&(110===a.charCodeAt(Dn)?(h=Wg,Dn++):(h=d,0===In&&Vn(Xg))),h!==d)if(79===a.charCodeAt(Dn)?(i=Yg,Dn++):(i=d,0===In&&Vn(Zg)),i===d&&(111===a.charCodeAt(Dn)?(i=$g,Dn++):(i=d,0===In&&Vn(_g))),i!==d)if(84===a.charCodeAt(Dn)?(j=ah,Dn++):(j=d,0===In&&Vn(bh)),j===d&&(116===a.charCodeAt(Dn)?(j=ch,Dn++):(j=d,0===In&&Vn(dh))),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(73===a.charCodeAt(Dn)?(l=Qg,Dn++):(l=d,0===In&&Vn(Rg)),l===d&&(105===a.charCodeAt(Dn)?(l=Sg,Dn++):(l=d,0===In&&Vn(Tg))),l!==d)if(78===a.charCodeAt(Dn)?(m=Ug,Dn++):(m=d,0===In&&Vn(Vg)),m===d&&(110===a.charCodeAt(Dn)?(m=Wg,Dn++):(m=d,0===In&&Vn(Xg))),m!==d){for(n=[],o=Xq();o!==d;)n.push(o),o=Xq();n!==d?(o=op(),o!==d?(g=[g,h,i,j,k,l,m,n,o],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;else Dn=f,f=d}else Dn=f,f=d;else Dn=f,f=d;else Dn=f,f=d;else Dn=f,f=d}}}}}}}}e!==d?(En=b,c=eh(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Dg)),b}function eq(){var a;return In++,a=fq(),In--,a===d&&(d,0===In&&Vn(fh)),a}function fq(){var b,c,e,f,g,h,i,j,k,l;if(In++,b=Dn,(c=gq())!==d){for(e=[],f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(43===a.charCodeAt(Dn)?(h=Rf,Dn++):(h=d,0===In&&Vn(Sf)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=gq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(45===a.charCodeAt(Dn)?(h=hh,Dn++):(h=d,0===In&&Vn(ih)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=gq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d)if(f=Dn,g=uq(),g===d&&(g=uq()),g!==d){for(h=Dn,i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(42===a.charCodeAt(Dn)?(j=W,Dn++):(j=d,0===In&&Vn(X)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=hq(),l!==d?(i=[i,j,k,l],h=i):(Dn=h,h=d)):(Dn=h,h=d)}else Dn=h,h=d;else Dn=h,h=d;if(h===d){for(h=Dn,i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(47===a.charCodeAt(Dn)?(j=Ff,Dn++):(j=d,0===In&&Vn(Gf)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=hq(),l!==d?(i=[i,j,k,l],h=i):(Dn=h,h=d)):(Dn=h,h=d)}else Dn=h,h=d;else Dn=h,h=d}h===d&&(h=null),h!==d?(g=[g,h],f=g):(Dn=f,f=d)}else Dn=f,f=d}for(;f!==d;){for(e.push(f),f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(43===a.charCodeAt(Dn)?(h=Rf,Dn++):(h=d,0===In&&Vn(Sf)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=gq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(45===a.charCodeAt(Dn)?(h=hh,Dn++):(h=d,0===In&&Vn(ih)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=gq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d)if(f=Dn,g=uq(),g===d&&(g=uq()),g!==d){for(h=Dn,i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(42===a.charCodeAt(Dn)?(j=W,Dn++):(j=d,0===In&&Vn(X)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=hq(),l!==d?(i=[i,j,k,l],h=i):(Dn=h,h=d)):(Dn=h,h=d)}else Dn=h,h=d;else Dn=h,h=d;if(h===d){for(h=Dn,i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(47===a.charCodeAt(Dn)?(j=Ff,Dn++):(j=d,0===In&&Vn(Gf)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(l=hq(),l!==d?(i=[i,j,k,l],h=i):(Dn=h,h=d)):(Dn=h,h=d)}else Dn=h,h=d;else Dn=h,h=d}h===d&&(h=null),h!==d?(g=[g,h],f=g):(Dn=f,f=d)}else Dn=f,f=d}}e!==d?(En=b,c=jh(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(gh)),b}function gq(){var b,c,e,f,g,h,i,j;if(In++,b=Dn,(c=hq())!==d){for(e=[],f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(42===a.charCodeAt(Dn)?(h=W,Dn++):(h=d,0===In&&Vn(X)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=hq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(47===a.charCodeAt(Dn)?(h=Ff,Dn++):(h=d,0===In&&Vn(Gf)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=hq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d}for(;f!==d;){for(e.push(f),f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(42===a.charCodeAt(Dn)?(h=W,Dn++):(h=d,0===In&&Vn(X)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=hq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d;if(f===d){for(f=Dn,g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(47===a.charCodeAt(Dn)?(h=Ff,Dn++):(h=d,0===In&&Vn(Gf)),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(j=hq(),j!==d?(g=[g,h,i,j],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d}}e!==d?(En=b,c=lh(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(kh)),b}function hq(){var b,c,e,f;if(In++,b=Dn,33===a.charCodeAt(Dn)?(c=Uf,Dn++):(c=d,0===In&&Vn(Vf)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=iq(),f!==d?(En=b,c=nh(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;if(b===d){if(b=Dn,43===a.charCodeAt(Dn)?(c=Rf,Dn++):(c=d,0===In&&Vn(Sf)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=iq(),f!==d?(En=b,c=oh(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;if(b===d){if(b=Dn,45===a.charCodeAt(Dn)?(c=hh,Dn++):(c=d,0===In&&Vn(ih)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=iq(),f!==d?(En=b,c=ph(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;b===d&&(b=iq())}}return In--,b===d&&(c=d,0===In&&Vn(mh)),b}function iq(){var a,b;return In++,a=jq(),a===d&&(a=kq())===d&&(a=pq())===d&&(a=Dn,b=qq(),b!==d&&(En=a,b=rh(b)),(a=b)===d&&(a=Dn,b=rq(),b!==d&&(En=a,b=sh(b)),(a=b)===d&&(a=Dn,b=vq(),b!==d&&(En=a,b=th(b)),(a=b)===d&&(a=oq())===d&&(a=Dn,b=Zp(),b!==d&&(En=a,b=uh(b)),a=b)))),In--,a===d&&(b=d,0===In&&Vn(qh)),a}function jq(){var b,c,e,f,g,h;if(In++,b=Dn,40===a.charCodeAt(Dn)?(c=O,Dn++):(c=d,0===In&&Vn(P)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if((f=_p())!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(41===a.charCodeAt(Dn)?(h=U,Dn++):(h=d,0===In&&Vn(V)),h!==d?(En=b,c=wh(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(vh)),b}function kq(){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r;if(In++,b=Dn,a.substr(Dn,3)===yh?(c=yh,Dn+=3):(c=d,0===In&&Vn(zh)),c===d&&(a.substr(Dn,3)===Ah?(c=Ah,Dn+=3):(c=d,0===In&&Vn(Bh))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(41===a.charCodeAt(Dn)?(j=U,Dn++):(j=d,0===In&&Vn(V)),j!==d?(En=b,c=Ch(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,4)===Dh?(c=Dh,Dn+=4):(c=d,0===In&&Vn(Eh)),c===d&&(a.substr(Dn,4)===Fh?(c=Fh,Dn+=4):(c=d,0===In&&Vn(Gh))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(41===a.charCodeAt(Dn)?(j=U,Dn++):(j=d,0===In&&Vn(V)),j!==d?(En=b,c=Hh(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,11)===Ih?(c=Ih,Dn+=11):(c=d,0===In&&Vn(Jh)),c===d&&(a.substr(Dn,11)===Kh?(c=Kh,Dn+=11):(c=d,0===In&&Vn(Lh))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(44===a.charCodeAt(Dn)?(j=Qe,Dn++):(j=d,0===In&&Vn(Re)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if((l=_p())!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(41===a.charCodeAt(Dn)?(n=U,Dn++):(n=d,0===In&&Vn(V)),n!==d?(En=b,c=Mh(h,l),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,8)===Nh?(c=Nh,Dn+=8):(c=d,0===In&&Vn(Oh)),c===d&&(a.substr(Dn,8)===Ph?(c=Ph,Dn+=8):(c=d,0===In&&Vn(Qh))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(41===a.charCodeAt(Dn)?(j=U,Dn++):(j=d,0===In&&Vn(V)),j!==d?(En=b,c=Rh(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,5)===Sh?(c=Sh,Dn+=5):(c=d,0===In&&Vn(Th)),c===d&&(a.substr(Dn,5)===Uh?(c=Uh,Dn+=5):(c=d,0===In&&Vn(Vh))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=Zp())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(41===a.charCodeAt(Dn)?(j=U,Dn++):(j=d,0===In&&Vn(V)),j!==d?(En=b,c=Wh(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,3)===Xh?(c=Xh,Dn+=3):(c=d,0===In&&Vn(Yh)),c===d&&(a.substr(Dn,3)===Zh?(c=Zh,Dn+=3):(c=d,0===In&&Vn($h))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(41===a.charCodeAt(Dn)?(j=U,Dn++):(j=d,0===In&&Vn(V)),j!==d?(En=b,c=_h(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,3)===ai?(c=ai,Dn+=3):(c=d,0===In&&Vn(bi)),c===d&&(a.substr(Dn,3)===ci?(c=ci,Dn+=3):(c=d,0===In&&Vn(di))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(41===a.charCodeAt(Dn)?(j=U,Dn++):(j=d,0===In&&Vn(V)),j!==d?(En=b,c=ei(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,5)===fi?(c=fi,Dn+=5):(c=d,0===In&&Vn(gi)),c===d&&(a.substr(Dn,5)===hi?(c=hi,Dn+=5):(c=d,0===In&&Vn(ii))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d){if(f=Dn,40===a.charCodeAt(Dn)?(g=O,Dn++):(g=d,0===In&&Vn(P)),g!==d){for(h=[],i=Xq();i!==d;)h.push(i),i=Xq();if(h!==d)if((i=_p())!==d){for(j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(41===a.charCodeAt(Dn)?(k=U,Dn++):(k=d,0===In&&Vn(V)),k!==d?(g=[g,h,i,j,k],f=g):(Dn=f,f=d)):(Dn=f,f=d)}else Dn=f,f=d;else Dn=f,f=d}else Dn=f,f=d;f===d&&(f=Wq()),f!==d?(En=b,c=ji(f),b=c):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,8)===ki?(c=ki,Dn+=8):(c=d,0===In&&Vn(li)),c===d&&(a.substr(Dn,8)===mi?(c=mi,Dn+=8):(c=d,0===In&&Vn(ni))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=op(),f!==d?(En=b,c=oi(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,2)===pi?(c=pi,Dn+=2):(c=d,0===In&&Vn(qi)),c===d&&(a.substr(Dn,2)===ri?(c=ri,Dn+=2):(c=d,0===In&&Vn(si))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(44===a.charCodeAt(Dn)?(j=Qe,Dn++):(j=d,0===In&&Vn(Re)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if((l=_p())!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();if(m!==d)if(44===a.charCodeAt(Dn)?(n=Qe,Dn++):(n=d,0===In&&Vn(Re)),n!==d){for(o=[],p=Xq();p!==d;)o.push(p),p=Xq();if(o!==d)if((p=_p())!==d){for(q=[],r=Xq();r!==d;)q.push(r),r=Xq();q!==d?(41===a.charCodeAt(Dn)?(r=U,Dn++):(r=d,0===In&&Vn(V)),r!==d?(En=b,c=ti(h,l,p),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,9)===ui?(c=ui,Dn+=9):(c=d,0===In&&Vn(vi)),c===d&&(a.substr(Dn,9)===wi?(c=wi,Dn+=9):(c=d,0===In&&Vn(xi)),c===d&&(a.substr(Dn,9)===yi?(c=yi,Dn+=9):(c=d,0===In&&Vn(zi)))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(41===a.charCodeAt(Dn)?(j=U,Dn++):(j=d,0===In&&Vn(V)),j!==d?(En=b,c=Ai(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,7)===Bi?(c=Bi,Dn+=7):(c=d,0===In&&Vn(Ci)),c===d&&(a.substr(Dn,7)===Di?(c=Di,Dn+=7):(c=d,0===In&&Vn(Ei)),c===d&&(a.substr(Dn,7)===Fi?(c=Fi,Dn+=7):(c=d,0===In&&Vn(Gi)))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(41===a.charCodeAt(Dn)?(j=U,Dn++):(j=d,0===In&&Vn(V)),j!==d?(En=b,c=Hi(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,8)===Ii?(c=Ii,Dn+=8):(c=d,0===In&&Vn(Ji)),c===d&&(a.substr(Dn,8)===Ki?(c=Ki,Dn+=8):(c=d,0===In&&Vn(Li))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(44===a.charCodeAt(Dn)?(j=Qe,Dn++):(j=d,0===In&&Vn(Re)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if((l=_p())!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(41===a.charCodeAt(Dn)?(n=U,Dn++):(n=d,0===In&&Vn(V)),n!==d?(En=b,c=Mi(h,l),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,5)===Ni?(c=Ni,Dn+=5):(c=d,0===In&&Vn(Oi)),c===d&&(a.substr(Dn,5)===Pi?(c=Pi,Dn+=5):(c=d,0===In&&Vn(Qi)),c===d&&(a.substr(Dn,5)===Ri?(c=Ri,Dn+=5):(c=d,0===In&&Vn(Si)),c===d&&(a.substr(Dn,5)===Ti?(c=Ti,Dn+=5):(c=d,0===In&&Vn(Ui)),c===d&&(a.substr(Dn,5)===Vi?(c=Vi,Dn+=5):(c=d,0===In&&Vn(Wi)),c===d&&(a.substr(Dn,5)===Xi?(c=Xi,Dn+=5):(c=d,0===In&&Vn(Yi))))))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();i!==d?(41===a.charCodeAt(Dn)?(j=U,Dn++):(j=d,0===In&&Vn(V)),j!==d?(En=b,c=Zi(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,7)===$i?(c=$i,Dn+=7):(c=d,0===In&&Vn(_i)),c===d&&(a.substr(Dn,7)===aj?(c=aj,Dn+=7):(c=d,0===In&&Vn(bj))),c!==d){if(e=[],cj.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(dj)),f!==d)for(;f!==d;)e.push(f),cj.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(dj));else e=d;if(e!==d){for(f=[],g=Xq();g!==d;)f.push(g),g=Xq();if(f!==d)if(40===a.charCodeAt(Dn)?(g=O,Dn++):(g=d,0===In&&Vn(P)),g!==d){for(h=[],i=Dn,j=[],k=Xq();k!==d;)j.push(k),k=Xq();for(j!==d?(k=_p(),k!==d?(44===a.charCodeAt(Dn)?(l=Qe,Dn++):(l=d,0===In&&Vn(Re)),l!==d?(j=[j,k,l],i=j):(Dn=i,i=d)):(Dn=i,i=d)):(Dn=i,i=d);i!==d;){for(h.push(i),i=Dn,j=[],k=Xq();k!==d;)j.push(k),k=Xq();j!==d?(k=_p(),k!==d?(44===a.charCodeAt(Dn)?(l=Qe,Dn++):(l=d,0===In&&Vn(Re)),l!==d?(j=[j,k,l],i=j):(Dn=i,i=d)):(Dn=i,i=d)):(Dn=i,i=d)}if(h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if((j=_p())!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();k!==d?(41===a.charCodeAt(Dn)?(l=U,Dn++):(l=d,0===In&&Vn(V)),l!==d?(En=b,c=ej(e,h,j),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;b===d&&(b=lq())===d&&(b=mq())===d&&(b=nq())}}}}}}}}}}}}}}return In--,b===d&&(c=d,0===In&&Vn(xh)),b}function lq(){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q;if(In++,b=Dn,a.substr(Dn,5)===gj?(c=gj,Dn+=5):(c=d,0===In&&Vn(hj)),c===d&&(a.substr(Dn,5)===ij?(c=ij,Dn+=5):(c=d,0===In&&Vn(jj))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if((h=_p())!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(44===a.charCodeAt(Dn)?(j=Qe,Dn++):(j=d,0===In&&Vn(Re)),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if((l=_p())!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();if(m!==d){if(n=Dn,44===a.charCodeAt(Dn)?(o=Qe,Dn++):(o=d,0===In&&Vn(Re)),o!==d){for(p=[],q=Xq();q!==d;)p.push(q),q=Xq();p!==d?(q=_p(),q!==d?(o=[o,p,q],n=o):(Dn=n,n=d)):(Dn=n,n=d)}else Dn=n,n=d;if(n===d&&(n=null),n!==d){for(o=[],p=Xq();p!==d;)o.push(p),p=Xq();o!==d?(41===a.charCodeAt(Dn)?(p=U,Dn++):(p=d,0===In&&Vn(V)),p!==d?(En=b,c=kj(h,l,n),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(fj)),b}function mq(){var b,c,e,f;if(In++,b=Dn,a.substr(Dn,6)===mj?(c=mj,Dn+=6):(c=d,0===In&&Vn(nj)),c===d&&(a.substr(Dn,6)===oj?(c=oj,Dn+=6):(c=d,0===In&&Vn(pj))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(f=Xo(),f!==d?(En=b,c=qj(f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(lj)),b}function nq(){var b,c,e,f,g,h;if(In++,b=Dn,a.substr(Dn,3)===sj?(c=sj,Dn+=3):(c=d,0===In&&Vn(tj)),c===d&&(a.substr(Dn,3)===uj?(c=uj,Dn+=3):(c=d,0===In&&Vn(vj))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(a.substr(Dn,6)===mj?(f=mj,Dn+=6):(f=d,0===In&&Vn(nj)),f===d&&(a.substr(Dn,6)===oj?(f=oj,Dn+=6):(f=d,0===In&&Vn(pj))),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();g!==d?(h=Xo(),h!==d?(En=b,c=wj(h),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(rj)),b}function oq(){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(In++,b=Dn,a.substr(Dn,5)===yj?(c=yj,Dn+=5):(c=d,0===In&&Vn(zj)),c===d&&(a.substr(Dn,5)===Aj?(c=Aj,Dn+=5):(c=d,0===In&&Vn(Bj))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,8)===G?(h=G,Dn+=8):(h=d,0===In&&Vn(H)),h===d&&(a.substr(Dn,8)===I?(h=I,Dn+=8):(h=d,0===In&&Vn(J))),h===d&&(h=null),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if(42===a.charCodeAt(Dn)?(j=W,Dn++):(j=d,0===In&&Vn(X)),j===d&&(j=_p()),j!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(41===a.charCodeAt(Dn)?(l=U,Dn++):(l=d,0===In&&Vn(V)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(En=b,c=Cj(h,j),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,12)===Dj?(c=Dj,Dn+=12):(c=d,0===In&&Vn(Ej)),c===d&&(a.substr(Dn,12)===Fj?(c=Fj,Dn+=12):(c=d,0===In&&Vn(Gj))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,8)===G?(h=G,Dn+=8):(h=d,0===In&&Vn(H)),h===d&&(a.substr(Dn,8)===I?(h=I,Dn+=8):(h=d,0===In&&Vn(J))),h===d&&(h=null),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if((j=_p())!==d){if(k=Dn,59===a.charCodeAt(Dn)?(l=Yb,Dn++):(l=d,0===In&&Vn(Zb)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();if(m!==d)if(a.substr(Dn,9)===Hj?(n=Hj,Dn+=9):(n=d,0===In&&Vn(Ij)),n!==d){for(o=[],p=Xq();p!==d;)o.push(p),p=Xq();if(o!==d)if(61===a.charCodeAt(Dn)?(p=Eg,Dn++):(p=d,0===In&&Vn(Fg)),p!==d){for(q=[],r=Xq();r!==d;)q.push(r),r=Xq();if(q!==d)if((r=wq())!==d){for(s=[],t=Xq();t!==d;)s.push(t),t=Xq();s!==d?(l=[l,m,n,o,p,q,r,s],k=l):(Dn=k,k=d)}else Dn=k,k=d;else Dn=k,k=d}else Dn=k,k=d;else Dn=k,k=d}else Dn=k,k=d;else Dn=k,k=d}else Dn=k,k=d;if(k===d&&(k=null),k!==d)if(41===a.charCodeAt(Dn)?(l=U,Dn++):(l=d,0===In&&Vn(V)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(En=b,c=Jj(h,j,k),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,3)===Kj?(c=Kj,Dn+=3):(c=d,0===In&&Vn(Lj)),c===d&&(a.substr(Dn,3)===Mj?(c=Mj,Dn+=3):(c=d,0===In&&Vn(Nj))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,8)===G?(h=G,Dn+=8):(h=d,0===In&&Vn(H)),h===d&&(a.substr(Dn,8)===I?(h=I,Dn+=8):(h=d,0===In&&Vn(J))),h===d&&(h=null),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if((j=_p())!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(41===a.charCodeAt(Dn)?(l=U,Dn++):(l=d,0===In&&Vn(V)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(En=b,c=Oj(h,j),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,3)===Pj?(c=Pj,Dn+=3):(c=d,0===In&&Vn(Qj)),c===d&&(a.substr(Dn,3)===Rj?(c=Rj,Dn+=3):(c=d,0===In&&Vn(Sj))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,8)===G?(h=G,Dn+=8):(h=d,0===In&&Vn(H)),h===d&&(a.substr(Dn,8)===I?(h=I,Dn+=8):(h=d,0===In&&Vn(J))),h===d&&(h=null),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if((j=_p())!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(41===a.charCodeAt(Dn)?(l=U,Dn++):(l=d,0===In&&Vn(V)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(En=b,c=Tj(h,j),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d){if(b=Dn,a.substr(Dn,3)===Uj?(c=Uj,Dn+=3):(c=d,0===In&&Vn(Vj)),c===d&&(a.substr(Dn,3)===Wj?(c=Wj,Dn+=3):(c=d,0===In&&Vn(Xj))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,8)===G?(h=G,Dn+=8):(h=d,0===In&&Vn(H)),h===d&&(a.substr(Dn,8)===I?(h=I,Dn+=8):(h=d,0===In&&Vn(J))),h===d&&(h=null),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if((j=_p())!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(41===a.charCodeAt(Dn)?(l=U,Dn++):(l=d,0===In&&Vn(V)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(En=b,c=Yj(h,j),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;if(b===d)if(b=Dn,a.substr(Dn,3)===Zj?(c=Zj,Dn+=3):(c=d,0===In&&Vn($j)),c===d&&(a.substr(Dn,3)===_j?(c=_j,Dn+=3):(c=d,0===In&&Vn(ak))),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();if(e!==d)if(40===a.charCodeAt(Dn)?(f=O,Dn++):(f=d,0===In&&Vn(P)),f!==d){for(g=[],h=Xq();h!==d;)g.push(h),h=Xq();if(g!==d)if(a.substr(Dn,8)===G?(h=G,Dn+=8):(h=d,0===In&&Vn(H)),h===d&&(a.substr(Dn,8)===I?(h=I,Dn+=8):(h=d,0===In&&Vn(J))),h===d&&(h=null),h!==d){for(i=[],j=Xq();j!==d;)i.push(j),j=Xq();if(i!==d)if((j=_p())!==d){for(k=[],l=Xq();l!==d;)k.push(l),l=Xq();if(k!==d)if(41===a.charCodeAt(Dn)?(l=U,Dn++):(l=d,0===In&&Vn(V)),l!==d){for(m=[],n=Xq();n!==d;)m.push(n),n=Xq();m!==d?(En=b,c=bk(h,j),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d;else Dn=b,b=d}else Dn=b,b=d}}}}return In--,b===d&&(c=d,0===In&&Vn(xj)),b}function pq(){var a,b,c,e;if(In++,a=Dn,(b=xq())!==d){for(c=[],e=Xq();e!==d;)c.push(e),e=Xq();c!==d?(e=np(),e===d&&(e=null),e!==d?(En=a,b=dk(b,e),a=b):(Dn=a,a=d)):(Dn=a,a=d)}else Dn=a,a=d;return In--,a===d&&(b=d,0===In&&Vn(ck)),a}function qq(){var b,c,e,f,g;return In++,b=Dn,c=wq(),c!==d?(e=Gq(),e===d&&(e=Dn,a.substr(Dn,2)===fk?(f=fk,Dn+=2):(f=d,0===In&&Vn(gk)),f!==d?(g=xq(),g!==d?(f=[f,g],e=f):(Dn=e,e=d)):(Dn=e,e=d)),e===d&&(e=null),e!==d?(En=b,c=hk(c,e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(ek)),b}function rq(){var a;return In++,a=sq(),a===d&&(a=tq())===d&&(a=uq()),In--,a===d&&(d,0===In&&Vn(ik)),a}function sq(){var a;return In++,a=Jq(),a===d&&(a=Iq())===d&&(a=Hq()),In--,a===d&&(d,0===In&&Vn(jk)),a}function tq(){var a;return In++,a=Mq(),a===d&&(a=Lq())===d&&(a=Kq()),In--,a===d&&(d,0===In&&Vn(kk)),a}function uq(){var a;return In++,a=Pq(),a===d&&(a=Oq())===d&&(a=Nq()),In--,a===d&&(d,0===In&&Vn(lk)),a}function vq(){var b,c;return In++,b=Dn,a.substr(Dn,4)===nk?(c=nk,Dn+=4):(c=d,0===In&&Vn(ok)),c===d&&(a.substr(Dn,4)===pk?(c=pk,Dn+=4):(c=d,0===In&&Vn(qk))),c!==d&&(En=b,c=rk()),b=c,b===d&&(b=Dn,a.substr(Dn,5)===sk?(c=sk,Dn+=5):(c=d,0===In&&Vn(tk)),c===d&&(a.substr(Dn,5)===uk?(c=uk,Dn+=5):(c=d,0===In&&Vn(vk))),c!==d&&(En=b,c=wk()),b=c),In--,b===d&&(c=d,0===In&&Vn(mk)),b}function wq(){var a,b;return In++,a=Dn,b=Tq(),b!==d&&(En=a,b=yk(b)),a=b,a===d&&(a=Dn,b=Uq(),b!==d&&(En=a,b=yk(b)),(a=b)===d&&(a=Dn,b=Rq(),b!==d&&(En=a,b=yk(b)),(a=b)===d&&(a=Dn,b=Sq(),b!==d&&(En=a,b=yk(b)),a=b))),In--,a===d&&(b=d,0===In&&Vn(xk)),a}function xq(){var a,b;return In++,a=Dn,b=Aq(),b!==d&&(En=a,b=Ak(b)),a=b,a===d&&(a=Dn,b=yq(),b!==d&&(En=a,b=Bk(b)),a=b),In--,a===d&&(b=d,0===In&&Vn(zk)),a}function yq(){var a,b;return In++,a=Dn,b=Cq(),b!==d&&(En=a,b=Dk(b)),a=b,a===d&&(a=Dn,b=Bq(),b!==d&&(En=a,b=Ek(b)),a=b),In--,a===d&&(b=d,0===In&&Vn(Ck)),a}function zq(){var a,b;return In++,a=Dn,b=Dq(),b!==d&&(En=a,b=Gk(b)),a=b,a===d&&(a=Dn,b=Zq(),b!==d&&(En=a,b=Hk()),a=b),In--,a===d&&(b=d,0===In&&Vn(Fk)),a}function Aq(){var b,c,e,f;if(In++,b=Dn,60===a.charCodeAt(Dn)?(c=Ig,Dn++):(c=d,0===In&&Vn(Jg)),c!==d){for(e=[],Jk.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(Kk));f!==d;)e.push(f),Jk.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(Kk));e!==d?(62===a.charCodeAt(Dn)?(f=Kg,Dn++):(f=d,0===In&&Vn(Lg)),f!==d?(En=b,c=Lk(e),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Ik)),b}function Bq(){var b,c,e;return In++,b=Dn,c=cr(),c===d&&(c=null),c!==d?(58===a.charCodeAt(Dn)?(e=Nk,Dn++):(e=d,0===In&&Vn(Ok)),e!==d?(En=b,c=Bk(c),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(Mk)),b}function Cq(){var a,b,c;return In++,a=Dn,b=Bq(),b!==d?(c=dr(),c!==d?(En=a,b=Qk(b,c),a=b):(Dn=a,a=d)):(Dn=a,a=d),In--,a===d&&(b=d,0===In&&Vn(Pk)),a}function Dq(){var b,c,e;return In++,b=Dn,a.substr(Dn,2)===Sk?(c=Sk,Dn+=2):(c=d,0===In&&Vn(Tk)),c!==d?(e=dr(),e!==d?(En=b,c=Uk(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(Rk)),b}function Eq(){var b,c,e;return In++,b=Dn,63===a.charCodeAt(Dn)?(c=Pf,Dn++):(c=d,0===In&&Vn(Qf)),c!==d?(e=ar(),e!==d?(En=b,c=Wk(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(Vk)),b}function Fq(){var b,c,e;return In++,b=Dn,36===a.charCodeAt(Dn)?(c=Yk,Dn++):(c=d,0===In&&Vn(Zk)),c!==d?(e=ar(),e!==d?(En=b,c=Wk(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(Xk)),b}function Gq(){var b,c,e,f,g,h,i,j;if(In++,b=Dn,64===a.charCodeAt(Dn)?(c=_k,Dn++):(c=d,0===In&&Vn(al)),c!==d){if(e=[],bl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(cl)),f!==d)for(;f!==d;)e.push(f),bl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(cl));else e=d;if(e!==d){if(f=[],g=Dn,45===a.charCodeAt(Dn)?(h=hh,Dn++):(h=d,0===In&&Vn(ih)),h!==d){if(i=[],dl.test(a.charAt(Dn))?(j=a.charAt(Dn),Dn++):(j=d,0===In&&Vn(el)),j!==d)for(;j!==d;)i.push(j),dl.test(a.charAt(Dn))?(j=a.charAt(Dn),Dn++):(j=d,0===In&&Vn(el));else i=d;i!==d?(h=[h,i],g=h):(Dn=g,g=d)}else Dn=g,g=d;for(;g!==d;)if(f.push(g),g=Dn,45===a.charCodeAt(Dn)?(h=hh,Dn++):(h=d,0===In&&Vn(ih)),h!==d){if(i=[],dl.test(a.charAt(Dn))?(j=a.charAt(Dn),Dn++):(j=d,0===In&&Vn(el)),j!==d)for(;j!==d;)i.push(j),dl.test(a.charAt(Dn))?(j=a.charAt(Dn),Dn++):(j=d,0===In&&Vn(el));else i=d;i!==d?(h=[h,i],g=h):(Dn=g,g=d)}else Dn=g,g=d;f!==d?(En=b,c=fl(e,f),b=c):(Dn=b,b=d)}else Dn=b,b=d}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn($k)),b}function Hq(){var b,c,e;if(In++,b=Dn,c=[],hl.test(a.charAt(Dn))?(e=a.charAt(Dn),Dn++):(e=d,0===In&&Vn(il)),e!==d)for(;e!==d;)c.push(e),hl.test(a.charAt(Dn))?(e=a.charAt(Dn),Dn++):(e=d,0===In&&Vn(il));else c=d;return c!==d&&(En=b,c=jl(c)),b=c,In--,b===d&&(c=d,0===In&&Vn(gl)),b}function Iq(){var b,c,e,f,g;if(In++,b=Dn,c=[],hl.test(a.charAt(Dn))?(e=a.charAt(Dn),Dn++):(e=d,0===In&&Vn(il)),e!==d)for(;e!==d;)c.push(e),hl.test(a.charAt(Dn))?(e=a.charAt(Dn),Dn++):(e=d,0===In&&Vn(il));else c=d;if(c!==d)if(46===a.charCodeAt(Dn)?(e=Hd,Dn++):(e=d,0===In&&Vn(Id)),e!==d){for(f=[],hl.test(a.charAt(Dn))?(g=a.charAt(Dn),Dn++):(g=d,0===In&&Vn(il));g!==d;)f.push(g),hl.test(a.charAt(Dn))?(g=a.charAt(Dn),Dn++):(g=d,0===In&&Vn(il));f!==d?(En=b,c=ll(c,e,f),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;if(b===d)if(b=Dn,46===a.charCodeAt(Dn)?(c=Hd,Dn++):(c=d,0===In&&Vn(Id)),c!==d){if(e=[],hl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(il)),f!==d)for(;f!==d;)e.push(f),hl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(il));else e=d;e!==d?(En=b,c=ml(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(kl)),b}function Jq(){var b,c,e,f,g;if(In++,b=Dn,c=[],hl.test(a.charAt(Dn))?(e=a.charAt(Dn),Dn++):(e=d,0===In&&Vn(il)),e!==d)for(;e!==d;)c.push(e),hl.test(a.charAt(Dn))?(e=a.charAt(Dn),Dn++):(e=d,0===In&&Vn(il));else c=d;if(c!==d)if(46===a.charCodeAt(Dn)?(e=Hd,Dn++):(e=d,0===In&&Vn(Id)),e!==d){for(f=[],hl.test(a.charAt(Dn))?(g=a.charAt(Dn),Dn++):(g=d,0===In&&Vn(il));g!==d;)f.push(g),hl.test(a.charAt(Dn))?(g=a.charAt(Dn),Dn++):(g=d,0===In&&Vn(il));f!==d?(g=Qq(),g!==d?(En=b,c=ol(c,e,f,g),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;if(b===d){if(b=Dn,46===a.charCodeAt(Dn)?(c=Hd,Dn++):(c=d,0===In&&Vn(Id)),c!==d){if(e=[],hl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(il)),f!==d)for(;f!==d;)e.push(f),hl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(il));else e=d;e!==d?(f=Qq(),f!==d?(En=b,c=pl(c,e,f),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;if(b===d){if(b=Dn,c=[],hl.test(a.charAt(Dn))?(e=a.charAt(Dn),Dn++):(e=d,0===In&&Vn(il)),e!==d)for(;e!==d;)c.push(e),hl.test(a.charAt(Dn))?(e=a.charAt(Dn),Dn++):(e=d,0===In&&Vn(il));else c=d;c!==d?(e=Qq(),e!==d?(En=b,c=ql(c,e),b=c):(Dn=b,b=d)):(Dn=b,b=d)}}return In--,b===d&&(c=d,0===In&&Vn(nl)),b}function Kq(){var b,c,e;return In++,b=Dn,43===a.charCodeAt(Dn)?(c=Rf,Dn++):(c=d,0===In&&Vn(Sf)),c!==d?(e=Hq(),e!==d?(En=b,c=sl(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(rl)),b}function Lq(){var b,c,e;return In++,b=Dn,43===a.charCodeAt(Dn)?(c=Rf,Dn++):(c=d,0===In&&Vn(Sf)),c!==d?(e=Iq(),e!==d?(En=b,c=ul(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(tl)),b}function Mq(){var b,c,e;return In++,b=Dn,43===a.charCodeAt(Dn)?(c=Rf,Dn++):(c=d,0===In&&Vn(Sf)),c!==d?(e=Jq(),e!==d?(En=b,c=ul(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(vl)),b}function Nq(){var b,c,e;return In++,b=Dn,45===a.charCodeAt(Dn)?(c=hh,Dn++):(c=d,0===In&&Vn(ih)),c!==d?(e=Hq(),e!==d?(En=b,c=xl(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(wl)),b}function Oq(){var b,c,e;return In++,b=Dn,45===a.charCodeAt(Dn)?(c=hh,Dn++):(c=d,0===In&&Vn(ih)),c!==d?(e=Iq(),e!==d?(En=b,c=xl(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(yl)),b}function Pq(){var b,c,e;return In++,b=Dn,45===a.charCodeAt(Dn)?(c=hh,Dn++):(c=d,0===In&&Vn(ih)),c!==d?(e=Jq(),e!==d?(En=b,c=xl(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(zl)),b}function Qq(){var b,c,e,f,g;if(In++,b=Dn,Bl.test(a.charAt(Dn))?(c=a.charAt(Dn),Dn++):(c=d,0===In&&Vn(Cl)),c!==d)if(Dl.test(a.charAt(Dn))?(e=a.charAt(Dn),Dn++):(e=d,0===In&&Vn(El)),e===d&&(e=null),e!==d){if(f=[],hl.test(a.charAt(Dn))?(g=a.charAt(Dn),Dn++):(g=d,0===In&&Vn(il)),g!==d)for(;g!==d;)f.push(g),hl.test(a.charAt(Dn))?(g=a.charAt(Dn),Dn++):(g=d,0===In&&Vn(il));else f=d;f!==d?(En=b,c=Fl(c,e,f),b=c):(Dn=b,b=d)}else Dn=b,b=d;else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Al)),b}function Rq(){var b,c,e,f;if(In++,b=Dn,39===a.charCodeAt(Dn)?(c=Hl,Dn++):(c=d,0===In&&Vn(Il)),c!==d){for(e=[],Jl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(Kl)),f===d&&(f=Vq());f!==d;)e.push(f),Jl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(Kl)),f===d&&(f=Vq());e!==d?(39===a.charCodeAt(Dn)?(f=Hl,Dn++):(f=d,0===In&&Vn(Il)),f!==d?(En=b,c=Ll(e),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Gl)),b}function Sq(){var b,c,e,f;if(In++,b=Dn,34===a.charCodeAt(Dn)?(c=Nl,Dn++):(c=d,0===In&&Vn(Ol)),c!==d){for(e=[],Pl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(Ql)),f===d&&(f=Vq());f!==d;)e.push(f),Pl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(Ql)),f===d&&(f=Vq());e!==d?(34===a.charCodeAt(Dn)?(f=Nl,Dn++):(f=d,0===In&&Vn(Ol)),f!==d?(En=b,c=Ll(e),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Ml)),b}function Tq(){var b,c,e,f;if(In++,b=Dn,a.substr(Dn,3)===Sl?(c=Sl,Dn+=3):(c=d,0===In&&Vn(Tl)),c!==d){for(e=[],Ul.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(Vl)),f===d&&(f=Vq());f!==d;)e.push(f),Ul.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(Vl)),f===d&&(f=Vq());e!==d?(a.substr(Dn,3)===Sl?(f=Sl,Dn+=3):(f=d,0===In&&Vn(Tl)),f!==d?(En=b,c=Ll(e),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Rl)),b}function Uq(){var b,c,e,f;if(In++,b=Dn,a.substr(Dn,3)===Xl?(c=Xl,Dn+=3):(c=d,0===In&&Vn(Yl)),c!==d){for(e=[],Zl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn($l)),f===d&&(f=Vq());f!==d;)e.push(f),Zl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn($l)),f===d&&(f=Vq());e!==d?(a.substr(Dn,3)===Xl?(f=Xl,Dn+=3):(f=d,0===In&&Vn(Yl)),f!==d?(En=b,c=Ll(e),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(Wl)),b}function Vq(){var b,c,e;return In++,b=Dn,92===a.charCodeAt(Dn)?(c=am,Dn++):(c=d,0===In&&Vn(bm)),c!==d?(cm.test(a.charAt(Dn))?(e=a.charAt(Dn),Dn++):(e=d,0===In&&Vn(dm)),e!==d?(c=[c,e],b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(_l)),b}function Wq(){var b,c,e,f;if(In++,b=Dn,40===a.charCodeAt(Dn)?(c=O,Dn++):(c=d,0===In&&Vn(P)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(41===a.charCodeAt(Dn)?(f=U,Dn++):(f=d,0===In&&Vn(V)),f!==d?(En=b,c=fm(),b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(em)),b}function Xq(){var b;return In++,hm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(im)),b===d&&(jm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(km)),b===d&&(lm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(mm)),b===d&&(nm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(om)),b===d&&(b=Yq())))),In--,b===d&&(d,0===In&&Vn(gm)),b}function Yq(){var b,c,e,f;if(In++,b=Dn,35===a.charCodeAt(Dn)?(c=qm,Dn++):(c=d,0===In&&Vn(rm)),c!==d){for(e=[],sm.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(tm));f!==d;)e.push(f),sm.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(tm));e!==d?(c=[c,e],b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(pm)),b}function Zq(){var b,c,e,f;if(In++,b=Dn,91===a.charCodeAt(Dn)?(c=bg,Dn++):(c=d,0===In&&Vn(cg)),c!==d){for(e=[],f=Xq();f!==d;)e.push(f),f=Xq();e!==d?(93===a.charCodeAt(Dn)?(f=dg,Dn++):(f=d,0===In&&Vn(eg)),f!==d?(c=[c,e,f],b=c):(Dn=b,b=d)):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(um)),b}function $q(){var b;return In++,wm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(xm)),b===d&&(ym.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(zm)),b===d&&(Am.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Bm)),b===d&&(Cm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Dm)),b===d&&(Em.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Fm)),b===d&&(Gm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Hm)),b===d&&(Im.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Jm)),b===d&&(Km.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Lm)),b===d&&(Mm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Nm)),b===d&&(Om.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Pm)),b===d&&(Qm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Rm)),b===d&&(Sm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Tm)),b===d&&(Um.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Vm)),b===d&&(Wm.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(Xm))))))))))))))),In--,b===d&&(d,0===In&&Vn(vm)),b}function _q(){var b;return In++,b=$q(),b===d&&(95===a.charCodeAt(Dn)?(b=Zm,Dn++):(b=d,0===In&&Vn($m))),In--,b===d&&(d,0===In&&Vn(Ym)),b}function ar(){var b,c,e,f;if(In++,b=Dn,c=_q(),c===d&&(hl.test(a.charAt(Dn))?(c=a.charAt(Dn),Dn++):(c=d,0===In&&Vn(il))),c!==d){for(e=[],f=_q(),f===d&&(hl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(il)),f===d&&(an.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(bn)),f===d&&(cn.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(dn)),f===d&&(en.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(fn))))));f!==d;)e.push(f),(f=_q())===d&&(hl.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(il)),f===d&&(an.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(bn)),f===d&&(cn.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(dn)),f===d&&(en.test(a.charAt(Dn))?(f=a.charAt(Dn),Dn++):(f=d,0===In&&Vn(fn))))));e!==d?(En=b,c=gn(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(_m)),b}function br(){var b;return In++,b=_q(),b===d&&(45===a.charCodeAt(Dn)?(b=hh,Dn++):(b=d,0===In&&Vn(ih)),b===d&&(hl.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(il)),b===d&&(an.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(bn)),b===d&&(cn.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(dn)),b===d&&(en.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(fn))))))),In--,b===d&&(d,0===In&&Vn(hn)),b}function cr(){var b,c,e,f;if(In++,b=Dn,(c=$q())!==d){for(e=[],f=br(),f===d&&(46===a.charCodeAt(Dn)?(f=Hd,Dn++):(f=d,0===In&&Vn(Id)));f!==d;)e.push(f),(f=br())===d&&(46===a.charCodeAt(Dn)?(f=Hd,Dn++):(f=d,0===In&&Vn(Id)));e!==d?(En=b,c=kn(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(jn)),b}function dr(){var b,c,e,f;if(In++,b=Dn,c=_q(),c===d&&(hl.test(a.charAt(Dn))?(c=a.charAt(Dn),Dn++):(c=d,0===In&&Vn(il)),c===d&&(58===a.charCodeAt(Dn)?(c=Nk,Dn++):(c=d,0===In&&Vn(Ok)),c===d&&(c=er()))),c!==d){for(e=[],f=br(),f===d&&(46===a.charCodeAt(Dn)?(f=Hd,Dn++):(f=d,0===In&&Vn(Id)),f===d&&(58===a.charCodeAt(Dn)?(f=Nk,Dn++):(f=d,0===In&&Vn(Ok)),f===d&&(f=er())));f!==d;)e.push(f),(f=br())===d&&(46===a.charCodeAt(Dn)?(f=Hd,Dn++):(f=d,0===In&&Vn(Id)),f===d&&(58===a.charCodeAt(Dn)?(f=Nk,Dn++):(f=d,0===In&&Vn(Ok)),f===d&&(f=er())));e!==d?(En=b,c=mn(c,e),b=c):(Dn=b,b=d)}else Dn=b,b=d;return In--,b===d&&(c=d,0===In&&Vn(ln)),b}function er(){var a;return In++,a=fr(),a===d&&(a=hr()),In--,a===d&&(d,0===In&&Vn(nn)),a}function fr(){var b,c,e,f,g;return In++,b=Dn,c=Dn,37===a.charCodeAt(Dn)?(e=pn,Dn++):(e=d,0===In&&Vn(qn)),e!==d?(f=gr(),f!==d?(g=gr(),g!==d?(e=[e,f,g],c=e):(Dn=c,c=d)):(Dn=c,c=d)):(Dn=c,c=d),c!==d&&(En=b,c=rn(c)),b=c,In--,b===d&&(c=d,0===In&&Vn(on)),b}function gr(){var b;return In++,hl.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(il)),b===d&&(tn.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(un)),b===d&&(vn.test(a.charAt(Dn))?(b=a.charAt(Dn),Dn++):(b=d,0===In&&Vn(wn)))),In--,b===d&&(d,0===In&&Vn(sn)),b}function hr(){var b,c,e;return In++,b=Dn,92===a.charCodeAt(Dn)?(c=am,Dn++):(c=d,0===In&&Vn(bm)),c!==d?(95===a.charCodeAt(Dn)?(e=Zm,Dn++):(e=d,0===In&&Vn($m)),e===d&&(126===a.charCodeAt(Dn)?(e=yn,Dn++):(e=d,0===In&&Vn(zn)),e===d&&(46===a.charCodeAt(Dn)?(e=Hd,Dn++):(e=d,0===In&&Vn(Id)),e===d&&(45===a.charCodeAt(Dn)?(e=hh,Dn++):(e=d,0===In&&Vn(ih)),e===d&&(33===a.charCodeAt(Dn)?(e=Uf,Dn++):(e=d,0===In&&Vn(Vf)),e===d&&(36===a.charCodeAt(Dn)?(e=Yk,Dn++):(e=d,0===In&&Vn(Zk)),e===d&&(38===a.charCodeAt(Dn)?(e=An,Dn++):(e=d,0===In&&Vn(Bn)),e===d&&(39===a.charCodeAt(Dn)?(e=Hl,Dn++):(e=d,0===In&&Vn(Il)),e===d&&(40===a.charCodeAt(Dn)?(e=O,Dn++):(e=d,0===In&&Vn(P)),e===d&&(41===a.charCodeAt(Dn)?(e=U,Dn++):(e=d,0===In&&Vn(V)),e===d&&(42===a.charCodeAt(Dn)?(e=W,Dn++):(e=d,0===In&&Vn(X)),e===d&&(43===a.charCodeAt(Dn)?(e=Rf,Dn++):(e=d,0===In&&Vn(Sf)),e===d&&(44===a.charCodeAt(Dn)?(e=Qe,Dn++):(e=d,0===In&&Vn(Re)),e===d&&(59===a.charCodeAt(Dn)?(e=Yb,Dn++):(e=d,0===In&&Vn(Zb)),e===d&&(58===a.charCodeAt(Dn)?(e=Nk,Dn++):(e=d,0===In&&Vn(Ok)),e===d&&(61===a.charCodeAt(Dn)?(e=Eg,Dn++):(e=d,0===In&&Vn(Fg)),e===d&&(47===a.charCodeAt(Dn)?(e=Ff,Dn++):(e=d,0===In&&Vn(Gf)),e===d&&(63===a.charCodeAt(Dn)?(e=Pf,Dn++):(e=d,0===In&&Vn(Qf)),e===d&&(35===a.charCodeAt(Dn)?(e=qm,Dn++):(e=d,0===In&&Vn(rm)),e===d&&(64===a.charCodeAt(Dn)?(e=_k,Dn++):(e=d,0===In&&Vn(al)),e===d&&(37===a.charCodeAt(Dn)?(e=pn,Dn++):(e=d,0===In&&Vn(qn)))))))))))))))))))))),e!==d?(En=b,c=Cn(e),b=c):(Dn=b,b=d)):(Dn=b,b=d),In--,b===d&&(c=d,0===In&&Vn(xn)),b}c=void 0!==c?c:{};var Jn,d={},e={DOCUMENT:Yn},f=Yn,g=Sn("[1] QueryUnit"),h=Sn("[2] Query"),i=function(a,b,c){return{token:"query",kind:"query",prologue:a,units:[b],inlineData:c}},j=Sn("[3] Prologue"),k=function(a,b){return{token:"prologue",base:a,prefixes:b}},l=Sn("[4] BaseDecl"),m="BASE",n=On("BASE",!1),o="base",p=On("base",!1),q=function(a){mr(a);var b={};return b.token="base",b.value=a,b},r=Sn("[5] PrefixDecl"),s="PREFIX",t=On("PREFIX",!1),u="prefix",v=On("prefix",!1),w=function(a,b){lr(a,b);var c={};return c.token="prefix",c.prefix=a,c.local=b,c},x=Sn("[6] SelectQuery"),y=function(a,b,c,d){for(var e={named:[],implicit:[]},f=0;f<b.length;f++){var g=b[f];"default"===g.kind?e.implicit.push(g.graph):e.named.push(g.graph)}0===e.named.length&&0===e.implicit.length&&e.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var h={};return h.kind="select",h.token="executableunit",h.dataset=e,h.projection=a.vars,h.modifier=a.modifier,h.pattern=c,null!=d&&null!=d.limit&&(h.limit=d.limit),null!=d&&null!=d.offset&&(h.offset=d.offset),null!=d&&null!=d.order&&""!=d.order&&(h.order=d.order),null!=d&&null!=d.group&&(h.group=d.group),h},z=Sn("[7] SubSelect"),A=function(a,b,c){var d={};return d.kind="select",d.token="subselect",d.projection=a.vars,d.modifier=a.modifier,d.pattern=b,null!=c&&null!=c.limit&&(d.limit=c.limit),null!=c&&null!=c.offset&&(d.offset=c.offset),null!=c&&null!=c.order&&""!=c.order&&(d.order=c.order),null!=c&&null!=c.group&&(d.group=c.group),d},B=Sn("[8] SelectClause"),C="SELECT",D=On("SELECT",!1),E="select",F=On("select",!1),G="DISTINCT",H=On("DISTINCT",!1),I="distinct",J=On("distinct",!1),K="REDUCED",L=On("REDUCED",!1),M="reduced",N=On("reduced",!1),O="(",P=On("(",!1),Q="AS",R=On("AS",!1),S="as",T=On("as",!1),U=")",V=On(")",!1),W="*",X=On("*",!1),Y=function(a,b){var c=[];if(3===b.length&&"*"===b[1])return{vars:[{token:"variable",kind:"*"}],modifier:nr(a)};for(var d=0;d<b.length;d++){var e=b[d];3===e.length?c.push({token:"variable",kind:"var",value:e[1]}):c.push({token:"variable",kind:"aliased",expression:e[3],alias:e[7]})}return{vars:c,modifier:nr(a)}},Z=Sn("[9] ConstructQuery"),$="CONSTRUCT",_=On("CONSTRUCT",!1),aa="construct",ba=On("construct",!1),ca=function(a,b,c,d){for(var e={named:[],implicit:[]},f=0;f<b.length;f++){var g=b[f];"default"===g.kind?e.implicit.push(g.graph):e.named.push(g.graph)}0===e.named.length&&0===e.implicit.length&&e.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var h={};return h.kind="construct",h.token="executableunit",h.dataset=e,h.template=a,h.pattern=c,null!=d&&null!=d.limit&&(h.limit=d.limit),null!=d&&null!=d.offset&&(h.offset=d.offset),null!=d&&null!=d.order&&""!=d.order&&(h.order=d.order),h},da="WHERE",ea=On("WHERE",!1),fa="where",ga=On("where",!1),ha="{",ia=On("{",!1),ja="}",ka=On("}",!1),la=function(a,b,c){for(var d={named:[],implicit:[]},e=0;e<a.length;e++){var f=a[e];"default"===f.kind?d.implicit.push(f.graph):d.named.push(f.graph)}0===d.named.length&&0===d.implicit.length&&d.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var g={};return g.kind="construct",g.token="executableunit",g.dataset=d,g.template=b,g.pattern={token:"basicgraphpattern",triplesContext:b.triplesContext},null!=c&&null!=c.limit&&(g.limit=c.limit),null!=c&&null!=c.offset&&(g.offset=c.offset),null!=c&&null!=c.order&&""!=c.order&&(g.order=c.order),g},ma=Sn("[10] DescribeQuery"),na="DESCRIBE",oa=On("DESCRIBE",!1),pa=Sn("[11] AskQuery"),qa="ASK",ra=On("ASK",!1),sa="ask",ta=On("ask",!1),ua=function(a,b){for(var c={named:[],implicit:[]},d=0;d<a.length;d++){var e=a[d];"implicit"===e.kind?c.implicit.push(e.graph):c.named.push(e.graph)}0===c.named.length&&0===c.implicit.length&&c.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var f={};return f.kind="ask",f.token="executableunit",f.dataset=c,f.pattern=b,f},va=Sn("[12] DatasetClause"),wa="FROM",xa=On("FROM",!1),ya="from",za=On("from",!1),Aa=function(a){return a},Ba=Sn("[13] DefaultGraphClause"),Ca=function(a){return{graph:a,kind:"default",token:"graphClause"}},Da=Sn("[14] NamedGraphClause"),Ea="NAMED",Fa=On("NAMED",!1),Ga="named",Ha=On("named",!1),Ia=function(a){return{graph:a,kind:"named",token:"graphCluase"}},Ja=Sn("[15] SourceSelector"),Ka=Sn("[16] WhereClause"),La=function(a){return a},Ma=Sn("[17] SolutionModifier"),Na=function(a,b,c){var d={};return null!=c&&(null!=c.limit&&(d.limit=c.limit),null!=c.offset&&(d.offset=c.offset)),null!=a&&(d.group=a),d.order=b,d},Oa=Sn("[18] GroupClause"),Pa="GROUP",Qa=On("GROUP",!1),Ra="group",Sa=On("group",!1),Ta="BY",Ua=On("BY",!1),Va="by",Wa=On("by",!1),Xa=function(a){return a},Ya=Sn("[19] GroupCondition"),Za=function(a){return a},$a=function(a){return a},_a=function(a,b){return 0!=b.length?{token:"aliased_expression",expression:a,alias:b[2]}:a},ab=function(a){return a},bb=Sn("[20] HavingClause"),cb="HAVING",db=On("HAVING",!1),eb=Sn("[21] HavingCondition"),fb=Sn("[22] OrderClause"),gb="ORDER",hb=On("ORDER",!1),ib="order",jb=On("order",!1),kb=function(a){return a},lb=Sn("[23] OrderCondition"),mb="ASC",nb=On("ASC",!1),ob="asc",pb=On("asc",!1),qb="DESC",rb=On("DESC",!1),sb="desc",tb=On("desc",!1),ub=function(a,b){return{direction:a.toUpperCase(),expression:b}},vb=function(a){if("var"===a.token)var a={token:"expression",expressionType:"atomic",primaryexpression:"var",value:a};return{direction:"ASC",expression:a}},wb=Sn("[24] LimitOffsetClauses"),xb=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];null!=d&&null!=d.limit?b.limit=d.limit:null!=d&&null!=d.offset&&(b.offset=d.offset)}return b},yb=Sn("[25] LimitClause"),zb="LIMIT",Ab=On("LIMIT",!1),Bb="limit",Cb=On("limit",!1),Db=function(a){return{limit:parseInt(a.value)}},Eb=Sn("[26] OffsetClause"),Fb="OFFSET",Gb=On("OFFSET",!1),Hb="offset",Ib=On("offset",!1),Jb=function(a){return{offset:parseInt(a.value)}},Kb=Sn("[27] BindingsClause"),Lb="BINDINGS",Mb=On("BINDINGS",!1),Nb=Sn("[28] BindingValue"),Ob="UNDEF",Pb=On("UNDEF",!1),Qb=Sn("[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"),Rb="VALUES",Sb=On("VALUES",!1),Tb="values",Ub=On("values",!1),Vb=function(a){return null!=a?a[1]:null},Wb=Sn("[29] UpdateUnit"),Xb=Sn("[30] Update"),Yb=";",Zb=On(";",!1),$b=function(a,b,c){var d={};d.token="query",d.kind="update",d.prologue=a;var e=[b];return null!=c&&null!=c.length&&null!=c[3]&&null!=c[3].units&&(e=e.concat(c[3].units)),d.units=e,d},_b=Sn("[31] Update1"),ac=Sn("[32] Load"),bc="LOAD",cc=On("LOAD",!1),dc="load",ec=On("load",!1),fc="INTO",gc=On("INTO",!1),hc="into",ic=On("into",!1),jc=function(a,b){var c={};return c.kind="load",c.token="executableunit",c.sourceGraph=a,null!=b&&(c.destinyGraph=b[2]),c},kc=Sn("[33] Clear"),lc="CLEAR",mc=On("CLEAR",!1),nc="clear",oc=On("clear",!1),pc="SILENT",qc=On("SILENT",!1),rc="silent",sc=On("silent",!1),tc=function(a){var b={};return b.kind="clear",b.token="executableunit",b.destinyGraph=a,b},uc=Sn("[34] Drop"),vc="DROP",wc=On("DROP",!1),xc="drop",yc=On("drop",!1),zc=function(a){var b={};return b.kind="drop",b.token="executableunit",b.destinyGraph=a,b},Ac=Sn("[35] Create"),Bc="CREATE",Cc=On("CREATE",!1),Dc="create",Ec=On("create",!1),Fc=function(a){var b={};return b.kind="create",b.token="executableunit",b.destinyGraph=a,b},Gc=Sn("[36] InsertData"),Hc="INSERT",Ic=On("INSERT",!1),Jc="insert",Kc=On("insert",!1),Lc="DATA",Mc=On("DATA",!1),Nc="data",Oc=On("data",!1),Pc=function(a){var b={};return b.kind="insertdata",b.token="executableunit",b.quads=a,b},Qc=Sn("[37] DeleteData"),Rc="DELETE",Sc=On("DELETE",!1),Tc="delete",Uc=On("delete",!1),Vc=function(a){var b={};return b.kind="deletedata",b.token="executableunit",b.quads=a,b},Wc=Sn("[38] DeleteWhere"),Xc=function(a){var b={};b.kind="modify",b.pattern=a,b.with=null,b.using=null;var c=[],d=a.patterns[0];d=null==d.triplesContext&&null!=d.patterns?d.patterns[0].triplesContext:d.triplesContext;for(var e=0;e<d.length;e++){var f={},g=d[e];f.subject=g.subject,f.predicate=g.predicate,f.object=g.object,f.graph=g.graph,c.push(f)}return b.delete=c,b},Yc=Sn("[39] Modify"),Zc="WITH",$c=On("WITH",!1),_c="with",ad=On("with",!1),bd=function(a,b,c,d){var e={};return e.kind="modify",e.with=""!=a&&null!=a?a[2]:null,3!==b.length||""!==b[2]&&null!=b[2]?3===b.length&&null!=b[0].length&&null!=b[1].length&&null!=b[2].length?(e.delete=b[0],e.insert=b[2]):(e.insert=b,e.delete=null):(e.delete=b[0],e.insert=null),""!=c&&(e.using=c),e.pattern=d,e},cd=Sn("[40] DeleteClause"),dd=function(a){return a},ed=Sn("[41] InsertClause"),fd=Sn("[42] UsingClause"),gd="USING",hd=On("USING",!1),id="using",jd=On("using",!1),kd=function(a){return null!=a.length?{kind:"named",uri:a[2]}:{kind:"default",uri:a}},ld=Sn("[43] GraphRef"),md="GRAPH",nd=On("GRAPH",!1),od="graph",pd=On("graph",!1),qd=function(a){return a},rd=Sn("[44] GraphRefAll"),sd="DEFAULT",td=On("DEFAULT",!1),ud="default",vd=On("default",!1),wd=function(){return"default"},xd=function(){return"named"},yd="ALL",zd=On("ALL",!1),Ad="all",Bd=On("all",!1),Cd=function(){return"all"},Dd=Sn("[45] QuadPattern"),Ed=function(a){return a.quadsContext},Fd=Sn("[46] QuadData"),Gd=Sn("[47] Quads"),Hd=".",Id=On(".",!1),Jd=function(a,b){var c=[];if(null!=a&&null!=a.triplesContext)for(var d=0;d<a.triplesContext.length;d++){var e=a.triplesContext[d];e.graph=null,c.push(e)}if(b&&b.length>0&&b[0].length>0&&(c=c.concat(b[0][0].quadsContext),null!=b[0][2]&&null!=b[0][2].triplesContext))for(var d=0;d<b[0][2].triplesContext.length;d++){var e=b[0][2].triplesContext[d];e.graph=null,c.push(e)}return{token:"quads",quadsContext:c}},Kd=Sn("[48] QuadsNotTriples"),Ld=function(a,b){var c=[];if(null!=b)for(var d=0;d<b.triplesContext.length;d++){var e=b.triplesContext[d];e.graph=a,c.push(e)}return{token:"quadsnottriples",quadsContext:c}},Md=Sn("[49] TriplesTemplate"),Nd=function(a,b){var c=a.triplesContext;return null!=b&&"object"==typeof b&&null!=b.length&&null!=b[3]&&null!=b[3].triplesContext&&(c=c.concat(b[3].triplesContext)),{token:"triplestemplate",triplesContext:c}},Od=Sn("[50] GroupGraphPattern"),Pd=function(a){return a},Qd=Sn("[51] GroupGraphPatternSub"),Rd=function(a,b){var c=[];null!=a&&a!=[]&&c.push(a);for(var d=0;d<b.length;d++)for(var e=0;e<b[d].length;e++)null!=b[d][e]&&null!=b[d][e].token&&c.push(b[d][e]);for(var f=[],g=[],h=[],i=[],d=0;d<c.length;d++)if("triplespattern"!==c[d].token&&"filter"!==c[d].token&&"bind"!==c[d].token){if(0!=g.length||0!=h.length){for(var j=[],e=0;e<g.length;e++)j=j.concat(g[e].triplesContext);j.length>0&&f.push({token:"basicgraphpattern",triplesContext:j}),g=[]}f.push(c[d])}else"triplespattern"===c[d].token?g.push(c[d]):"bind"===c[d].token?i.push(c[d]):h.push(c[d]);if(0!=g.length||0!=h.length){for(var j=[],e=0;e<g.length;e++)j=j.concat(g[e].triplesContext);j.length>0&&f.push({token:"basicgraphpattern",triplesContext:j})}return{token:"groupgraphpattern",patterns:f,filters:h,binds:i}},Sd=Sn("[54] TriplesBlock"),Td=function(a,b){var c=a.triplesContext;return null!=b&&"object"==typeof b&&null!=b&&null!=b.length&&null!=b[2]&&null!=b[2].triplesContext&&(c=c.concat(b[2].triplesContext)),{token:"triplespattern",triplesContext:c}},Ud=Sn("[53] GraphPatternNotTriples"),Vd=Sn("[54] OptionalGraphPattern"),Wd="OPTIONAL",Xd=On("OPTIONAL",!1),Yd="optional",Zd=On("optional",!1),$d=function(a){return{token:"optionalgraphpattern",value:a}},_d=Sn("[55] GraphGraphPattern"),ae=function(a,b){for(var c=0;c<b.patterns.length;c++)for(var e=b.patterns[c],f=0;f<e.triplesContext.length;f++){var g=e.triplesContext[f];g.graph=a}return b.token="groupgraphpattern",b},be=Sn("[56] ServiceGraphPattern"),ce="SERVICE",de=On("SERVICE",!1),ee=function(a,b){return{token:"servicegraphpattern",status:"todo",value:[a,b]}},fe=Sn("[57] MinusGraphPattern"),ge="MINUS",he=On("MINUS",!1),ie="minus",je=On("minus",!1),ke=function(a){return{token:"minusgraphpattern",status:"todo",value:a}},le=Sn("[58] GroupOrUnionGraphPattern"),me="UNION",ne=On("UNION",!1),oe="union",pe=On("union",!1),qe=function(a,b){if(0===b.length)return a;for(var c={token:"graphunionpattern",value:[a]},d=0;d<b.length;d++)if(d==b.length-1)c.value.push(b[d][3]);else{c.value.push(b[d][3]);var e={token:"graphunionpattern",value:[c]};c=e}return c},re=Sn("[59] Filter"),se="FILTER",te=On("FILTER",!1),ue="filter",ve=On("filter",!1),we=function(a){return{token:"filter",value:a}},xe=Sn("[60] Bind"),ye="BIND",ze=On("BIND",!1),Ae="bind",Be=On("bind",!1),Ce=function(a,b){return{token:"bind",expression:a,as:b}},De=Sn("[60] Constraint"),Ee=Sn("[61] InlineData"),Fe=function(a){return a},Ge=Sn("[62] DataBlock"),He=Sn("[63] InlineDataOneVar"),Ie=function(a,b){return{token:"inlineData",values:[{var:a,value:b}]}},Je=Sn("[64] InlineDataFull"),Ke=function(a,b){return{token:"inlineData",values:[],todo:!0}},Le=Sn("[65] DataBlockValue"),Me=Sn("[61] FunctionCall"),Ne=function(a,b){var c={};return c.token="expression",c.expressionType="irireforfunction",c.iriref=a,c.args=b.value,c},Oe=Sn("[62] ArgList"),Pe=function(){var a={};return a.token="args",a.value=[],a},Qe=",",Re=On(",",!1),Se=function(a,b,c){for(var d=[],e=0;e<c.length;e++)d.push(c[e][2]);var f={};return f.token="args",f.value=[b].concat(d),null!=a&&"DISTINCT"===a.toUpperCase()?f.distinct=!0:f.distinct=!1,f},Te=Sn("[63] ExpressionList"),Ue=function(a,b){for(var c=[],d=0;d<b.length;d++)c.push(b[d][2]);var e={};return e.token="args",e.value=[a].concat(c),e},Ve=Sn("[64] ConstructTemplate"),We=function(a){return a},Xe=Sn("[65] ConstructTriples"),Ye=function(a,b){var c=a.triplesContext;return null!=b&&"object"==typeof b&&null!=b.length&&null!=b[3]&&null!=b[3].triplesContext&&(c=c.concat(b[3].triplesContext)),{token:"triplestemplate",triplesContext:c}},Ze=Sn("[66] TriplesSameSubject"),$e=function(a,b){var c=b.triplesContext,d=a;if(b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e],g=null;null!=f[1].length&&(f[1]=f[1][0]),d.token&&"triplesnodecollection"===d.token?(g={subject:d.chainSubject[0],predicate:f[0],object:f[1]},c.push(g),c=c.concat(d.triplesContext)):(g={subject:d,predicate:f[0],object:f[1]},c.push(g))}var h={};return h.token="triplessamesubject",h.triplesContext=c,h.chainSubject=d,h},_e=function(a,b){var c=a.triplesContext,d=a.chainSubject;if(b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e];if(null!=f[1].length&&(f[1]=f[1][0]),"triplesnodecollection"===a.token)for(var g=0;g<d.length;g++){var h=d[g];if(null!=h.triplesContext){var i={subject:h.chainSubject,predicate:f[0],object:f[1]};c.concat(h.triplesContext)}else{var i={subject:d[g],predicate:f[0],object:f[1]};c.push(i)}}else{var i={subject:d,predicate:f[0],object:f[1]};c.push(i)}}var j={};return j.token="triplessamesubject",j.triplesContext=c,j.chainSubject=d,j},af=Sn("[83] PropertyListPathNotEmpty"),bf=function(a,b,c){var d={};d.token="propertylist";for(var e=[],f=[],h=0;h<b.length;h++)null!=b[h].triplesContext?(e=e.concat(b[h].triplesContext),"triplesnodecollection"===b[h].token&&null!=b[h].chainSubject.length?f.push([a,b[h].chainSubject[0]]):f.push([a,b[h].chainSubject])):f.push([a,b[h]]);for(var h=0;h<c.length;h++)for(var i=c[h][3],j=i[0],k=i[2]||[],l=0;l<k.length;l++)null!=k[l].triplesContext?(e=e.concat(k[l].triplesContext),f.push([j,k[l].chainSubject])):f.push([j,k[l]]);return d.pairs=f,d.triplesContext=e,d},cf=Sn("[67] PropertyListNotEmpty"),df=function(a,b,c){var d={};d.token="propertylist";for(var e=[],f=[],h=0;h<b.length;h++)null!=b[h].triplesContext?(e=e.concat(b[h].triplesContext),"triplesnodecollection"===b[h].token&&null!=b[h].chainSubject.length?f.push([a,b[h].chainSubject[0]]):f.push([a,b[h].chainSubject])):f.push([a,b[h]]);for(var h=0;h<c.length;h++)for(var i=c[h][3],j=i[0],k=i[2]||[],l=0;l<k.length;l++)null!=k[l].triplesContext?(e=e.concat(k[l].triplesContext),f.push([j,k[l].chainSubject])):f.push([j,k[l]]);return d.pairs=f,d.triplesContext=e,d},ef=Sn("[68] PropertyList"),ff=Sn("[86] ObjectListPath"),gf=function(a,b){var c=[];c.push(a);for(var d=0;d<b.length;d++)for(var e=0;e<b[d].length;e++)"object"==typeof b[d][e]&&null!=b[d][e].token&&c.push(b[d][e]);return c},hf=Sn("[69] ObjectList"),jf=function(a,b){var c=[];c.push(a);for(var d=0;d<b.length;d++)for(var e=0;e<b[d].length;e++)"object"==typeof b[d][e]&&null!=b[d][e].token&&c.push(b[d][e]);return c},kf=Sn("[87] ObjectPath"),lf=Sn("[70] Object"),mf=Sn("[71] Verb"),nf="a",of=On("a",!1),pf=function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},qf=Sn("[72] TriplesSameSubjectPath"),rf=function(a,b){var c=b.triplesContext,d=a;if(b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e],g=null;null!=f[1].length&&(f[1]=f[1][0]),d.token&&"triplesnodecollection"===d.token?(g={subject:d.chainSubject[0],predicate:f[0],object:f[1]},"path"===g.predicate.token&&"element"===g.predicate.kind&&(g.predicate=g.predicate.value),c.push(g),c=c.concat(d.triplesContext)):(g={subject:d,predicate:f[0],object:f[1]},"path"===g.predicate.token&&"element"===g.predicate.kind&&(g.predicate=g.predicate.value),c.push(g))}var h={};return h.token="triplessamesubject",h.triplesContext=c,h.chainSubject=d,h},sf=function(a,b){var c=a.triplesContext,d=a.chainSubject;if(null!=b&&null!=b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e];if(null!=f[1].length&&(f[1]=f[1][0]),"triplesnodecollection"===a.token)for(var g=0;g<d.length;g++){var h=d[g];if(null!=h.triplesContext){var i={subject:h.chainSubject,predicate:f[0],object:f[1]};c.concat(h.triplesContext)}else{var i={subject:d[g],predicate:f[0],object:f[1]};c.push(i)}}else{var i={subject:d,predicate:f[0],object:f[1]};c.push(i)}}var j={};return j.token="triplessamesubject",j.triplesContext=c,j.chainSubject=d,j},tf=Sn("[73] PropertyListNotEmptyPath"),uf=function(a,b,c){var d={};d.token="propertylist";for(var e=[],f=[],h=0;h<b.length;h++)null!=b[h].triplesContext?(e=e.concat(b[h].triplesContext),"triplesnodecollection"===b[h].token&&null!=b[h].chainSubject.length?f.push([a,b[h].chainSubject[0]]):f.push([a,b[h].chainSubject])):f.push([a,b[h]]);for(var h=0;h<c.length;h++)for(var i=c[h][3],j=i[0],k=i[1]||[],l=0;l<k.length;l++)null!=k[l].triplesContext?(e=e.concat(k[l].triplesContext),f.push([j,k[l].chainSubject])):f.push([j,k[l]]);return d.pairs=f,d.triplesContext=e,d},vf=Sn("[74] PropertyListPath"),wf=Sn("[75]"),xf=function(a){var b={};return b.token="path",b.kind="element",b.value=a,a},yf=Sn("[76] VerbSimple"),zf=Sn("[77] Path"),Af=Sn("[78] PathAlternative"),Bf="|",Cf=On("|",!1),Df=function(a,b){if(null==b||0===b.length)return a;for(var c=[],d=0;d<b.length;d++)c.push(b[1]);var e={};return e.token="path",e.kind="alternative",e.value=c,e},Ef=Sn("[79] PathSequence"),Ff="/",Gf=On("/",!1),Hf=function(a,b){if(null==b||0===b.length)return a;for(var c=[a],d=0;d<b.length;d++)c.push(b[d][1]);var e={};return e.token="path",e.kind="sequence",e.value=c,e},If=Sn("[88] PathElt"),Jf=function(a,b){if(a.token&&"path"!=a.token&&""==b)return a;if(a.token&&a.token!=c&&""!=b){var c={};return c.token="path",c.kind="element",c.value=a,c.modifier=b,c}return a.modifier=b,a},Kf=Sn("[81] PathEltOrInverse"),Lf="^",Mf=On("^",!1),Nf=function(a){var b={};return b.token="path",b.kind="inversePath",b.value=a,b},Of=Sn("[82] PathMod"),Pf="?",Qf=On("?",!1),Rf="+",Sf=On("+",!1),Tf=Sn("[83] PathPrimary"),Uf="!",Vf=On("!",!1),Wf=Sn("[85] PathOneInPropertySet"),Xf=Sn("[86] Integer"),Yf=Sn("[100] TriplesNodePath"),Zf=function(a){for(var b=[],c=[],d=null,e=0;e<a.length;e++){jr++;var f=null;null==a[e].chainSubject&&null==a[e].triplesContext?f=a[e]:(f=a[e].chainSubject,b=b.concat(a[e].triplesContext)),d={subject:{token:"blank",value:"_:"+jr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:f},0==e&&c.push(d.subject),b.push(d),d=e===a.length-1?{subject:{token:"blank",value:"_:"+jr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+jr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(jr+1)}},b.push(d)}return{token:"triplesnodecollection",triplesContext:b,chainSubject:c}},$f=Sn("[87] TriplesNode"),_f=function(a){for(var b=[],c=[],d=null,e=0;e<a.length;e++){jr++;var f=null;null==a[e].chainSubject&&null==a[e].triplesContext?f=a[e]:(f=a[e].chainSubject,b=b.concat(f.triplesContext)),d={subject:{token:"blank",value:"_:"+jr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:f},0==e&&c.push(d.subject),b.push(d),d=e===a.length-1?{subject:{token:"blank",value:"_:"+jr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+jr},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(jr+1)}},b.push(d)}return{token:"triplesnodecollection",triplesContext:b,chainSubject:c}},ag=Sn("[101] BlankNodePropertyListPath"),bg="[",cg=On("[",!1),dg="]",eg=On("]",!1),fg=function(a){jr++;for(var b={token:"blank",value:"_:"+jr},c=[],d=0;d<a.pairs.length;d++){var e=a.pairs[d],f={};f.subject=b,f.predicate=e[0],null!=e[1].length&&(e[1]=e[1][0]),f.object=e[1],c.push(f)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(c),chainSubject:b}},gg=Sn("[88] BlankNodePropertyList"),hg=function(a){jr++;for(var b={token:"blank",value:"_:"+jr},c=[],d=0;d<a.pairs.length;d++){var e=a.pairs[d],f={};f.subject=b,f.predicate=e[0],null!=e[1].length&&(e[1]=e[1][0]),f.object=e[1],c.push(f)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(c),chainSubject:b}},ig=Sn("[103] CollectionPath"),jg=function(a){return a},kg=Sn("[89] Collection"),lg=Sn("[105] GraphNodePath"),mg=function(a){return a[1]},ng=Sn("[90] GraphNode"),og=Sn("[91] VarOrTerm"),pg=Sn("[92] VarOrIRIref"),qg=Sn("[93] Var"),rg=function(a){var b={};return b.token="var",b.value=a,b},sg=Sn("[94] GraphTerm"),tg=Sn("[95] Expression"),ug=Sn("[96] ConditionalOrExpression"),vg="||",wg=On("||",!1),xg=function(a,b){if(0===b.length)return a;var c={};c.token="expression",c.expressionType="conditionalor";for(var d=[a],e=0;e<b.length;e++)d.push(b[e][3]);return c.operands=d,c},yg=Sn("[97] ConditionalAndExpression"),zg="&&",Ag=On("&&",!1),Bg=function(a,b){if(0===b.length)return a;var c={};c.token="expression",c.expressionType="conditionaland";for(var d=[a],e=0;e<b.length;e++)d.push(b[e][3]);return c.operands=d,c},Cg=Sn("[98] ValueLogical"),Dg=Sn("[99] RelationalExpression"),Eg="=",Fg=On("=",!1),Gg="!=",Hg=On("!=",!1),Ig="<",Jg=On("<",!1),Kg=">",Lg=On(">",!1),Mg="<=",Ng=On("<=",!1),Og=">=",Pg=On(">=",!1),Qg="I",Rg=On("I",!1),Sg="i",Tg=On("i",!1),Ug="N",Vg=On("N",!1),Wg="n",Xg=On("n",!1),Yg="O",Zg=On("O",!1),$g="o",_g=On("o",!1),ah="T",bh=On("T",!1),ch="t",dh=On("t",!1),eh=function(a,b){if(0===b.length)return a;if("i"===b[0][1]||"I"===b[0][1]||"n"===b[0][1]||"N"===b[0][1]){var c={};if("i"===b[0][1]||"I"===b[0][1]){var d="=";c.expressionType="conditionalor"}else{var d="!=";c.expressionType="conditionaland"}for(var e=a,f=[],g=0;g<b[0].length;g++)if("args"===b[0][g].token){f=b[0][g].value;break}c.token="expression",c.operands=[];for(var h=0;h<f.length;h++){var i={};i.token="expression",i.expressionType="relationalexpression",i.operator=d,i.op1=e,i.op2=f[h],c.operands.push(i)}return c}var c={};return c.expressionType="relationalexpression",c.operator=b[0][1],c.op1=a,c.op2=b[0][3],c.token="expression",c},fh=Sn("[100] NumericExpression"),gh=Sn("[101] AdditiveExpression"),hh="-",ih=On("-",!1),jh=function(a,b){if(0===b.length)return a;var c={};c.token="expression",c.expressionType="additiveexpression",c.summand=a,c.summands=[];for(var d=0;d<b.length;d++){var e=b[d],f={};if(4==e.length&&"string"==typeof e[1])f.operator=e[1],f.expression=e[3];else{var g={},h=f[0],j=(f[1][1],f[1][3]);h.value<0?(f.operator="-",h.value=-h.value):f.operator="+",g.token="expression",g.expressionType="multiplicativeexpression",g.operator=h,g.factors=[{operator:null,expression:j}],f.expression=g}c.summands.push(f)}return c},kh=Sn("[102] MultiplicativeExpression"),lh=function(a,b){if(0===b.length)return a;var c={};c.token="expression",c.expressionType="multiplicativeexpression",c.factor=a,c.factors=[];for(var d=0;d<b.length;d++){var e=b[d],f={};f.operator=e[1],f.expression=e[3],c.factors.push(f)}return c},mh=Sn("[103] UnaryExpression"),nh=function(a){var b={};return b.token="expression",b.expressionType="unaryexpression",b.unaryexpression="!",b.expression=a,b},oh=function(a){var b={};return b.token="expression",b.expressionType="unaryexpression",b.unaryexpression="+",b.expression=a,b},ph=function(a){var b={};return b.token="expression",b.expressionType="unaryexpression",b.unaryexpression="-",b.expression=a,b},qh=Sn("[104] PrimaryExpression"),rh=function(a){var b={};return b.token="expression",b.expressionType="atomic",b.primaryexpression="rdfliteral",b.value=a,b},sh=function(a){var b={};return b.token="expression",b.expressionType="atomic",b.primaryexpression="numericliteral",b.value=a,b},th=function(a){var b={};return b.token="expression",b.expressionType="atomic",b.primaryexpression="booleanliteral",b.value=a,b},uh=function(a){var b={};return b.token="expression",b.expressionType="atomic",b.primaryexpression="var",b.value=a,b},vh=Sn("[105] BrackettedExpression"),wh=function(a){return a},xh=Sn("[106] BuiltInCall"),yh="STR",zh=On("STR",!1),Ah="str",Bh=On("str",!1),Ch=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="str",b.args=[a],b},Dh="LANG",Eh=On("LANG",!1),Fh="lang",Gh=On("lang",!1),Hh=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="lang",b.args=[a],b},Ih="LANGMATCHES",Jh=On("LANGMATCHES",!1),Kh="langmatches",Lh=On("langmatches",!1),Mh=function(a,b){var c={};return c.token="expression",c.expressionType="builtincall",c.builtincall="langmatches",c.args=[a,b],c},Nh="DATATYPE",Oh=On("DATATYPE",!1),Ph="datatype",Qh=On("datatype",!1),Rh=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="datatype",b.args=[a],b},Sh="BOUND",Th=On("BOUND",!1),Uh="bound",Vh=On("bound",!1),Wh=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="bound",b.args=[a],b},Xh="IRI",Yh=On("IRI",!1),Zh="iri",$h=On("iri",!1),_h=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="iri",b.args=[a],b},ai="URI",bi=On("URI",!1),ci="uri",di=On("uri",!1),ei=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="uri",b.args=[a],b},fi="BNODE",gi=On("BNODE",!1),hi="bnode",ii=On("bnode",!1),ji=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="bnode",5===a.length?b.args=[a[2]]:b.args=null,b},ki="COALESCE",li=On("COALESCE",!1),mi="coalesce",ni=On("coalesce",!1),oi=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="coalesce",b.args=a,b},pi="IF",qi=On("IF",!1),ri="if",si=On("if",!1),ti=function(a,b,c){var d={};return d.token="expression",d.expressionType="builtincall",d.builtincall="if",d.args=[a,b,c],d},ui="ISLITERAL",vi=On("ISLITERAL",!1),wi="isliteral",xi=On("isliteral",!1),yi="isLITERAL",zi=On("isLITERAL",!1),Ai=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="isliteral",b.args=[a],b},Bi="ISBLANK",Ci=On("ISBLANK",!1),Di="isblank",Ei=On("isblank",!1),Fi="isBLANK",Gi=On("isBLANK",!1),Hi=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="isblank",b.args=[a],b},Ii="SAMETERM",Ji=On("SAMETERM",!1),Ki="sameterm",Li=On("sameterm",!1),Mi=function(a,b){var c={};return c.token="expression",c.expressionType="builtincall",c.builtincall="sameterm",c.args=[a,b],c},Ni="ISURI",Oi=On("ISURI",!1),Pi="isuri",Qi=On("isuri",!1),Ri="isURI",Si=On("isURI",!1),Ti="ISIRI",Ui=On("ISIRI",!1),Vi="isiri",Wi=On("isiri",!1),Xi="isIRI",Yi=On("isIRI",!1),Zi=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="isuri",b.args=[a],b},$i="custom:",_i=On("custom:",!1),aj="CUSTOM:",bj=On("CUSTOM:",!1),cj=/^[a-zA-Z0-9_]/,dj=Pn([["a","z"],["A","Z"],["0","9"],"_"],!1,!1),ej=function(a,b,c){var d={};d.token="expression",d.expressionType="custom",d.name=a.join("");for(var e=[],f=0;f<b.length;f++)e.push(b[f][1]);return e.push(c),d.args=e,d},fj=Sn("[107] RegexExpression"),gj="REGEX",hj=On("REGEX",!1),ij="regex",jj=On("regex",!1),kj=function(a,b,c){var d={};return d.token="expression",d.expressionType="regex",d.text=a,d.pattern=b,null!=c&&(d.flags=c[2]),d},lj=Sn("[108] ExistsFunc"),mj="EXISTS",nj=On("EXISTS",!1),oj="exists",pj=On("exists",!1),qj=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="exists",b.args=[a],b},rj=Sn("[109] NotExistsFunc"),sj="NOT",tj=On("NOT",!1),uj="not",vj=On("not",!1),wj=function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="notexists",b.args=[a],b},xj=Sn("[110] Aggregate"),yj="COUNT",zj=On("COUNT",!1),Aj="count",Bj=On("count",!1),Cj=function(a,b){var c={};return c.token="expression",c.expressionType="aggregate",c.aggregateType="count",c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c},Dj="GROUP_CONCAT",Ej=On("GROUP_CONCAT",!1),Fj="group_concat",Gj=On("group_concat",!1),Hj="SEPARATOR",Ij=On("SEPARATOR",!1),Jj=function(a,b,c){var d={};return d.token="expression",d.expressionType="aggregate",d.aggregateType="group_concat",d.distinct=""!=a&&null!=a?"DISTINCT":a,d.expression=b,d.separator=c,d},Kj="SUM",Lj=On("SUM",!1),Mj="sum",Nj=On("sum",!1),Oj=function(a,b){var c={};return c.token="expression",c.expressionType="aggregate",c.aggregateType="sum",c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c},Pj="MIN",Qj=On("MIN",!1),Rj="min",Sj=On("min",!1),Tj=function(a,b){var c={};return c.token="expression",c.expressionType="aggregate",c.aggregateType="min",c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c},Uj="MAX",Vj=On("MAX",!1),Wj="max",Xj=On("max",!1),Yj=function(a,b){var c={};return c.token="expression",c.expressionType="aggregate",c.aggregateType="max",c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c},Zj="AVG",$j=On("AVG",!1),_j="avg",ak=On("avg",!1),bk=function(a,b){var c={};return c.token="expression",c.expressionType="aggregate",c.aggregateType="avg",c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c},ck=Sn("[117] IRIrefOrFunction"),dk=function(a,b){var c={};return c.token="expression",c.expressionType="irireforfunction",c.iriref=a,c.args=null!=b?b.value:b,c},ek=Sn("[112] RDFLiteral"),fk="^^",gk=On("^^",!1),hk=function(a,b){return"string"==typeof b&&b.length>0?{token:"literal",value:a.value,lang:b.slice(1),type:null}:null!=b&&"object"==typeof b?(b.shift(),{token:"literal",value:a.value,lang:null,type:b[0]}):{token:"literal",value:a.value,lang:null,type:null}},ik=Sn("[113] NumericLiteral"),jk=Sn("[114] NumericLiteralUnsigned"),kk=Sn("[115] NumericLiteralPositive"),lk=Sn("[116] NumericLiteralNegative"),mk=Sn("[117] BooleanLiteral"),nk="TRUE",ok=On("TRUE",!1),pk="true",qk=On("true",!1),rk=function(){var a={};return a.token="literal",a.lang=null,a.type="http://www.w3.org/2001/XMLSchema#boolean",a.value=!0,a},sk="FALSE",tk=On("FALSE",!1),uk="false",vk=On("false",!1),wk=function(){var a={};return a.token="literal",a.lang=null,a.type="http://www.w3.org/2001/XMLSchema#boolean",a.value=!1,a},xk=Sn("[118] String"),yk=function(a){return{token:"string",value:a}},zk=Sn("[119] IRIref"),Ak=function(a){return{token:"uri",prefix:null,suffix:null,value:a}},Bk=function(a){return a},Ck=Sn("[120] PrefixedName"),Dk=function(a){return{token:"uri",prefix:a[0],suffix:a[1],value:null}},Ek=function(a){return{token:"uri",prefix:a,suffix:"",value:null}},Fk=Sn("[121] BlankNode"),Gk=function(a){return{token:"blank",value:a}},Hk=function(){return jr++,{token:"blank",value:"_:"+jr}},Ik=Sn("[122] IRI_REF"),Jk=/^[^<>"{}|\^`\\]/,Kk=Pn(["<",">",'"',"{","}","|","^","`","\\"],!0,!1),Lk=function(a){return a.join("")},Mk=Sn("[123] PNAME_NS"),Nk=":",Ok=On(":",!1),Pk=Sn("[124] PNAME_LN"),Qk=function(a,b){return[a,b]},Rk=Sn("[125] BLANK_NODE_LABEL"),Sk="_:",Tk=On("_:",!1),Uk=function(a){return a},Vk=Sn("[126] VAR1"),Wk=function(a){return a},Xk=Sn("[127] VAR2"),Yk="$",Zk=On("$",!1),$k=Sn("[128] LANGTAG"),_k="@",al=On("@",!1),bl=/^[a-zA-Z]/,cl=Pn([["a","z"],["A","Z"]],!1,!1),dl=/^[a-zA-Z0-9]/,el=Pn([["a","z"],["A","Z"],["0","9"]],!1,!1),fl=function(a,b){return 0===b.length?("@"+a.join("")).toLowerCase():("@"+a.join("")+"-"+b[0][1].join("")).toLowerCase()},gl=Sn("[129] INTEGER"),hl=/^[0-9]/,il=Pn([["0","9"]],!1,!1),jl=function(a){var b={};return b.token="literal",b.lang=null,b.type="http://www.w3.org/2001/XMLSchema#integer",b.value=ir(a),b},kl=Sn("[130] DECIMAL"),ll=function(a,b,c){var d={};return d.token="literal",d.lang=null,d.type="http://www.w3.org/2001/XMLSchema#decimal",d.value=ir([a,b,c]),d},ml=function(a,b){var c={};return c.token="literal",c.lang=null,c.type="http://www.w3.org/2001/XMLSchema#decimal",c.value=ir([a,b]),c},nl=Sn("[131] DOUBLE"),ol=function(a,b,c,d){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#double",e.value=ir([a,b,c,d]),e},pl=function(a,b,c){var d={};return d.token="literal",d.lang=null,d.type="http://www.w3.org/2001/XMLSchema#double",d.value=ir([a,b,c]),d},ql=function(a,b){var c={};return c.token="literal",c.lang=null,c.type="http://www.w3.org/2001/XMLSchema#double",c.value=ir([a,b]),c},rl=Sn("[132] INTEGER_POSITIVE"),sl=function(a){return a.value="+"+a.value,a},tl=Sn("[133] DECIMAL_POSITIVE"),ul=function(a){return a.value="+"+a.value,a},vl=Sn("[134] DOUBLE_POSITIVE"),wl=Sn("[135] INTEGER_NEGATIVE"),xl=function(a){return a.value="-"+a.value,a},yl=Sn("[136] DECIMAL_NEGATIVE"),zl=Sn("[137] DOUBLE_NEGATIVE"),Al=Sn("[138] EXPONENT"),Bl=/^[eE]/,Cl=Pn(["e","E"],!1,!1),Dl=/^[+\-]/,El=Pn(["+","-"],!1,!1),Fl=function(a,b,c){return ir([a,b,c])},Gl=Sn("[139] STRING_LITERAL1"),Hl="'",Il=On("'",!1),Jl=/^[^'\\\n\r]/,Kl=Pn(["'","\\","\n","\r"],!0,!1),Ll=function(a){return ir(a)},Ml=Sn("[140] STRING_LITERAL2"),Nl='"',Ol=On('"',!1),Pl=/^[^"\\\n\r]/,Ql=Pn(['"',"\\","\n","\r"],!0,!1),Rl=Sn("[141] STRING_LITERAL_LONG1"),Sl="'''",Tl=On("'''",!1),Ul=/^[^'\\]/,Vl=Pn(["'","\\"],!0,!1),Wl=Sn("[142] STRING_LITERAL_LONG2"),Xl='"""',Yl=On('"""',!1),Zl=/^[^"\\]/,$l=Pn(['"',"\\"],!0,!1),_l=Sn("[143] ECHAR"),am="\\",bm=On("\\",!1),cm=/^[tbnrf"']/,dm=Pn(["t","b","n","r","f",'"',"'"],!1,!1),em=Sn("[144] NIL"),fm=function(){return{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}},gm=Sn("[145] WS"),hm=/^[ ]/,im=Pn([" "],!1,!1),jm=/^[\t]/,km=Pn(["\t"],!1,!1),lm=/^[\r]/,mm=Pn(["\r"],!1,!1),nm=/^[\n]/,om=Pn(["\n"],!1,!1),pm=Sn(" COMMENT"),qm="#",rm=On("#",!1),sm=/^[^\n\r]/,tm=Pn(["\n","\r"],!0,!1),um=Sn("[146] ANON"),vm=Sn("[147] PN_CHARS_BASE"),wm=/^[A-Z]/,xm=Pn([["A","Z"]],!1,!1),ym=/^[a-z]/,zm=Pn([["a","z"]],!1,!1),Am=/^[\xC0-\xD6]/,Bm=Pn([["",""]],!1,!1),Cm=/^[\xD8-\xF6]/,Dm=Pn([["",""]],!1,!1),Em=/^[\xF8-\u02FF]/,Fm=Pn([["",""]],!1,!1),Gm=/^[\u0370-\u037D]/,Hm=Pn([["",""]],!1,!1),Im=/^[\u037F-\u1FFF]/,Jm=Pn([["",""]],!1,!1),Km=/^[\u200C-\u200D]/,Lm=Pn([["",""]],!1,!1),Mm=/^[\u2070-\u218F]/,Nm=Pn([["",""]],!1,!1),Om=/^[\u2C00-\u2FEF]/,Pm=Pn([["",""]],!1,!1),Qm=/^[\u3001-\uD7FF]/,Rm=Pn([["",""]],!1,!1),Sm=/^[\uF900-\uFDCF]/,Tm=Pn([["",""]],!1,!1),Um=/^[\uFDF0-\uFFFD]/,Vm=Pn([["",""]],!1,!1),Wm=/^[\u1000-\uEFFF]/,Xm=Pn([["",""]],!1,!1),Ym=Sn("[148] PN_CHARS_U"),Zm="_",$m=On("_",!1),_m=Sn("[149] VARNAME"),an=/^[\xB7]/,bn=Pn([""],!1,!1),cn=/^[\u0300-\u036F]/,dn=Pn([["",""]],!1,!1),en=/^[\u203F-\u2040]/,fn=Pn([["",""]],!1,!1),gn=function(a,b){return a+b.join("")},hn=Sn("[150] PN_CHARS"),jn=Sn("[151] PN_PREFIX"),kn=function(a,b){if("."==b[b.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return a+b.join("")},ln=Sn("[152] PN_LOCAL"),mn=function(a,b){return a+(b||[]).join("")},nn=Sn("[170] PLX"),on=Sn("[171] PERCENT"),pn="%",qn=On("%",!1),rn=function(a){return a.join("")},sn=Sn("[172] HEX"),tn=/^[A-F]/,un=Pn([["A","F"]],!1,!1),vn=/^[a-f]/,wn=Pn([["a","f"]],!1,!1),xn=Sn("[173] PN_LOCAL_ESC"),yn="~",zn=On("~",!1),An="&",Bn=On("&",!1),Cn=function(a){return"\\"+a},Dn=0,En=0,Fn=[{line:1,column:1}],Gn=0,Hn=[],In=0;if("startRule"in c){if(!(c.startRule in e))throw new Error("Can't start parsing from rule \""+c.startRule+'".');f=e[c.startRule]}var ir=function(a){for(var b="",c=0;c<a.length;c++)"string"==typeof a[c]?b+=a[c]:b+=a[c].join("");return b},jr=0,kr={},lr=function(a,b){kr[a]=b},mr=function(a){kr[null]=a},nr=function(a){var b="";if(null==a)return null;for(var c=0;c<a.length;c++)b+=a[c];return b.toUpperCase()};if((Jn=f())!==d&&Dn===a.length)return Jn;throw Jn!==d&&Dn<a.length&&Vn(Rn()),Xn(Hn,Gn<a.length?a.charAt(Gn):null,Gn<a.length?Un(Gn,Gn+1):Un(Gn,Gn))}return a(b,Error),b.buildMessage=function(a,b){function d(a){return a.charCodeAt(0).toString(16).toUpperCase()}function e(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+d(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+d(a)})}function f(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+d(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+d(a)})}function g(a){return c[a.type](a)}function h(a){var c,d,b=new Array(a.length);for(c=0;c<a.length;c++)b[c]=g(a[c]);if(b.sort(),b.length>0){for(c=1,d=1;c<b.length;c++)b[c-1]!==b[c]&&(b[d]=b[c],d++);b.length=d}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}function i(a){return a?'"'+e(a)+'"':"end of input"}var c={literal:function(a){return'"'+e(a.text)+'"'},class:function(a){var c,b="";for(c=0;c<a.parts.length;c++)b+=a.parts[c]instanceof Array?f(a.parts[c][0])+"-"+f(a.parts[c][1]):f(a.parts[c]);return"["+(a.inverted?"^":"")+b+"]"},any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};return"Expected "+h(a)+" but "+i(b)+" found."},{SyntaxError:b,parse:c}}()},{}],47:[function(a,b,c){var e=(a("./btree").Tree,a("./utils")),f=e,g=a("./lexicon").Lexicon;PersistentLexicon=function(a,b){var c=this;e.registerIndexedDB(c),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,c.dbName=b||"rdfstorejs";var d=c.indexedDB.open(this.dbName+"_lexicon",1);d.onerror=function(b){a(null,new Error("Error opening IndexedDB: "+b.target.errorCode))},d.onsuccess=function(b){c.db=b.target.result,a(c)},d.onupgradeneeded=function(a){c.db=a.target.result,c.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),c.db.createObjectStore("components",{keyPath:"id",autoIncrement:!0}).createIndex("value","value",{unique:!0})}},PersistentLexicon.prototype.registerGraph=function(a,b,c){if(a!=this.defaultGraphOid){var d=this.db.transaction(["knownGraphs"],"readwrite");d.onerror=function(a){c(null,new Error(a.target.statusCode))};var e=d.objectStore("knownGraphs");e.get(b).onsuccess=function(d){d.target.result?c(!0):e.add({oid:a,uriToken:b}).onsuccess=function(a){c(!0)}}}else c()},PersistentLexicon.prototype.registeredGraphs=function(a,b){var c=[],d=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs"),e=d.openCursor();e.onsuccess=function(d){var e=d.target.result;e?(!0===a?c.push(e.value.uriToken):c.push(e.value.oid),e.continue()):b(c)},e.onerror=function(a){b(null,new Error("Error retrieving data from the cursor: "+a.target.errorCode))}},PersistentLexicon.prototype.registerUri=function(a,b){var c=this;if(a===this.defaultGraphUri)b(this.defaultGraphOid);else{var d=c.db.transaction(["components"],"readwrite").objectStore("components"),e=d.index("value").get("_u:"+a);e.onsuccess=function(c){var e=c.target.result;if(e){e.counter++;var f=e.id,g=d.put(e);g.onsuccess=function(a){b(f)},g.onerror=function(a){b(null,new Error("Error updating the URI data"+a.target.errorCode))}}else{var h=d.add({value:"_u:"+a,counter:0,uri:!0});h.onsuccess=function(a){b(a.target.result)},h.onerror=function(a){b(null,new Error("Error inserting the URI data"+a.target.errorCode))}}},e.onerror=function(a){b(null,new Error("Error retrieving the URI data"+a.target.errorCode))}}},PersistentLexicon.prototype.resolveUri=function(a,b){if(a===this.defaultGraphUri)b(this.defaultGraphOid);else{var c=this.db.transaction(["components"]).objectStore("components"),d=c.index("value").get("_u:"+a);d.onsuccess=function(a){b(null!=a.target.result?a.target.result.id:-1)},d.onerror=function(a){b(null,new Error("Error retrieving uri data "+a.target.errorCode))}}},PersistentLexicon.prototype.resolveUriCost=function(a,b){if(a===this.defaultGraphUri)b(0);else{var c=that.db.transaction(["components"]).objectStore("components"),d=c.index("value").get("_u:"+a);d.onsuccess=function(a){b(null!=a.target.result?a.target.result.cost:-1)},d.onerror=function(a){b(null,new Error("Error retrieving uri data "+a.target.errorCode))}}},PersistentLexicon.prototype.registerBlank=function(a){var b=guid(),c=this,d=c.db.transaction(["components"],"readwrite").objectStore("components"),e=d.add({value:"_b:"+b,counter:0,label:!0});e.onsuccess=function(b){a(b.target.result)},e.onerror=function(b){a(null,new Error("Error inserting the URI data"+b.target.errorCode))}},PersistentLexicon.prototype.resolveBlankCost=function(a,b){b(0)},PersistentLexicon.prototype.registerLiteral=function(a,b){var c=this,d=c.db.transaction(["components"],"readwrite").objectStore("components"),e=d.index("value").get("_l:"+a);e.onsuccess=function(c){var e=c.target.result;if(e){e.counter++;var f=e.id,g=d.put(e);g.onsuccess=function(a){b(f)},g.onerror=function(a){b(null,new Error("Error updating the literal data"+a.target.errorCode))}}else{var h=d.add({value:"_l:"+a,counter:0,literal:!0});h.onsuccess=function(a){b(a.target.result)},h.onerror=function(a){b(null,new Error("Error inserting the literal data"+a.target.errorCode))}}},e.onerror=function(a){b(null,new Error("Error retrieving the literal data"+a.target.errorCode))}},PersistentLexicon.prototype.resolveLiteral=function(a,b){var c=that.db.transaction(["components"]).objectStore("components"),d=c.index("value").get("_l:"+a);d.onsuccess=function(a){b(null!=a.target.result?a.target.result.id:-1)},d.onerror=function(a){b(null,new Error("Error retrieving literal data "+a.target.errorCode))}},PersistentLexicon.prototype.resolveLiteralCost=function(a,b){var c=that.db.transaction(["components"]).objectStore("components"),d=c.index("components").get(a);d.onsuccess=function(a){b(null!=a.target.result?a.target.result.cost:-1)},d.onerror=function(a){b(null,new Error("Error retrieving literal data "+a.target.errorCode))}},PersistentLexicon.prototype.parseLiteral=function(a){return g.prototype.parseLiteral(a)},PersistentLexicon.prototype.parseUri=function(a){return g.prototype.parseUri(a)},PersistentLexicon.prototype.retrieve=function(a,b){var d,e,c=this;a===this.defaultGraphOid?b({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):(d=c.db.transaction(["components"]),e=d.objectStore("components").get(a),e.onsuccess=function(a){if(null!=a.target.result)if(null!=a.target.result.label){var d="_:"+a.target.result.id;b({token:"blank",value:d})}else null!=a.target.result.uri?b(c.parseUri(a.target.result.value.slice(3,a.target.result.value.length))):null!=a.target.result.literal?b(c.parseLiteral(a.target.result.value.slice(3,a.target.result.value.length))):(console.log(a.target.result),b(null,new Error("Unknown type of component "+a.target.result)));else b(null,null)},e.onerror=function(a){b(null,new Error("Error searching in blanks data "+a.target.errorCode))})},PersistentLexicon.prototype.clear=function(a){var b=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var d,c=b.db.transaction(["components"],"readwrite"),e=c.objectStore("components"),f=function(){null!=a&&a()};d=e.clear(),d.onsuccess=f,d.onerror=f},PersistentLexicon.prototype.unregister=function(a,b,c){var d=this;f.seq(function(c){d._unregisterTerm(a.subject.token,b.subject,c)},function(c){d._unregisterTerm(a.predicate.token,b.predicate,c)},function(c){d._unregisterTerm(a.object.token,b.object,c)},function(c){null!=a.graph?d._unregisterTerm(a.graph.token,b.graph,c):c()})(function(){c(!0)})},PersistentLexicon.prototype._unregisterTerm=function(a,b,c){var e,d=this,f=d.db.transaction(["components","knownGraphs"],"readwrite");if("uri"===a)if(b!=this.defaultGraphOid){var g=function(){f.objectStore("knownGraphs").delete(b).onsuccess=function(){c()}};e=f.objectStore("components").delete(b),e.onsuccess=g()}else c();else e=f.objectStore("components").delete(b),e.onsuccess=function(){c()}},b.exports={PersistentLexicon:PersistentLexicon}},{"./btree":40,"./lexicon":44,"./utils":57}],48:[function(a,b,c){var d=a("./utils");PersistentQuadBackend=function(a,b){var c=this;if(0!==arguments){d.registerIndexedDB(c),this.indexMap={},this.indices=["S","P","O","G","SP","SO","SG","PO","PG","OG","SPO","SPG","SOG","POG","SPOG"],this.componentOrders={S:["subject","predicate","object","graph"],P:["predicate","subject","object","graph"],O:["object","subject","predicate","graph"],G:["graph","subject","predicate","object"],SP:["subject","predicate","object","graph"],SO:["subject","object","predicate","graph"],SG:["subject","graph","predicate","object"],PO:["predicate","object","subject","graph"],PG:["predicate","graph","subject","object"],OG:["object","graph","subject","predicate"],SPO:["subject","predicate","object","graph"],SPG:["subject","predicate","graph","object"],SOG:["subject","object","graph","predicate"],POG:["predicate","object","graph","subject"],SPOG:["subject","predicate","object","graph"]},this.componentOrdersMap={};for(var e in this.componentOrders){var f=this.componentOrders[e],g=f.slice(0,e.length).sort().join(".");this.componentOrdersMap[g]=e}c.dbName=a.name||"rdfstorejs";var h=c.indexedDB.open(this.dbName+"_db",1);h.onerror=function(a){b(null,new Error("Error opening IndexedDB: "+a.target.errorCode))},h.onsuccess=function(a){c.db=a.target.result,b(c)},h.onupgradeneeded=function(a){var b=a.target.result,e=b.createObjectStore(c.dbName,{keyPath:"SPOG"});d.each(c.indices,function(a){"SPOG"!==a&&e.createIndex(a,a,{unique:!1})})}}},PersistentQuadBackend.prototype.index=function(a,b){var c=this;d.each(this.indices,function(b){a[b]=c._genMinIndexKey(a,b)});var e=c.db.transaction([c.dbName],"readwrite");e.oncomplete=function(a){},e.onerror=function(a){b(null,new Error(a.target.statusCode))},e.objectStore(c.dbName).add(a).onsuccess=function(a){b(!0)}},PersistentQuadBackend.prototype.range=function(a,b){var j,c=this,d=c.db.transaction([c.dbName]).objectStore(c.dbName),e=this._indexForPattern(a),f=this._genMinIndexKey(a,e),g=this._genMaxIndexKey(a,e),h=c.IDBKeyRange.bound(f,g,!1,!1),i=[];j="SPOG"===e?d:d.index(e),j.openCursor(h).onsuccess=function(a){var c=a.target.result;c?(i.push(c.value),c.continue()):b(i)}},PersistentQuadBackend.prototype.search=function(a,b){var c=this,d=c.db.transaction([c.dbName]).objectStore(c.dbName),e=this._genMinIndexKey(a,"SPOG"),f=d.get(e);f.onerror=function(a){b(null,new Error(a.target.statusCode))},f.onsuccess=function(a){b(null!=a.target.result)}},PersistentQuadBackend.prototype.delete=function(a,b){var c=this,d=c._genMinIndexKey(a,"SPOG"),e=c.db.transaction([c.dbName],"readwrite").objectStore(c.dbName).delete(d);e.onsuccess=function(){b(!0)},e.onerror=function(a){b(null,new Error(a.target.statusCode))}},PersistentQuadBackend.prototype._genMinIndexKey=function(a,b){var c=this.componentOrders[b];return d.map(c,function(b){return"string"==typeof a[b]||null==a[b]?"0":a[b]}).join(".")},PersistentQuadBackend.prototype._genMaxIndexKey=function(a,b){for(var c=this.componentOrders[b],e=[],g=0;g<c.length;g++){var h=c[g],i=a[h];e[g]="string"==typeof i?"z":i}return d.map(e,function(a){return""+a}).join(".")},PersistentQuadBackend.prototype._indexForPattern=function(a){var b=this,c=a.indexKey,d=c.sort().join("."),e=b.componentOrdersMap[d];if(null==e)throw new Error("Error, cannot find index for indexKey "+d);return e},PersistentQuadBackend.prototype.clear=function(a){var d,b=this,c=b.db.transaction([b.dbName],"readwrite");d=c.objectStore(b.dbName).clear(),d.onsuccess=function(){a()},d.onerror=function(){a()}},b.exports.PersistentQuadBackend=PersistentQuadBackend},{"./utils":57}],49:[function(a,b,c){var d=a("./quad_index").QuadIndex,e=a("./utils");QuadBackend=function(a,b){this.indexMap={},this.treeOrder=a.treeOrder,this.indices=a.index||QuadBackend.allIndices,this.componentOrders=QuadBackend.componentOrders;var c=this;e.eachSeries(this.indices,function(a,b){new d({order:c.treeOrder,componentOrder:c.componentOrders[a]},function(d){c.indexMap[a]=d,b()})},function(){b(c)})},QuadBackend.allIndices=["SPOG","GP","OGS","POG","GSP","OS"],QuadBackend.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},QuadBackend.prototype._indexForPattern=function(a){for(var b=a.indexKey,c=0;c<QuadBackend.allIndices.length;c++)for(var d=QuadBackend.allIndices[c],f=QuadBackend.componentOrders[d],g=0;g<f.length&&!1!==e.include(b,f[g]);g++)if(g==b.length-1)return d;return"SPOG"},QuadBackend.prototype.index=function(a,b){var c=this;e.eachSeries(this.indices,function(b,d){c.indexMap[b].insert(a,function(){d()})},function(){b(!0)})},QuadBackend.prototype.range=function(a,b){var c=this._indexForPattern(a),d=this.indexMap[c];null!=d&&d.range(a,function(a){b(a)})},QuadBackend.prototype.search=function(a,b){var c=this.indexMap.SPOG;null!=c&&c.search(a,function(a){b(null!=a)})},QuadBackend.prototype.delete=function(a,b){var c=this;e.eachSeries(this.indices,function(b,d){c.indexMap[b].delete(a,function(){d()})},function(){b(!0)})},QuadBackend.prototype.clear=function(a){var b=this;e.eachSeries(this.indices,function(a,c){new d({order:b.treeOrder,componentOrder:b.componentOrders[a]},function(d){b.indexMap[a]=d,c()})},function(){a(!0)})},b.exports.QuadBackend=QuadBackend},{"./quad_index":50,"./utils":57}],50:[function(a,b,c){var d=a("./btree").Tree,e=a("./utils"),f=a("./utils");NodeKey=function(a,b){this.subject=a.subject,this.predicate=a.predicate,this.object=a.object,this.graph=a.graph,this.order=b},NodeKey.prototype.comparator=function(a){for(var b=0;b<this.order.length;b++){var c=this.order[b];if(null==a[c])return 0;if(this[c]<a[c])return-1;if(this[c]>a[c])return 1}return 0},Pattern=function(a){this.subject=a.subject,this.predicate=a.predicate,this.object=a.object,this.graph=a.graph,this.indexKey=[],this.keyComponents={};var b=[],c=[],d=this;e.forEach(["subject","predicate","object","graph"],function(a){"string"==typeof d[a]?(c.push(a),d.keyComponents[a]=null):(b.push(a),d.keyComponents[a]=d[a],d.indexKey.push(a))}),this.order=b.concat(c),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(a,b){0!=arguments&&(this.componentOrder=a.componentOrder,d.call(this,a.order,function(a){a.comparator=function(b,c){for(var d=0;d<a.componentOrder.length;d++){var e=a.componentOrder[d],f=b[e],g=c[e];if(f<g)return-1;if(f>g)return 1}return 0},a.rangeComparator=function(b,c){for(var d=0;d<a.componentOrder.length;d++){var e=a.componentOrder[d];if(null==c[e]||null==b[e])return 0;if(b[e]<c[e])return-1;if(b[e]>c[e])return 1}return 0},b(a)}))},QuadIndex.prototype=e.create(d.prototype,{constructor:d}),QuadIndex.prototype.insert=function(a,b){d.prototype.insert.call(this,a,null,function(a){b(a)})},QuadIndex.prototype.search=function(a,b){d.prototype.search.call(this,a,function(a){b(a)},!0)},QuadIndex.prototype.range=function(a,b){this._rangeTraverse(this,this.root,a,b)},QuadIndex.prototype._rangeTraverse=function(a,b,c,d){var e=c.key,g=[],h=[b];f.whilst(function(){return h.length>0},function(b){for(var c=h.shift(),d=0;d<c.numberActives&&-1===a.rangeComparator(c.keys[d].key,e);)d++;if(!0===c.isLeaf){for(var i=d;i<c.numberActives&&0===a.rangeComparator(c.keys[i].key,e);)g.push(c.keys[i].key),i++;b()}else a._diskRead(c.children[d],function(i){h.push(i);var j=d;f.whilst(function(){return j<c.numberActives&&0===a.rangeComparator(c.keys[j].key,e)},function(b){g.push(c.keys[j].key),j++,a._diskRead(c.children[j],function(a){h.push(a),b()})},function(){b()})})},function(){d(g)})},b.exports={QuadIndex:QuadIndex,Pattern:Pattern,NodeKey:NodeKey}},{"./btree":40,"./utils":57}],51:[function(a,b,c){function o(a,b,c){this.name="BindExpressionError",this.bind=b,this.error=c,this.message=a}var d=a("./abstract_query_tree").AbstractQueryTree,e=a("./abstract_query_tree").NonSupportedSparqlFeatureError,f=a("./utils"),g=a("./quad_index"),h=a("./query_plan").QueryPlan,i=a("./query_filters").QueryFilters,j=a("./rdf_model"),k=a("./rdf_loader").RDFLoader,l=a("./graph_callbacks").CallbacksBackend,m=a("./utils"),n=a("./utils");o.prototype=new Error,o.constructor=o,QueryEngine=function(a){0!=arguments.length&&(this.backend=a.backend,this.lexicon=a.lexicon,this.eventsOnBatchLoad=a.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new d,this.rdfLoader=new k(a.communication),this.callbacksBackend=new l(this),this.customFns=a.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(a){this.customFns=a},QueryEngine.prototype.registerNsInEnvironment=function(a,b){var c=[];null!=a&&null!=a.prefixes&&(c=a.prefixes);var d={};for(var e in this.defaultPrefixes)d[e]=this.defaultPrefixes[e];for(var f=0;f<c.length;f++){var g=c[f];"prefix"===g.token&&(d[g.prefix]=g.local)}b.namespaces=d,null!=a&&a.base&&"object"==typeof a.base?b.base=a.base.value:b.base=null},QueryEngine.prototype.applyModifier=function(a,b){if("DISTINCT"==a){for(var c={},d=[],e=0;e<b.length;e++){var f=b[e],g="";for(var h in f){var i=f[h];null==i?g=g+h+"null":"literal"==i.token?(null!=i.value&&(g+=i.value),null!=i.lang&&(g+=i.lang),null!=i.type&&(g+=i.type)):g=i.value?g+h+i.value:g+h+i}null==c[g]&&(d.push(f),c[g]=!0)}return d}return b},QueryEngine.prototype.applyLimitOffset=function(a,b,c){return null==b&&null==a?c:(null==a&&(a=0),b=null==b?c.length:a+b,c.slice(a,b))},QueryEngine.prototype.applySingleOrderBy=function(a,b,c,d,e){var f=[],g=this;m.eachSeries(a,function(a,e){i.collect(a.expression,[b],c,d,g,function(a){f.push(a[0].value),e()})},function(){e({binding:b,value:f})})},QueryEngine.prototype.applyOrderBy=function(a,b,c,d,e){var f=this,g=[];null!=a&&a.length>0?m.eachSeries(b,function(b,e){f.applySingleOrderBy(a,b,c,d,function(a){g.push(a),e()})},function(){g.sort(function(b,c){return f.compareFilteredBindings(b,c,a,d)});for(var b=[],c=0;c<g.length;c++)b.push(g[c].binding);e(b)}):e(b)},QueryEngine.prototype.compareFilteredBindings=function(a,b,c,d){for(var e=!1,f=0;!e;){if(f==a.value.length)return 0;var h,g=c[f].direction;if(null!=a.value[f]||null!=b.value[f]){if(null==a.value[f])h={value:!1};else if(null==b.value[f])h={value:!0};else{if("blank"===a.value[f].token&&"blank"===b.value[f].token){f++;continue}if("blank"===a.value[f].token)h={value:!1};else if("blank"===b.value[f].token)h={value:!0};else if("uri"===a.value[f].token&&"uri"===b.value[f].token){if(1==i.runEqualityFunction(a.value[f],b.value[f],[],this,d).value){f++;continue}h=i.runTotalGtFunction(a.value[f],b.value[f],[])}else if("uri"===a.value[f].token)h={value:!1};else if("uri"===b.value[f].token)h={value:!0};else if("literal"===a.value[f].token&&"literal"===b.value[f].token&&null==a.value[f].type&&null==b.value[f].type){if(1==i.runEqualityFunction(a.value[f],b.value[f],[],this,d).value){f++;continue}h=i.runTotalGtFunction(a.value[f],b.value[f],[])}else if("literal"===a.value[f].token&&null==a.value[f].type)h={value:!1};else if("literal"===b.value[f].token&&null==b.value[f].type)h={value:!0};else{if(1==i.runEqualityFunction(a.value[f],b.value[f],[],this,d).value){f++;continue}h=i.runTotalGtFunction(a.value[f],b.value[f],[])}}return 1==h.value?"ASC"===g?1:-1:"ASC"===g?-1:1}f++}},QueryEngine.prototype.removeDefaultGraphBindings=function(a,b){for(var c=[],d={},e=0;e<b.named.length;e++)d[b.named[e].oid]=!0;for(e=0;e<b.implicit.length;e++)null==d[b.implicit[e].oid]&&c.push(b.implicit[e].oid);var f=[];for(e=0;e<a.length;e++){var g=a[e],h=!1;for(var i in g){for(var j=0;j<d.length;j++)if(g[i]===d[j]){h=!0;break}if(h)break}h||f.push(g)}return f},QueryEngine.prototype.aggregateBindings=function(a,b,c,d,e){this.copyDenormalizedBindings(b,d.outCache,function(b){for(var f={},g=0;g<a.length;g++){var h=i.runAggregator(a[g],b,this,c,d);a[g].alias?f[a[g].alias.value]=h:f[a[g].value.value]=h}e(f)})},QueryEngine.prototype.projectBindings=function(a,b,c){if("*"===a[0].kind)return b;for(var d=[],e=0;e<b.length;e++){for(var f=b[e],g={},h=!0,j=0;j<a.length;j++)if("variable"==a[j].token&&"aliased"!=a[j].kind)g[a[j].value.value]=f[a[j].value.value];else if("variable"==a[j].token&&"aliased"==a[j].kind){var k=i.runFilter(a[j].expression,f,this,c,{blanks:{},outCache:{}});if(i.isEbvError(k)){h=!1;break}g[a[j].alias.value]=k}!0===h&&d.push(g)}return d},QueryEngine.prototype.resolveNsInEnvironment=function(a,b){return b.namespaces[a]},QueryEngine.prototype.normalizeTerm=function(a,b,c,d){if("uri"===a.token){var e=f.lexicalFormBaseUri(a,b);null==e?d(null):c?this.lexicon.registerUri(e,d):this.lexicon.resolveUri(e,d)}else if("literal"===a.token){var g=f.lexicalFormLiteral(a,b);c?this.lexicon.registerLiteral(g,d):this.lexicon.resolveLiteral(g,d)}else if("blank"===a.token){var h=a.value,i=b.blanks[h];null!=i?d(i):c?this.lexicon.registerBlank(function(a){b.blanks[h]=a,d(a)}):this.lexicon.resolveBlank(function(a){b.blanks[h]=a,d(a)})}else d("var"===a.token?a.value:null)},QueryEngine.prototype.normalizeDatasets=function(a,b,c){var d=this;m.eachSeries(a,function(a,c){a.value===d.lexicon.defaultGraphUri?(a.oid=d.lexicon.defaultGraphOid,c()):d.normalizeTerm(a,b,!1,function(b){null!=b&&(a.oid=b),c()})},function(){c(!0)})},QueryEngine.prototype.normalizeQuad=function(a,b,c,d){var e=null,g=null,h=null,i=null,j=this,k=!1;m.seq(function(d){if(null==a.graph||a.graph.value===j.lexicon.defaultGraphUri)i=0,d();else{var e=f.lexicalFormBaseUri(a.graph,b);j.normalizeTerm(a.graph,b,c,function(b){null!=b?(i=b,!0===c&&"var"!=a.graph.token?j.lexicon.registerGraph(b,e,function(){d()}):d()):(k=!0,d())})}},function(d){!1===k?j.normalizeTerm(a.subject,b,c,function(a){null!=a?(e=a,d()):(k=!0,d())}):d()},function(d){!1===k?j.normalizeTerm(a.predicate,b,c,function(a){null!=a?(g=a,d()):(k=!0,d())}):d()},function(d){!1===k?j.normalizeTerm(a.object,b,c,function(a){null!=a?(h=a,d()):(k=!0,d())}):d()})(function(){d(!0===k?null:{subject:e,predicate:g,object:h,graph:i})})},QueryEngine.prototype.denormalizeBindingsList=function(a,b,c){var d=this,e=[];m.eachSeries(a,function(a,c){d.denormalizeBindings(a,b,function(a){e.push(a),c()})},function(){c(e)})},QueryEngine.prototype.copyDenormalizedBindings=function(a,b,c){var d=this,e=[];m.eachSeries(a,function(a,c){var f={},g=n.keys(a);m.eachSeries(g,function(c,e){var g=a[c];if(null==g)f[c]=null,e();else if("object"==typeof g)f[c]=g,e();else{var h=b[g];null!=h?(f[c]=h,e()):d.lexicon.retrieve(g,function(a){b[g]=a,f[c]=a,e()})}},function(){e.push(f),c()})},function(){c(e)})},QueryEngine.prototype.denormalizeBindings=function(a,b,c){var d=n.keys(a),e=b.outCache,f=this;m.eachSeries(d,function(c,d){var g=a[c];null==g?(a[c]=null,d()):"object"==typeof g?d():null!=e[g]?(a[c]=e[g],d()):f.lexicon.retrieve(g,function(e){a[c]=e,"blank"===e.token&&(b.blanks[e.value]=g),d()})},function(){c(a)})},QueryEngine.prototype.execute=function(a,b,c,d){a=f.normalizeUnicodeLiterals(a);var e=this.abstractQueryTree.parseQueryString(a);if(null==e)b(!1,"Error parsing query string");else if("query"===e.token&&"update"==e.kind){this.callbacksBackend.startGraphModification();var g=this;this.executeUpdate(e,function(a,c){g.lexicon.updateAfterWrite&&g.lexicon.updateAfterWrite(),a?(g.callbacksBackend.cancelGraphModification(),b(a,c)):g.callbacksBackend.endGraphModification(function(){b(a,c)})})}else"query"===e.token&&"query"==e.kind&&this.executeQuery(e,b,c,d)},QueryEngine.prototype.executeQuery=function(a,b,c,d){var e=a.prologue,f=a.units,g=this,h={blanks:{},outCache:{}};this.registerNsInEnvironment(e,h);var i=g.abstractQueryTree.parseExecutableUnit(f[0]);"select"===i.kind?this.executeSelect(i,h,c,d,function(a,c){null==a?"object"==typeof c&&!0===c.denorm?b(null,c.bindings):g.denormalizeBindingsList(c,h,function(a){b(null,a)}):b(a)}):"ask"===i.kind?(i.projection=[{token:"variable",kind:"*"}],this.executeSelect(i,h,c,d,function(a,c){null==a?c.length>0?b(null,!0):b(null,!1):b(a)})):"construct"===i.kind&&(i.projection=[{token:"variable",kind:"*"}],g=this,this.executeSelect(i,h,c,d,function(a,c){null==a?g.denormalizeBindingsList(c,h,function(a){if(null!=a){var c=new j.Graph;null==i.template&&(i.template={triplesContext:i.pattern});for(var d=1,e=[],f=0;f<a.length;f++){for(var k=a[f],l=0;l<e.length;l++)delete e[l].valuetmp;for(var l=0;l<i.template.triplesContext.length;l++){for(var m=["subject","predicate","object"],n=i.template.triplesContext[l],o=0;o<m.length;o++){var p=m[o];if("blank"===n[p].token)if(n[p].valuetmp&&null!=n[p].valuetmp);else{var q="_:b"+d;d++,n[p].valuetmp=q,e.push(n[p])}}var r=j.buildRDFResource(n.subject,k,g,h),o=j.buildRDFResource(n.predicate,k,g,h),s=j.buildRDFResource(n.object,k,g,h);if(null!=r&&null!=o&&null!=s){var t=new j.Triple(r,o,s);c.add(t)}}}b(null,c)}else b(new Error("Error denormalizing bindings."))}):b(a)}))},QueryEngine.prototype.executeSelect=function(a,b,c,d,e){if("select"===a.kind||"ask"===a.kind||"construct"===a.kind||"modify"===a.kind){var f=a.projection,g=a.dataset,h=a.modifier,i=a.limit,j=a.offset,k=a.order,l=this;null==c&&null==d||(g.implicit=c||[],g.named=d||[]),null!=g.implicit&&0===g.implicit.length&&null!=g.named&&0===g.named.length&&g.implicit.push(this.lexicon.defaultGraphUriTerm),l.normalizeDatasets(g.implicit.concat(g.named),b,function(){try{l.executeSelectUnit(f,g,a.pattern,b,function(c){if(null!=c){if(null!=a.group&&""===a.group){for(var d=!1,n=0;n<a.projection.length;n++)if(null!=a.projection[n].expression&&"aggregate"===a.projection[n].expression.expressionType){d=!0;break}!0===d&&(a.group="singleGroup")}a.group&&""!=a.group?l.checkGroupSemantics(a.group,f)?l.groupSolution(c,a.group,g,b,function(a){var c=[];m.eachSeries(a,function(a,d){l.aggregateBindings(f,a,g,b,function(a){c.push(a),d()})},function(){e(null,{bindings:c,denorm:!0})})}):e(new Error("Incompatible Group and Projection variables")):l.applyOrderBy(k,c,g,b,function(a){var b=l.projectBindings(f,a,g),c=l.applyModifier(h,b),d=l.applyLimitOffset(j,i,c),k=l.removeDefaultGraphBindings(d,g);e(null,k)})}else e(new Error("Error executing SELECT query."))})}catch(a){e(a)}})}else e(new Error("Cannot execute "+a.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(a,b,c,d,e){var f=[],g=[],h=!1,j=this;"singleGroup"===b?e([a]):m.eachSeries(a,function(a,e){var k=!0;m.eachSeries(b,function(b,e){var g=null;if("var"===b.token)g=b.value,0==h&&f.push(g),e();else if("aliased_expression"===b.token){if(g=b.alias.value,0==h&&f.push(g),"var"===b.expression.primaryexpression)a[b.alias.value]=a[b.expression.value.value];else{var l=j.copyDenormalizedBindings([a],d.outCache),m=i.runFilter(b.expression,l[0],j,c,d);i.isEbvError(m)?k=!1:(null!=m.value&&(m.value=""+m.value),a[b.alias.value]=m)}e()}else j.copyDenormalizedBindings([a],d.outCache,function(c){var l=i.runFilter(b,c[0],j,d);i.isEbvError(l)?k=!1:(a["groupCondition"+env._i]=l,g="groupCondition"+env._i,0==h&&f.push(g)),e()})},function(){0==h&&(h=!0),!0===k&&g.push(a),e()})},function(){for(var a={},b={},c=0,d=0;d<g.length;d++){for(var h=g[d],i="",j=0;j<f.length;j++){var k=h[f[j]];i+="object"==typeof k?k.value:k}null==a[i]?(b[i]=c,a[i]=[h]):a[i].push(h)}var l=[];for(var m in a)l.push(a[m]);e(l)})},QueryEngine.prototype.executeSelectUnit=function(a,b,c,d,f){if("BGP"===c.kind)this.executeAndBGP(a,b,c,d,f);else if("UNION"===c.kind)this.executeUNION(a,b,c.value,d,f);else if("JOIN"===c.kind)this.executeJOIN(a,b,c,d,f);else if("LEFT_JOIN"===c.kind)this.executeLEFT_JOIN(a,b,c,d,f);else if("FILTER"===c.kind){var g=this;this.executeSelectUnit(a,b,c.value,d,function(a){null!=a?i.checkFilters(c,a,!1,b,d,g,f):f([])})}else{if("EMPTY_PATTERN"!==c.kind)throw new e(c.kind);f([])}},QueryEngine.prototype.executeUNION=function(a,b,c,d,e){var k,l,f=c[0],g=c[1],j=null;if(2!=c.length)throw"SPARQL algebra UNION with more than two components";var n=this;m.seq(function(c){try{n.executeSelectUnit(a,b,f,d,function(a){k=a,c()})}catch(a){j=a,c()}},function(c){if(null==j)try{n.executeSelectUnit(a,b,g,d,function(a){l=a,c()})}catch(a){j=a,c()}else c()})(function(){if(null!=j)e(j);else{var a=h.unionBindings(k,l);n.runBinds(c.binds,a,b,d,function(a,f){if(null!=a)throw new o("Error processing bind expressions",c.binds,a);i.checkFilters(c,f,!1,b,d,n,e)})}})},QueryEngine.prototype.executeAndBGP=function(a,b,c,d,e){var f=this;h.executeAndBGPsDPSize(c.value,b,this,d,function(a){null!=a?f.runBinds(c.binds,a,b,d,function(a,g){if(null!=a)throw new o("Error processing bind expressions",c.binds,a);i.checkFilters(c,g,!1,b,d,f,e)}):e(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(a,b,c,d,e){var f=c.lvalue,g=c.rvalue;if("EMPTY_PATTERN"===f.kind)this.executeSelectUnit(a,b,g,d,e);else{var p,q,j=null,k=null,l=null,n=this;m.seq(function(c){try{n.executeSelectUnit(a,b,f,d,function(a){j=a,c()})}catch(a){l=a,c()}},function(c){if(null!=l)c();else try{n.executeSelectUnit(a,b,g,d,function(a){k=a,c()})}catch(a){l=a,c()}})(function(){if(null!=l)e(l);else{var a=h.leftOuterJoinBindings(j,k);n.runBinds(c.binds,a,b,d,function(f,g){if(null!=f)throw new o("Error processing bind expressions",c.binds,f);i.checkFilters(c,a,!0,b,d,n,function(a){if(j.length>1&&k.length>1){var b=[],c={};for(var d in j[0])c[d]=!0;for(d in k[0])1!=c[d]&&b.push(d);p=[],q={};for(var f=0;f<a.length;f++)if(!0===a[f].__nullify__){for(var g=0;g<b.length;g++)a[f].bindings[b[g]]=null;var h=[],i=[];for(var d in a[f].bindings)null!=a[f].bindings[d]&&(h.push(d+a[f].bindings[d]),h.sort(),i.push(h.join("")));if(null==q[h.join("")]){for(g=0;g<i.length;g++)q[i[g]]=!0;p.push(a[f].bindings)}}else{p.push(a[f]);var h=[],i=[];for(var d in a[f])h.push(d+a[f][d]),h.sort(),q[h.join("")]=!0}e(p)}else e(a)})})}})}},QueryEngine.prototype.executeJOIN=function(a,b,c,d,e){var f=c.lvalue,g=c.rvalue,j=null,k=null,l=null,n=this;m.seq(function(c){try{n.executeSelectUnit(a,b,f,d,function(a){j=a,c()})}catch(a){l=a,c()}},function(c){if(null!=l)c();else try{n.executeSelectUnit(a,b,g,d,function(a){k=a,c()})}catch(a){l=a,c()}})(function(){var a=null;if(null!=l)e(l);else if(0===j.length||0===k.length)e([]);else{var m={},p=[];for(var q in j[0])m[q]=!1;for(var q in k[0])!1===m[q]&&p.push(q);a=0==p.length?h.joinBindings(j,k):n.abstractQueryTree.treeWithUnion(f)||n.abstractQueryTree.treeWithUnion(g)?h.joinBindings(j,k):h.joinBindings2(p,j,k),n.runBinds(c.binds,a,b,d,function(a,f){if(null!=a)throw new o("Error processing bind expressions",c.binds,a);i.checkFilters(c,f,!1,b,d,n,e)})}})},QueryEngine.prototype.rangeQuery=function(a,b,c){var d=this;d.normalizeQuad(a,b,!1,function(a){null!=a?d.backend.range(new g.Pattern(a),function(a){c(null==a||0==a.length?[]:a)}):c(null)})},QueryEngine.prototype.executeUpdate=function(a,b){var c=a.prologue,d=a.units,e=this,g={blanks:{},outCache:{}};this.registerNsInEnvironment(c,g);for(var h=0;h<d.length;h++){var i=e.abstractQueryTree.parseExecutableUnit(d[h]);if("insertdata"===i.kind){var j=null;m.eachSeries(i.quads,function(a,b){null===j?e._executeQuadInsert(a,g,function(a){null!=a&&(j=a),b()}):b()},function(){null===j?b(null,!0):b(j)})}else if("deletedata"===i.kind){var j=null;m.eachSeries(i.quads,function(a,b){null===j?e._executeQuadDelete(a,g,function(a){null!=a&&(j=a),b()}):b()},function(){null===j?b(null,!0):b(j)})}else if("modify"===i.kind)this._executeModifyQuery(i,g,b);else if("create"===i.kind)b(!0);else if("load"===i.kind){var k={uri:f.lexicalFormBaseUri(i.sourceGraph,g)};null!=i.destinyGraph&&(k={uri:f.lexicalFormBaseUri(i.destinyGraph,g)});var e=this;this.rdfLoader.load(i.sourceGraph.value,k,function(a,c){a?b(new Error("error batch loading quads")):e.batchLoad(c,function(a){null!==a?b(null,a):b(new Error("Error batch loading quads"))})})}else if("drop"===i.kind)this._executeClearGraph(i.destinyGraph,g,b);else{if("clear"!==i.kind)throw new Error("not supported execution unit");this._executeClearGraph(i.destinyGraph,g,b)}}},QueryEngine.prototype.batchLoad=function(a,b){var c=0,d={},e=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();var f=function(a,b,c,f){var g,a;if(a[b].uri||"uri"===a[b].token){var i=a[b].uri||a[b].value;e.lexicon.registerUri(i,function(d){var g=function(){null!=a[b].uri&&(a[b]={token:"uri",value:a[b].uri},delete a[b].uri),c[b]=d,f()};"graph"===b?e.lexicon.registerGraph(d,i,function(){g()}):g()})}else a[b].literal||"literal"===a[b].token?e.lexicon.registerLiteral(a[b].literal||a[b].value,function(d){null!=a[b].literal&&(a[b]=e.lexicon.parseLiteral(a[b].literal),delete a[b].literal),c[b]=d,f()}):(g=d[a[b].blank||a[b].value],null==g?e.lexicon.registerBlank(function(e){d[a[b].blank||a[b].value]=e,null==a[b].token&&(a[b].token="blank",a[b].value=a[b].blank,delete a[b].blank),c[b]=e,f()}):(null==a[b].token&&(a[b].token="blank",a[b].value=a[b].blank,delete a[b].blank),c[b]=g,f()))};m.eachSeries(a,function(a,b){var d={};m.eachSeries(["subject","predicate","object","graph"],function(b,c){f(a,b,d,c)},function(){var f=a;a=d;var h=new g.NodeKey(a);e.backend.search(h,function(d){d?b():e.backend.index(h,function(d){d&&(e.eventsOnBatchLoad&&e.callbacksBackend.nextGraphModification(l.added,[f,a]),c+=1),b()})})})},function(){null!=e.lexicon.updateAfterWrite&&e.lexicon.updateAfterWrite();var a=function(){b(c)};e.eventsOnBatchLoad?e.callbacksBackend.endGraphModification(a()):a()})},QueryEngine.prototype._executeModifyQuery=function(a,b,c){var d=this,e=!0,f=new Error("Error executing modify query"),g=null,h=["subject","predicate","object","graph"];a.insert=null==a.insert?[]:a.insert,a.delete=null==a.delete?[]:a.delete,m.seq(function(c){var h=[],i=[];if(null!=a.with&&h.push(a.with),null!=a.using){i=[];for(var j=0;j<a.using.length;j++){var k=a.using[j];"named"===k.kind?i.push(k.uri):h.push(k.uri)}}a.dataset={},a.projection=[{token:"variable",kind:"*"}],d.executeSelect(a,b,h,i,function(a,h){if(a)return f=a,e=!1,c();d.denormalizeBindingsList(h,b,function(a){null!=a?g=a:(f=new Error("Error denormalizing bindings list"),e=!1),c()})})},function(c){var f=a.with;if(e){for(var i=[],j=0;j<a.delete.length;j++)for(var k=a.delete[j],l=0;l<g.length;l++){for(var n={},o=g[l],p=0;p<h.length;p++){var q=h[p];"graph"==q&&null==k[q]?n.graph=f:"var"===k[q].token?n[q]=o[k[q].value]:n[q]=k[q]}i.push(n)}m.eachSeries(i,function(a,c){d._executeQuadDelete(a,b,function(){c()})},function(){c()})}else c()},function(c){var f=a.with;if(e){for(var i=[],j=0;j<a.insert.length;j++)for(var k=a.insert[j],l=0;l<g.length;l++){for(var n={},o=g[l],p=0;p<h.length;p++){var q=h[p];"graph"==q&&null==k[q]?n.graph=f:"var"===k[q].token?n[q]=o[k[q].value]:n[q]=k[q]}i.push(n)}m.eachSeries(i,function(a,c){d._executeQuadInsert(a,b,function(){c()})},function(){c()})}else c()})(function(){c(e?null:f)})},QueryEngine.prototype._executeQuadInsert=function(a,b,c){var e,d=this,f=!1,h=null;m.seq(function(c){d.normalizeQuad(a,b,!0,function(a){null!=a?e=a:(f=!0,h="Error normalizing quad."),c()})},function(b){if(!1===f){var c=new g.NodeKey(e);d.backend.search(c,function(f){!0===f?b():d.backend.index(c,function(){d.callbacksBackend.nextGraphModification(l.added,[a,e]),b()})})}else b()})(function(){f?c(new Error(h)):c(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(a,b,c){var e,h,i,d=this,f=!1;m.seq(function(c){d.normalizeQuad(a,b,!0,function(a){null!=a?e=a:(f=!0,h="Error normalizing quad."),c()})},function(a){!1===f?(i=new g.NodeKey(e),d.backend.delete(i,function(){a()})):a()},function(b){!1===f?d.lexicon.unregister(a,i,function(){d.callbacksBackend.nextGraphModification(l.deleted,[a,e]),b()}):b()})(function(){f?c(new Error(h)):c(null,!0)})},QueryEngine.prototype._executeClearGraph=function(a,b,c){var d=this;if("default"===a)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",c);else if("named"===a)d.lexicon.registeredGraphs(!0,function(a){if(null!=a){var b=!1;m.eachSeries(a,function(a,c){b?c():d.execute("DELETE { GRAPH <"+a+"> { ?s ?p ?o } } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",function(e,f){e?(b=e,c()):d.lexicon.resolveUri(a,function(e){-1!=e?d.lexicon.knownGraphs.delete(e,function(){c()}):(b="Cannot find graph "+a+" to clear it",c())})})},function(){c(!b)})}else c(!1,"Error deleting named graphs")});else if("all"===a){var d=this;this.execute("CLEAR DEFAULT",function(a,b){a?c(!1,b):d.execute("CLEAR NAMED",c)})}else if("uri"==a.token){var e=f.lexicalFormBaseUri(a,b);null!=e?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+e+"> { ?s ?p ?o } } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",function(a){d.callbacksBackend.ongoingModification=!1,c(a)})):c(!1,"wrong graph URI")}else c(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(a,b){if("singleGroup"===a)return!0;for(var c={},d=0;d<a.length;d++){var e=a[d];"var"===e.token?c[e.value]=!0:"aliased_expression"===e.token&&(c[e.alias.value]=!0)}for(d=0;d<b.length;d++){var f=b[d];if("var"===f.kind){if(null==c[f.value.value])return!1}else if("aliased"===f.kind&&f.expression&&"var"===f.expression.primaryexpression&&null==c[f.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(a,b,c,d,e){var f=this,g=b;null!=a&&a.length>0?f.copyDenormalizedBindings(b,d.outCache,function(h){for(var j=0;j<b.length;j++)for(var k=0;k<a.length;k++){var l=a[k],m=h[j],n=i.runFilter(l.expression,m,f,c,d);i.isEbvError(n)?e(n):g[j][l.as.value]=n}e(null,b)}):e(null,b)},QueryEngine.prototype.computeCosts=function(a,b,c){for(var d=0;d<a.length;d++)a[d]._cost=this.quadCost(a[d],b);c(a)},QueryEngine.prototype.quadCost=function(a,b){return 1},QueryEngine.prototype.registerDefaultNamespace=function(a,b){this.defaultPrefixes[a]=b},b.exports={QueryEngine:QueryEngine}},{"./abstract_query_tree":39,"./graph_callbacks":42,"./quad_index":50,"./query_filters":52,"./query_plan":53,"./rdf_loader":54,"./rdf_model":55,"./utils":57}],52:[function(a,b,c){var d=a("./utils"),e=d,f=a("./utils");QueryFilters={};var g="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(a,b,c,d,e,g,h){var i=[];a.filter&&"function"!=typeof a.filter&&(i=a.filter);var j=[];if(null==i||0===i.length||null!=a.length)return h(b);QueryFilters.preprocessExistentialFilters(i,b,g,d,e,function(a){f.eachSeries(a,function(a,f){QueryFilters.run(a.value,b,c,d,e,g,function(a){for(var c=[],d=0;d<a.length;d++){var e=a[d];null!=e.__nullify__?j.push(e):c.push(e)}b=c,f()})},function(){h(b.concat(j))})})},QueryFilters.preprocessExistentialFilters=function(a,b,c,d,g,h){var i=[];f.eachSeries(a,function(a,h){if("builtincall"!==a.value.expressionType||"exists"!==a.value.builtincall&&"notexists"!==a.value.builtincall)if("conditionalor"===a.value.expressionType||"conditionaland"===a.value.expressionType){var m=e.map(a.value.operands,function(a){return{value:a}});QueryFilters.preprocessExistentialFilters(m,b,c,d,g,function(b){a.value.operands=b.map(function(a){return a.value}),i.push(a),h()})}else if("multiplicativeexpression"===a.value.expressionType){var m=e.map(a.value.factors,function(a){return{value:a}});QueryFilters.preprocessExistentialFilters(m,b,c,d,g,function(b){a.value.factors=b.map(function(a){return a.value}),i.push(a),h()})}else if("additiveexpression"===a.value.expressionType){var m=e.map(a.value.summands,function(a){return{value:a}});QueryFilters.preprocessExistentialFilters(m,b,c,d,g,function(b){a.value.summands=b.map(function(a){return a.value}),i.push(a),h()})}else if("relationalexpression"===a.value.expressionType){var m=[{value:a.value.op1},{value:a.value.op2}];QueryFilters.preprocessExistentialFilters(m,b,c,d,g,function(b){a.value.op1=b[0].value,a.value.op2=b[1].value,i.push(a),h()})}else if("irireforfunction"===a.value.expressionType||"custom"===a.value.expressionType)if(null!=a.value.args){var m=e.map(a.value.args,function(a){return{value:a}});QueryFilters.preprocessExistentialFilters(m,b,c,d,g,function(b){a.value.args=b.map(function(a){return a.value}),i.push(a),h()})}else i.push(a),h();else i.push(a),h();else{var j=a.value.builtincall,k=a.value.args,l={};c.copyDenormalizedBindings(b,g.outCache,function(b){f.eachSeries(b,function(a,b){var f=e.clone(k[0],!0),h=c.abstractQueryTree.parseSelect({pattern:f},a);h=c.abstractQueryTree.bind(h.pattern,a),c.executeSelectUnit([{kind:"*"}],d,h,g,function(c){var d=null;d="exists"===j?QueryFilters.ebvBoolean(0!==c.length):QueryFilters.ebvBoolean(0===c.length);var e=[];for(var f in a)e.push(JSON.stringify(a[f]));e=e.sort().join(""),l[e]=d,b()})},function(){a.value.origArgs=a.value.args,a.value.args=l,i.push(a),h()})})}},function(){h(i)})},QueryFilters.boundVars=function(a){if(null==a.expressionType)throw"Cannot find bound expressions in a no expression token";var b=a.expressionType;if("relationalexpression"==b){var c=a.op1,d=a.op2;return QueryFilters.boundVars(c)+QueryFilters.boundVars(d)}if("conditionalor"==b||"conditionaland"==b){for(var e=[],f=0;f<a.operands;f++)e=e.concat(QueryFilters.boundVars(a.operands[f]));return e}if("builtincall"==b){if(null==a.args)return[];for(var g=[],f=0;f<a.args.length;f++)g=g.concat(QueryFilters.boundVars(a.args[f]));return g}if("multiplicativeexpression"==b){for(var g=QueryFilters.boundVars(a.factor),f=0;f<a.factors.length;f++)g=g.concat(QueryFilters.boundVars(a.factors[f].expression));return g}if("additiveexpression"==b){for(var g=QueryFilters.boundVars(a.summand),f=0;f<a.summands.length;f++)g=g.concat(QueryFilters.boundVars(a.summands[f].expression));return g}if("regex"==b){var g=QueryFilters.boundVars(a.expression1);return g.concat(QueryFilters.boundVars(a.expression2))}return"unaryexpression"==b?QueryFilters.boundVars(a.expression):"atomic"==b?"var"==a.primaryexpression?[a.value]:[]:void 0},QueryFilters.run=function(a,b,c,d,e,f,g){f.copyDenormalizedBindings(b,e.outCache,function(h){for(var i=[],j=0;j<b.length;j++){var k=h[j],l=QueryFilters.runFilter(a,k,f,d,e),l=QueryFilters.ebv(l);if(QueryFilters.isEbvError(l)){if(c){var m={__nullify__:!0,bindings:b[j]};i.push(m)}}else if(!0===l)i.push(b[j]);else if(c){var m={__nullify__:!0,bindings:b[j]};i.push(m)}}g(i)})},QueryFilters.collect=function(a,b,c,d,e,f){e.copyDenormalizedBindings(b,d.outCache,function(g){for(var h=[],i=0;i<g.length;i++){var j=g[i],k=QueryFilters.runFilter(a,j,e,c,d);h.push({binding:b[i],value:k})}return f(h)})},QueryFilters.runDistinct=function(a,b){},QueryFilters.runAggregator=function(a,b,c,e,f){if(null==b||0===b.length)return QueryFilters.ebvError();if("variable"===a.token&&"var"==a.kind)return b[0][a.value.value];if("variable"===a.token&&"aliased"===a.kind){if("atomic"===a.expression.expressionType&&"var"===a.expression.primaryexpression)return b[0][a.expression.value.value];if("aggregate"===a.expression.expressionType){if("max"===a.expression.aggregateType){for(var h=null,i=0;i<b.length;i++){var j=b[i],k=QueryFilters.runFilter(a.expression.expression,j,c,e,f);QueryFilters.isEbvError(k)||(null===h?h=k:!0===QueryFilters.runLtFunction(h,k).value&&(h=k))}return null===h?QueryFilters.ebvError():h}if("min"===a.expression.aggregateType){for(var l=null,i=0;i<b.length;i++){var j=b[i],k=QueryFilters.runFilter(a.expression.expression,j,c,e,f);QueryFilters.isEbvError(k)||(null===l?l=k:!0===QueryFilters.runGtFunction(l,k).value&&(l=k))}return null===l?QueryFilters.ebvError():l}if("count"===a.expression.aggregateType){var m={},n=0;if("*"===a.expression.expression)if(null!=a.expression.distinct&&""!=a.expression.distinct)for(var i=0;i<b.length;i++){var j=b[i],o=d.hashTerm(j);null==m[o]&&(m[o]=!0,n++)}else n=b.length;else for(var i=0;i<b.length;i++){var j=b[i],k=QueryFilters.runFilter(a.expression.expression,j,c,e,f);if(!QueryFilters.isEbvError(k))if(null!=a.expression.distinct&&""!=a.expression.distinct){var o=d.hashTerm(k);null==m[o]&&(m[o]=!0,n++)}else n++}return{token:"literal",type:g+"integer",value:""+n}}if("avg"===a.expression.aggregateType){for(var m={},p={token:"literal",type:g+"integer",value:"0"},n=0,i=0;i<b.length;i++){var j=b[i],k=QueryFilters.runFilter(a.expression.expression,j,c,e,f);if(!QueryFilters.isEbvError(k))if(null!=a.expression.distinct&&""!=a.expression.distinct){var o=d.hashTerm(k);null==m[o]&&(m[o]=!0,QueryFilters.isNumeric(k)&&(p=QueryFilters.runSumFunction(p,k),n++))}else QueryFilters.isNumeric(k)&&(p=QueryFilters.runSumFunction(p,k),n++)}var q=QueryFilters.runDivFunction(p,{token:"literal",type:g+"integer",value:""+n});return q.value=""+q.value,q}if("sum"===a.expression.aggregateType){for(var m={},p={token:"literal",type:g+"integer",value:"0"},i=0;i<b.length;i++){var j=b[i],k=QueryFilters.runFilter(a.expression.expression,j,c,e,f);if(!QueryFilters.isEbvError(k))if(null!=a.expression.distinct&&""!=a.expression.distinct){var o=d.hashTerm(k);null==m[o]&&(m[o]=!0,QueryFilters.isNumeric(k)&&(p=QueryFilters.runSumFunction(p,k)))}else QueryFilters.isNumeric(k)&&(p=QueryFilters.runSumFunction(p,k))}return p.value=""+p.value,p}var k=QueryFilters.runFilter(aggregate.expression,b[0],e,{blanks:{},outCache:{}});return k}}},QueryFilters.runFilter=function(a,b,c,e,f){if(null!=a.expressionType){var g=a.expressionType;if("relationalexpression"==g){var h=QueryFilters.runFilter(a.op1,b,c,e,f),i=QueryFilters.runFilter(a.op2,b,c,e,f);return QueryFilters.runRelationalFilter(a,h,i,b,c,e,f)}if("conditionalor"==g)return QueryFilters.runOrFunction(a,b,c,e,f);if("conditionaland"==g)return QueryFilters.runAndFunction(a,b,c,e,f);if("additiveexpression"==g)return QueryFilters.runAddition(a.summand,a.summands,b,c,e,f);if("builtincall"==g)return QueryFilters.runBuiltInCall(a.builtincall,a.args,b,c,e,f);if("multiplicativeexpression"==g)return QueryFilters.runMultiplication(a.factor,a.factors,b,c,e,f);if("unaryexpression"==g)return QueryFilters.runUnaryExpression(a.unaryexpression,a.expression,b,c,e,f);if("irireforfunction"==g)return QueryFilters.runIriRefOrFunction(a.iriref,a.args,b,c,e,f);if("regex"==g)return QueryFilters.runRegex(a.text,a.pattern,a.flags,b,c,e,f);if("custom"==g)return QueryFilters.runBuiltInCall(a.name,a.args,b,c,e,f);if("atomic"==g)return"var"==a.primaryexpression?b[a.value.value]:"object"!=typeof a.value?a.value:null==a.value.type||"object"!=typeof a.value.type?a.value:(a.value.type=d.lexicalFormBaseUri(a.value.type,f),a.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(a){return null!=a&&!!(a.token&&"literal"==a.token||a.token&&"uri"==a.token||a.token&&"blank"==a.token)},QueryFilters.RDFTermEquality=function(a,b,c,e){return"literal"===a.token&&"literal"===b.token?a.lang==b.lang&&a.type==b.type&&a.value==b.value||(null!=a.type&&null!=b.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(a)&&null!=b.type?QueryFilters.ebvError():!(!QueryFilters.isSimpleLiteral(b)||null==a.type)&&QueryFilters.ebvError()):"uri"===a.token&&"uri"===b.token?d.lexicalFormBaseUri(a,e)==d.lexicalFormBaseUri(b,e):"blank"===a.token&&"blank"===b.token&&a.value==b.value},QueryFilters.isInteger=function(a){return null!=a&&("literal"===a.token&&(a.type==g+"integer"||a.type==g+"decimal"||a.type==g+"double"||a.type==g+"nonPositiveInteger"||a.type==g+"negativeInteger"||a.type==g+"long"||a.type==g+"int"||a.type==g+"short"||a.type==g+"byte"||a.type==g+"nonNegativeInteger"||a.type==g+"unsignedLong"||a.type==g+"unsignedInt"||a.type==g+"unsignedShort"||a.type==g+"unsignedByte"||a.type==g+"positiveInteger"))},QueryFilters.isFloat=function(a){return null!=a&&("literal"===a.token&&a.type==g+"float")},QueryFilters.isDecimal=function(a){return null!=a&&("literal"===a.token&&a.type==g+"decimal")},QueryFilters.isDouble=function(a){return null!=a&&("literal"===a.token&&a.type==g+"double")},QueryFilters.isNumeric=function(a){return null!=a&&("literal"===a.token&&(a.type==g+"integer"||a.type==g+"decimal"||a.type==g+"float"||a.type==g+"double"||a.type==g+"nonPositiveInteger"||a.type==g+"negativeInteger"||a.type==g+"long"||a.type==g+"int"||a.type==g+"short"||a.type==g+"byte"||a.type==g+"nonNegativeInteger"||a.type==g+"unsignedLong"||a.type==g+"unsignedInt"||a.type==g+"unsignedShort"||a.type==g+"unsignedByte"||a.type==g+"positiveInteger"))},QueryFilters.isSimpleLiteral=function(a){return!(!a||"literal"!=a.token)&&(null==a.type&&null==a.lang)},QueryFilters.isXsdType=function(a,b){return!(!b||"literal"!=b.token)&&b.type==g+""+a},QueryFilters.ebv=function(a){if(null==a||QueryFilters.isEbvError(a))return QueryFilters.ebvError();if(a.token&&"literal"===a.token){if(a.type==g+"integer"||a.type==g+"decimal"||a.type==g+"double"||a.type==g+"nonPositiveInteger"||a.type==g+"negativeInteger"||a.type==g+"long"||a.type==g+"int"||a.type==g+"short"||a.type==g+"byte"||a.type==g+"nonNegativeInteger"||a.type==g+"unsignedLong"||a.type==g+"unsignedInt"||a.type==g+"unsignedShort"||a.type==g+"unsignedByte"||a.type==g+"positiveInteger"){var b=parseFloat(a.value);return!isNaN(b)&&0!=parseFloat(a.value)}return a.type===g+"boolean"?"true"===a.value||!0===a.value||"True"===a.value:a.type===g+"string"?""!=a.value:a.type===g+"dateTime"?null!=new Date(a.value):QueryFilters.isEbvError(a)?a:null==a.type?""!=a.value:QueryFilters.ebvError()}return!0===a.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:g+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:g+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(a){return"object"==typeof a&&null!=a&&"https://github.com/antoniogarrote/js-tools/types#error"===a.type},QueryFilters.ebvBoolean=function(a){return QueryFilters.isEbvError(a)?a:!0===a?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(a,b,c,d,e,f,g){var h=a.operator;if("="===h)return QueryFilters.runEqualityFunction(b,c,d,e,f,g);if("!="===h){var i=QueryFilters.runEqualityFunction(b,c,d,e,f,g);return QueryFilters.isEbvError(i)?i:(i.value=!i.value,i)}if("<"===h)return QueryFilters.runLtFunction(b,c,d);if(">"===h)return QueryFilters.runGtFunction(b,c,d);if("<="===h)return QueryFilters.runLtEqFunction(b,c,d);if(">="===h)return QueryFilters.runGtEqFunction(b,c,d);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(a){if("literal"!=a.token)throw console.log("not implemented yet"),console.log(a),"value not supported in operations yet";if(a.type==g+"integer"){var b=parseInt(a.value);return b}if(a.type==g+"decimal"){var b=parseFloat(a.value);return b}if(a.type==g+"float"){var b=parseFloat(a.value);return b}if(a.type==g+"double"){var b=parseFloat(a.value);return b}if(a.type==g+"nonPositiveInteger"){var b=parseFloat(a.value);return b}if(a.type==g+"negativeInteger"){var b=parseInt(a.value);return b}if(a.type==g+"long"){var b=parseInt(a.value);return b}if(a.type==g+"int"){var b=parseInt(a.value);return b}if(a.type==g+"short"){var b=parseInt(a.value);return b}if(a.type==g+"byte"){var b=parseInt(a.value);return b}if(a.type==g+"nonNegativeInteger"){var b=parseInt(a.value);return b}if(a.type==g+"unsignedLong"){var b=parseInt(a.value);return b}if(a.type==g+"unsignedInt"){var b=parseInt(a.value);return b}if(a.type==g+"unsignedShort"){var b=parseInt(a.value);return b}if(a.type==g+"unsignedByte"){var b=parseInt(a.value);return b}if(a.type==g+"positiveInteger"){var b=parseInt(a.value);return b}if(a.type!=g+"date"&&a.type!=g+"dateTime")return a.type==g+"boolean"?!0===a.value||"true"===a.value||"1"===a.value||1===a.value||!0===a.value||!1!==a.value&&"false"!==a.value&&"0"!==a.value&&0!==a.value&&!1!==a.value&&void 0:a.type==g+"string"?null===a.value||void 0===a.value?void 0:""+a.value:(a.type,a.value);try{return d.parseISO8601(a.value)}catch(a){return null}},QueryFilters.runOrFunction=function(a,b,c,d,e){for(var f=null,g=0;g<a.operands.length;g++){var h=QueryFilters.runFilter(a.operands[g],b,c,d,e);0==QueryFilters.isEbvError(h)&&(h=QueryFilters.ebv(h)),null==f?f=h:QueryFilters.isEbvError(h)?f=QueryFilters.isEbvError(f)?QueryFilters.ebvError():!0===f||QueryFilters.ebvError():!0===h?f=!0:QueryFilters.isEbvError(f)&&(f=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(f)},QueryFilters.runAndFunction=function(a,b,c,d,e){for(var f=null,g=0;g<a.operands.length;g++){var h=QueryFilters.runFilter(a.operands[g],b,c,d,e);0==QueryFilters.isEbvError(h)&&(h=QueryFilters.ebv(h)),null==f?f=h:QueryFilters.isEbvError(h)?f=QueryFilters.isEbvError(f)?QueryFilters.ebvError():!0===f&&QueryFilters.ebvError():!0===h?QueryFilters.isEbvError(f)&&(f=QueryFilters.ebvError()):f=!1}return QueryFilters.ebvBoolean(f)},QueryFilters.runEqualityFunction=function(a,b,c,e,f,g){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b)){var h=QueryFilters.effectiveTypeValue(a),i=QueryFilters.effectiveTypeValue(b);return isNaN(h)||isNaN(i)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(a,b,e,g)):QueryFilters.ebvBoolean(h==i)}if((QueryFilters.isSimpleLiteral(a)||QueryFilters.isXsdType("string",a))&&(QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",b)))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)==QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("boolean",a)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)==QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",a)||QueryFilters.isXsdType("date",a))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isXsdType("date",b))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",a)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();var j=d.compareDateComponents(a.value,b.value);return null!=j?0==j?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(a)&&QueryFilters.isRDFTerm(b)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(a,b,e,g)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(a,b,c){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>QueryFilters.effectiveTypeValue(b));if(QueryFilters.isSimpleLiteral(a)&&QueryFilters.isSimpleLiteral(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("string",a)&&QueryFilters.isXsdType("string",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("boolean",a)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",a)||QueryFilters.isXsdType("date",a))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isXsdType("date",b))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",a)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();var e=d.compareDateComponents(a.value,b.value);return null!=e?1==e?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(a,b){return QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b)?QueryFilters.ebvError():QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(a)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",a)&&QueryFilters.isSimpleLiteral("string",b)||QueryFilters.isXsdType("boolean",a)&&QueryFilters.isSimpleLiteral("boolean",b)||QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isSimpleLiteral("dateTime",b)?QueryFilters.runGtFunction(a,b,[]):a.token&&"uri"===a.token&&b.token&&"uri"===b.token?QueryFilters.ebvBoolean(a.value>b.value):a.token&&"literal"===a.token&&b.token&&"literal"===b.token?QueryFilters.ebvBoolean(""+a.value+a.type+a.lang>""+b.value+b.type+b.lang):a.token&&"blank"===a.token&&b.token&&"blank"===b.token?QueryFilters.ebvBoolean(a.value>b.value):a.value&&b.value?QueryFilters.ebvBoolean(a.value>b.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(a,b,c){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<QueryFilters.effectiveTypeValue(b));if(QueryFilters.isSimpleLiteral(a)&&QueryFilters.isSimpleLiteral(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("string",a)&&QueryFilters.isXsdType("string",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("boolean",a)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",a)||QueryFilters.isXsdType("date",a))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isXsdType("date",b))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",a)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();var e=d.compareDateComponents(a.value,b.value);return null!=e?-1==e?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(a,b,c){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isSimpleLiteral(a)&&QueryFilters.isSimpleLiteral(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("string",a)&&QueryFilters.isXsdType("string",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("boolean",a)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>=QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",a)||QueryFilters.isXsdType("date",a))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isXsdType("date",b))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",a)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();var e=d.compareDateComponents(a.value,b.value);return null!=e?-1!=e?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(a,b,c){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isSimpleLiteral(a)&&QueryFilters.isSimpleLiteral(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("string",a)&&QueryFilters.isXsdType("string",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("boolean",a)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<=QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",a)||QueryFilters.isXsdType("date",a))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isXsdType("date",b))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",a)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();var e=d.compareDateComponents(a.value,b.value);return null!=e?1!=e?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(a,b,c,d,e,f){var g=QueryFilters.runFilter(a,c,d,e,f);if(QueryFilters.isEbvError(g))return QueryFilters.ebvError();var h=g;if(QueryFilters.isNumeric(g)){for(var i=0;i<b.length;i++){var j=QueryFilters.runFilter(b[i].expression,c,d,e,f);if(!QueryFilters.isNumeric(j))return QueryFilters.ebvFalse();"+"===b[i].operator?h=QueryFilters.runSumFunction(h,j):"-"===b[i].operator&&(h=QueryFilters.runSubFunction(h,j))}return h}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(a,b){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var c=QueryFilters.effectiveTypeValue(a)+QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(a)||QueryFilters.isDouble(b)?{token:"literal",type:g+"double",value:c}:QueryFilters.isFloat(a)||QueryFilters.isFloat(b)?{token:"literal",type:g+"float",value:c}:QueryFilters.isDecimal(a)||QueryFilters.isDecimal(b)?{token:"literal",type:g+"decimal",value:c}:{token:"literal",type:g+"integer",value:c}},QueryFilters.runSubFunction=function(a,b){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var c=QueryFilters.effectiveTypeValue(a)-QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(a)||QueryFilters.isDouble(b)?{token:"literal",type:g+"double",value:c}:QueryFilters.isFloat(a)||QueryFilters.isFloat(b)?{token:"literal",type:g+"float",value:c}:QueryFilters.isDecimal(a)||QueryFilters.isDecimal(b)?{token:"literal",type:g+"decimal",value:c}:{token:"literal",type:g+"integer",value:c}},QueryFilters.runMultiplication=function(a,b,c,d,e,f){var g=QueryFilters.runFilter(a,c,d,e,f);if(QueryFilters.isEbvError(g))return g;var h=g;if(QueryFilters.isNumeric(g)){for(var i=0;i<b.length;i++){var j=QueryFilters.runFilter(b[i].expression,c,d,e,f);if(QueryFilters.isEbvError(j))return g;if(!QueryFilters.isNumeric(j))return QueryFilters.ebvFalse();"*"===b[i].operator?h=QueryFilters.runMulFunction(h,j):"/"===b[i].operator&&(h=QueryFilters.runDivFunction(h,j))}return h}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(a,b){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var c=QueryFilters.effectiveTypeValue(a)*QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(a)||QueryFilters.isDouble(b)?{token:"literal",type:g+"double",value:c}:QueryFilters.isFloat(a)||QueryFilters.isFloat(b)?{token:"literal",type:g+"float",value:c}:QueryFilters.isDecimal(a)||QueryFilters.isDecimal(b)?{token:"literal",type:g+"decimal",value:c}:{token:"literal",type:g+"integer",value:c}},QueryFilters.runDivFunction=function(a,b){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var c=QueryFilters.effectiveTypeValue(a)/QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(a)||QueryFilters.isDouble(b)?{token:"literal",type:g+"double",value:c}:QueryFilters.isFloat(a)||QueryFilters.isFloat(b)?{token:"literal",type:g+"float",value:c}:QueryFilters.isDecimal(a)||QueryFilters.isDecimal(b)?{token:"literal",type:g+"decimal",value:c}:{token:"literal",type:g+"integer",value:c}},QueryFilters.runBuiltInCall=function(a,b,c,d,e,f){if("notexists"===a||"exists"===a){var g=[];for(var h in c)g.push(JSON.stringify(c[h]));return g=g.sort().join(""),b[g]}for(var i=[],j=0;j<b.length;j++)if("var"===b[j].token)i.push(b[j]);else{var k=QueryFilters.runFilter(b[j],c,d,e,f);if(QueryFilters.isEbvError(k))return k;i.push(k)}if("str"===a)return"literal"===i[0].token?{token:"literal",type:null,value:""+i[0].value}:"uri"===i[0].token?{token:"literal",type:null,value:i[0].value}:QueryFilters.ebvFalse();if("lang"===a)return"literal"===i[0].token?null!=i[0].lang?{token:"literal",value:""+i[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===a){if("literal"===i[0].token){var l=i[0];return null!=l.type?"string"==typeof l.type?{token:"uri",value:l.type,prefix:null,suffix:null}:l.type:null==l.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===a)return"literal"===i[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===a)return"blank"===i[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===a||"isiri"===a)return"uri"===i[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===a){var m=i[0],n=i[1],o=QueryFilters.RDFTermEquality(m,n,d,f);return QueryFilters.isEbvError(o)&&(o=!1),QueryFilters.ebvBoolean(o)}if("langmatches"===a){var p=i[0],q=i[1];return"literal"===p.token&&"literal"===q.token?"*"===q.value&&""!=p.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===p.value.toLowerCase().indexOf(q.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===a){var r=i[0].value;return null==r?QueryFilters.ebvError():null!=c[r]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=d.customFns[a])return d.customFns[a](QueryFilters,i);throw"Builtin call "+a+" not implemented yet"},QueryFilters.runUnaryExpression=function(a,b,c,d,e,f){var g=QueryFilters.runFilter(b,c,d,e,f);if(QueryFilters.isEbvError(g))return g;if("!"===a){var h=QueryFilters.ebv(g);return QueryFilters.isEbvError(h)?QueryFilters.ebvFalse():(h=!h,QueryFilters.ebvBoolean(h))}if("+"===a)return QueryFilters.isNumeric(g)?g:QueryFilters.ebvError();if("-"===a){if(QueryFilters.isNumeric(g)){var i={};for(var j in g)i[j]=g[j];return i.value=-i.value,i}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(a,b,c,d,e,f,g){if(null==a)return QueryFilters.ebvError();if(a=QueryFilters.runFilter(a,d,e,f,g),null==b)return QueryFilters.ebvError();if(b=QueryFilters.runFilter(b,d,e,f,g),null!=c&&(c=QueryFilters.runFilter(c,d,e,f,g)),null==b||"literal"!==b.token||null!=c&&"literal"!==c.token)return QueryFilters.ebvError();if(b=b.value,c=null==c?null:c.value,null!=a&&"var"==a.token){if(null==d[a.value])return QueryFilters.ebvError();a=d[a.value]}else{if(null==a||"literal"!==a.token)return QueryFilters.ebvError();if(null!=a.type&&!QueryFilters.isXsdType("string",a))return QueryFilters.ebvError();a=a.value}var h;return h=null==c?new RegExp(b):new RegExp(b,c.toLowerCase()),h.exec(a)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(a,b,c){return null==a.value.type||"object"!=typeof a.value.type?a:(a.value.type=d.lexicalFormBaseUri(a.value.type,c),a)},QueryFilters.runIriRefOrFunction=function(a,b,c,e,f,h){if(null==b)return a;for(var i=[],j=0;j<b.length;j++)i.push(QueryFilters.runFilter(b[j],c,e,f,h));var k=d.lexicalFormBaseUri(a,h);if(k==g+"integer"||k==g+"decimal"||k==g+"double"||k==g+"nonPositiveInteger"||k==g+"negativeInteger"||k==g+"long"||k==g+"int"||k==g+"short"||k==g+"byte"||k==g+"nonNegativeInteger"||k==g+"unsignedLong"||k==g+"unsignedInt"||k==g+"unsignedShort"||k==g+"unsignedByte"||k==g+"positiveInteger"){var l=i[0];if("literal"!==l.token)return QueryFilters.ebvError();if(l=QueryFilters.normalizeLiteralDatatype(l,e,h),l.type==g+"integer"||l.type==g+"decimal"||l.type==g+"double"||l.type==g+"nonPositiveInteger"||l.type==g+"negativeInteger"||l.type==g+"long"||l.type==g+"int"||l.type==g+"short"||l.type==g+"byte"||l.type==g+"nonNegativeInteger"||l.type==g+"unsignedLong"||l.type==g+"unsignedInt"||l.type==g+"unsignedShort"||l.type==g+"unsignedByte"||l.type==g+"positiveInteger")return l.type=k,l;if("http://www.w3.org/2001/XMLSchema#boolean"==l.type)return 1==QueryFilters.ebv(l)?(l.type=k,l.value=1):(l.type=k,l.value=0),l;if("http://www.w3.org/2001/XMLSchema#float"==l.type||"http://www.w3.org/2001/XMLSchema#double"==l.type)return l.type=k,l.value=parseInt(l.value),l;if("http://www.w3.org/2001/XMLSchema#string"!=l.type&&null!=l.type)return QueryFilters.ebvError();if(l.value.split(".").length>2)return QueryFilters.ebvError();if(l.value.split("-").length>2)return QueryFilters.ebvError();if(l.value.split("/").length>2)return QueryFilters.ebvError();if(l.value.split("+").length>2)return QueryFilters.ebvError();if(k==g+"decimal"&&(-1!=l.value.indexOf("e")||-1!=l.value.indexOf("E")))return QueryFilters.ebvError();if(!(k!=g+"int"&&k!=g+"integer"||-1==l.value.indexOf("e")&&-1==l.value.indexOf("E")&&-1==l.value.indexOf(".")))return QueryFilters.ebvError();try{return l.value=parseInt(parseFloat(l.value)),isNaN(l.value)?QueryFilters.ebvError():(l.type=k,l)}catch(a){return QueryFilters.ebvError()}}else{if(k==g+"boolean"){var l=i[0];return"literal"===l.token&&null==l.type?"true"===l.value||"1"===l.value?QueryFilters.ebvTrue():"false"===l.value||"0"===l.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===l.token?QueryFilters.isEbvError(l)?l:QueryFilters.ebvBoolean(l):QueryFilters.ebvError()}if(k==g+"string"){var l=i[0];return"literal"===l.token?(l=QueryFilters.normalizeLiteralDatatype(l,e,h),l.type==g+"integer"||l.type==g+"decimal"||l.type==g+"double"||l.type==g+"nonPositiveInteger"||l.type==g+"negativeInteger"||l.type==g+"long"||l.type==g+"int"||l.type==g+"short"||l.type==g+"byte"||l.type==g+"nonNegativeInteger"||l.type==g+"unsignedLong"||l.type==g+"unsignedInt"||l.type==g+"unsignedShort"||l.type==g+"unsignedByte"||l.type==g+"positiveInteger"||l.type==g+"float"?(l.type=k,l.value=""+l.value,l):l.type==g+"string"?l:l.type==g+"boolean"?(QueryFilters.ebv(l)?(l.type=k,l.value="true"):(l.type=k,l.value="false"),l):l.type==g+"dateTime"||l.type==g+"date"?(l.type=k,"string"!=typeof l.value&&(l.value=d.iso8601(l.value)),l):null==l.type?(l.value=""+l.value,l.type=k,l):QueryFilters.ebvError()):"uri"===l.token?{token:"literal",value:d.lexicalFormBaseUri(l,h),type:k,lang:null}:QueryFilters.ebvError()}if(k==g+"dateTime"||k==g+"date"){if(l=i[0],l.type==g+"dateTime"||l.type==g+"date")return l;if(l.type!=g+"string"&&null!=l.type)return QueryFilters.ebvError();try{return l.value=d.iso8601(d.parseISO8601(l.value)),l.type=k,l}catch(a){return QueryFilters.ebvError()}}else{if(k!=g+"float")return null!=e.customFns[k]?e.customFns[k](QueryFilters,i):QueryFilters.ebvError();var l=i[0];if("literal"!==l.token)return QueryFilters.ebvError();if(l=QueryFilters.normalizeLiteralDatatype(l,e,h),"http://www.w3.org/2001/XMLSchema#decimal"==l.type||"http://www.w3.org/2001/XMLSchema#int"==l.type)return l.type=k,l.value=parseFloat(l.value),l;if("http://www.w3.org/2001/XMLSchema#boolean"==l.type)return 1==QueryFilters.ebv(l)?(l.type=k,l.value=1):(l.type=k,l.value=0),l;if("http://www.w3.org/2001/XMLSchema#float"==l.type||"http://www.w3.org/2001/XMLSchema#double"==l.type)return l.type=k,l.value=parseFloat(l.value),l;if("http://www.w3.org/2001/XMLSchema#string"==l.type)try{return l.value=parseFloat(l.value),isNaN(l.value)?QueryFilters.ebvError():(l.type=k,l)}catch(a){return QueryFilters.ebvError()}else{if(null!=l.type)return QueryFilters.ebvError();if(l.value.split(".").length>2)return QueryFilters.ebvError();if(l.value.split("-").length>2)return QueryFilters.ebvError();if(l.value.split("/").length>2)return QueryFilters.ebvError();if(l.value.split("+").length>2)return QueryFilters.ebvError();try{return l.value=parseFloat(l.value),isNaN(l.value)?QueryFilters.ebvError():(l.type=k,l)}catch(a){return QueryFilters.ebvError()}}}}},b.exports={QueryFilters:QueryFilters}},{"./utils":57}],53:[function(a,b,c){var d=a("./utils"),e=a("./utils"),g={};g.variablesInBGP=function(a){var b=a.variables;if(b)return b;var c=a.value||a;b=[];for(var d in c)c[d]&&"var"===c[d].token?b.push(c[d].value):c[d]&&"blank"===c[d].token&&b.push("blank:"+c[d].value);return a.variables=b,b},g.connected=function(a,b){for(var c="/"+a.vars.join("/")+"/",d=0;d<b.vars.length;d++)if(-1!=c.indexOf("/"+b.vars[d]+"/"))return!0;return!1};var h=function(a,b){for(var c={},d=0;d<a.lenght;d++)c[a[d]]=1;for(d=0;d<b.length;d++){var e=c[b[d]]||0;e++,c[b[d]]=e}var f=[];for(var g in c)2==c[g]&&f.push(c[g]);return f};g.variablesIntersectionBGP=function(a,b){return h(g.variablesInBGP(a),g.variablesInBGP(b))},g.executeAndBGPsGroups=function(a){for(var b={},c={},e=0,f=function(a,b){for(var c=0;c<a.length;c++){var d="/"+a[c]+"/";if(-1!=b.indexOf(d))return!0}return!1},h=function(a,d,e,f){var g=[],h="",i="";for(var j in d)h+=j,g=g.concat(b[j]),i+=c[j];i=i+m.join("/")+"/",g.push(a),e[h]=g,f[h]=i},i=0;i<a.length;i++){var j=a[i],k={},l={},m=g.variablesInBGP(j),n={};for(var o in c)f(m,c[o])?n[o]=!0:(k[o]=b[o],l[o]=c[o]);0===d.size(n)?(k["g"+e]=[j],l["g"+e]="/"+m.join("/")+"/",e++):h(j,n,k,l),b=k,c=l}return d.values(b)},g.intersectionSize=function(a,b){for(var c=b.i.split("_"),d=0;d<c.length;d++)if(""!=c[d]&&-1!=a.i.indexOf("_"+c[d]+"_"))return 1;return 0},g.createJoinTree=function(a,b){for(var c="/"+a.vars.join("/")+"/",e=a.vars.concat([]),f=[],g=0;g<b.vars.length;g++)-1!=c.indexOf("/"+b.vars[g]+"/")?0==b.vars[g].indexOf("_:")?f.push("blank:"+b.vars[g]):f.push(b.vars[g]):e.push(b.vars[g]);for(var h=b.i.split("_"),i=a.i.split("_"),j={},g=0;g<h.length;g++)""!=h[g]&&(j[h[g]]=!0);for(var g=0;g<i.length;g++)""!=i[g]&&(j[i[g]]=!0);var k=d.keys(j);return{left:a,right:b,cost:a.cost+b.cost,i:"_"+k.sort().join("_")+"_",vars:e,join:f}},g.executeBushyTree=function(a,b,c,d,e){null==a.left?g.executeEmptyJoinBGP(a.right,b,c,d,e):null==a.right?g.executeEmptyJoinBGP(a.left,b,c,d,e):g.executeBushyTree(a.left,b,c,d,function(f){null!=f?g.executeBushyTree(a.right,b,c,d,function(b){e(null!=b?g.joinBindings2(a.join,f,b):null)}):e(null)})},g.executeAndBGPsDPSize=function(a,b,c,d,f){var h=g.executeAndBGPsGroups(a),i=[];e.eachSeries(h,function(a,b){c.computeCosts(a,d,function(a){var c={},d={},e={},f=1,h=null,j={};e[1]=[];for(var k=0;k<a.length;k++){var l=[];delete a[k].variables;for(var m in a[k])"_cost"!=m&&("var"===a[k][m].token?l.push(a[k][m].value):"blank"===a[k][m].token&&l.push(a[k][m].value));d["_"+k+"_"]={left:a[k],right:null,cost:a[k]._cost,i:"_"+k+"_",vars:l};var n={left:a[k],right:null,cost:a[k]._cost,i:"_"+k+"_",vars:l};c["_"+k+"_"]=n,delete a[k]._cost,j["_"+k+"_"]=!0,e[1].push("_"+k+"_"),(null==h||h.cost>n.cost)&&(h=n)}for(var o=2;o<=a.length;o++)for(var p=1;p<o;p++)for(var q=o-p,r=e[""+p]||[],s=e[""+q]||[],k=0;k<r.length;k++)for(var t=0;t<s.length;t++)if(r[k]!==s[t]){var u=d[r[k]],v=d[s[t]];if(0==g.intersectionSize(u,v)&&g.connected(u,v)){f=o;var w=c[u.i],x=c[v.i],y=g.createJoinTree(w,x);if(!j[y.i]){j[y.i]=!0;var z=y.cost+1;null!=c[y.i]&&(z=c[y.i].cost);var A=e[o]||[];A.push(y.i),d[y.i]=y,e[o]=A,z>y.cost&&(f===o&&(h=y),c[y.i]=y)}}}i.push(h),b()})},function(){var a=null;e.eachSeries(i,function(e,f){g.executeBushyTree(e,b,c,d,function(b){b?null==a?(a=b,f()):(a=g.crossProductBindings(a,b),f()):f("Error executing bushy tree")})},function(b){b?f(null,b):f(a)})})},g.executeEmptyJoinBGP=function(a,b,c,d,e){return g.executeBGPDatasets(a,b,c,d,e)},g.executeBGPDatasets=function(a,b,c,d,f){var h={};if(null==a.graph){var i=[];e.eachSeries(b.implicit,function(b,e){null==h[b.oid]?(h[b.oid]=!0,a.graph=b,c.rangeQuery(a,d,function(b){b=g.buildBindingsFromRange(b,a),i.push(b),e()})):e()},function(){var a=g.unionManyBindings(i);f(a)})}else if("var"===a.graph.token){var j=a.graph.value,i=[];e.eachSeries(b.named,function(b,e){null==h[b.oid]?(h[b.oid]=!0,a.graph=b,null!=i?c.rangeQuery(a,d,function(c){if(null!=c){c=g.buildBindingsFromRange(c,a);for(var d=0;d<c.length;d++)c[d][j]=b.oid;i.push(c)}else i=null;e()}):e()):e()},function(){if(null==i)f(null);else{var a=g.unionManyBindings(i);f(a)}})}else c.rangeQuery(a,d,function(b){null!=b?(b=g.buildBindingsFromRange(b,a),f(b)):f(null)})},g.buildBindingsFromRange=function(a,b){g.variablesInBGP(b);var c=b.value||b,d={};for(k in c)c[k]&&"var"===c[k].token?d[k]=c[k].value:c[k]&&"blank"===c[k].token&&(d[k]="blank:"+c[k].value);var e=[];if(null!=a)for(var f=0;f<a.length;f++){var h={},i=a[f],j=!1;for(var k in d){var l=i[k];if(null!=h[d[k]]&&h[d[k]]!==l){j=!0;break}h[d[k]]=l}j||e.push(h)}return e},g.areCompatibleBindings=function(a,b){for(var c in a)if(null!=b[c]&&b[c]!=a[c])return!1;return!0},g.mergeBindings=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c},g.joinBindings2=function(a,b,c){for(var e,f,h,i,j,d={},k=[],l=0;l<b.length;l++){e=b[l],j=d;for(var m=0;m<a.length;m++)f=a[m],h=e[f],m==a.length-1?(i=j[h]||[],i.push(e),j[h]=i):(i=j[h]||{},j[h]=i,j=i)}for(var l=0;l<c.length;l++){e=c[l],j=d;for(var m=0;m<a.length;m++)if(f=a[m],h=e[f],null!=j[h])if(m==a.length-1)for(var n=0;n<j[h].length;n++)k.push(g.mergeBindings(j[h][n],e));else j=j[h]}return k},g.joinBindings=function(a,b){for(var c=[],d=0;d<a.length;d++)for(var e=a[d],f=0;f<b.length;f++){var h=b[f];g.areCompatibleBindings(e,h)&&c.push(g.mergeBindings(e,h))}return c},g.augmentMissingBindings=function(a,b){for(var c in b)null==a[c]&&(a[c]=null);return a},g.leftOuterJoinBindings=function(a,b){for(var c=[],d=0;d<a.length;d++){for(var e=a[d],f=!1,h=0;h<b.length;h++){var i=b[h];g.areCompatibleBindings(e,i)&&(f=!0,c.push(g.mergeBindings(e,i)))}!1===f&&(g.augmentMissingBindings(e,i),c.push(e))}return c},g.crossProductBindings=function(a,b){for(var c=[],d=0;d<a.length;d++)for(var e=a[d],f=0;f<b.length;f++){var h=b[f];c.push(g.mergeBindings(e,h))}return c},g.unionBindings=function(a,b){return a.concat(b)},g.unionManyBindings=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b=g.unionBindings(b,d)}return b},b.exports={QueryPlan:g}},{"./utils":57}],54:[function(a,b,c){var d=a("./network_transport").NetworkTransport,e=a("./rvn3_parser").RVN3Parser,f=a("./jsonld_parser").JSONLDParser,g=a("./utils"),h=function(a){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":e.parser,"text/n3":e.parser,"application/ld+json":f.parser,"application/json":f.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=a)for(var b in a.parsers)this.parsers[b]=a.parsers[b];if(a&&null!=a.precedences){this.precedences=a.precedences;for(var b in a.parsers)g.include(this.precedences,b)||this.precedences.push(b)}this.acceptHeaderValue="";for(var c=0;c<this.precedences.length;c++)this.acceptHeaderValue=0!=c?this.acceptHeaderValue+","+this.precedences[c]:this.acceptHeaderValue+this.precedences[c]};h.prototype.registerParser=function(a,b){this.parsers[a]=b,this.precedences.push(a)},h.prototype.unregisterParser=function(a){delete this.parsers[a];for(var b=[],c=0;c<this.precedences.length;c++)this.precedences[c]!=a&&b.push(this.precedences[c]);this.precedences=b},h.prototype.setAcceptHeaderPrecedence=function(a){this.precedences=a},h.prototype.load=function(a,b,c){var e=this;d.load(a,this.acceptHeaderValue,function(d,f){if(d)c(d);else{var g=f.headers["Content-Type"]||f.headers["content-type"],h=f.data;if(null!=g){g=g.split(";")[0];for(var i in e.parsers)if(-1!=i.indexOf("/")){var j=i.split("/");if("*"===j[1]){if(-1!=g.indexOf(j[0]))return e.tryToParse(e.parsers[i],b,h,{documentURI:a},c)}else{if(-1!=g.indexOf(i))return e.tryToParse(e.parsers[i],b,h,{documentURI:a},c);if(-1!=g.indexOf(j[1]))return e.tryToParse(e.parsers[i],b,h,{documentURI:a},c)}}else if(-1!=g.indexOf(i))return e.tryToParse(e.parsers[i],b,h,{documentURI:a},c);c(new Error("Unknown media type : "+g))}else c(new Error("Uknown media type"))}})},h.prototype.loadFromFile=function(b,c,d,e){try{var f=this;a("fs").readFile(d.split("file:/")[1],function(a,g){if(a)e(a);else{var g=g.toString("utf8");f.tryToParse(b,c,g,{documentURI:d},e)}})}catch(a){e(a)}},h.prototype.tryToParse=function(a,b,c,d,e){try{"string"==typeof c&&(c=g.normalizeUnicodeLiterals(c)),a.parse(c,b,d,e)}catch(a){console.log(a.message),console.log(a.stack),e(a)}},b.exports={RDFLoader:h}},{"./jsonld_parser":43,"./network_transport":45,"./rvn3_parser":56,"./utils":57,fs:5}],55:[function(a,b,c){var d=a("./utils"),e=a("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var a={};for(var b in this)d.include(this.interfaceProperties,b)||"function"==typeof this[b]||"defaultNs"===b||"interfaceProperties"===b||(a[b]=this[b]);return a},RDFModel.UrisMap.prototype.get=function(a){if(-1!=a.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[a]},RDFModel.UrisMap.prototype.remove=function(a){if(-1!=a.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[a],null},RDFModel.UrisMap.prototype.set=function(a,b){if(-1!=a.indexOf(" "))throw"Prefix must not contain any whitespaces";this[a]=b},RDFModel.UrisMap.prototype.setDefault=function(a){this.defaultNs=a},RDFModel.UrisMap.prototype.addAll=function(a,b){for(var c in a)d.include(this.interfaceProperties,c)||(null!=this[c]?!0===b&&(this[c]=a[c]):this[c]=a[c]);return this},RDFModel.UrisMap.prototype.resolve=function(a){var b=a.split(":"),c=b[0],d=b[1];return""===c?null==this.defaultNs?null:this.defaultNs+d:null!=this[c]?this[c]+d:null},RDFModel.UrisMap.prototype.shrink=function(a){for(var b in this){var c=this[b];if(0===a.indexOf(c)&&""!==c&&"defaultNs"!=b){return b+":"+a.split(c)[1]}}return a},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(a,b){this.prefixes.addAll(a.prefixes,b),this.terms.addAll(a.terms,b)},RDFModel.Profile.prototype.resolve=function(a){return-1!=a.indexOf(":")?this.prefixes.resolve(a):null!=this.terms[a]?this.terms.resolve(a):null},RDFModel.Profile.prototype.setDefaultPrefix=function(a){this.prefixes.setDefault(a)},RDFModel.Profile.prototype.setDefaultVocabulary=function(a){this.terms.setDefault(a)},RDFModel.Profile.prototype.setPrefix=function(a,b){this.prefixes.set(a,b)},RDFModel.Profile.prototype.setTerm=function(a,b){this.terms.set(a,b)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var a=this;this.filters={s:function(a){return function(b){return b.subject.equals(a)}},p:function(a){return function(b){return b.predicate.equals(a)}},o:function(a){return function(b){return b.object.equals(a)}},sp:function(a,b){return function(c){return c.subject.equals(a)&&c.predicate.equals(b)}},so:function(a,b){return function(c){return c.subject.equals(a)&&c.object.equals(b)}},po:function(a,b){return function(c){return c.predicate.equals(a)&&c.object.equals(b)}},spo:function(a,b,c){return function(d){return d.subject.equals(a)&&d.predicate.equals(b)&&d.object.equals(c)}},describes:function(a){return function(b){return b.subject.equals(a)||b.object.equals(a)}},type:function(b){var c=a.resolve("rdf:type");return function(a){return a.predicate.equals(c)&&a.object.equals(b)}}};for(var b in RDFModel.defaultContext)this.prefixes.set(b,RDFModel.defaultContext[b])},RDFModel.RDFEnvironment.prototype=d.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var a=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,a},RDFModel.RDFEnvironment.prototype.createNamedNode=function(a){var b=this.resolve(a);return null!=b?new RDFModel.NamedNode(b):new RDFModel.NamedNode(a)},RDFModel.RDFEnvironment.prototype.createLiteral=function(a,b,c){return null!=c?new RDFModel.Literal(a,b,c.toString()):new RDFModel.Literal(a,b,c)},RDFModel.RDFEnvironment.prototype.createTriple=function(a,b,c){return new RDFModel.Triple(a,b,c)},RDFModel.RDFEnvironment.prototype.createGraph=function(a){var b=new RDFModel.Graph;if(null!=a)for(var c=0;c<a.length;c++)b.add(a[c]);return b},RDFModel.RDFEnvironment.prototype.createAction=function(a,b){return function(c){return a(c)?b(c):c}},RDFModel.RDFEnvironment.prototype.createProfile=function(a){if(!0===a)return new RDFModel.RDFEnvironment.Profile;var b=new RDFModel.RDFEnvironment.Profile;return b.importProfile(this),b},RDFModel.RDFEnvironment.prototype.createTermMap=function(a){if(!0===a)return new RDFModel.UrisMap;var b=this.terms.values(),c=new RDFModel.UrisMap;for(var d in b)c[d]=b[d];return c},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(a){if(!0===a)return new RDFModel.UrisMap;var b=this.prefixes.values(),c=new RDFModel.UrisMap;for(var d in b)c[d]=b[d];return c},RDFModel.RDFNode=function(a){this.interfaceName=a,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(a){if(null==a.interfaceName)return this.valueOf()==a;for(var b in this.attributes){var c=this.attributes[b];if(this[c]!=a[c])return!1}return!0},RDFModel.BlankNode=function(a){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+a,this.bnodeId=a},RDFModel.BlankNode.prototype=d.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(a,b,c){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=a,null!=b?this.language=b:null!=c&&(this.datatype=c)},RDFModel.Literal.prototype=d.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var a='"'+this.nominalValue+'"';return null!=this.language?a=a+"@"+this.language:(null!=this.datatype||this.type)&&(a=a+"^^<"+(this.datatype||this.type)+">"),a},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return e.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(a){RDFModel.RDFNode.call(this,"NamedNode"),null!=a.value?this.nominalValue=a.value:this.nominalValue=a},RDFModel.NamedNode.prototype=d.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(a,b,c){this.subject=a,this.predicate=b,this.object=c},RDFModel.Triple.prototype.equals=function(a){return this.subject.equals(a.subject)&&this.predicate.equals(a.predicate)&&this.object.equals(a.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(a){for(var b=0;b<this.actions.length;b++)a=this.actions[b](a);var c=a.subject.toString()+a.predicate.toString()+a.object.toString();return this.duplicates[c]||(this.duplicates[c]=!0,this.triples.push(a)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(a,b){if(this.actions.push(a),1==b)for(var c=0;c<this.triples.length;c++)this.triples[c]=a(this.triples[c]);return this},RDFModel.Graph.prototype.addAll=function(a){for(var b=a.toArray(),c=0;c<b.length;c++)this.add(b[c]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(a){for(var b=null,c=0;c<this.triples.length;c++)if(this.triples[c].equals(a)){var d=a.subject.toString()+a.predicate.toString()+a.object.toString();delete this.duplicates[d],b=c;break}return null!=b&&this.triples.splice(b,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(a){for(var b=0;b<this.triples.length;b++)if(!0===a(this.triples[b],this))return!0;return!1},RDFModel.Graph.prototype.every=function(a){for(var b=0;b<this.triples.length;b++)if(!1===a(this.triples[b],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(a){for(var b=new RDFModel.Graph,c=0;c<this.triples.length;c++)!0===a(this.triples[c],this)&&b.add(this.triples[c]);return b},RDFModel.Graph.prototype.forEach=function(a){for(var b=0;b<this.triples.length;b++)a(this.triples[b],this)},RDFModel.Graph.prototype.merge=function(a){for(var b=new RDFModel.Graph,c=0;c<this.triples.length;c++)b.add(this.triples[c]);return b},RDFModel.Graph.prototype.match=function(a,b,c,d){for(var e=new RDFModel.Graph,f=0,g=0;g<this.triples.length;g++){var h=this.triples[g];if((null==a||h.subject.equals(a))&&(null==b||h.predicate.equals(b))&&(null==c||h.object.equals(c))){if(!(null==d||f<d))return e;f++,e.add(h)}}return e},RDFModel.Graph.prototype.removeMatches=function(a,b,c){for(var d=[],e=0;e<this.triples.length;e++){var f=this.triples[e];(null==a||f.subject.equals(a))&&(null==b||f.predicate.equals(b))&&(null==c||f.object.equals(c))&&d.push(f)}for(var e=0;e<d.length;e++)this.remove(d[e]);return this},RDFModel.Graph.prototype.toNT=function(){var a="";return this.forEach(function(b){a+=b.toString()}),a},RDFModel.buildRDFResource=function(a,b,c,d){if("blank"===a.token)return RDFModel.buildBlankNode(a,b,c,d);if("literal"===a.token)return RDFModel.buildLiteral(a,b,c,d);if("uri"===a.token)return RDFModel.buildNamedNode(a,b,c,d);if("var"===a.token){var e=b[a.value];return null!=e?RDFModel.buildRDFResource(e,b,c,d):null}return null},RDFModel.buildBlankNode=function(a,b,c,d){return null!=a.valuetmp&&(a.value=a.valuetmp),0===a.value.indexOf("_:")&&(a.value=a.value.split("_:")[1]),new RDFModel.BlankNode(a.value)},RDFModel.buildLiteral=function(a,b,c,d){return new RDFModel.Literal(a.value,a.lang,a.type)},RDFModel.buildNamedNode=function(a,b,c,d){if(null!=a.value)return new RDFModel.NamedNode(a);if(null!=a.prefix){var e=c.resolveNsInEnvironment(a.prefix,d);return a.value=e+a.suffix,new RDFModel.NamedNode(a)}return new RDFModel.NamedNode(a)},RDFModel.rdf=new RDFModel.RDFEnvironment,b.exports=RDFModel},{"./query_filters":52,"./utils":57}],56:[function(a,b,c){function f(a){switch(a[0]){case'"':if(a.indexOf("^^")>0){var b=a.split("^^");return{literal:b[0]+"^^<"+b[1]+">"}}return{literal:a};case"_":return{blank:a.replace("b","")};default:return{token:"uri",value:a,prefix:null,suffix:null}}}var d=a("n3").Parser,e={};e.parser={async:!0,parse:function(a,b,c,e){e||(e=c,c=b,b=null),b&&"string"==typeof b&&(b={token:"uri",value:b,prefix:null,suffix:null}),c&&c.baseURI&&(c.documentIRI=c.baseURI);var g=[];new d(c).parse(a,function(a,c){a?e(a):c?g.push({subject:f(c.subject),predicate:f(c.predicate),object:f(c.object),graph:b}):e(!1,g)})},resetBlankNodeIds:function(){d._resetBlankNodeIds()}},b.exports={RVN3Parser:e}},{n3:27}],57:[function(_dereq_,module,exports){(function(process){var slowNextTick=function(){return void 0!==process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(b){setTimeout(b,0)}}(),spin=0,yieldFrequency=100,nextTick=function(a){spin++,spin<yieldFrequency?a():(spin=0,slowNextTick(a))},hashTerm=function(a){try{if(null==a)return"";if("uri"===a.token)return"u"+a.value;if("blank"===a.token)return"b"+a.value;if("literal"===a.token){var b="l"+a.value;return b+=a.type||"",b+=a.lang||""}}catch(b){if("object"==typeof a){var c="";for(p in a)c=c+p+a[p];return c}return a}},lexicalFormBaseUri=function(a,b){var c=null;if(b=b||{},null==a.value){var d=a.prefix,e=a.suffix,f=b.namespaces[d];c=null!=f?f+e:d+":"+e}else c=a.value;return null===c?null:(-1==c.indexOf(":")&&(c=(b.base||"")+c),c)};parseISO8601=function(a){return Date.parse(a)},Date.prototype.toISOString||function(){function a(a){return a<10?"0"+a:a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(a){return a.toISOString()},compareDateComponents=function(a,b){var c=parseISO8601(a),d=parseISO8601(b);return c==d?0:c<d?-1:1},lexicalFormLiteral=function(a,b){var c=a.value,d=a.lang,e=a.type,f=null;if(null!=c&&null!=e&&"string"!=typeof e){var g=e.value;if(null==g){var h=e.prefix,i=e.suffix,j=b.namespaces[h];a.type=j+i,g=j+i}f=-1!=g.indexOf("hexBinary")?'"'+a.value.toLowerCase()+'"^^<'+g+">":'"'+a.value+'"^^<'+g+">"}else f=null==d&&null==e?'"'+c+'"':null==e?'"'+c+'"@'+d:-1!=e.indexOf("hexBinary")?'"'+a.value.toLowerCase()+'"^^<'+e+">":'"'+a.value+'"^^<'+e+">";return f},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(a){if("undefined"==typeof window&&void 0!==process&&!1===process.browser){var b=_dereq_("sqlite3"),c=_dereq_("indexeddb-js"),d=new b.Database(":memory:"),e=c.makeScope("sqlite3",d);a.indexedDB=e.indexedDB,a.IDBKeyRange=e.IDBKeyRange}else{var f;f="undefined"==typeof window?self:window,f.indexedDB=f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,f.IDBKeyRange=f.IDBKeyRange||f.webkitIDBKeyRange||f.msIDBKeyRange,f.indexedDB?(a.indexedDB=f.indexedDB,a.IDBKeyRange=f.IDBKeyRange):console.log("The browser does not support IndexDB.")}},guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},hashTerm=function(a){try{if(null==a)return"";if("uri"===a.token)return"u"+a.value;if("blank"===a.token)return"b"+a.value;if("literal"===a.token){var b="l"+a.value;return b+=a.type||"",b+=a.lang||""}}catch(b){if("object"==typeof a){var c="";for(p in a)c=c+p+a[p];return c}return a}};var reject=function(a,b){for(var c=[],d=0;d<a.length;d++)b(a[d])&&c.push(a[d]);return c},include=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},each=function(a,b){if(a.forEach)a.forEach(b);else for(var c=0;c<a.length;c++)b(a[c])},map=function(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d]);return c},keys=function(a){var b=[];for(var c in a)b.push(c);return b},values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},size=function(a){if(a.length)return a.length;var b=0;for(var c in a)b++;return b};clone=function(a){return JSON.parse(JSON.stringify(a))};var isObject=function(a){var b=typeof a;return"function"==b||a&&"object"==b||!1},create=function(){function a(){}return function(b){if(isObject(b)){a.prototype=b;var c=new a;a.prototype=null}return c||a()}}(),whilst=function(a,b,c){a()?b(function(d){if(d)return c(d);whilst(a,b,c)}):c()},eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c():nextTick(e))})};e()},eachParallel=function(a,b,c){if(c=c||function(){},!a.length)return c();for(var d=!1,e=0,f=function(b){if(b)throw d=!0,new Error(b);d||++e===a.length&&c()},g=0;g<a.length;g++)!function(a,b,c,d){nextTick(function(){try{d(a[b],function(){c()})}catch(a){c(a)}})}(a,g,f,b)},reduce=function(a,b,c,d){eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},seq=function(){var a=arguments;return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}},isWorker=function(){return(void 0===process||!0===process.browser)&&"undefined"==typeof window};module.exports={isWorker:isWorker,nextTick:nextTick,hasTerm:hashTerm,lexicalFormBaseUri:lexicalFormBaseUri,parseISO8601:parseISO8601,compareDateComponents:compareDateComponents,iso8601:iso8601,normalizeUnicodeLiterals:normalizeUnicodeLiterals,lexicalFormLiteral:lexicalFormLiteral,registerIndexedDB:registerIndexedDB,guid:guid,hashTerm:hashTerm,keys:keys,values:values,size:size,map:map,each:each,forEach:each,include:include,reject:reject,remove:reject,clone:clone,create:create,whilst:whilst,eachSeries:eachSeries,eachParallel:eachParallel,seq:seq,yieldFrequency:function(a){yieldFrequency=a}}}).call(this,_dereq_("7YKIPe"))},{"7YKIPe":10}]},{},[41])(41)});