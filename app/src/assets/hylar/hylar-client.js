!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){},{}],2:[function(a,b,c){function h(a,b){return d.isUndefined(b)?""+b:d.isNumber(b)&&!isFinite(b)?b.toString():d.isFunction(b)||d.isRegExp(b)?b.toString():b}function i(a,b){return d.isString(a)?a.length<b?a:a.slice(0,b):a}function j(a){return i(JSON.stringify(a.actual,h),128)+" "+a.operator+" "+i(JSON.stringify(a.expected,h),128)}function k(a,b,c,d,e){throw new g.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function l(a,b){a||k(a,!0,b,"==",g.ok)}function m(a,b){if(a===b)return!0;if(d.isBuffer(a)&&d.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return d.isDate(a)&&d.isDate(b)?a.getTime()===b.getTime():d.isRegExp(a)&&d.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:d.isObject(a)||d.isObject(b)?o(a,b):a==b}function n(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function o(a,b){if(d.isNullOrUndefined(a)||d.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(d.isPrimitive(a)||d.isPrimitive(b))return a===b;var c=n(a),f=n(b);if(c&&!f||!c&&f)return!1;if(c)return a=e.call(a),b=e.call(b),m(a,b);var i,j,g=r(a),h=r(b);if(g.length!=h.length)return!1;for(g.sort(),h.sort(),j=g.length-1;j>=0;j--)if(g[j]!=h[j])return!1;for(j=g.length-1;j>=0;j--)if(i=g[j],!m(a[i],b[i]))return!1;return!0}function p(a,b){return!(!a||!b)&&("[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b||!0===b.call({},a))}function q(a,b,c,e){var f;d.isString(c)&&(e=c,c=null);try{b()}catch(a){f=a}if(e=(c&&c.name?" ("+c.name+").":".")+(e?" "+e:"."),a&&!f&&k(f,c,"Missing expected exception"+e),!a&&p(f,c)&&k(f,c,"Got unwanted exception"+e),a&&f&&c&&!p(f,c)||!a&&f)throw f}var d=a("util/"),e=Array.prototype.slice,f=Object.prototype.hasOwnProperty,g=b.exports=l;g.AssertionError=function(b){this.name="AssertionError",this.actual=b.actual,this.expected=b.expected,this.operator=b.operator,b.message?(this.message=b.message,this.generatedMessage=!1):(this.message=j(this),this.generatedMessage=!0);var c=b.stackStartFunction||k;if(Error.captureStackTrace)Error.captureStackTrace(this,c);else{var d=new Error;if(d.stack){var e=d.stack,f=c.name,g=e.indexOf("\n"+f);if(g>=0){var h=e.indexOf("\n",g+1);e=e.substring(h+1)}this.stack=e}}},d.inherits(g.AssertionError,Error),g.fail=k,g.ok=l,g.equal=function(b,c,d){b!=c&&k(b,c,d,"==",g.equal)},g.notEqual=function(b,c,d){b==c&&k(b,c,d,"!=",g.notEqual)},g.deepEqual=function(b,c,d){m(b,c)||k(b,c,d,"deepEqual",g.deepEqual)},g.notDeepEqual=function(b,c,d){m(b,c)&&k(b,c,d,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(b,c,d){b!==c&&k(b,c,d,"===",g.strictEqual)},g.notStrictEqual=function(b,c,d){b===c&&k(b,c,d,"!==",g.notStrictEqual)},g.throws=function(a,b,c){q.apply(this,[!0].concat(e.call(arguments)))},g.doesNotThrow=function(a,b){q.apply(this,[!1].concat(e.call(arguments)))},g.ifError=function(a){if(a)throw a};var r=Object.keys||function(a){var b=[];for(var c in a)f.call(a,c)&&b.push(c);return b}},{"util/":43}],3:[function(a,b,c){arguments[4][1][0].apply(c,arguments)},{dup:1}],4:[function(a,b,c){(function(b){function h(){function a(){}try{var b=new Uint8Array(1);return b.foo=function(){return 42},b.constructor=a,42===b.foo()&&b.constructor===a&&"function"==typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(a){return!1}}function i(){return j.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function j(a){return this instanceof j?(this.length=0,this.parent=void 0,"number"==typeof a?k(this,a):"string"==typeof a?l(this,a,arguments.length>1?arguments[1]:"utf8"):m(this,a)):arguments.length>1?new j(a,arguments[1]):new j(a)}function k(a,b){if(a=t(a,b<0?0:0|u(b)),!j.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;c++)a[c]=0;return a}function l(a,b,c){return"string"==typeof c&&""!==c||(c="utf8"),a=t(a,0|w(b,c)),a.write(b,c),a}function m(a,b){if(j.isBuffer(b))return n(a,b);if(f(b))return o(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(b.buffer instanceof ArrayBuffer)return p(a,b);if(b instanceof ArrayBuffer)return q(a,b)}return b.length?r(a,b):s(a,b)}function n(a,b){var c=0|u(b.length);return a=t(a,c),b.copy(a,0,0,c),a}function o(a,b){var c=0|u(b.length);a=t(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function p(a,b){var c=0|u(b.length);a=t(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function q(a,b){return j.TYPED_ARRAY_SUPPORT?(b.byteLength,a=j._augment(new Uint8Array(b))):a=p(a,new Uint8Array(b)),a}function r(a,b){var c=0|u(b.length);a=t(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function s(a,b){var c,d=0;"Buffer"===b.type&&f(b.data)&&(c=b.data,d=0|u(c.length)),a=t(a,d);for(var e=0;e<d;e+=1)a[e]=255&c[e];return a}function t(a,b){return j.TYPED_ARRAY_SUPPORT?(a=j._augment(new Uint8Array(b)),a.__proto__=j.prototype):(a.length=b,a._isBuffer=!0),0!==b&&b<=j.poolSize>>>1&&(a.parent=g),a}function u(a){if(a>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|a}function v(a,b){if(!(this instanceof v))return new v(a,b);var c=new j(a,b);return delete c.parent,c}function w(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return Y(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return _(a).length;default:if(d)return Y(a).length;b=(""+b).toLowerCase(),d=!0}}function x(a,b,c){var d=!1;if(b|=0,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),b<0&&(b=0),c>this.length&&(c=this.length),c<=b)return"";for(;;)switch(a){case"hex":return K(this,b,c);case"utf8":case"utf-8":return F(this,b,c);case"ascii":return I(this,b,c);case"binary":return J(this,b,c);case"base64":return E(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function y(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d))>e&&(d=e):d=e;var f=b.length;if(f%2!=0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function z(a,b,c,d){return aa(Y(b,a.length-c),a,c,d)}function A(a,b,c,d){return aa(Z(b),a,c,d)}function B(a,b,c,d){return A(a,b,c,d)}function C(a,b,c,d){return aa(_(b),a,c,d)}function D(a,b,c,d){return aa($(b,a.length-c),a,c,d)}function E(a,b,c){return 0===b&&c===a.length?d.fromByteArray(a):d.fromByteArray(a.slice(b,c))}function F(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128==(192&i)&&(l=(31&f)<<6|63&i)>127&&(g=l);break;case 3:i=a[e+1],j=a[e+2],128==(192&i)&&128==(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j)>2047&&(l<55296||l>57343)&&(g=l);break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128==(192&i)&&128==(192&j)&&128==(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k)>65535&&l<1114112&&(g=l)}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return H(d)}function H(a){var b=a.length;if(b<=G)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=G));return c}function I(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(127&a[e]);return d}function J(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(a[e]);return d}function K(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;f++)e+=X(a[f]);return e}function L(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function M(a,b,c){if(a%1!=0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function N(a,b,c,d,e,f){if(!j.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>e||b<f)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function O(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function P(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function Q(a,b,c,d,e,f){if(b>e||b<f)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(c<0)throw new RangeError("index out of range")}function R(a,b,c,d,f){return f||Q(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(a,b,c,d,23,4),c+4}function S(a,b,c,d,f){return f||Q(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(a,b,c,d,52,8),c+8}function V(a){if(a=W(a).replace(U,""),a.length<2)return"";for(;a.length%4!=0;)a+="=";return a}function W(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function X(a){return a<16?"0"+a.toString(16):a.toString(16)}function Y(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;g++){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=e-55296<<10|c-56320|65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function Z(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function $(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function _(a){return d.toByteArray(V(a))}function aa(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}var d=a("base64-js"),e=a("ieee754"),f=a("is-array");c.Buffer=j,c.SlowBuffer=v,c.INSPECT_MAX_BYTES=50,j.poolSize=8192;var g={};j.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:h(),j.TYPED_ARRAY_SUPPORT&&(j.prototype.__proto__=Uint8Array.prototype,j.__proto__=Uint8Array),j.isBuffer=function(b){return!(null==b||!b._isBuffer)},j.compare=function(b,c){if(!j.isBuffer(b)||!j.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var d=b.length,e=c.length,f=0,g=Math.min(d,e);f<g&&b[f]===c[f];)++f;return f!==g&&(d=b[f],e=c[f]),d<e?-1:e<d?1:0},j.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},j.concat=function(b,c){if(!f(b))throw new TypeError("list argument must be an Array of Buffers.");if(0===b.length)return new j(0);var d;if(void 0===c)for(c=0,d=0;d<b.length;d++)c+=b[d].length;var e=new j(c),g=0;for(d=0;d<b.length;d++){var h=b[d];h.copy(e,g),g+=h.length}return e},j.byteLength=w,j.prototype.length=void 0,j.prototype.parent=void 0,j.prototype.toString=function(){var b=0|this.length;return 0===b?"":0===arguments.length?F(this,0,b):x.apply(this,arguments)},j.prototype.equals=function(b){if(!j.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===j.compare(this,b)},j.prototype.inspect=function(){var b="",d=c.INSPECT_MAX_BYTES;return this.length>0&&(b=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(b+=" ... ")),"<Buffer "+b+">"},j.prototype.compare=function(b){if(!j.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?0:j.compare(this,b)},j.prototype.indexOf=function(b,c){function d(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[-1===d?0:e-d]){if(-1===d&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c>>=0,0===this.length)return-1;if(c>=this.length)return-1;if(c<0&&(c=Math.max(this.length+c,0)),"string"==typeof b)return 0===b.length?-1:String.prototype.indexOf.call(this,b,c);if(j.isBuffer(b))return d(this,b,c);if("number"==typeof b)return j.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,b,c):d(this,[b],c);throw new TypeError("val must be string, number or Buffer")},j.prototype.get=function(b){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(b)},j.prototype.set=function(b,c){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(b,c)},j.prototype.write=function(b,c,d,e){if(void 0===c)e="utf8",d=this.length,c=0;else if(void 0===d&&"string"==typeof c)e=c,d=this.length,c=0;else if(isFinite(c))c|=0,isFinite(d)?(d|=0,void 0===e&&(e="utf8")):(e=d,d=void 0);else{var f=e;e=c,c=0|d,d=f}var g=this.length-c;if((void 0===d||d>g)&&(d=g),b.length>0&&(d<0||c<0)||c>this.length)throw new RangeError("attempt to write outside buffer bounds");e||(e="utf8");for(var h=!1;;)switch(e){case"hex":return y(this,b,c,d);case"utf8":case"utf-8":return z(this,b,c,d);case"ascii":return A(this,b,c,d);case"binary":return B(this,b,c,d);case"base64":return C(this,b,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,b,c,d);default:if(h)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),h=!0}},j.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var G=4096;j.prototype.slice=function(b,c){var d=this.length;b=~~b,c=void 0===c?d:~~c,b<0?(b+=d)<0&&(b=0):b>d&&(b=d),c<0?(c+=d)<0&&(c=0):c>d&&(c=d),c<b&&(c=b);var e;if(j.TYPED_ARRAY_SUPPORT)e=j._augment(this.subarray(b,c));else{var f=c-b;e=new j(f,void 0);for(var g=0;g<f;g++)e[g]=this[g+b]}return e.length&&(e.parent=this.parent||this),e},j.prototype.readUIntLE=function(b,c,d){b|=0,c|=0,d||M(b,c,this.length);for(var e=this[b],f=1,g=0;++g<c&&(f*=256);)e+=this[b+g]*f;return e},j.prototype.readUIntBE=function(b,c,d){b|=0,c|=0,d||M(b,c,this.length);for(var e=this[b+--c],f=1;c>0&&(f*=256);)e+=this[b+--c]*f;return e},j.prototype.readUInt8=function(b,c){return c||M(b,1,this.length),this[b]},j.prototype.readUInt16LE=function(b,c){return c||M(b,2,this.length),this[b]|this[b+1]<<8},j.prototype.readUInt16BE=function(b,c){return c||M(b,2,this.length),this[b]<<8|this[b+1]},j.prototype.readUInt32LE=function(b,c){return c||M(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]},j.prototype.readUInt32BE=function(b,c){return c||M(b,4,this.length),16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])},j.prototype.readIntLE=function(b,c,d){b|=0,c|=0,d||M(b,c,this.length);for(var e=this[b],f=1,g=0;++g<c&&(f*=256);)e+=this[b+g]*f;return f*=128,e>=f&&(e-=Math.pow(2,8*c)),e},j.prototype.readIntBE=function(b,c,d){b|=0,c|=0,d||M(b,c,this.length);for(var e=c,f=1,g=this[b+--e];e>0&&(f*=256);)g+=this[b+--e]*f;return f*=128,g>=f&&(g-=Math.pow(2,8*c)),g},j.prototype.readInt8=function(b,c){return c||M(b,1,this.length),128&this[b]?-1*(255-this[b]+1):this[b]},j.prototype.readInt16LE=function(b,c){c||M(b,2,this.length);var d=this[b]|this[b+1]<<8;return 32768&d?4294901760|d:d},j.prototype.readInt16BE=function(b,c){c||M(b,2,this.length);var d=this[b+1]|this[b]<<8;return 32768&d?4294901760|d:d},j.prototype.readInt32LE=function(b,c){return c||M(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},j.prototype.readInt32BE=function(b,c){return c||M(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},j.prototype.readFloatLE=function(b,c){return c||M(b,4,this.length),e.read(this,b,!0,23,4)},j.prototype.readFloatBE=function(b,c){return c||M(b,4,this.length),e.read(this,b,!1,23,4)},j.prototype.readDoubleLE=function(b,c){return c||M(b,8,this.length),e.read(this,b,!0,52,8)},j.prototype.readDoubleBE=function(b,c){return c||M(b,8,this.length),e.read(this,b,!1,52,8)},j.prototype.writeUIntLE=function(b,c,d,e){b=+b,c|=0,d|=0,e||N(this,b,c,d,Math.pow(2,8*d),0);var f=1,g=0;for(this[c]=255&b;++g<d&&(f*=256);)this[c+g]=b/f&255;return c+d},j.prototype.writeUIntBE=function(b,c,d,e){b=+b,c|=0,d|=0,e||N(this,b,c,d,Math.pow(2,8*d),0);var f=d-1,g=1;for(this[c+f]=255&b;--f>=0&&(g*=256);)this[c+f]=b/g&255;return c+d},j.prototype.writeUInt8=function(b,c,d){return b=+b,c|=0,d||N(this,b,c,1,255,0),j.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),this[c]=255&b,c+1},j.prototype.writeUInt16LE=function(b,c,d){return b=+b,c|=0,d||N(this,b,c,2,65535,0),j.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8):O(this,b,c,!0),c+2},j.prototype.writeUInt16BE=function(b,c,d){return b=+b,c|=0,d||N(this,b,c,2,65535,0),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=255&b):O(this,b,c,!1),c+2},j.prototype.writeUInt32LE=function(b,c,d){return b=+b,c|=0,d||N(this,b,c,4,4294967295,0),j.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=255&b):P(this,b,c,!0),c+4},j.prototype.writeUInt32BE=function(b,c,d){return b=+b,c|=0,d||N(this,b,c,4,4294967295,0),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b):P(this,b,c,!1),c+4},j.prototype.writeIntLE=function(b,c,d,e){if(b=+b,c|=0,!e){var f=Math.pow(2,8*d-1);N(this,b,c,d,f-1,-f)}var g=0,h=1,i=b<0?1:0;for(this[c]=255&b;++g<d&&(h*=256);)this[c+g]=(b/h>>0)-i&255;return c+d},j.prototype.writeIntBE=function(b,c,d,e){if(b=+b,c|=0,!e){var f=Math.pow(2,8*d-1);N(this,b,c,d,f-1,-f)}var g=d-1,h=1,i=b<0?1:0;for(this[c+g]=255&b;--g>=0&&(h*=256);)this[c+g]=(b/h>>0)-i&255;return c+d},j.prototype.writeInt8=function(b,c,d){return b=+b,c|=0,d||N(this,b,c,1,127,-128),j.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),b<0&&(b=255+b+1),this[c]=255&b,c+1},j.prototype.writeInt16LE=function(b,c,d){return b=+b,c|=0,d||N(this,b,c,2,32767,-32768),j.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8):O(this,b,c,!0),c+2},j.prototype.writeInt16BE=function(b,c,d){return b=+b,c|=0,d||N(this,b,c,2,32767,-32768),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=255&b):O(this,b,c,!1),c+2},j.prototype.writeInt32LE=function(b,c,d){return b=+b,c|=0,d||N(this,b,c,4,2147483647,-2147483648),j.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):P(this,b,c,!0),c+4},j.prototype.writeInt32BE=function(b,c,d){return b=+b,c|=0,d||N(this,b,c,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b):P(this,b,c,!1),c+4},j.prototype.writeFloatLE=function(b,c,d){return R(this,b,c,!0,d)},j.prototype.writeFloatBE=function(b,c,d){return R(this,b,c,!1,d)},j.prototype.writeDoubleLE=function(b,c,d){return S(this,b,c,!0,d)},j.prototype.writeDoubleBE=function(b,c,d){return S(this,b,c,!1,d)},j.prototype.copy=function(b,c,d,e){if(d||(d=0),e||0===e||(e=this.length),c>=b.length&&(c=b.length),c||(c=0),e>0&&e<d&&(e=d),e===d)return 0;if(0===b.length||0===this.length)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("sourceStart out of bounds");if(e<0)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),b.length-c<e-d&&(e=b.length-c+d);var g,f=e-d;if(this===b&&d<c&&c<e)for(g=f-1;g>=0;g--)b[g+c]=this[g+d];else if(f<1e3||!j.TYPED_ARRAY_SUPPORT)for(g=0;g<f;g++)b[g+c]=this[g+d];else b._set(this.subarray(d,d+f),c);return f},j.prototype.fill=function(b,c,d){if(b||(b=0),c||(c=0),d||(d=this.length),d<c)throw new RangeError("end < start");if(d!==c&&0!==this.length){if(c<0||c>=this.length)throw new RangeError("start out of bounds");if(d<0||d>this.length)throw new RangeError("end out of bounds");var e;if("number"==typeof b)for(e=c;e<d;e++)this[e]=b;else{var f=Y(b.toString()),g=f.length;for(e=c;e<d;e++)this[e]=f[e%g]}return this}},j.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(j.TYPED_ARRAY_SUPPORT)return new j(this).buffer;for(var b=new Uint8Array(this.length),c=0,d=b.length;c<d;c+=1)b[c]=this[c];return b.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var T=j.prototype;j._augment=function(b){return b.constructor=j,b._isBuffer=!0,b._set=b.set,b.get=T.get,b.set=T.set,b.write=T.write,b.toString=T.toString,b.toLocaleString=T.toString,b.toJSON=T.toJSON,b.equals=T.equals,b.compare=T.compare,b.indexOf=T.indexOf,b.copy=T.copy,b.slice=T.slice,b.readUIntLE=T.readUIntLE,b.readUIntBE=T.readUIntBE,b.readUInt8=T.readUInt8,b.readUInt16LE=T.readUInt16LE,b.readUInt16BE=T.readUInt16BE,b.readUInt32LE=T.readUInt32LE,b.readUInt32BE=T.readUInt32BE,b.readIntLE=T.readIntLE,b.readIntBE=T.readIntBE,b.readInt8=T.readInt8,b.readInt16LE=T.readInt16LE,b.readInt16BE=T.readInt16BE,b.readInt32LE=T.readInt32LE,b.readInt32BE=T.readInt32BE,b.readFloatLE=T.readFloatLE,b.readFloatBE=T.readFloatBE,b.readDoubleLE=T.readDoubleLE,b.readDoubleBE=T.readDoubleBE,b.writeUInt8=T.writeUInt8,b.writeUIntLE=T.writeUIntLE,b.writeUIntBE=T.writeUIntBE,b.writeUInt16LE=T.writeUInt16LE,b.writeUInt16BE=T.writeUInt16BE,b.writeUInt32LE=T.writeUInt32LE,b.writeUInt32BE=T.writeUInt32BE,b.writeIntLE=T.writeIntLE,b.writeIntBE=T.writeIntBE,b.writeInt8=T.writeInt8,b.writeInt16LE=T.writeInt16LE,b.writeInt16BE=T.writeInt16BE,b.writeInt32LE=T.writeInt32LE,b.writeInt32BE=T.writeInt32BE,b.writeFloatLE=T.writeFloatLE,b.writeFloatBE=T.writeFloatBE,b.writeDoubleLE=T.writeDoubleLE,b.writeDoubleBE=T.writeDoubleBE,b.fill=T.fill,b.inspect=T.inspect,b.toArrayBuffer=T.toArrayBuffer,b};var U=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":5,ieee754:6,"is-array":7}],5:[function(a,b,c){!function(a){"use strict";function k(a){var b=a.charCodeAt(0);return b===c||b===i?62:b===e||b===j?63:b<f?-1:b<f+10?b-f+26+26:b<h+26?b-h:b<g+26?b-g+26:void 0}function l(a){function l(a){h[j++]=a}var c,d,e,f,g,h;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=a.length;g="="===a.charAt(i-2)?2:"="===a.charAt(i-1)?1:0,h=new b(3*a.length/4-g),e=g>0?a.length-4:a.length;var j=0;for(c=0,d=0;c<e;c+=4,d+=3)f=k(a.charAt(c))<<18|k(a.charAt(c+1))<<12|k(a.charAt(c+2))<<6|k(a.charAt(c+3)),l((16711680&f)>>16),l((65280&f)>>8),l(255&f);return 2===g?(f=k(a.charAt(c))<<2|k(a.charAt(c+1))>>4,l(255&f)):1===g&&(f=k(a.charAt(c))<<10|k(a.charAt(c+1))<<4|k(a.charAt(c+2))>>2,l(f>>8&255),l(255&f)),h}function m(a){function h(a){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a)}function i(a){return h(a>>18&63)+h(a>>12&63)+h(a>>6&63)+h(63&a)}var b,f,g,c=a.length%3,e="";for(b=0,g=a.length-c;b<g;b+=3)f=(a[b]<<16)+(a[b+1]<<8)+a[b+2],e+=i(f);switch(c){case 1:f=a[a.length-1],e+=h(f>>2),e+=h(f<<4&63),e+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],e+=h(f>>10),e+=h(f>>4&63),e+=h(f<<2&63),e+="="}return e}var b="undefined"!=typeof Uint8Array?Uint8Array:Array,c="+".charCodeAt(0),e="/".charCodeAt(0),f="0".charCodeAt(0),g="a".charCodeAt(0),h="A".charCodeAt(0),i="-".charCodeAt(0),j="_".charCodeAt(0);a.toByteArray=l,a.fromByteArray=m}(void 0===c?this.base64js={}:c)},{}],6:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],7:[function(a,b,c){var d=Array.isArray,e=Object.prototype.toString;b.exports=d||function(a){return!!a&&"[object Array]"==e.call(a)}},{}],8:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if((b=arguments[1])instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners)&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace()),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function d(){this.removeListener(a,d),c||(c=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var c=!1;return d.listener=b,this.on(a,d),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){return this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],9:[function(a,b,c){var d=a("http"),e=b.exports;for(var f in d)d.hasOwnProperty(f)&&(e[f]=d[f]);e.request=function(a,b){return a||(a={}),a.scheme="https",a.protocol="https:",d.request.call(this,a,b)}},{http:34}],10:[function(a,b,c){"function"==typeof Object.create?b.exports=function(b,c){b.super_=c,b.prototype=Object.create(c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(b,c){b.super_=c;var d=function(){};d.prototype=c.prototype,b.prototype=new d,b.prototype.constructor=b}},{}],11:[function(a,b,c){b.exports=function(a){return!(null==a||!(a._isBuffer||a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)))}},{}],12:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],13:[function(a,b,c){c.endianness=function(){return"LE"},c.hostname=function(){return"undefined"!=typeof location?location.hostname:""},c.loadavg=function(){return[]},c.uptime=function(){return 0},c.freemem=function(){return Number.MAX_VALUE},c.totalmem=function(){return Number.MAX_VALUE},c.cpus=function(){return[]},c.type=function(){return"Browser"},c.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},c.networkInterfaces=c.getNetworkInterfaces=function(){return{}},c.arch=function(){return"javascript"},c.platform=function(){return"browser"},c.tmpdir=c.tmpDir=function(){return"/tmp"},c.EOL="\n"},{}],14:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function f(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,e=function(a){return d.exec(a).slice(1)};c.resolve=function(){for(var c="",d=!1,e=arguments.length-1;e>=-1&&!d;e--){var g=e>=0?arguments[e]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,d="/"===g.charAt(0))}return c=b(f(c.split("/"),function(a){return!!a}),!d).join("/"),(d?"/":"")+c||"."},c.normalize=function(a){var d=c.isAbsolute(a),e="/"===g(a,-1);return a=b(f(a.split("/"),function(a){return!!a}),!d).join("/"),a||d||(a="."),a&&e&&(a+="/"),(d?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(f(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=e(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=e(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return e(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:15}],15:[function(a,b,c){function i(){f=!1,g.length?e=g.concat(e):h=-1,e.length&&j()}function j(){if(!f){var a=setTimeout(i);f=!0;for(var b=e.length;b;){for(g=e,e=[];++h<b;)g&&g[h].run();h=-1,b=e.length}g=null,f=!1,clearTimeout(a)}}function k(a,b){this.fun=a,this.array=b}function l(){}var g,d=b.exports={},e=[],f=!1,h=-1;d.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];e.push(new k(a,b)),1!==e.length||f||setTimeout(j,0)},k.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(a){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(a){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],16:[function(a,b,c){(function(a){!function(d){function z(a){throw RangeError(u[a])}function A(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function B(a,b){var c=a.split("@"),d="";return c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(t,"."),d+A(a.split("."),b).join(".")}function C(a){for(var e,f,b=[],c=0,d=a.length;c<d;)e=a.charCodeAt(c++),e>=55296&&e<=56319&&c<d?(f=a.charCodeAt(c++),56320==(64512&f)?b.push(((1023&e)<<10)+(1023&f)+65536):(b.push(e),c--)):b.push(e);return b}function D(a){return A(a,function(a){var b="";return a>65535&&(a-=65536,b+=x(a>>>10&1023|55296),a=56320|1023&a),b+=x(a)}).join("")}function E(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:j}function F(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function G(a,b,c){var d=0;for(a=c?w(a/n):a>>1,a+=w(a/b);a>v*l>>1;d+=j)a=w(a/v);return w(d+(v+1)*a/(a+m))}function H(a){var d,h,m,n,r,s,t,u,v,x,b=[],c=a.length,e=0,f=p,g=o;for(h=a.lastIndexOf(q),h<0&&(h=0),m=0;m<h;++m)a.charCodeAt(m)>=128&&z("not-basic"),b.push(a.charCodeAt(m));for(n=h>0?h+1:0;n<c;){for(r=e,s=1,t=j;n>=c&&z("invalid-input"),u=E(a.charCodeAt(n++)),(u>=j||u>w((i-e)/s))&&z("overflow"),e+=u*s,v=t<=g?k:t>=g+l?l:t-g,!(u<v);t+=j)x=j-v,s>w(i/x)&&z("overflow"),s*=x;d=b.length+1,g=G(e-r,d,0==r),w(e/d)>i-f&&z("overflow"),f+=w(e/d),e%=d,b.splice(e++,0,f)}return D(b)}function I(a){var b,c,d,e,f,g,h,m,n,r,s,u,v,y,A,t=[];for(a=C(a),u=a.length,b=p,c=0,f=o,g=0;g<u;++g)(s=a[g])<128&&t.push(x(s));for(d=e=t.length,e&&t.push(q);d<u;){for(h=i,g=0;g<u;++g)(s=a[g])>=b&&s<h&&(h=s);for(v=d+1,h-b>w((i-c)/v)&&z("overflow"),c+=(h-b)*v,b=h,g=0;g<u;++g)if(s=a[g],s<b&&++c>i&&z("overflow"),s==b){for(m=c,n=j;r=n<=f?k:n>=f+l?l:n-f,!(m<r);n+=j)A=m-r,y=j-r,t.push(x(F(r+A%y,0))),m=w(A/y);t.push(x(F(m,0))),f=G(c,v,d==e),c=0,++d}++c,++b}return t.join("")}function J(a){return B(a,function(a){return r.test(a)?H(a.slice(4).toLowerCase()):a})}function K(a){return B(a,function(a){return s.test(a)?"xn--"+I(a):a})}var e="object"==typeof c&&c&&!c.nodeType&&c,f="object"==typeof b&&b&&!b.nodeType&&b,g="object"==typeof a&&a;g.global!==g&&g.window!==g&&g.self!==g||(d=g);var h,y,i=2147483647,j=36,k=1,l=26,m=38,n=700,o=72,p=128,q="-",r=/^xn--/,s=/[^\x20-\x7E]/,t=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=j-k,w=Math.floor,x=String.fromCharCode;if(h={version:"1.3.2",ucs2:{decode:C,encode:D},decode:H,encode:I,toASCII:K,toUnicode:J},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return h});else if(e&&f)if(b.exports==e)f.exports=h;else for(y in h)h.hasOwnProperty(y)&&(e[y]=h[y]);else d.punycode=h}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;k<j;++k){var n,o,p,q,l=a[k].replace(h,"%20"),m=l.indexOf(c);m>=0?(n=l.substr(0,m),o=l.substr(m+1)):(n=l,o=""),p=decodeURIComponent(n),q=decodeURIComponent(o),d(g,p)?e(g[p])?g[p].push(q):g[p]=[g[p],q]:g[p]=q}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],18:[function(a,b,c){"use strict";function f(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var d=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?f(g(a),function(g){var h=encodeURIComponent(d(g))+c;return e(a[g])?f(a[g],function(a){return h+encodeURIComponent(d(a))}).join(b):h+encodeURIComponent(d(a[g]))}).join(b):h?encodeURIComponent(d(h))+c+encodeURIComponent(d(a)):""};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],19:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":17,"./encode":18}],20:[function(a,b,c){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":21}],21:[function(a,b,c){"use strict";function l(a){if(!(this instanceof l))return new l(a);g.call(this,a),h.call(this,a),a&&!1===a.readable&&(this.readable=!1),a&&!1===a.writable&&(this.writable=!1),this.allowHalfOpen=!0,a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",m)}function m(){this.allowHalfOpen||this._writableState.ended||e(n,this)}function n(a){a.end()}var d=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};b.exports=l;var e=a("process-nextick-args"),f=a("core-util-is");f.inherits=a("inherits");var g=a("./_stream_readable"),h=a("./_stream_writable");f.inherits(l,g);for(var i=d(h.prototype),j=0;j<i.length;j++){var k=i[j];l.prototype[k]||(l.prototype[k]=h.prototype[k])}},{"./_stream_readable":23,"./_stream_writable":25,"core-util-is":26,inherits:10,"process-nextick-args":27}],22:[function(a,b,c){"use strict";function f(a){if(!(this instanceof f))return new f(a);d.call(this,a)}b.exports=f;var d=a("./_stream_transform"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(f,d),f.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":24,"core-util-is":26,inherits:10}],23:[function(a,b,c){(function(c){"use strict";function n(b,c){var d=a("./_stream_duplex");b=b||{},this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var e=b.highWaterMark,f=this.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(m||(m=a("string_decoder/").StringDecoder),this.decoder=new m(b.encoding),this.encoding=b.encoding)}function o(b){a("./_stream_duplex");if(!(this instanceof o))return new o(b);this._readableState=new n(b,this),this.readable=!0,b&&"function"==typeof b.read&&(this._read=b.read),i.call(this)}function p(a,b,c,d,e){var f=u(b,c);if(f)a.emit("error",f);else if(null===c)b.reading=!1,v(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var g=new Error("stream.push() after EOF");a.emit("error",g)}else if(b.endEmitted&&e){var g=new Error("stream.unshift() after end event");a.emit("error",g)}else!b.decoder||e||d||(c=b.decoder.write(c)),e||(b.reading=!1),b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&w(a)),y(a,b);else e||(b.reading=!1);return q(b)}function q(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function s(a){return a>=r?a=r:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function t(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:null===a||isNaN(a)?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:a<=0?0:(a>b.highWaterMark&&(b.highWaterMark=s(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function u(a,b){var c=null;return f.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function v(a,b){if(!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,w(a)}}function w(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(l("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?d(x,a):x(a))}function x(a){l("emit readable"),a.emit("readable"),E(a)}function y(a,b){b.readingMore||(b.readingMore=!0,d(z,a,b))}function z(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(l("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function A(a){return function(){var b=a._readableState;l("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&h(a,"data")&&(b.flowing=!0,E(a))}}function B(a){l("readable nexttick read 0"),a.read(0)}function C(a,b){b.resumeScheduled||(b.resumeScheduled=!0,d(D,a,b))}function D(a,b){b.reading||(l("resume read 0"),a.read(0)),b.resumeScheduled=!1,a.emit("resume"),E(a),b.flowing&&!b.reading&&a.read(0)}function E(a){var b=a._readableState;if(l("flow",b.flowing),b.flowing)do{var c=a.read()}while(null!==c&&b.flowing)}function F(a,b){var h,c=b.buffer,d=b.length,e=!!b.decoder,g=!!b.objectMode;if(0===c.length)return null;if(0===d)h=null;else if(g)h=c.shift();else if(!a||a>=d)h=e?c.join(""):1===c.length?c[0]:f.concat(c,d),c.length=0;else if(a<c[0].length){var i=c[0];h=i.slice(0,a),c[0]=i.slice(a)}else if(a===c[0].length)h=c.shift();else{h=e?"":new f(a);for(var j=0,k=0,l=c.length;k<l&&j<a;k++){var i=c[0],m=Math.min(a-j,i.length);e?h+=i.slice(0,m):i.copy(h,j,0,m),m<i.length?c[0]=i.slice(m):c.shift(),j+=m}}return h}function G(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");b.endEmitted||(b.ended=!0,d(H,b,a))}function H(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function I(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function J(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}b.exports=o;var d=a("process-nextick-args"),e=a("isarray"),f=a("buffer").Buffer;o.ReadableState=n;var i,h=(a("events"),function(a,b){return a.listeners(b).length});!function(){try{i=a("stream")}catch(a){}finally{i||(i=a("events").EventEmitter)}}();var f=a("buffer").Buffer,j=a("core-util-is");j.inherits=a("inherits");var l,k=a("util");l=k&&k.debuglog?k.debuglog("stream"):function(){};var m;j.inherits(o,i),o.prototype.push=function(a,b){var c=this._readableState;return c.objectMode||"string"!=typeof a||(b=b||c.defaultEncoding)!==c.encoding&&(a=new f(a,b),b=""),p(this,c,a,b,!1)},o.prototype.unshift=function(a){return p(this,this._readableState,a,"",!0)},o.prototype.isPaused=function(){return!1===this._readableState.flowing},o.prototype.setEncoding=function(b){return m||(m=a("string_decoder/").StringDecoder),this._readableState.decoder=new m(b),this._readableState.encoding=b,this};var r=8388608;o.prototype.read=function(a){l("read",a);var b=this._readableState,c=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return l("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?G(this):w(this),null;if(0===(a=t(a,b))&&b.ended)return 0===b.length&&G(this),null;var d=b.needReadable;l("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,l("length less than watermark",d)),(b.ended||b.reading)&&(d=!1,l("reading or ended",d)),d&&(l("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=t(c,b));var e;return e=a>0?F(a,b):null,null===e&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),c!==a&&b.ended&&0===b.length&&G(this),null!==e&&this.emit("data",e),e},o.prototype._read=function(a){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(a,b){function k(a){l("onunpipe"),a===f&&p()}function m(){l("onend"),a.end()}function p(){l("cleanup"),a.removeListener("close",s),a.removeListener("finish",t),a.removeListener("drain",n),a.removeListener("error",r),a.removeListener("unpipe",k),f.removeListener("end",m),f.removeListener("end",p),f.removeListener("data",q),o=!0,!g.awaitDrain||a._writableState&&!a._writableState.needDrain||n()}function q(b){l("ondata"),!1===a.write(b)&&(1!==g.pipesCount||g.pipes[0]!==a||1!==f.listenerCount("data")||o||(l("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++),f.pause())}function r(b){l("onerror",b),u(),a.removeListener("error",r),0===h(a,"error")&&a.emit("error",b)}function s(){a.removeListener("finish",t),u()}function t(){l("onfinish"),a.removeListener("close",s),u()}function u(){l("unpipe"),f.unpipe(a)}var f=this,g=this._readableState;switch(g.pipesCount){case 0:g.pipes=a;break;case 1:g.pipes=[g.pipes,a];break;default:g.pipes.push(a)}g.pipesCount+=1,l("pipe count=%d opts=%j",g.pipesCount,b);var i=(!b||!1!==b.end)&&a!==c.stdout&&a!==c.stderr,j=i?m:p;g.endEmitted?d(j):f.once("end",j),a.on("unpipe",k);var n=A(f);a.on("drain",n);var o=!1;return f.on("data",q),a._events&&a._events.error?e(a._events.error)?a._events.error.unshift(r):a._events.error=[r,a._events.error]:a.on("error",r),a.once("close",s),a.once("finish",t),a.emit("pipe",f),g.flowing||(l("pipe resume"),f.resume()),a},o.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;e<d;e++)c[e].emit("unpipe",this);return this}var e=J(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},o.prototype.on=function(a,b){var c=i.prototype.on.call(this,a,b);if("data"===a&&!1!==this._readableState.flowing&&this.resume(),"readable"===a&&this.readable){var e=this._readableState;e.readableListening||(e.readableListening=!0,e.emittedReadable=!1,e.needReadable=!0,e.reading?e.length&&w(this,e):d(B,this))}return c},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var a=this._readableState;return a.flowing||(l("resume"),a.flowing=!0,C(this,a)),this},o.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(l("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(l("wrapped data"),b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){d.push(e)||(c=!0,a.pause())}});for(var e in a)void 0===this[e]&&"function"==typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));return I(["error","close","destroy","pause","resume"],function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){l("wrapped _read",b),c&&(c=!1,a.resume())},d},o._fromList=F}).call(this,a("_process"))},{"./_stream_duplex":21,_process:15,buffer:4,"core-util-is":26,events:8,inherits:10,isarray:12,"process-nextick-args":27,"string_decoder/":39,util:3}],24:[function(a,b,c){"use strict";function f(a){this.afterTransform=function(b,c){return g(a,b,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function g(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function h(a){if(!(this instanceof h))return new h(a);d.call(this,a),this._transformState=new f(this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(a){i(b,a)}):i(b)})}function i(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=h;var d=a("./_stream_duplex"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(h,d),h.prototype.push=function(a,b){return this._transformState.needTransform=!1,d.prototype.push.call(this,a,b)},h.prototype._transform=function(a,b,c){throw new Error("not implemented")},h.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},h.prototype._read=function(a){var b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./_stream_duplex":21,"core-util-is":26,inherits:10}],25:[function(a,b,c){"use strict";function i(){}function j(a,b,c){this.chunk=a,this.encoding=b,this.callback=c,this.next=null}function k(b,c){var d=a("./_stream_duplex");b=b||{},this.objectMode=!!b.objectMode,c instanceof d&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var e=b.highWaterMark,f=this.objectMode?16:16384;this.highWaterMark=e||0===e?e:f,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var g=!1===b.decodeStrings;this.decodeStrings=!g,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){t(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function l(b){var c=a("./_stream_duplex");if(!(this instanceof l||this instanceof c))return new l(b);this._writableState=new k(b,this),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev)),h.call(this)}function m(a,b){var c=new Error("write after end");a.emit("error",c),d(b,c)}function n(a,b,c,f){var g=!0;if(!e.isBuffer(c)&&"string"!=typeof c&&null!==c&&void 0!==c&&!b.objectMode){var h=new TypeError("Invalid non-string/buffer chunk");a.emit("error",h),d(f,h),g=!1}return g}function o(a,b,c){return a.objectMode||!1===a.decodeStrings||"string"!=typeof b||(b=new e(b,c)),b}function p(a,b,c,d,f){c=o(b,c,d),e.isBuffer(c)&&(d="buffer");var g=b.objectMode?1:c.length;b.length+=g;var h=b.length<b.highWaterMark;if(h||(b.needDrain=!0),b.writing||b.corked){var i=b.lastBufferedRequest;b.lastBufferedRequest=new j(c,d,f),i?i.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest}else q(a,b,!1,g,c,d,f);return h}function q(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function r(a,b,c,e,f){--b.pendingcb,c?d(f,e):f(e),a._writableState.errorEmitted=!0,a.emit("error",e)}function s(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function t(a,b){var c=a._writableState,e=c.sync,f=c.writecb;if(s(c),b)r(a,c,e,b,f);else{var g=x(c);g||c.corked||c.bufferProcessing||!c.bufferedRequest||w(a,c),e?d(u,a,c,g,f):u(a,c,g,f)}}function u(a,b,c,d){c||v(a,b),b.pendingcb--,d(),z(a,b)}function v(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function w(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){for(var d=[],e=[];c;)e.push(c.callback),d.push(c),c=c.next;b.pendingcb++,b.lastBufferedRequest=null,q(a,b,!0,b.length,d,"",function(a){for(var c=0;c<e.length;c++)b.pendingcb--,e[c](a)})}else{for(;c;){var f=c.chunk,g=c.encoding,h=c.callback,i=b.objectMode?1:f.length;if(q(a,b,!1,i,f,g,h),c=c.next,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequest=c,b.bufferProcessing=!1}function x(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function y(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function z(a,b){var c=x(b);return c&&(0===b.pendingcb?(y(a,b),b.finished=!0,a.emit("finish")):y(a,b)),c}function A(a,b,c){b.ending=!0,z(a,b),c&&(b.finished?d(c):a.once("finish",c)),b.ended=!0}b.exports=l;var d=a("process-nextick-args"),e=a("buffer").Buffer;l.WritableState=k;var f=a("core-util-is");f.inherits=a("inherits");var h,g={deprecate:a("util-deprecate")};!function(){try{h=a("stream")}catch(a){}finally{h||(h=a("events").EventEmitter)}}();var e=a("buffer").Buffer;f.inherits(l,h),k.prototype.getBuffer=function(){for(var b=this.bufferedRequest,c=[];b;)c.push(b),b=b.next;return c},function(){try{Object.defineProperty(k.prototype,"buffer",{get:g.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(a){}}(),l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},l.prototype.write=function(a,b,c){var d=this._writableState,f=!1;return"function"==typeof b&&(c=b,b=null),e.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),"function"!=typeof c&&(c=i),d.ended?m(this,c):n(this,d,a,c)&&(d.pendingcb++,f=p(this,d,a,b,c)),f},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||w(this,a))},l.prototype.setDefaultEncoding=function(b){if("string"==typeof b&&(b=b.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((b+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+b);this._writableState.defaultEncoding=b},l.prototype._write=function(a,b,c){c(new Error("not implemented"))},l.prototype._writev=null,l.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!==a&&void 0!==a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||A(this,d,c)}},{"./_stream_duplex":21,buffer:4,"core-util-is":26,events:8,inherits:10,"process-nextick-args":27,"util-deprecate":28}],26:[function(a,b,c){(function(a){function b(a){return Array.isArray(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return l(a)&&"[object RegExp]"===r(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return l(a)&&"[object Date]"===r(a)}function n(a){return l(a)&&("[object Error]"===r(a)||a instanceof Error)}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||void 0===a}function q(b){return a.isBuffer(b)}function r(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=q}).call(this,{isBuffer:a("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":11}],27:[function(a,b,c){(function(a){"use strict";function c(b){for(var c=new Array(arguments.length-1),d=0;d<c.length;)c[d++]=arguments[d];a.nextTick(function(){b.apply(null,c)})}b.exports=c}).call(this,a("_process"))},{_process:15}],28:[function(a,b,c){(function(a){function c(a,b){function e(){if(!c){if(d("throwDeprecation"))throw new Error(b);d("traceDeprecation")?console.trace(b):console.warn(b),c=!0}return a.apply(this,arguments)}if(d("noDeprecation"))return a;var c=!1;return e}function d(b){try{if(!a.localStorage)return!1}catch(a){return!1}var c=a.localStorage[b];return null!=c&&"true"===String(c).toLowerCase()}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(a,b,c){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":22}],30:[function(a,b,c){var d=function(){try{return a("stream")}catch(a){}}();c=b.exports=a("./lib/_stream_readable.js"),c.Stream=d||c,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":21,"./lib/_stream_passthrough.js":22,"./lib/_stream_readable.js":23,"./lib/_stream_transform.js":24,"./lib/_stream_writable.js":25}],31:[function(a,b,c){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":24}],32:[function(a,b,c){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":25}],33:[function(a,b,c){function f(){d.call(this)}b.exports=f;var d=a("events").EventEmitter;a("inherits")(f,d),f.Readable=a("readable-stream/readable.js"),f.Writable=a("readable-stream/writable.js"),f.Duplex=a("readable-stream/duplex.js"),f.Transform=a("readable-stream/transform.js"),f.PassThrough=a("readable-stream/passthrough.js"),f.Stream=f,f.prototype.pipe=function(a,b){function e(b){a.writable&&!1===a.write(b)&&c.pause&&c.pause()}function f(){c.readable&&c.resume&&c.resume()}function h(){g||(g=!0,a.end())}function i(){g||(g=!0,"function"==typeof a.destroy&&a.destroy())}function j(a){if(k(),0===d.listenerCount(this,"error"))throw a}function k(){c.removeListener("data",e),a.removeListener("drain",f),c.removeListener("end",h),c.removeListener("close",i),c.removeListener("error",j),a.removeListener("error",j),c.removeListener("end",k),c.removeListener("close",k),a.removeListener("close",k)}var c=this;c.on("data",e),a.on("drain",f),a._isStdio||b&&!1===b.end||(c.on("end",h),c.on("close",i));var g=!1;return c.on("error",j),a.on("error",j),c.on("end",k),c.on("close",k),a.on("close",k),a.emit("pipe",c),a}},{events:8,inherits:10,"readable-stream/duplex.js":20,"readable-stream/passthrough.js":29,"readable-stream/readable.js":30,"readable-stream/transform.js":31,"readable-stream/writable.js":32}],34:[function(a,b,c){var d=a("./lib/request"),e=a("xtend"),f=a("builtin-status-codes"),g=a("url"),h=c;h.request=function(a,b){a="string"==typeof a?g.parse(a):e(a);var c=a.protocol||"",f=a.hostname||a.host,h=a.port,i=a.path||"/";f&&-1!==f.indexOf(":")&&(f="["+f+"]"),a.url=(f?c+"//"+f:"")+(h?":"+h:"")+i,a.method=(a.method||"GET").toUpperCase(),a.headers=a.headers||{};var j=new d(a);return b&&j.on("response",b),j},h.get=function(b,c){var d=h.request(b,c);return d.end(),d},h.Agent=function(){},h.Agent.defaultMaxSockets=4,h.STATUS_CODES=f,h.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},{"./lib/request":36,"builtin-status-codes":38,url:40,xtend:44}],35:[function(a,b,c){(function(a){function d(a){try{return b.responseType=a,b.responseType===a}catch(a){}return!1}function g(a){return"function"==typeof a}c.fetch=g(a.fetch)&&g(a.ReadableByteStream),c.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),c.blobConstructor=!0}catch(a){}var b=new a.XMLHttpRequest;b.open("GET",a.location.host?"/":"https://example.com");var e=void 0!==a.ArrayBuffer,f=e&&g(a.ArrayBuffer.prototype.slice);c.arraybuffer=e&&d("arraybuffer"),c.msstream=!c.fetch&&f&&d("ms-stream"),c.mozchunkedarraybuffer=!c.fetch&&e&&d("moz-chunked-arraybuffer"),c.overrideMimeType=g(b.overrideMimeType),c.vbArray=g(a.VBArray),b=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],36:[function(a,b,c){(function(c,d,e){function l(a){return f.fetch?"fetch":f.mozchunkedarraybuffer?"moz-chunked-arraybuffer":f.msstream?"ms-stream":f.arraybuffer&&a?"arraybuffer":f.vbArray&&a?"text:vbarray":"text"}function n(a){try{return null!==a.status}catch(a){return!1}}var f=a("./capability"),g=a("inherits"),h=a("./response"),i=a("stream"),j=h.IncomingMessage,k=h.readyStates,m=b.exports=function(a){var b=this;i.Writable.call(b),b._opts=a,b._body=[],b._headers={},a.auth&&b.setHeader("Authorization","Basic "+new e(a.auth).toString("base64")),Object.keys(a.headers).forEach(function(c){b.setHeader(c,a.headers[c])});var c;if("prefer-streaming"===a.mode)c=!1;else if("allow-wrong-content-type"===a.mode)c=!f.overrideMimeType;else{if(a.mode&&"default"!==a.mode&&"prefer-fast"!==a.mode)throw new Error("Invalid value for opts.mode");c=!0}b._mode=l(c),b.on("finish",function(){b._onFinish()})};g(m,i.Writable),m.prototype.setHeader=function(a,b){var c=this,d=a.toLowerCase();-1===o.indexOf(d)&&(c._headers[d]={name:a,value:b})},m.prototype.getHeader=function(a){return this._headers[a.toLowerCase()].value},m.prototype.removeHeader=function(a){delete this._headers[a.toLowerCase()]},m.prototype._onFinish=function(){var a=this;if(!a._destroyed){var h,b=a._opts,g=a._headers;if("POST"!==b.method&&"PUT"!==b.method&&"PATCH"!==b.method||(h=f.blobConstructor?new d.Blob(a._body.map(function(a){return a.toArrayBuffer()}),{type:(g["content-type"]||{}).value||""}):e.concat(a._body).toString()),"fetch"===a._mode){var i=Object.keys(g).map(function(a){return[g[a].name,g[a].value]});d.fetch(a._opts.url,{method:a._opts.method,headers:i,body:h,mode:"cors",credentials:b.withCredentials?"include":"same-origin"}).then(function(b){a._fetchResponse=b,a._connect()},function(b){a.emit("error",b)})}else{var j=a._xhr=new d.XMLHttpRequest;try{j.open(a._opts.method,a._opts.url,!0)}catch(b){return void c.nextTick(function(){a.emit("error",b)})}"responseType"in j&&(j.responseType=a._mode.split(":")[0]),"withCredentials"in j&&(j.withCredentials=!!b.withCredentials),"text"===a._mode&&"overrideMimeType"in j&&j.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(g).forEach(function(a){j.setRequestHeader(g[a].name,g[a].value)}),a._response=null,j.onreadystatechange=function(){switch(j.readyState){case k.LOADING:case k.DONE:a._onXHRProgress()}},"moz-chunked-arraybuffer"===a._mode&&(j.onprogress=function(){a._onXHRProgress()}),j.onerror=function(){a._destroyed||a.emit("error",new Error("XHR error"))};try{j.send(h)}catch(b){return void c.nextTick(function(){a.emit("error",b)})}}}},m.prototype._onXHRProgress=function(){var a=this;n(a._xhr)&&!a._destroyed&&(a._response||a._connect(),a._response._onXHRProgress())},m.prototype._connect=function(){var a=this;a._destroyed||(a._response=new j(a._xhr,a._fetchResponse,a._mode),a.emit("response",a._response))},m.prototype._write=function(a,b,c){this._body.push(a),c()},m.prototype.abort=m.prototype.destroy=function(){var a=this;a._destroyed=!0,a._response&&(a._response._destroyed=!0),a._xhr&&a._xhr.abort()},m.prototype.end=function(a,b,c){var d=this;"function"==typeof a&&(c=a,a=void 0),i.Writable.prototype.end.call(d,a,b,c)},m.prototype.flushHeaders=function(){},m.prototype.setTimeout=function(){},m.prototype.setNoDelay=function(){},m.prototype.setSocketKeepAlive=function(){};var o=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"./capability":35,"./response":37,_process:15,buffer:4,inherits:10,stream:33}],37:[function(a,b,c){(function(b,d,e){var f=a("./capability"),g=a("inherits"),h=a("stream"),i=c.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},j=c.IncomingMessage=function(a,c,d){function m(){l.read().then(function(a){if(!g._destroyed){if(a.done)return void g.push(null);g.push(new e(a.value)),m()}})}var g=this;if(h.Readable.call(g),g._mode=d,g.headers={},g.rawHeaders=[],g.trailers={},g.rawTrailers=[],g.on("end",function(){b.nextTick(function(){g.emit("close")})}),"fetch"===d){g._fetchResponse=c,g.statusCode=c.status,g.statusMessage=c.statusText;for(var i,j,k=c.headers[Symbol.iterator]();i=(j=k.next()).value,!j.done;)g.headers[i[0].toLowerCase()]=i[1],g.rawHeaders.push(i[0],i[1]);var l=c.body.getReader();m()}else{g._xhr=a,g._pos=0,g.statusCode=a.status,g.statusMessage=a.statusText;if(a.getAllResponseHeaders().split(/\r?\n/).forEach(function(a){var b=a.match(/^([^:]+):\s*(.*)/);if(b){var c=b[1].toLowerCase();void 0!==g.headers[c]?g.headers[c]+=", "+b[2]:g.headers[c]=b[2],g.rawHeaders.push(b[1],b[2])}}),g._charset="x-user-defined",!f.overrideMimeType){var o=g.rawHeaders["mime-type"];if(o){var p=o.match(/;\s*charset=([^;])(;|$)/);p&&(g._charset=p[1].toLowerCase())}g._charset||(g._charset="utf-8")}}};g(j,h.Readable),j.prototype._read=function(){},j.prototype._onXHRProgress=function(){var a=this,b=a._xhr,c=null;switch(a._mode){case"text:vbarray":if(b.readyState!==i.DONE)break;try{c=new d.VBArray(b.responseBody).toArray()}catch(a){}if(null!==c){a.push(new e(c));break}case"text":try{c=b.responseText}catch(b){a._mode="text:vbarray";break}if(c.length>a._pos){var f=c.substr(a._pos);if("x-user-defined"===a._charset){for(var g=new e(f.length),h=0;h<f.length;h++)g[h]=255&f.charCodeAt(h);a.push(g)}else a.push(f,a._charset);a._pos=c.length}break;case"arraybuffer":if(b.readyState!==i.DONE)break;c=b.response,a.push(new e(new Uint8Array(c)));break;case"moz-chunked-arraybuffer":if(c=b.response,b.readyState!==i.LOADING||!c)break;a.push(new e(new Uint8Array(c)));break;case"ms-stream":if(c=b.response,b.readyState!==i.LOADING)break;var j=new d.MSStreamReader;j.onprogress=function(){j.result.byteLength>a._pos&&(a.push(new e(new Uint8Array(j.result.slice(a._pos)))),a._pos=j.result.byteLength)},j.onload=function(){a.push(null)},j.readAsArrayBuffer(c)}a._xhr.readyState===i.DONE&&"ms-stream"!==a._mode&&a.push(null)}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},a("buffer").Buffer)},{"./capability":35,_process:15,buffer:4,inherits:10,stream:33}],38:[function(a,b,c){b.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],39:[function(a,b,c){function f(a){if(a&&!e(a))throw new Error("Unknown encoding: "+a)}function h(a){return a.toString(this.encoding)}function i(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function j(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var d=a("buffer").Buffer,e=d.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},g=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),f(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=j;break;default:return void(this.write=h)}this.charBuffer=new d(6),this.charReceived=0,this.charLength=0};g.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&d<=56319)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&d<=56319){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},g.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(b<=2&&c>>4==14){this.charLength=3;break}if(b<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=b},g.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:4}],40:[function(a,b,c){"use strict";function f(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function v(a,b,c){if(a&&e.isObject(a)&&a instanceof f)return a;var d=new f;return d.parse(a,b,c),d}function w(a){return e.isString(a)&&(a=v(a)),a instanceof f?a.format():f.prototype.format.call(a)}function x(a,b){return v(a,!1,!0).resolve(b)}function y(a,b){return a?v(a,!1,!0).resolveObject(b):b}var d=a("punycode"),e=a("./util");c.parse=v,c.resolve=x,c.resolveObject=y,c.format=w,c.Url=f;var g=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,j=["<",">",'"',"`"," ","\r","\n","\t"],k=["{","}","|","\\","^","`"].concat(j),l=["'"].concat(k),m=["%","/","?",";","#"].concat(l),n=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,q=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,r={javascript:!0,"javascript:":!0},s={javascript:!0,"javascript:":!0},t={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},u=a("querystring");f.prototype.parse=function(a,b,c){if(!e.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var f=a.indexOf("?"),h=-1!==f&&f<a.indexOf("#")?"?":"#",j=a.split(h),k=/\\/g;j[0]=j[0].replace(k,"/"),a=j.join(h);var v=a;if(v=v.trim(),!c&&1===a.split("#").length){var w=i.exec(v);if(w)return this.path=v,this.href=v,this.pathname=w[1],w[2]?(this.search=w[2],this.query=b?u.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var x=g.exec(v);if(x){x=x[0];var y=x.toLowerCase();this.protocol=y,v=v.substr(x.length)}if(c||x||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var z="//"===v.substr(0,2);!z||x&&s[x]||(v=v.substr(2),this.slashes=!0)}if(!s[x]&&(z||x&&!t[x])){for(var A=-1,B=0;B<n.length;B++){var C=v.indexOf(n[B]);-1!==C&&(-1===A||C<A)&&(A=C)}var D,E;E=-1===A?v.lastIndexOf("@"):v.lastIndexOf("@",A),-1!==E&&(D=v.slice(0,E),v=v.slice(E+1),this.auth=decodeURIComponent(D)),A=-1;for(var B=0;B<m.length;B++){var C=v.indexOf(m[B]);-1!==C&&(-1===A||C<A)&&(A=C)}-1===A&&(A=v.length),this.host=v.slice(0,A),v=v.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var G=this.hostname.split(/\./),B=0,H=G.length;B<H;B++){var I=G[B];if(I&&!I.match(p)){for(var J="",K=0,L=I.length;K<L;K++)I.charCodeAt(K)>127?J+="x":J+=I[K];if(!J.match(p)){var M=G.slice(0,B),N=G.slice(B+1),O=I.match(q);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(v="/"+N.join(".")+v),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=d.toASCII(this.hostname));var P=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!r[y])for(var B=0,H=l.length;B<H;B++){var R=l[B];if(-1!==v.indexOf(R)){var S=encodeURIComponent(R);S===R&&(S=escape(R)),v=v.split(R).join(S)}}var T=v.indexOf("#");-1!==T&&(this.hash=v.substr(T),v=v.slice(0,T));var U=v.indexOf("?");if(-1!==U?(this.search=v.substr(U),this.query=v.substr(U+1),b&&(this.query=u.parse(this.query)),v=v.slice(0,U)):b&&(this.search="",this.query={}),v&&(this.pathname=v),t[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this},f.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",f=!1,g="";this.host?f=a+this.host:this.hostname&&(f=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(f+=":"+this.port)),this.query&&e.isObject(this.query)&&Object.keys(this.query).length&&(g=u.stringify(this.query));var h=this.search||g&&"?"+g||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||t[b])&&!1!==f?(f="//"+(f||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):f||(f=""),d&&"#"!==d.charAt(0)&&(d="#"+d),h&&"?"!==h.charAt(0)&&(h="?"+h),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),h=h.replace("#","%23"),b+f+c+h+d},f.prototype.resolve=function(a){return this.resolveObject(v(a,!1,!0)).format()},f.prototype.resolveObject=function(a){if(e.isString(a)){var b=new f;b.parse(a,!1,!0),a=b}for(var c=new f,d=Object.keys(this),g=0;g<d.length;g++){var h=d[g];c[h]=this[h]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var i=Object.keys(a),j=0;j<i.length;j++){var k=i[j];"protocol"!==k&&(c[k]=a[k])}return t[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!t[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||s[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),u=a.host||a.pathname&&"/"===a.pathname.charAt(0),v=u||r||c.host&&a.pathname,w=v,x=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!t[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===x[0]?x[0]=c.host:x.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),v=v&&(""===o[0]||""===x[0])),u)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,x=o;else if(o.length)x||(x=[]),x.pop(),x=x.concat(o),c.search=a.search,c.query=a.query;else if(!e.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=x.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,e.isNull(c.pathname)&&e.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!x.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=x.slice(-1)[0],B=(c.host||a.host||x.length>1)&&("."===A||".."===A)||""===A,C=0,D=x.length;D>=0;D--)A=x[D],"."===A?x.splice(D,1):".."===A?(x.splice(D,1),C++):C&&(x.splice(D,1),C--);if(!v&&!w)for(;C--;C)x.unshift("..");!v||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),B&&"/"!==x.join("/").substr(-1)&&x.push("");var E=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(y){c.hostname=c.host=E?"":x.length?x.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return v=v||c.host&&x.length,v&&!E&&x.unshift(""),x.length?c.pathname=x.join("/"):(c.pathname=null,c.path=null),e.isNull(c.pathname)&&e.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},f.prototype.parseHost=function(){var a=this.host,b=h.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":41,punycode:16,querystring:19}],41:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],42:[function(a,b,c){b.exports=function(b){return b&&"object"==typeof b&&"function"==typeof b.copy&&"function"==typeof b.fill&&"function"==typeof b.readUInt8}},{}],43:[function(a,b,c){(function(b,d){function h(a,b){var d={seen:[],stylize:j};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),s(b)?d.showHidden=b:b&&c._extend(d,b),y(d.showHidden)&&(d.showHidden=!1),y(d.depth)&&(d.depth=2),y(d.colors)&&(d.colors=!1),y(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=i),l(d,a,d.depth)}function i(a,b){var c=h.styles[b];return c?"["+h.colors[c][0]+"m"+a+"["+h.colors[c][1]+"m":a}function j(a,b){return a}function k(a){var b={};return a.forEach(function(a,c){b[a]=!0}),b}function l(a,b,d){if(a.customInspect&&b&&D(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return w(e)||(e=l(a,e,d)),e}var f=m(a,b);if(f)return f;var g=Object.keys(b),h=k(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),C(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return n(b);if(0===g.length){if(D(b)){var i=b.name?": "+b.name:"";return a.stylize("[Function"+i+"]","special")}if(z(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(B(b))return a.stylize(Date.prototype.toString.call(b),"date");if(C(b))return n(b)}var j="",s=!1,t=["{","}"];if(r(b)&&(s=!0,t=["[","]"]),D(b)){j=" [Function"+(b.name?": "+b.name:"")+"]"}if(z(b)&&(j=" "+RegExp.prototype.toString.call(b)),B(b)&&(j=" "+Date.prototype.toUTCString.call(b)),C(b)&&(j=" "+n(b)),0===g.length&&(!s||0==b.length))return t[0]+j+t[1];if(d<0)return z(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var v;return v=s?o(a,b,d,h,g):g.map(function(c){return p(a,b,d,h,c,s)}),a.seen.pop(),q(v,j,t)}function m(a,b){if(y(b))return a.stylize("undefined","undefined");if(w(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return v(b)?a.stylize(""+b,"number"):s(b)?a.stylize(""+b,"boolean"):t(b)?a.stylize("null","null"):void 0}function n(a){return"["+Error.prototype.toString.call(a)+"]"}function o(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)J(b,String(g))?f.push(p(a,b,c,d,String(g),!0)):f.push("");return e.forEach(function(e){e.match(/^\d+$/)||f.push(p(a,b,c,d,e,!0))}),f}function p(a,b,c,d,e,f){var g,h,i;if(i=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},i.get?h=i.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):i.set&&(h=a.stylize("[Setter]","special")),J(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(i.value)<0?(h=t(c)?l(a,i.value,null):l(a,i.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),y(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function q(a,b,c){var d=0;return a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function r(a){return Array.isArray(a)}function s(a){return"boolean"==typeof a}function t(a){return null===a}function u(a){return null==a}function v(a){return"number"==typeof a}function w(a){return"string"==typeof a}function x(a){return"symbol"==typeof a}function y(a){return void 0===a}function z(a){return A(a)&&"[object RegExp]"===F(a)}function A(a){return"object"==typeof a&&null!==a}function B(a){return A(a)&&"[object Date]"===F(a)}function C(a){return A(a)&&("[object Error]"===F(a)||a instanceof Error)}function D(a){return"function"==typeof a}function E(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||void 0===a}function F(a){return Object.prototype.toString.call(a)}function G(a){return a<10?"0"+a.toString(10):a.toString(10)}function I(){var a=new Date,b=[G(a.getHours()),G(a.getMinutes()),G(a.getSeconds())].join(":");return[a.getDate(),H[a.getMonth()],b].join(" ")}function J(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var e=/%[sdj%]/g;c.format=function(a){if(!w(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(h(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(e,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(a){return"[Circular]"}default:return a}}),i=d[c];c<f;i=d[++c])t(i)||!A(i)?g+=" "+i:g+=" "+h(i);return g},c.deprecate=function(a,e){function g(){if(!f){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),f=!0}return a.apply(this,arguments)}if(y(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(!0===b.noDeprecation)return a;var f=!1;return g};var g,f={};c.debuglog=function(a){if(y(g)&&(g=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!f[a])if(new RegExp("\\b"+a+"\\b","i").test(g)){var d=b.pid;f[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else f[a]=function(){};return f[a]},c.inspect=h,h.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},h.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=r,c.isBoolean=s,c.isNull=t,c.isNullOrUndefined=u,c.isNumber=v,c.isString=w,c.isSymbol=x,c.isUndefined=y,c.isRegExp=z,c.isObject=A,c.isDate=B,c.isError=C,c.isFunction=D,c.isPrimitive=E,c.isBuffer=a("./support/isBuffer");var H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",I(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!A(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":42,_process:15,inherits:10}],44:[function(a,b,c){function e(){for(var a={},b=0;b<arguments.length;b++){var c=arguments[b];for(var e in c)d.call(c,e)&&(a[e]=c[e])}return a}b.exports=e;var d=Object.prototype.hasOwnProperty},{}],45:[function(a,b,c){function f(){this.dict={"#default":{}},this.lastUpdate=0,this.purgeThreshold=13e6}var d=a("./Utils"),e=a("./ParsingInterface");f.prototype.turnOnForgetting=function(){this.allowPurge=!0},f.prototype.turnOffForgetting=function(){this.allowPurge=!1},f.prototype.resolveGraph=function(a){return a?(this.dict[a]||(this.dict[a]={}),a):"#default"},f.prototype.clear=function(){this.dict={"#default":{}}},f.prototype.get=function(a,b){var c;return b=this.resolveGraph(b),void 0!==(c=this.dict[b][a])&&c},f.prototype.put=function(a,b){var f,c=(new Date).getTime();this.allowPurge&&this.purgeOld(),this.lastUpdate=c,b=this.resolveGraph(b);try{return"FALSE"===a.predicate?this.dict[b].__FALSE__=[a]:(f=e.factToTurtle(a),this.dict[b][f]?this.dict[b][f]=d.insertUnique(this.dict[b][f],a):(this.dict[b][f]=[a],this.dict[b][f].lastUpdate=c)),!0}catch(a){return a}},f.prototype.lastUpdateIsOld=function(){return!!this.allowPurge&&(0!=this.lastUpdate&&(new Date).getTime()-this.lastUpdate>this.purgeThreshold)},f.prototype.isOld=function(a,b){return this.dict[a][b].lastUpdate-this.lastUpdate>this.purgeThreshold},f.prototype.purgeOld=function(){for(var a in this.dict.length)for(var b in this.dict[a].length)for(var c in this.dict[a][b])!this.dict[a][b][c].isValid()&&this.isOld(a,b)&&delete this.dict[a][b][c]},f.prototype.content=function(){return this.dict},f.prototype.setContent=function(a){this.dict=a},f.prototype.values=function(a){var b=[];a=this.resolveGraph(a);for(var c in this.dict[a])for(var d=0;d<this.dict[a][c].length;d++)b.push(this.dict[a][c][d]);return b},f.prototype.findValues=function(a,b){var e,c=[],d=[];b=this.resolveGraph(b);for(var f=0;f<a.length;f++)if(void 0!==(e=this.dict[b][a[f].toString().slice(0,-2)]))for(var g=0;g<e.length;g++)c.push(e[g]);else d.push(a[f]);return{found:c,notfound:d}},f.prototype.findKeys=function(a,b){var d,c=[],e=[];b=this.resolveGraph(b);for(var f=0;f<a.length;f++){d=a[f];for(var g in this.dict[b]){if(-1!==this.dict[b][g].toString().indexOf(d.toString())){c.push(g);break}e.push(d)}}return{found:c,notfound:e}},f.prototype.getFactFromStringRepresentation=function(a,b){b=this.resolveGraph(b);for(var c in this.dict[b])for(var d=0;d<this.dict[b][c].length;d++)if(this.dict[b][c][d].toString()==a)return{key:c,value:this.dict[b][c][d],graph:b};return!1},b.exports=f},{"./ParsingInterface":53,"./Utils":59}],46:[function(a,b,c){b.exports={IllegalFact:function(a){return new Error("Illegal fact: "+a.toString())},OrphanImplicitFact:function(){return new Error("Implicit facts could not have empty causes.")},StorageNotInitialized:function(){return new Error("Storage has not been initialized. Please load an ontology first.")},FileIO:function(a){return new Error("Cannot access "+a)}}},{}],47:[function(a,b,c){a("./Logics");AnnotatedQuery=function(){this.atoms=[]},AnnotatedQuery.prototype.addAtom=function(a){this.atoms.push(a)},AnnotatedQuery.prototype.atomsLen=function(){return this.atoms.length},AnnotatedQuery.prototype.getAtom=function(a){return this.atoms[a]},AnnotatedQuery.prototype.setAtom=function(a){return this.atoms[a]},AnnotatedQuery.prototype.toString=function(){var a="";for(var b in this.atoms)a+=" ^ "+this.getAtom(b).toString();return a.substr(3)},AnnotatedQuery.atom=function(a,b){this.annotation=!0===b?"DIFF":"",this.value=a},AnnotatedQuery.atom.prototype.isEmpty=function(){return""==this.annotation},AnnotatedQuery.atom.prototype.isDiff=function(){return"DIFF"==this.annotation},AnnotatedQuery.atom.prototype.toString=function(){var a=this.annotation;return this.isDiff()&&(a="["+this.annotation+"]"),this.value.toString()+a},b.exports=AnnotatedQuery},{"./Logics":49}],48:[function(a,b,c){var d=a("../Utils");Fact=function(a,b,c,e,f,g,h,i,j){"FALSE"==a&&(this.falseFact="true"),void 0===e&&(e=[]),void 0===f&&(f=!0),void 0===g&&(g=[]),void 0===h&&(h=[]),this.matches={},this.predicate=a,this.subject=b,this.object=c,this.implicitCauses=h,this.fromTriple=j,this.causedBy=e,this.explicit=f,this.graphs=g,i||0==this.explicit?this.valid=void 0:this.valid=!0,this.constants=[],d.isVariable(this.subject)||this.constants.push(this.subject),d.isVariable(this.predicate)||this.constants.push(this.predicate),d.isVariable(this.object)||this.constants.push(this.object),this.operatorPredicate=!1,d.isOperator(this.predicate)&&(this.operatorPredicate=!0)},Fact.prototype={toString:function(){var b;return b=this.falseFact?"FALSE":"("+this.subject+" "+this.predicate+" "+this.object+")",(this.explicit?"E":"I")+b},truncatedString:function(){var b;return b=this.falseFact?"FALSE":"("+d.removeBeforeSharp(this.subject)+", "+d.removeBeforeSharp(this.predicate)+", "+d.removeBeforeSharp(this.object)+")",(this.explicit?"E":"I")+b},equivalentTo:function(a){return this.explicit==a.explicit&&this.subject==a.subject&&this.predicate==a.predicate&&this.object==a.object},appearsIn:function(a){var b=this;for(var c in a)if(b.equivalentTo(a[c]))return c;return!1},isValid:function(){if(this.explicit)return this.valid;if(void 0!==this.causedBy&&0!=this.causedBy.length){for(var a,c,b=this.causedBy,d=0;d<b.length;d++){a=!0;for(var e=0;e<b[d].length;e++)c=b[d][e],a=a&&c.valid;if(a)return!0}return!1}},implicitlyDerives:function(a){for(var b=[],c=0;c<a.length;c++)this.appearsIn(a[c].implicitCauses)&&b.push(a[c]);return b},explicitlyDerives:function(a){for(var b=[],c=0;c<a.length;c++)for(var d=0;d<a[c].causedBy.length;d++)if(this.appearsIn(a[c].causedBy[d])){b.push(a[c]);break}return b},derives:function(a){for(var b=[],c=0;c<a.length;c++)if(this.appearsIn(a[c].implicitCauses))b.push(a[c]);else for(var d=0;d<a[c].causedBy.length;d++)if(this.appearsIn(a[c].causedBy[d])){b.push(a[c]);break}return b},isAlternativeEquivalentOf:function(a){return a.subject==this.subject&&a.predicate==this.predicate&&a.object==this.object&&a.explicit!=this.explicit},findAlternativeEquivalent:function(a){for(var c=0;c<a.length;c++)if(this.isAlternativeEquivalentOf(a[c]))return a[c];return!1}},b.exports=Fact},{"../Utils":59}],49:[function(a,b,c){var d=a("./Rule"),e=a("./Fact"),f=a("../Utils"),g=a("../Errors"),h=a("../RegularExpressions"),i=a("md5");Logics={combine:function(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)void 0!==b[d]&&a[c].equivalentTo(b[d])&&(a[c].causedBy=this.uniquesCausedBy(a[c].causedBy,b[d].causedBy),a[c].implicitCauses=f.uniques(a[c].implicitCauses,b[d].implicitCauses),delete b[d]);for(var c=0;c<b.length;c++)void 0!==b[c]&&a.push(b[c])},getOnlyImplicitFacts:function(a){var b=[];for(var c in a){var d=a[c];d.explicit||b.push(d)}return b},getOnlyExplicitFacts:function(a){var b=[];for(var c in a){var d=a[c];d.explicit&&b.push(d)}return b},restrictRuleSet:function(a,b){for(var c=[],d=0;d<a.length;d++)for(var e=a[d],f=!1,g=0;g<e.causes.length;g++){for(var h=e.causes[g],i=0;i<b.length;i++){var j=b[i];if(this.causeMatchesFact(h,j)){f=!0;break}}if(f){c.push(e);break}}return c},causeMatchesFact:function(a,b){return this.causeMemberMatchesFactMember(a.subject,b.subject)&&this.causeMemberMatchesFactMember(a.predicate,b.predicate)&&this.causeMemberMatchesFactMember(a.object,b.object)},causeMemberMatchesFactMember:function(a,b){return!!this.isVariable(a)||a==b},containsFacts:function(a,b){if(!b||b.length>a.length)return!1;for(var c in b){if(!b[c].appearsIn(a))return!1}return!0},invalidate:function(a){for(var b=0;b<a.length;b++)a[b].valid=!1;return a},minus:function(a,b){for(var c,d=[],e=0;e<a.length;e++){c=!1;for(var f=0;f<b.length;f++)if(a[e].toString()==b[f].toString()){c=!0;break}c||d.push(a[e])}return d},isVariable:function(a){try{return 0===a.indexOf("?")}catch(a){return!1}},decomposeRuleHeadsIntoSeveralRules:function(a){for(var b=[],c=0;c<a.length;c++)for(var e=0;e<a[c].consequences.length;e++)b.push(new d(a[c].causes,[a[c].consequences[e]]));return b},factIsGround:function(a){return!this.isVariable(a.subject)&&!this.isVariable(a.predicate)&&!this.isVariable(a.object)},getInconsistencies:function(a){for(var b=[],c=0;c<a.length;c++)void 0!==a[c]&&a[c].falseFact&&(b=a[c].causedBy);return b},updateValidTags:function(a,b,c){for(var d=[],e=[],f=0;f<a.length;f++){for(var g=0;g<b.length;g++)void 0!==b[g]&&(a[f].equivalentTo(b[g])?(a[f].valid=!0,delete b[g]):a[f].isAlternativeEquivalentOf(b[g])&&(this.addAlternativeDerivationAsCausedByFromExplicit(a,a[f],b[g]),e.push(b[g]),delete b[g]));for(var g=0;g<c.length;g++)a[f].equivalentTo(c[g])&&(a[f].valid=!1)}for(var f=0;f<b.length;f++)void 0!==b[f]&&(a.push(b[f]),d.push(b[f]));return{__new__:d,__resolved__:e}},addAlternativeDerivationAsCausedByFromExplicit:function(a,b,c){for(var e,g,h,d=b.implicitlyDerives(a),j=0;j<d.length;j++)for(var k=0;k<d[j].causedBy.length;k++){e=d[j].causedBy[k];for(var l=0;l<b.causedBy.length;l++)g=b.causedBy[l],(h=f.removeSubset(e,g))&&(h.push(c),d[j].causedBy=this.uniquesCausedBy(d[j].causedBy,[h]))}a.push(c)},addAlternativeDerivationAsCausedByFromImplicit:function(a,b,c){for(var e,g,h,d=b.explicitlyDerives(a),j=0;j<d.length;j++){d[j].implicitCauses.push(c);for(var k=0;k<d[j].causedBy.length;k++){e=d[j].causedBy[k];for(var l=0;l<c.causedBy.length;l++)g=c.causedBy[l],(h=f.removeFromSet(e,b))&&(h=f.uniques(h,g),d[j].causedBy=this.uniquesCausedBy(d[j].causedBy,[h]))}}a.push(c)},buildCauses:function(a){var d,b=this.getOnlyExplicitFacts(a),c=this.getOnlyImplicitFacts(a),e=[];if(c.length>0){if(d=this.combineImplicitCauses(c),b.length>0){for(var g=0;g<d.length;g++)for(var h=0;h<b.length;h++)e.push(f.insertUnique(d[g],b[h]));return e}return d}return[a]},combineImplicitCauses:function(a){for(var b=a[0].causedBy,c=1;c<a.length;c++)b=this.disjunctCauses(b,a[c].causedBy);return b},disjunctCauses:function(a,b){var c,d=[];if(a==[]||b==[])throw g.OrphanImplicitFact();for(var e=0;e<a.length;e++){c=a[e];for(var h=0;h<b.length;h++)d.push(f.uniques(c,b[h]))}return d},unifyFactSet:function(a){for(var c,b=[],d=0;d<a.length;d++)void 0!==a[d]&&((c=a[d].appearsIn(b))?(b[c].causedBy=this.uniquesCausedBy(a[d].causedBy,b[c].causedBy),b[c].implicitCauses=f.uniques(a[d].implicitCauses,b[c].implicitCauses),delete a[d]):b.push(a[d]));return b},unifyAndCheck:function(a,b,c){var d=b.length;return a=this.unifyFactSet(a),this.combine(b,a),(d+=this.checkExplicitEquivalents(a,c))<b.length},unify:function(a,b){var c=b.length;return a=this.unifyFactSet(a),this.combine(b,a),c<b.length},checkExplicitEquivalents:function(a,b){for(var c=0,d=0;d<b.length;d++)for(var e=0;e<a.length;e++)void 0!==a[e]&&b[d].explicit&&b[d].isAlternativeEquivalentOf(a[e])&&(this.addAlternativeDerivationAsCausedByFromImplicit(b,b[d],a[e],!0),c++,delete a[e]);return c},uniquesCausedBy:function(a,b){var c,d,e,g;a.length>=b.length?(c=b,d=a):(c=a,d=b),e=c.slice();for(var h=0;h<d.length;h++){g=!1;for(var i=0;i<c.length;i++)if(f.equivalentSets(d[h],c[i])){g=!0;break}g||e.push(d[h])}return e},parseRules:function(a){for(var b=[],c=0;c<a.length;c++)b.push(this.parseRule(a[c]));return b},parseRule:function(a){for(var m,b=h.TRIPLE,c=h.ATOM,f=a.split("->")[0],g=a.split("->")[1],i=g.match(b),j=f.match(b),k=[],l=[],n=0;n<j.length;n++)m=j[n].match(c).splice(1),k.push(new e(m[1],m[0],m[2]));if(-1!==g.toLowerCase().indexOf("false"))l.push(new e("FALSE"));else for(var n=0;n<i.length;n++)m=i[n].match(c).splice(1),l.push(new e(m[1],m[0],m[2]));return new d(k,l)},isBNode:function(a){return void 0!==a&&0===a.indexOf("__bnode__")},skolemize:function(a,b){for(var c="",d=0;d<a.length;d++)c+=a[d].toString();return i(c)+b}},b.exports=Logics},{"../Errors":46,"../RegularExpressions":57,"../Utils":59,"./Fact":48,"./Rule":50,md5:77}],50:[function(a,b,c){var d=a("../Utils");Rule=function(a,b,c){this.name=c,this.causes=[],this.operatorCauses=[],this.consequences=b,this.constants=[],this.matches={};for(var e=0;e<a.length;e++)a[e].operatorPredicate?this.operatorCauses.push(a[e]):this.causes.push(a[e]);for(var e=0;e<this.causes.length;e++)this.constants=d.uniques(this.constants,a[e].constants);for(var e=0;e<this.consequences.length;e++)this.constants=d.uniques(this.constants,b[e].constants);this.orderCausesByMostRestrictive()},Rule.prototype={toString:function(){var a="";for(var b in this.causes)a+=" ^ "+this.causes[b].toString().substring(1);for(var b in this.operatorCauses)a+=" ^ "+this.operatorCauses[b].toString().substring(1);return a.substr(3)+" -> "+this.consequences.toString().substring(1)},setName:function(a){this.name=a},orderCausesByMostRestrictive:function(){for(var a=[],b=[],c=0;c<this.causes.length;c++){var d=this.causes[c],e=0;0!==d.subject.indexOf("?")&&e++,0!==d.predicate.indexOf("?")&&e++,0!==d.object.indexOf("?")&&e++,b.push({cause:d,constantOccurences:e})}b=b.sort(function(a,b){var c=a.constantOccurences,d=b.constantOccurences;return c>d?-1:c<d?1:0});for(var c=0;c<b.length;c++)a.push(b[c].cause);this.causes=a},addCause:function(a){var b=new Rule(this.causes.concat([a]),this.consequences);this.causes=b.causes,this.consequences=b.consequences,this.constants=b.constants},addConsequence:function(a){var b=new Rule(this.causes,this.consequences.concat([a]));this.causes=b.causes,this.consequences=b.consequences,this.constants=b.constants},getIdbPredicates:function(){},getEdbPredicates:function(){}},b.exports=Rule},{"../Utils":59}],51:[function(require,module,exports){var Fact=require("./Fact"),Logics=require("./Logics"),Utils=require("../Utils"),AnnotatedQuery=require("./AnnotatedQuery"),q=require("q");Solver={evaluateRuleSet:function(a,b,c,d){var e=q.defer(),f=[],g=[];for(var i in a)c?f.push(this.evaluateThroughRestrictionWithTagging(a[i],b,d)):f.push(this.evaluateThroughRestriction(a[i],b));try{q.all(f).then(function(a){for(var b=0;b<a.length;b++)g=Utils.uniques(g,a[b]);e.resolve(g)})}catch(a){e.reject(a)}return e.promise},evaluateThroughRestriction:function(a,b){var c=this.getMappings(a,b),d=[],e=q.defer();try{this.checkOperators(a,c);for(var f=0;f<c.length;f++)if(c[f])for(var g=0;g<a.consequences.length;g++)d.push(this.substituteFactVariables(c[f],a.consequences[g],[]));e.resolve(d)}catch(a){e.reject(a)}return e.promise},evaluateThroughRestrictionWithTagging:function(a,b){var f,g,h,c=this.getMappings(a,b),d=q.defer(),e=[];this.checkOperators(a,c);try{for(var i=0;i<c.length;i++)if(c[i]){g=Logics.buildCauses(c[i].__facts__),h=Logics.getOnlyImplicitFacts(c[i].__facts__);for(var j=0;j<a.consequences.length;j++)f=this.substituteFactVariables(c[i],a.consequences[j],g,h),e.push(f)}d.resolve(e)}catch(a){d.reject(a)}return d.promise},checkOperators:function(rule,mappingList){var causes=rule.operatorCauses,operationToEvaluate,substitutedFact;if(0==rule.operatorCauses.length)return mappingList;for(var i=0;i<mappingList.length;i++)for(var j=0;j<causes.length;j++){substitutedFact=this.substituteFactVariables(mappingList[i],causes[j]);try{operationToEvaluate=Utils.getValueFromDatatype(substitutedFact.subject)+substitutedFact.predicate+Utils.getValueFromDatatype(substitutedFact.object)}catch(a){throw a}if(!eval(operationToEvaluate)){delete mappingList[i];break}}},getMappings:function(a,b,c){var e,d=0;for(e=[a.causes[d]];d<a.causes.length;)e=this.substituteNextCauses(e,a.causes[d+1],b,a.constants),d++;return e},excludeKnownMatches:function(a,b,c){for(var d,e=[],f=0;f<b.length;f++)d=a.hasKnownMatchFor(b[f]),d?c.push(d):e.push(b[f]);return e},substituteNextCauses:function(a,b,c,d){for(var e=[],f=[],g=0;g<a.length;g++)for(var h=0;h<c.length;h++){var j,k,i=a[g].mapping;void 0===i&&(i={},i.__facts__=[]),k=this.factMatches(c[h],a[g],i,d),k&&(b?(j=this.substituteFactVariables(k,b),j.mapping=k,e.push(j)):f.push(k))}return b?e:f},factMatches:function(a,b,c,d){var e={};if(!this.factElemMatches(a.predicate,b.predicate,c,e))return!1;if(!this.factElemMatches(a.object,b.object,c,e))return!1;if(!this.factElemMatches(a.subject,b.subject,c,e))return!1;for(var f in e)if(-1!==d.indexOf(e[f]))return!1;for(var g in c)if("__facts__"==g)e[g]=Utils.insertUnique(c[g],a);else{for(var f in e)if(c[g]==e[f]&&g!=f)return!1;e[g]=c[g]}return e},factElemMatches:function(a,b,c,d){if(Logics.isVariable(b)){if(c[b]&&c[b]!=a)return!1;d[b]=a}else if(a!=b)return!1;return!0},substituteElementVariablesWithMapping:function(a,b){return Logics.isBNode(a)?Logics.skolemize(b.__facts__,a):Logics.isVariable(a)&&void 0!==b[a]?b[a]:a},substituteFactVariables:function(a,b,c,d,e){var f,g,h,i;return a=={}?b:(f=this.substituteElementVariablesWithMapping(b.subject,a),g=this.substituteElementVariablesWithMapping(b.predicate,a),h=this.substituteElementVariablesWithMapping(b.object,a),i=new Fact(g,f,h),c&&(i.causedBy=c,i.explicit=!1),d&&d.length>0&&(i.implicitCauses=d,i.explicit=!1),e&&(i.graphs=e),i)},substitute:function(a,b,c,d){for(var f,e=[],g=0;g<b.length;g++)(f=this.substituteFactVariables(b[g],a,c,d))&&Logics.factIsGround(f)&&e.push(f);return e},matchHead:function(a,b){for(var d,c=[],e=0;e<a.length;e++){var f={},g=new AnnotatedQuery,h=a[e].consequences[0],i=a[e].constants;if(a[e].consequences.length>1)throw"B/F algorithm expects an unique consequence (HEAD)!";if(f=this.factMatches(b,h,f,i)){for(var j=0;j<a[e].causes.length;j++)d=new AnnotatedQuery.atom(a[e].causes[j]),g.addAtom(d);c.push({mapping:f,rule:a[e],annotatedQuery:g})}}return c},matchBody:function(a,b){for(var c=[],d=0;d<a.length;d++){for(var g,e={},f=!0,i=new AnnotatedQuery,j=0;j<a[d].causes.length;j++)g=this.factMatches(b,a[d].causes[j],e,a[d].constants),g&&(f=!1,e=g),i.addAtom(new AnnotatedQuery.atom(a[d].causes[j],f));i.addAtom(new AnnotatedQuery.atom(a[d].consequences[0],f)),Utils.emptyObject(e)||c.push({mapping:e||{},rule:a[d],annotatedQuery:i})}return c},eval:function(a,b,c,d,e){for(var g,f=[d],i=(Logics.minus(a,c),0);i<a.length;i++)for(var j=0;j<b.atomsLen();j++)(g=this.factMatches(a[i],b.getAtom(j).value,d,e))&&(d=g,f.push(d));return f}},module.exports=Solver},{"../Utils":59,"./AnnotatedQuery":47,"./Fact":48,"./Logics":49,q:87}],52:[function(a,b,c){var d=a("./Logics/Rule"),e=a("./Logics/Fact"),f=a("./Prefixes"),i=(a("./Logics/Logics"),f.OWL,f.OWL+"equivalentClass"),j=f.OWL+"equivalentProperty",k=f.OWL+"Thing",m=(f.OWL,f.RDF+"type"),n=f.RDF+"subject",o=f.RDF+"predicate",p=f.RDF+"object",q=f.RDFS+"subClassOf",r=f.RDFS+"subPropertyOf",s=f.OWL+"TransitiveProperty",t=f.OWL+"inverseOf",u=f.OWL+"sameAs";Domain=f.RDFS+"domain",Range=f.RDFS+"range",OWL2RL={rules:{classSubsumption:[new d([new e(q,"?c1","?c2",[],!0),new e(q,"?c2","?c3",[],!0)],[new e(q,"?c1","?c3",[],!0)],"Class-Subsumption-1"),new d([new e(q,"?c1","?c2",[],!0),new e(m,"?x","?c1",[],!0)],[new e(m,"?x","?c2",[],!0)],"Class-Subsumption-2")],propertySubsumption:[new d([new e(r,"?p1","?p2",[],!0),new e(r,"?p2","?p3",[],!0)],[new e(r,"?p1","?p3",[],!0)],"Property-Subsumption-1"),new d([new e(r,"?p1","?p2",[],!0),new e("?p1","?x","?y",[],!0)],[new e("?p2","?x","?y",[],!0)],"Property-Subsumption-2")],transitivity:[new d([new e("?p","?x","?y",[],!0),new e(m,"?p",s,[],!0),new e("?p","?y","?z",[],!0)],[new e("?p","?x","?z",[],!0)],"Property-Transitivity")],inverse:[new d([new e(t,"?p1","?p2",[],!0),new e("?p1","?x","?y",[],!0)],[new e("?p2","?y","?x",[],!0)],"Property-Inverse-1"),new d([new e(t,"?p1","?p2",[],!0),new e("?p2","?x","?y",[],!0)],[new e("?p1","?y","?x",[],!0)],"Property-Inverse-2")],equivalence:[new d([new e(i,"?c1","?c2",[],!0),new e(m,"?x","?c1",[],!0)],[new e(m,"?x","?c2",[],!0)],"Class-Equivalence-1"),new d([new e(i,"?c1","?c2",[],!0),new e(m,"?x","?c2",[],!0)],[new e(m,"?x","?c1",[],!0)],"Class-Equivalence-2"),new d([new e(j,"?p1","?p2",[],!0),new e("?p1","?x","y",[],!0)],[new e("?p2","?x","?y",[],!0)],"Property-Equivalence-1"),new d([new e(j,"?p1","?p2",[],!0),new e("?p2","?x","y",[],!0)],[new e("?p1","?x","?y",[],!0)],"Property-Equivalence-2")],equality:[new d([new e(u,"?s1","?s2",[],!0),new e("?p","?s1","?o",[],!0)],[new e("?p","?s2","?o",[],!0)],"Equality-1"),new d([new e(u,"?p1","?p2",[],!0),new e("?p1","?s","?o",[],!0)],[new e("?p2","?s","?o",[],!0)],"Equality-2"),new d([new e(u,"?o1","?o2",[],!0),new e("?p","?s","?o1",[],!0)],[new e("?p","?s","?o2",[],!0)],"Equality-3"),new d([new e(u,"?x","?y",[],!0),new e(u,"?y","?z",[],!0)],[new e(u,"?x","?z",[],!0)],"Equality-4")],domainRange:[new d([new e(Domain,"?p","?c",[],!0),new e("?p","?x","?y",[],!0)],[new e(m,"?x","?c",[],!0)],"Domain-ClassAssertion"),new d([new e(Range,"?p","?c",[],!0),new e("?p","?x","?y",[],!0)],[new e(m,"?y","?c",[],!0)],"Range-ClassAssertion"),new d([new e(Domain,"?p","?c1",[],!0),new e(q,"?c1","?c2",[],!0)],[new e(Domain,"?p","?c2",[],!0)],"Domain-ClassSubsumption"),new d([new e(Domain,"?p2","?c",[],!0),new e(r,"?p1","?p2",[],!0)],[new e(Domain,"?p1","?c",[],!0)],"Domain-PropertySubsumption"),new d([new e(Range,"?p","?c1",[],!0),new e(q,"?c1","?c2",[],!0)],[new e(Range,"?p","?c2",[],!0)],"Range-ClassSubsumption"),new d([new e(Range,"?p2","?c",[],!0),new e(r,"?p1","?p2",[],!0)],[new e(Range,"?p1","?c",[],!0)],"Range-PropertySubsumption")],testsFipa:[new d([new e(m,"?x","http://sites.google.com/site/smartappliancesproject/ontologies/fipa#Function",[],!0),new e(m,"?x","http://sites.google.com/site/smartappliancesproject/ontologies/fipa#RequestDeviceInfo",[],!0)],[new e(m,"?x",k,[],!0)],"Propagation-Test-1"),new d([new e(m,"?x",k,[],!0)],[new e("FALSE")],"Inconsitency-Test"),new d([new e(m,"?x","http://sites.google.com/site/smartappliancesproject/ontologies/fipa#Function",[],!0)],[new e(m,"?x","http://sites.google.com/site/smartappliancesproject/ontologies/fipa#RequestDeviceInfo",[],!0)])],testsBNode:[new d([new e(m,"?x","http://sites.google.com/site/smartappliancesproject/ontologies/fipa#Function",[],!0)],[new e(n,"__bnode__1","?x",[],!0),new e(o,"__bnode__1",m,[],!0),new e(p,"__bnode__1","http://sites.google.com/site/smartappliancesproject/ontologies/fipa#Function",[],!0)],"BNode-Test")]}},b.exports={test:OWL2RL.rules.classSubsumption.concat(OWL2RL.rules.propertySubsumption).concat(OWL2RL.rules.transitivity).concat(OWL2RL.rules.inverse).concat(OWL2RL.rules.equivalence).concat(OWL2RL.rules.equality).concat(OWL2RL.rules.domainRange),rules:OWL2RL.rules.classSubsumption.concat(OWL2RL.rules.propertySubsumption).concat(OWL2RL.rules.transitivity).concat(OWL2RL.rules.inverse).concat(OWL2RL.rules.equivalence).concat(OWL2RL.rules.equality).concat(OWL2RL.rules.domainRange),classSubsumption:OWL2RL.rules.classSubsumption,subsumption:OWL2RL.rules.classSubsumption.concat(OWL2RL.rules.propertySubsumption),transitivity:OWL2RL.rules.transitivity,transitivityInverse:OWL2RL.rules.transitivity.concat(OWL2RL.rules.inverse),inverse:OWL2RL.rules.inverse,equivalence:OWL2RL.rules.equivalence,equality:OWL2RL.rules.equality}},{"./Logics/Fact":48,"./Logics/Logics":49,"./Logics/Rule":50,"./Prefixes":54}],53:[function(a,b,c){var d=a("./Logics/Fact"),f=(a("./Errors"),a("./RegularExpressions")),h=(a("./Utils"),a("rdf-ext")()),i=a("q"),j=a("sparqljs"),k=new j.Parser,m=(new j.Generator,new h.RdfXmlParser);String.prototype.format=function(){return this.match(f.LITERAL_UNFORMATTED)?this.replace(f.LITERAL_UNFORMATTED,"$1<$2>"):this.toString()},b.exports={rdfXmlToTurtle:function(a){var c,b=i.defer();return m.parse(a,function(a,d){d&&b.reject(d);for(var e=a._graph,f="",g=0;g<e.length;g++)c=e[g],f+=c+"\n";b.resolve(f)}),b.promise},tripleToFact:function(a,b,c){return void 0===b&&(b=!0),new d(a.predicate.toString(),a.subject.toString(),a.object.toString(),[],b,[],[],c,a.toString())},triplesToFacts:function(a,b,c){var e,d=[],f=this;void 0===b&&(b=!0);for(var g=0;g<a.length;g++)e=a[g],d.push(f.tripleToFact(e,b,c));return d},parseStrEntityToTurtle:function(a){var h,b=f.LITERAL_UNFORMATTED,c=f.BLANK_NODE,d=f.VARIABLE,e=f.DATATYPE_TYPE,g=f.DBLQUOTED_STRING;return void 0!==a&&(a.match(g)&&(h=a.match(g),a=h[1]+h[2].replace(/(")/g,"'")+h[3]),a.match(b)?a.replace(b,"$1<$2>"):a.match(c)||a.match(d)||a.match(e)||a.match(g)?a:"<"+a+">")},factToTurtle:function(a){var b,c,d;return b=this.parseStrEntityToTurtle(a.subject),c=this.parseStrEntityToTurtle(a.predicate),d=this.parseStrEntityToTurtle(a.object),b&&c&&d?b+" "+c+" "+d+" . ":""},factsToTurtle:function(a){for(var c,b="",d=this,e=0;e<a.length;e++)c=a[e],b+=d.factToTurtle(c);return b},updateWhereToConstructWhere:function(a,b){return a.replace(f.DELETE_OR_INSERT_STATEMENT,"CONSTRUCT$2")},parseSPARQL:function(a){return k.parse(a)},tripleToTurtle:function(a){return this.parseStrEntityToTurtle(a.subject.toString())+" "+this.parseStrEntityToTurtle(a.predicate.toString())+" "+this.parseStrEntityToTurtle(a.object.toString())+" . "},triplesToTurtle:function(a){for(var b="",c=0;c<a.length;c++)b+=this.tripleToTurtle(a[c]).replace(/(\n|\r)/g,"").replace(/\\&/g,"&");return b},isolateWhereQuery:function(a,b){var c,d=a.where[b].patterns;if("SELECT"==a.queryType)c=a.queryType+" "+a.variables.join(" ")+" { ";else if("CONSTRUCT"==a.queryType){c=a.queryType+" { ";for(var e=0;e<a.template.length;e++)c+=this.tripleToTurtle(a.template[e]);c+=" } WHERE { "}if(void 0!==a.where[b].name&&(c+=" GRAPH <"+a.where[b].name+"> "),c+=" { ",null!=d)for(var e=0;e<d.length;e++)c+=" "+this.triplesToTurtle(d[e].triples)+" ";else c+=" "+this.triplesToTurtle(a.where[b].triples)+" ";return(c+=" } ")+" } "},constructEquivalentQuery:function(a,b){var d;return a.match(f.CONSTRUCT_BODYQUERY_WITH_BRACKETS)&&(a=a.replace(f.CONSTRUCT_BODYQUERY_WITH_BRACKETS,"$1")),d=a.match(f.NO_BRACKET_BODYQUERY)?f.NO_BRACKET_BODYQUERY:f.SINGLE_BRACKET_BODYQUERY,b?a.replace(d,"CONSTRUCT { $1 } WHERE { GRAPH <"+b+"> { $1 } }"):a.replace(d,"CONSTRUCT { $1 } WHERE { $1 }")},isUpdateWhere:function(a){try{return!(!a.updates[0].where&&"deletewhere"!=a.updates[0].updateType&&"insertwhere"!=a.updates[0].updateType)}catch(a){return!1}},isInsert:function(a){var b;try{b=a.updates[0].insert.length>0}catch(a){return!1}return b},isDelete:function(a){var b;try{b=a.updates[0].delete.length>0}catch(a){return!1}return b},buildUpdateQueryWithConstructResults:function(a,b){switch(this.isInsert(a)){case!0:return"INSERT DATA { "+this.triplesToTurtle(b.triples)+" }";default:return"DELETE DATA { "+this.triplesToTurtle(b.triples)+" }"}}}},{"./Errors":46,"./Logics/Fact":48,"./RegularExpressions":57,"./Utils":59,q:87,"rdf-ext":106,sparqljs:129}],54:[function(a,b,c){b.exports={OWL:"http://www.w3.org/2002/07/owl#",RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#",FIPA:"http://sites.google.com/site/smartappliancesproject/ontologies/fipa#"}},{}],55:[function(a,b,c){var d=a("./ReasoningEngine");a("./Logics/Logics"),a("q");b.exports={evaluate:function(a,b,c,e,f){return e||(e=d.incremental),e(a,b,c,f)},engine:d,process:{it:{incrementally:d.incremental,incrementallyBf:d.incrementalBf,naively:d.naive,tagBased:d.tagging}}}},{"./Logics/Logics":49,"./ReasoningEngine":56,q:87}],56:[function(a,b,c){var d=a("./Logics/Logics"),e=a("./Logics/Solver"),f=a("./Utils"),g=a("q");ReasoningEngine={naive:function(a,b,c,g){var j,k,h=[],i=[],l=d.getOnlyExplicitFacts(c),i=[];b&&b.length&&(l=d.minus(l,b)),a&&a.length&&(l=f.uniques(l,a));do{h=f.uniques(h,i),i=e.evaluateRuleSet(g,f.uniques(l,h))}while(!d.containsFacts(h,i));return j=f.uniques(a,h),k=d.minus(c,f.uniques(l,h)),c=f.uniques(l,h),{additions:j,deletions:k,updatedF:c}},incremental:function(a,b,c,h){var j,q,r,i=[],k=[],l=[],m=[],n=[],o=[],p=[],s=d.getOnlyExplicitFacts(c),t=d.getOnlyImplicitFacts(c),u=g.defer(),v=function(){w(n)},w=function(){l=f.uniques(l,n),i=d.restrictRuleSet(h,f.uniques(b,l)),e.evaluateRuleSet(i,f.uniques(f.uniques(t,s),b)).then(function(a){n=a,f.uniques(l,n).length>l.length?setTimeout(w,1):(s=d.minus(s,b),t=d.minus(t,l),setTimeout(x,1))})},x=function(){m=f.uniques(m,o),j=d.restrictRuleSet(h,l),e.evaluateRuleSet(j,f.uniques(s,t)).then(function(a){o=a,f.uniques(m,o).length>m.length?setTimeout(x,1):setTimeout(y,1)})},y=function(){m=f.uniques(m,o),p=f.uniques(f.uniques(f.uniques(s,t),a),m),k=d.restrictRuleSet(h,p),e.evaluateRuleSet(k,p).then(function(c){o=c,f.containsSubset(m,o)?(q=f.uniques(a,m),r=f.uniques(b,l),u.resolve({additions:q,deletions:r})):setTimeout(y,1)})};return v(),u.promise},incrementalBf:function(a,b,c,g){g=d.decomposeRuleHeadsIntoSeveralRules(g);var n,o,h=function(a,b,c,g){var o,p,q,r,s,t,h=new f.IterableStructure,i=new f.IterableStructure,j=new f.IterableStructure,k=[],l=new f.IterableStructure,m=[],n=new f.IterableStructure,u=function(a){var b,c,d;if(h.add(a)&&(v(),!j.contains(a))){b=e.matchHead(g,a);for(var f=0;f<b.length;f++){c=e.eval(q,b[f].annotatedQuery,[],b[f].mapping,b[f].rule.constants);for(var i=0;i<b[f].rule.causes.length;i++){d=e.substitute(b[f].rule.causes[i],c);for(var k=0;k<d.length;k++)u(d[k])}if(a.appearsIn(j))return}}},v=function(){for(var b,c,d,f;c=h.next();)(c.appearsIn(a)||c.appearsIn(k))&&j.add(c);for(;c=j.next();)if(n.add(c)){b=e.matchBody(g,c);for(var i=0;i<b.length;i++){d=e.eval(n.toArray(),b[i].annotatedQuery,[c],b[i].mapping),f=e.substitute(b[i].rule.consequences[0],d);for(var l=0;l<f.length;l++)h.contains(f[l])?j.add(f):k.add(f)}}};for(a=d.minus(a,c),i.add(c);r=i.next();)if(q=d.minus(b,m),u(r),m=d.minus(h.toArray(),j.toArray()),!j.contains(r)){o=d.minus(b,l.toArray()),s=e.matchBody(g,r);for(var w=0;w<s.length;w++)t=e.eval(o,s[w].annotatedQuery,[r],s[w].mapping,s[w].rule.constants),i.add(e.substitute(s[w].rule.consequences[0],t));l.add(r)}return p=d.minus(i.toArray(),j.toArray()),b=d.minus(b,p[w])},i=[],j=[],k=[],l=[],m=[],p=d.getOnlyExplicitFacts(c),q=d.getOnlyImplicitFacts(c);if(b&&b.length&&(j=h(p,q,b,g)),a&&a.length)do{k=f.uniques(k,l),m=f.uniques(f.uniques(f.uniques(p,q),a),k),i=d.restrictRuleSet(g,m),l=e.evaluateRuleSet(i,m)}while(f.uniques(k,l).length>k.length);return n=f.uniques(a,k),o=f.uniques(b,j),c=f.uniques(c,n),c=d.minus(c,o),{additions:n,deletions:o,updatedF:c}},tagFilter:function(a){for(var b=[],c=0;c<a.length;c++)a[c].isValid()&&b.push(a[c]);return b},tagging:function(a,b,c,h){var i,j,k,l=[],m=[],n=g.defer(),o=d.getOnlyImplicitFacts(c),q=function(){i.length>0?r(c):n.resolve({additions:f.uniques(i.concat(j),o),deletions:[]})},r=function(){c=f.uniques(c,o),m=d.restrictRuleSet(h,c),e.evaluateRuleSet(m,c,!0).then(function(a){l=a,d.unify(l,o)?setTimeout(r,1):n.resolve({additions:f.uniques(i.concat(j),o),deletions:[]})})};return k=d.updateValidTags(c,a,b),i=k.__new__,j=k.__resolved__,q(),n.promise}},b.exports={naive:ReasoningEngine.naive,incrementalBf:ReasoningEngine.incrementalBf,incremental:ReasoningEngine.incremental,tagging:ReasoningEngine.tagging,tagFilter:ReasoningEngine.tagFilter}},{"./Logics/Logics":49,"./Logics/Solver":51,"./Utils":59,q:87}],57:[function(a,b,c){b.exports={LITERAL:/^("[\s\S]*")(@([a-zA-Z\-]+)|\^\^<?.+>?)?$/i,LITERAL_UNFORMATTED:/("[\s\S]*"\^\^)([^<].+[^>])$/i,BLANK_NODE:/^_:/i,VARIABLE:/^\?/i,DATATYPE_TYPE:/^<.+>$/i,DBLQUOTED_STRING:/^(")([\s\S]*)(".*)$/i,END_OF_TRIPLE:/^(.+)(> \.)/i,TRIPLE:/(\([^\s]+?\s[^\s]+?\s[^\s]+?\))/gi,ATOM:/\(([^\s]+)\s([^\s]+)\s([^\s]+)\)/i,LITERAL_WITHOUT_TYPE:/^(".*").*$/i,LITERAL_RAW_VALUE:/^"(.*)".*$/i,NO_BRACKET_BODYQUERY:/^[^\{]*\{([^\{\}]*)\}\s*$/i,SINGLE_BRACKET_BODYQUERY:/^[^\{]*\{[^\{\}]*\{([^\{\}]*)\}\s*\}\s*$/i,CONSTRUCT_BODYQUERY_WITH_BRACKETS:/\s*CONSTRUCT\s*\{.*\}\s*WHERE\s*(.*)/i,DELETE_OR_INSERT_STATEMENT:/^[\s]*(delete|insert)(.+)$/i}},{}],58:[function(a,b,c){function h(){}var d=a("./ParsingInterface"),e=a("./Prefixes"),f=a("rdfstore"),g=a("q");h.prototype.init=function(){var a=g.defer(),b=this;return new f.create(function(c,d){c?a.reject(c):(b.storage=d,b.storage.setPrefix("owl",e.OWL),b.storage.setPrefix("rdf",e.RDF),b.storage.setPrefix("rdfs",e.RDFS),a.resolve())}),a.promise},h.prototype.loadRdfXml=function(a){var b=this;return d.rdfXmlToTurtle(a).then(function(a){return b.load(a,"text/turtle")},function(a){throw console.error(a),a})},h.prototype.query=function(a){var b=g.defer();return a=a.replace(/\\/g,"").replace(/(\n|\r)/g,""),this.storage.execute(a,function(a,c){a?b.reject(a):b.resolve(c)}),b.promise},h.prototype.load=function(a,b){var c=g.defer();return this.storage.load(b,a,function(a,b){a?(console.error(a.toString()),c.reject(a)):(console.notify(b+" triples loaded."),c.resolve(b))}),c.promise},h.prototype.clear=function(){return this.query("DELETE { ?a ?b ?c } WHERE { ?a ?b ?c }")},h.prototype.insert=function(a,b){var c;return c=void 0===b?"INSERT DATA { "+a+" }":"INSERT DATA { GRAPH <"+b+"> { "+a+" } }",this.query(c)},h.prototype.delete=function(a,b){var c;return c=void 0===b?"DELETE DATA { "+a+" }":"DELETE DATA { GRAPH <"+b+"> { "+a+" } }",this.query(c)},h.prototype.getContent=function(){return this.query("CONSTRUCT { ?a ?b ?c } WHERE { ?a ?b ?c }")},h.prototype.createStoreWith=function(a){return this.clear().then(function(){return this.insert(a)})},h.prototype.regenerateSideStore=function(){var a=g.defer(),b=this;return new f.create(function(c,d){b.sideStore=d,a.resolve()}),a.promise},h.prototype.loadOntologyIntoSideStore=function(a,b){var c=g.defer();return this.sideStore.load(b,a,function(a,b){a?c.reject(a):c.resolve(b)}),c.promise},h.prototype.loadIntoSideStore=function(a,b){var c=g.defer(),d="INSERT DATA { "+a+" }";b&&(d="INSERT DATA { GRAPH <"+b+"> { "+a+" } }");try{this.sideStore.execute(d,function(a,b){c.resolve(b)})}catch(a){c.reject(a+"\n@"+this.constructor.name)}return c.promise},h.prototype.querySideStore=function(a){var b=g.defer();return this.sideStore.execute(a,function(a,c){b.resolve(c)}),b.promise},b.exports=h},{"./ParsingInterface":53,"./Prefixes":54,q:87,rdfstore:125}],59:[function(a,b,c){var d=a("q"),e=a("./RegularExpressions"),f=function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=function(a){this.arr=[],void 0!==a&&(this.arr=a),this.currentIndex=-1};g.prototype.next=function(){return++this.currentIndex<this.arr.length&&this.arr[this.currentIndex]},g.prototype.contains=function(a){for(var b=0;b<this.arr.length;b++)if(this.arr[b].toString()==a.toString())return!0;return!1},g.prototype.add=function(a){if(!f(a))return!this.contains(a)&&(this.arr.push(a),!0);for(var b=0;b<a.length;b++)this.add(a[b])},g.prototype.toArray=function(){return this.arr},b.exports={_instanceid:1,IterableStructure:g,getKeyByValue:function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&a[c]===b)return c;return!1},uniques:function(a,b){for(var c={},d=[],e=a.concat(b),f=0;f<e.length;f++)void 0!==e[f]&&(c[e[f].toString()]=e[f]);for(var g in c)d.push(c[g]);return d},insertUnique:function(a,b){return this.uniques(a,[b])},emptyObject:function(a){return 0==Object.keys(a).length},containsSubset:function(a,b){return this.uniques(a,b).length==a.length},removeEquivStrRepr:function(a,b){for(var c=0;c<a.length;c++)void 0!==a[c]&&b.toString()==a[c].toString()&&delete a[c]},removeSubset:function(a,b){var c=a.slice(),d=[];if(a.toString()==b.toString())return[];for(var e=0;e<b.length;e++){if(-1===c.toString().indexOf(b[e].toString()))return!1;this.removeEquivStrRepr(c,b[e])}for(var e=0;e<c.length;e++)void 0!==c[e]&&d.push(c[e]);return d},removeFromSet:function(a,b){var c;if(-1===a.toString().indexOf(b.toString()))return!1;c=a.slice();for(var d=0;d<c.length;d++)if(c[d].toString()==b.toString())return c.splice(d,1),c},isArray:f,isVariable:function(a){if(void 0===a)return!1;try{return 0===a.indexOf("?")}catch(a){return!1}},isOperator:function(a){try{return">"==a||"<"==a||"<="==a||">="==a||"=="==a}catch(a){return!1}},isDataType:function(a){try{return 0===a.indexOf('"')}catch(a){return!1}},isURI:function(a){return!this.isVariable(a)&&!this.isDataType(a)},removeBeforeSharp:function(a){return-1===a.indexOf("#")||'"'===a.charAt(0)?a:a.split("#")[1]},equivalentSets:function(a,b){if(a.toString()==b.toString())return!0;for(var c=0;c<a.length;c++)if(this.notInSet(b,a[c]))return!1;return!0},notInSet:function(a,b){return-1===a.toString().indexOf(b.toString())},getValueFromDatatype:function(a){var b=a.match(e.LITERAL_RAW_VALUE)[1],c=a.match(e.LITERAL_WITHOUT_TYPE)[1];return NaN===parseFloat(b)?c:b},emptyPromise:function(a){var b=d.defer();return b.resolve(a),b.promise},tripleContainsVariable:function(a){return!!(this.isVariable(a.subject)||this.isVariable(a.predicate)||this.isVariable(a.object))}}},{"./RegularExpressions":57,q:87}],60:[function(a,b,c){var d=a("fs"),e=a("chalk"),g=(a("q"),a("bluebird")),h=a("./core/Dictionary"),i=a("./core/ParsingInterface"),j=a("./core/StorageManager"),k=a("./core/Reasoner"),l=a("./core/OWL2RL"),m=a("./core/Logics/Fact"),o=(a("./core/Errors"),a("./core/Utils")),p="hylar.log";console.notify=function(a){console.log(e.green("[HyLAR] ")+a);try{d.appendFileSync(p,(new Date).toString()+" "+a+"\n")}catch(a){}},console.warn=function(a){console.log(e.yellow("[HyLAR] WARNING: ")+a);try{d.appendFileSync(p,(new Date).toString()+" "+a+"\n")}catch(a){}},console.error=function(a){console.log(e.white.bgRed("[HyLAR]")+" "+e.bold("ERROR:")+" "+a);try{d.appendFileSync(p,(new Date).toString()+" "+a+"\n")}catch(a){}},Hylar=function(){this.dict=new h,this.sm=new j,this.rules=l.test,this.queryHistory=[],this.sm.init()},Hylar.prototype.clean=function(){this.dict=new h,this.sm=new j,this.sm.init()},Hylar.prototype.setIncremental=function(){this.rMethod=k.process.it.incrementally,this.dict.turnOffForgetting(),console.notify("Reasoner set as incremental.")},Hylar.prototype.setTagBased=function(){this.rMethod=k.process.it.tagBased,this.dict.turnOnForgetting(),console.notify("Reasoner set as tag-based.")},Hylar.prototype.setIncrementalBf=function(){this.rMethod=k.process.it.incrementallyBf,console.notify("Reasoner set as incremental b/f.")},Hylar.prototype.setRules=function(a){this.rules=a},Hylar.prototype.updateReasoningMethod=function(a){switch(a){case"tagBased":this.setTagBased();break;case"incremental":this.setIncremental();break;case"incrementalBf":this.setIncrementalBf();break;default:void 0===this.rMethod&&this.setIncremental()}},Hylar.prototype.load=function(a,b,c,d,e){var f=this;return this.updateReasoningMethod(e),c?this.treatLoad(a,b,d):(this.dict.clear(),this.sm.init().then(function(){return f.treatLoad(a,b,d)}))},Hylar.prototype.treatLoad=function(a,b,c){var d=this;switch(b){case"application/xml":return d.sm.loadRdfXml(a,c).then(function(){return console.notify("Store initialized successfully."),d.classify()});case"application/rdf+xml":return d.sm.loadRdfXml(a,c).then(function(){return d.classify()});case!1:return console.error("Unrecognized or unsupported mimetype. Supported formats are rdf/xml, jsonld, turtle, n3"),!1;default:return d.sm.load(a,b,c).then(function(){return d.classify()},function(a){throw console.error(a),a})}},Hylar.prototype.query=function(a,b){var c=i.parseSPARQL(a),d=[],e=this;if(this.updateReasoningMethod(b),void 0===this.sm.storage)this.sm.init();else switch(c.type){case"update":return i.isUpdateWhere(c)?this.query(i.updateWhereToConstructWhere(a)).then(function(a){return e.query(i.buildUpdateQueryWithConstructResults(c,a))}):this.treatUpdateWithGraph(a);default:return this.rMethod==k.process.it.incrementally?e.sm.query(a):e.sm.regenerateSideStore().then(function(a){for(var b=0;b<c.where.length;b++)d.push(i.isolateWhereQuery(c,b));return g.reduce(d,function(a,b){return e.treatSelectOrConstruct(b)},0)}).then(function(b){return e.sm.querySideStore(a)})}},Hylar.prototype.treatUpdateWithGraph=function(a){for(var d,b=i.parseSPARQL(a),c=[],e=0;e<b.updates.length;e++){"insert"==b.updates[e].updateType?d=b.updates[e].insert:"delete"==b.updates[e].updateType&&(d=b.updates[e].delete);for(var f=0;f<d.length;f++)c.push(this.treatUpdate(d[f],b.updates[e].updateType))}return g.all(c).then(function(a){return[].concat.apply([],a)})},Hylar.prototype.getStorage=function(){return this.sm.getContent().then(function(a){return a.triples.toString()})},Hylar.prototype.setStorage=function(a){return this.sm.createStoreWith(a)},Hylar.prototype.getRulesAsStringArray=function(){for(var a=[],b=0;b<this.rules.length;b++)a.push({name:this.rules[b].name,rule:this.rules[b].toString()});return a},Hylar.prototype.getDictionary=function(){return this.dict},Hylar.prototype.setDictionaryContent=function(a){this.dict.setContent(a)},Hylar.prototype.import=function(a){var b="",c=a.dict;for(var d in c)for(var e in c[d]){b+=e.replace(/(\n|\r|\\)/g,"")+"\n";for(var f=0;f<c[d][e].length;f++)c[d][e][f].__proto__=m.prototype}return this.setDictionaryContent(c),this.sm.load(b,"text/turtle")},Hylar.prototype.checkConsistency=function(){var c,a=this.getDictionary().dict["#default"].__FALSE__,b=!0;return void 0!==a&&(this.isIncremental()||this.isTagBased()&&a[0].isValid())&&(b=!1,c=a.causedBy),{consistent:b,trace:c}},Hylar.prototype.isTagBased=function(){return this.rMethod==k.process.it.tagBased},Hylar.prototype.isIncremental=function(){return this.rMethod==k.process.it.incrementally},Hylar.prototype.treatUpdate=function(a,b){var h,j,m,n,p,c=this,d=a.name,e=[],f=[],l=this.getDictionary().values(d),q=[],r=o.emptyPromise([{triples:[]}]);if("insert"==b)console.notify("Starting insertion."),e=e.concat(a.triples);else if("delete"==b){console.notify("Starting deletion.");for(var s=0;s<a.triples.length;s++)o.tripleContainsVariable(a.triples[s])?(p=i.tripleToTurtle(a.triples[s]),q.push(this.sm.query("CONSTRUCT { "+p+" }  WHERE { "+p+" }"))):f.push(a.triples[s]);r=g.all(q)}return r.then(function(a){for(var b=0;b<a.length;b++)f=f.concat(a[b].triples);return h=i.triplesToFacts(e,!0,c.rMethod==k.process.it.incrementally),j=i.triplesToFacts(f,!0,c.rMethod==k.process.it.incrementally),k.evaluate(h,j,l,c.rMethod,c.rules)}).then(function(a){return c.registerDerivations(a,d),n={insert:i.factsToTurtle(a.additions),delete:i.factsToTurtle(a.deletions)},console.notify("Update completed."),n}).then(function(a){return m=a,""==m.delete||c.sm.delete(m.delete,d)}).then(function(){return""==m.insert||c.sm.insert(m.insert,d)})},Hylar.prototype.treatSelectOrConstruct=function(a){var b=this;if(this.rMethod==k.process.it.tagBased){var c,d,e,f,g,j=i.parseSPARQL(a),l=j.where[0].name,m=i.constructEquivalentQuery(a,l);return this.sm.query(m).then(function(a){return f=a.triples,c=b.dict.findValues(f,l),e=c.found,d=c.notfound,{results:a,filtered:k.engine.tagFilter(e,b.dict.values(l))}}).then(function(a){return g=b.dict.findKeys(a.filtered,l).found.join(" "),b.sm.loadIntoSideStore(g,l)})}return this.sm.query(a)},Hylar.prototype.registerDerivations=function(a,b){var c=a.additions,d=a.deletions;b=this.dict.resolveGraph(b),console.notify("Registering derivations to dictionary...");for(var e=0;e<d.length;e++)"IFALSE"==d[e].toString()?delete this.dict.dict[b].__FALSE__:delete this.dict.dict[b][i.factToTurtle(d[e])];for(var e=0;e<c.length;e++)this.dict.put(c[e],b);console.notify("Registered successfully.")},Hylar.prototype.classify=function(){var b,a=this,c=[],d=10;return console.notify("Classification started."),this.sm.query("CONSTRUCT { ?a ?b ?c } WHERE { ?a ?b ?c }").then(function(b){for(var d,e,f,c=[],g=0;g<b.triples.length;g++)d=b.triples[g],"BlankNode"!=d.subject.interfaceName&&"BlankNode"!=d.predicate.interfaceName&&"BlankNode"!=d.object.interfaceName&&(e=a.dict.get(d),e?c=c.concat(e):(f=i.tripleToFact(d,!0,a.rMethod==k.process.it.incrementally),a.dict.put(f),c.push(f)));return k.evaluate(c,[],[],a.rMethod,a.rules)}).then(function(e){a.registerDerivations(e);for(var f=0,g=e.additions.length;f<g;f+=d)b=e.additions.slice(f,f+d),c.push(i.factsToTurtle(b))}).then(function(){return console.notify("Classification succeeded."),g.reduce(c,function(b,c){return a.sm.insert(c)},0)}).then(function(){return!0})},Hylar.prototype.addRules=function(a){this.rules=this.rules.concat(a)},Hylar.prototype.addRule=function(a,b){this.rules.push(a),this.rules[this.rules.length-1].setName(b)},Hylar.prototype.removeRule=function(a){for(var b=[],c=0;c<this.rules.length;c++)c!=a?b.push(this.rules[c]):console.notify("Removed rule "+this.rules[c].toString());this.rules=b},Hylar.prototype.addToQueryHistory=function(a,b){this.queryHistory.push({query:a,noError:b})},Hylar.prototype.resetRules=function(){this.rules=l.rules},b.exports=Hylar},{"./core/Dictionary":45,"./core/Errors":46,"./core/Logics/Fact":48,"./core/OWL2RL":52,"./core/ParsingInterface":53,"./core/Reasoner":55,"./core/StorageManager":58,"./core/Utils":59,bluebird:64,chalk:65,fs:1,q:87}],61:[function(a,b,c){(function(c,d){"use strict";function e(b,e){function l(a){var b,c;for(b=0;a[b];b+=1)if("."===(c=a[b]))a.splice(b,1),b-=1;else if(".."===c){if(1===b&&(".."===a[2]||".."===a[0]))break;b>0&&(a.splice(b-1,2),b-=2)}}function m(a,b){var c;return a&&"."===a.charAt(0)&&b&&(c=b.split("/"),c=c.slice(0,c.length-1),c=c.concat(a.split("/")),l(c),a=c.join("/")),a}function n(a){return function(b){return m(b,a)}}function o(a){function b(b){g[a]=b}return b.fromText=function(a,b){throw new Error("amdefine does not implement load.fromText")},b}function p(a,c,f){var i,k,l,m;if(a)k=g[a]={},l={id:a,uri:d,exports:k},i=j(e,k,l,a);else{if(h)throw new Error("amdefine with no module ID cannot be called more than once per file.");h=!0,k=b.exports,l=b,i=j(e,k,l,b.id)}c&&(c=c.map(function(a){return i(a)})),void 0!==(m="function"==typeof f?f.apply(l.exports,c):f)&&(l.exports=m,a&&(g[a]=l.exports))}function q(a,b,c){Array.isArray(a)?(c=b,b=a,a=void 0):"string"!=typeof a&&(c=a,a=b=void 0),b&&!Array.isArray(b)&&(c=b,b=void 0),b||(b=["require","exports","module"]),a?f[a]=[a,b,c]:p(a,b,c)}var j,k,f={},g={},h=!1,i=a("path");return j=function(a,b,d,e){function f(f,g){if("string"==typeof f)return k(a,b,d,f,e);f=f.map(function(c){return k(a,b,d,c,e)}),g&&c.nextTick(function(){g.apply(null,f)})}return f.toUrl=function(a){return 0===a.indexOf(".")?m(a,i.dirname(d.filename)):a},f},e=e||function(){return b.require.apply(b,arguments)},k=function(a,b,c,d,e){var l,q,h=d.indexOf("!"),i=d;if(-1===h){if("require"===(d=m(d,e)))return j(a,b,c,e);if("exports"===d)return b;if("module"===d)return c;if(g.hasOwnProperty(d))return g[d];if(f[d])return p.apply(null,f[d]),g[d];if(a)return a(i);throw new Error("No module with ID: "+d)}return l=d.substring(0,h),d=d.substring(h+1,d.length),q=k(a,b,c,l,e),d=q.normalize?q.normalize(d,n(e)):m(d,e),g[d]?g[d]:(q.load(d,j(a,b,c,e),o(d),{}),g[d])},q.require=function(a){return g[a]?g[a]:f[a]?(p.apply(null,f[a]),g[a]):void 0},q.amd={},q}b.exports=e}).call(this,a("_process"),"/node_modules\\amdefine\\amdefine.js")},{_process:15,path:14}],62:[function(a,b,c){"use strict";b.exports=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g}},{}],63:[function(a,b,c){"use strict";function d(){var a={modifiers:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};return a.colors.grey=a.colors.gray,Object.keys(a).forEach(function(b){var c=a[b];Object.keys(c).forEach(function(b){var d=c[b];a[b]=c[b]={open:"["+d[0]+"m",close:"["+d[1]+"m"}}),Object.defineProperty(a,b,{value:c,enumerable:!1})}),a}Object.defineProperty(b,"exports",{enumerable:!0,get:d})},{}],64:[function(require,module,exports){(function(process,global){!function(a){if("object"==typeof exports&&void 0!==module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:void 0!==global?b=global:"undefined"!=typeof self&&(b=self),b.Promise=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof _dereq_&&_dereq_;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof _dereq_&&_dereq_,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=function(a){function c(a){var c=new b(a),d=c.promise();return c.setHowMany(1),c.setUnwrap(),c.init(),d}var b=a._SomePromiseArray;a.any=function(a){return c(a)},a.prototype.any=function(){return c(this)}}},{}],2:[function(a,b,c){"use strict";function h(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new f(16),this._normalQueue=new f(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var a=this;this.drainQueues=function(){a._drainQueues()},this._schedule=e}function i(a,b,c){this._lateQueue.push(a,b,c),this._queueTick()}function j(a,b,c){this._normalQueue.push(a,b,c),this._queueTick()}function k(a){this._normalQueue._pushOne(a),this._queueTick()}var d;try{throw new Error}catch(a){d=a}var e=a("./schedule"),f=a("./queue"),g=a("./util");h.prototype.setScheduler=function(a){var b=this._schedule;return this._schedule=a,this._customScheduler=!0,b},h.prototype.hasCustomScheduler=function(){return this._customScheduler},h.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},h.prototype.disableTrampolineIfNecessary=function(){g.hasDevTools&&(this._trampolineEnabled=!1)},h.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},h.prototype.fatalError=function(a,b){b?(process.stderr.write("Fatal "+(a instanceof Error?a.stack:a)+"\n"),process.exit(2)):this.throwLater(a)},h.prototype.throwLater=function(a,b){if(1===arguments.length&&(b=a,a=function(){throw b}),"undefined"!=typeof setTimeout)setTimeout(function(){a(b)},0);else try{this._schedule(function(){a(b)})}catch(a){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},g.hasDevTools?(h.prototype.invokeLater=function(a,b,c){this._trampolineEnabled?i.call(this,a,b,c):this._schedule(function(){setTimeout(function(){a.call(b,c)},100)})},h.prototype.invoke=function(a,b,c){this._trampolineEnabled?j.call(this,a,b,c):this._schedule(function(){a.call(b,c)})},h.prototype.settlePromises=function(a){this._trampolineEnabled?k.call(this,a):this._schedule(function(){a._settlePromises()})}):(h.prototype.invokeLater=i,h.prototype.invoke=j,h.prototype.settlePromises=k),h.prototype.invokeFirst=function(a,b,c){this._normalQueue.unshift(a,b,c),this._queueTick()},h.prototype._drainQueue=function(a){for(;a.length()>0;){var b=a.shift();if("function"==typeof b){var c=a.shift(),d=a.shift();b.call(c,d)}else b._settlePromises()}},h.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},h.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},h.prototype._reset=function(){this._isTickUsed=!1},b.exports=h,b.exports.firstLineError=d},{"./queue":26,"./schedule":29,"./util":36}],3:[function(a,b,c){"use strict";b.exports=function(a,b,c,d){var e=!1,f=function(a,b){this._reject(b)},g=function(a,b){b.promiseRejectionQueued=!0,b.bindingPromise._then(f,f,null,this,a)},h=function(a,b){0==(50397184&this._bitField)&&this._resolveCallback(b.target)},i=function(a,b){b.promiseRejectionQueued||this._reject(a)};a.prototype.bind=function(f){e||(e=!0,a.prototype._propagateFrom=d.propagateFromFunction(),a.prototype._boundValue=d.boundValueFunction());var j=c(f),k=new a(b);k._propagateFrom(this,1);var l=this._target();if(k._setBoundTo(j),j instanceof a){var m={promiseRejectionQueued:!1,promise:k,target:l,bindingPromise:j};l._then(b,g,void 0,k,m),j._then(h,i,void 0,k,m),k._setOnCancel(j)}else k._resolveCallback(l);return k},a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=2097152|this._bitField,this._boundTo=a):this._bitField=-2097153&this._bitField},a.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},a.bind=function(b,c){return a.resolve(c).bind(b)}}},{}],4:[function(a,b,c){"use strict";function e(){try{Promise===f&&(Promise=d)}catch(a){}return f}var d;"undefined"!=typeof Promise&&(d=Promise);var f=a("./promise")();f.noConflict=e,b.exports=f},{"./promise":22}],5:[function(a,b,c){"use strict";var d=Object.create;if(d){var e=d(null),f=d(null);e[" size"]=f[" size"]=0}b.exports=function(b){function m(a,d){var e;if(null!=a&&(e=a[d]),"function"!=typeof e){var f="Object "+c.classString(a)+" has no method '"+c.toString(d)+"'";throw new b.TypeError(f)}return e}function n(a){return m(a,this.pop()).apply(a,this)}function o(a){return a[this]}function p(a){var b=+this;return b<0&&(b=Math.max(0,b+a.length)),a[b]}var i,c=a("./util"),d=c.canEvaluate;c.isIdentifier;b.prototype.call=function(a){var b=[].slice.call(arguments,1);return b.push(a),this._then(n,void 0,void 0,b,void 0)},b.prototype.get=function(a){var c,b="number"==typeof a;if(b)c=p;else if(d){var e=i(a);c=null!==e?e:o}else c=o;return this._then(c,void 0,void 0,a,void 0)}}},{"./util":36}],6:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util"),g=f.tryCatch,h=f.errorObj,i=b._async;b.prototype.break=b.prototype.cancel=function(){if(!e.cancellation())return this._warn("cancellation is disabled");for(var a=this,b=a;a.isCancellable();){if(!a._cancelBy(b)){b._isFollowing()?b._followee().cancel():b._cancelBranched();break}var c=a._cancellationParent;if(null==c||!c.isCancellable()){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}a._isFollowing()&&a._followee().cancel(),b=a,a=c}},b.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},b.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},b.prototype._cancelBy=function(a){return a===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},b.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},b.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),i.invoke(this._cancelPromises,this,void 0))},b.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},b.prototype._unsetOnCancel=function(){this._onCancelField=void 0},b.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},b.prototype._doInvokeOnCancel=function(a,b){if(f.isArray(a))for(var c=0;c<a.length;++c)this._doInvokeOnCancel(a[c],b);else if(void 0!==a)if("function"==typeof a){if(!b){var d=g(a).call(this._boundValue());d===h&&(this._attachExtraTrace(d.e),i.throwLater(d.e))}}else a._resultCancelled(this)},b.prototype._invokeOnCancel=function(){var a=this._onCancel();this._unsetOnCancel(),i.invoke(this._doInvokeOnCancel,this,a)},b.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},b.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(a,b,c){"use strict";b.exports=function(b){function g(a,g,h){return function(i){var j=h._boundValue();a:for(var k=0;k<a.length;++k){var l=a[k];if(l===Error||null!=l&&l.prototype instanceof Error){if(i instanceof l)return e(g).call(j,i)}else if("function"==typeof l){var m=e(l).call(j,i);if(m===f)return m;if(m)return e(g).call(j,i)}else if(c.isObject(i)){for(var n=d(l),o=0;o<n.length;++o){var p=n[o];if(l[p]!=i[p])continue a}return e(g).call(j,i)}}return b}}var c=a("./util"),d=a("./es5").keys,e=c.tryCatch,f=c.errorObj;return g}},{"./es5":13,"./util":36}],8:[function(a,b,c){"use strict";b.exports=function(a){function d(){this._trace=new d.CapturedTrace(f())}function e(){if(b)return new d}function f(){var a=c.length-1;if(a>=0)return c[a]}var b=!1,c=[];return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},d.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,c.push(this._trace))},d.prototype._popContext=function(){if(void 0!==this._trace){var a=c.pop(),b=a._promiseCreated;return a._promiseCreated=null,b}return null},d.CapturedTrace=null,d.create=e,d.deactivateLongStackTraces=function(){},d.activateLongStackTraces=function(){var c=a.prototype._pushContext,e=a.prototype._popContext,g=a._peekContext,h=a.prototype._peekContext,i=a.prototype._promiseCreated;d.deactivateLongStackTraces=function(){a.prototype._pushContext=c,a.prototype._popContext=e,a._peekContext=g,a.prototype._peekContext=h,a.prototype._promiseCreated=i,b=!1},b=!0,a.prototype._pushContext=d.prototype._pushContext,a.prototype._popContext=d.prototype._popContext,a._peekContext=a.prototype._peekContext=f,a.prototype._promiseCreated=function(){var a=this._peekContext();a&&null==a._promiseCreated&&(a._promiseCreated=this)}},d}},{}],9:[function(a,b,c){"use strict";b.exports=function(b,c){function w(a,b){return{promise:b}}function z(){return!1}function A(a,b,c){var d=this;try{a(b,c,function(a){if("function"!=typeof a)throw new TypeError("onCancel must be a function, got: "+g.toString(a));d._attachCancellationCallback(a)})}catch(a){return a}}function B(a){if(!this.isCancellable())return this;var b=this._onCancel();void 0!==b?g.isArray(b)?b.push(a):this._setOnCancel([b,a]):this._setOnCancel(a)}function C(){return this._onCancelField}function D(a){this._onCancelField=a}function E(){this._cancellationParent=void 0,this._onCancelField=void 0}function F(a,b){if(0!=(1&b)){this._cancellationParent=a;var c=a._branchesRemainingToCancel;void 0===c&&(c=0),a._branchesRemainingToCancel=c+1}0!=(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function G(a,b){0!=(2&b)&&a._isBound()&&this._setBoundTo(a._boundTo)}function I(){var a=this._boundTo;return void 0!==a&&a instanceof b?a.isFulfilled()?a.value():void 0:a}function J(){this._trace=new ba(this._peekContext())}function K(a,b){if(h(a)){var c=this._trace;if(void 0!==c&&b&&(c=c._parent),void 0!==c)c.attachExtraTrace(a);else if(!a.__stackCleaned__){var d=T(a);g.notEnumerableProp(a,"stack",d.message+"\n"+d.stack.join("\n")),g.notEnumerableProp(a,"__stackCleaned__",!0)}}}function L(a,b,c,d,e){if(void 0===a&&null!==b&&s){if(void 0!==e&&e._returnedNonUndefined())return;if(0==(65535&d._bitField))return;c&&(c+=" ");var f="a promise was created in a "+c+"handler but was not returned from it";d._warn(f,!0,b)}}function M(a,b){var c=a+" is deprecated and will be removed in a future version.";return b&&(c+=" Use "+b+" instead."),N(c)}function N(a,c,d){if(da.warnings){var g,e=new f(a);if(c)d._attachExtraTrace(e);else if(da.longStackTraces&&(g=b._peekContext()))g.attachExtraTrace(e);else{var h=T(e);e.stack=h.message+"\n"+h.stack.join("\n")}y("warning",e)||U(e,"",!0)}}function O(a,b){for(var c=0;c<b.length-1;++c)b[c].push("From previous event:"),b[c]=b[c].join("\n");return c<b.length&&(b[c]=b[c].join("\n")),a+"\n"+b.join("\n")}function P(a){for(var b=0;b<a.length;++b)(0===a[b].length||b+1<a.length&&a[b][0]===a[b+1][0])&&(a.splice(b,1),b--)}function Q(a){for(var b=a[0],c=1;c<a.length;++c){for(var d=a[c],e=b.length-1,f=b[e],g=-1,h=d.length-1;h>=0;--h)if(d[h]===f){g=h;break}for(var h=g;h>=0;--h){var i=d[h];if(b[e]!==i)break;b.pop(),e--}b=d}}function R(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e="    (No stack trace)"===d||l.test(d),f=e&&Z(d);e&&!f&&(n&&" "!==d.charAt(0)&&(d="    "+d),b.push(d))}return b}function S(a){for(var b=a.stack.replace(/\s+$/g,"").split("\n"),c=0;c<b.length;++c){var d=b[c];if("    (No stack trace)"===d||l.test(d))break}return c>0&&(b=b.slice(c)),b}function T(a){var b=a.stack,c=a.toString();return b="string"==typeof b&&b.length>0?S(a):["    (No stack trace)"],{message:c,stack:R(b)}}function U(a,b,c){if("undefined"!=typeof console){var d;if(g.isObject(a)){var e=a.stack;d=b+m(e,a)}else d=b+String(a);"function"==typeof o?o(d,c):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(d)}}function V(a,b,c,d){var f=!1;try{"function"==typeof b&&(f=!0,"rejectionHandled"===a?b(d):b(c,d))}catch(a){e.throwLater(a)}"unhandledRejection"===a?y(a,c,d)||f||U(c,"Unhandled rejection "):y(a,d)}function W(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a&&"function"==typeof a.toString?a.toString():g.toString(a);if(/\[object [a-zA-Z0-9$_]+\]/.test(b))try{b=JSON.stringify(a)}catch(a){}0===b.length&&(b="(empty array)")}return"(<"+X(b)+">, no stack trace)"}function X(a){var b=41;return a.length<b?a:a.substr(0,b-3)+"..."}function Y(){return"function"==typeof ca}function _(a){var b=a.match($);if(b)return{fileName:b[1],line:parseInt(b[2],10)}}function aa(a,b){if(Y()){for(var g,h,c=a.stack.split("\n"),d=b.stack.split("\n"),e=-1,f=-1,i=0;i<c.length;++i){var j=_(c[i]);if(j){g=j.fileName,e=j.line;break}}for(var i=0;i<d.length;++i){var j=_(d[i]);if(j){h=j.fileName,f=j.line;break}}e<0||f<0||!g||!h||g!==h||e>=f||(Z=function(a){if(k.test(a))return!0;var b=_(a);return!!(b&&b.fileName===g&&e<=b.line&&b.line<=f)})}}function ba(a){this._parent=a,this._promisesCreated=0;var b=this._length=1+(void 0===a?0:a._length);ca(this,ba),b>32&&this.uncycle()}var i,j,o,d=b._getDomain,e=b._async,f=a("./errors").Warning,g=a("./util"),h=g.canAttachTrace,k=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,l=null,m=null,n=!1,p=!(0==g.env("BLUEBIRD_DEBUG")),q=!(0==g.env("BLUEBIRD_WARNINGS")||!p&&!g.env("BLUEBIRD_WARNINGS")),r=!(0==g.env("BLUEBIRD_LONG_STACK_TRACES")||!p&&!g.env("BLUEBIRD_LONG_STACK_TRACES")),s=0!=g.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(q||!!g.env("BLUEBIRD_W_FORGOTTEN_RETURN"));b.prototype.suppressUnhandledRejections=function(){var a=this._target();a._bitField=-1048577&a._bitField|524288},b.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),e.invokeLater(this._notifyUnhandledRejection,this,void 0))},b.prototype._notifyUnhandledRejectionIsHandled=function(){V("rejectionHandled",i,void 0,this)},b.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},b.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},b.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue();this._setUnhandledRejectionIsNotified(),V("unhandledRejection",j,a,this)}},b.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},b.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},b.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},b.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},b.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},b.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},b.prototype._warn=function(a,b,c){return N(a,b,c||this)},b.onPossiblyUnhandledRejection=function(a){var b=d();j="function"==typeof a?null===b?a:b.bind(a):void 0},b.onUnhandledRejectionHandled=function(a){var b=d();i="function"==typeof a?null===b?a:b.bind(a):void 0};var t=function(){};b.longStackTraces=function(){if(e.haveItemsQueued()&&!da.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!da.longStackTraces&&Y()){var a=b.prototype._captureStackTrace,d=b.prototype._attachExtraTrace;da.longStackTraces=!0,t=function(){if(e.haveItemsQueued()&&!da.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");b.prototype._captureStackTrace=a,b.prototype._attachExtraTrace=d,c.deactivateLongStackTraces(),e.enableTrampoline(),da.longStackTraces=!1},b.prototype._captureStackTrace=J,b.prototype._attachExtraTrace=K,c.activateLongStackTraces(),e.disableTrampolineIfNecessary()}},b.hasLongStackTraces=function(){return da.longStackTraces&&Y()};var u=function(){try{var a=document.createEvent("CustomEvent");return a.initCustomEvent("testingtheevent",!1,!0,{}),g.global.dispatchEvent(a),function(a,b){var c=document.createEvent("CustomEvent");return c.initCustomEvent(a.toLowerCase(),!1,!0,b),!g.global.dispatchEvent(c)}}catch(a){}return function(){return!1}}(),v=function(){return g.isNode?function(){return process.emit.apply(process,arguments)}:g.global?function(a){var b="on"+a.toLowerCase(),c=g.global[b];return!!c&&(c.apply(g.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),x={promiseCreated:w,promiseFulfilled:w,promiseRejected:w,promiseResolved:w,promiseCancelled:w,promiseChained:function(a,b,c){return{promise:b,child:c}},warning:function(a,b){return{warning:b}},unhandledRejection:function(a,b,c){return{reason:b,promise:c}},rejectionHandled:w},y=function(a){var b=!1;try{b=v.apply(null,arguments)}catch(a){e.throwLater(a),b=!0}var c=!1;try{c=u(a,x[a].apply(null,arguments))}catch(a){e.throwLater(a),c=!0}return c||b};b.config=function(a){if(a=Object(a),"longStackTraces"in a&&(a.longStackTraces?b.longStackTraces():!a.longStackTraces&&b.hasLongStackTraces()&&t()),"warnings"in a){var c=a.warnings;da.warnings=!!c,s=da.warnings,g.isObject(c)&&"wForgottenReturn"in c&&(s=!!c.wForgottenReturn)}if("cancellation"in a&&a.cancellation&&!da.cancellation){if(e.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");b.prototype._clearCancellationData=E,b.prototype._propagateFrom=F,b.prototype._onCancel=C,b.prototype._setOnCancel=D,b.prototype._attachCancellationCallback=B,b.prototype._execute=A,H=F,da.cancellation=!0}"monitoring"in a&&(a.monitoring&&!da.monitoring?(da.monitoring=!0,b.prototype._fireEvent=y):!a.monitoring&&da.monitoring&&(da.monitoring=!1,b.prototype._fireEvent=z))},b.prototype._fireEvent=z,b.prototype._execute=function(a,b,c){try{a(b,c)}catch(a){return a}},b.prototype._onCancel=function(){},b.prototype._setOnCancel=function(a){},b.prototype._attachCancellationCallback=function(a){},b.prototype._captureStackTrace=function(){},b.prototype._attachExtraTrace=function(){},b.prototype._clearCancellationData=function(){},b.prototype._propagateFrom=function(a,b){};var H=G,Z=function(){return!1},$=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;g.inherits(ba,Error),c.CapturedTrace=ba,ba.prototype.uncycle=function(){var a=this._length;if(!(a<2)){for(var b=[],c={},d=0,e=this;void 0!==e;++d)b.push(e),e=e._parent;a=this._length=d;for(var d=a-1;d>=0;--d){var f=b[d].stack;void 0===c[f]&&(c[f]=d)}for(var d=0;d<a;++d){var g=b[d].stack,h=c[g];if(void 0!==h&&h!==d){h>0&&(b[h-1]._parent=void 0,b[h-1]._length=1),b[d]._parent=void 0,b[d]._length=1;var i=d>0?b[d-1]:this;h<a-1?(i._parent=b[h+1],i._parent.uncycle(),i._length=i._parent._length+1):(i._parent=void 0,i._length=1);for(var j=i._length+1,k=d-2;k>=0;--k)b[k]._length=j,j++;return}}}},ba.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();for(var b=T(a),c=b.message,d=[b.stack],e=this;void 0!==e;)d.push(R(e.stack.split("\n"))),e=e._parent;Q(d),P(d),g.notEnumerableProp(a,"stack",O(c,d)),g.notEnumerableProp(a,"__stackCleaned__",!0)}};var ca=function(){var b=/^\s*at\s*/,c=function(a,b){return"string"==typeof a?a:void 0!==b.name&&void 0!==b.message?b.toString():W(b)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,l=b,m=c;var d=Error.captureStackTrace;return Z=function(a){return k.test(a)},function(a,b){Error.stackTraceLimit+=6,d(a,b),Error.stackTraceLimit-=6}}var e=new Error;if("string"==typeof e.stack&&e.stack.split("\n")[0].indexOf("stackDetection@")>=0)return l=/@/,m=c,n=!0,function(b){b.stack=(new Error).stack};var f;try{throw new Error}catch(a){f="stack"in a}return"stack"in e||!f||"number"!=typeof Error.stackTraceLimit?(m=function(a,b){return"string"==typeof a?a:"object"!=typeof b&&"function"!=typeof b||void 0===b.name||void 0===b.message?W(b):b.toString()},null):(l=b,m=c,function(b){Error.stackTraceLimit+=6;try{throw new Error}catch(a){b.stack=a.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(o=function(a){console.warn(a)},g.isNode&&process.stderr.isTTY?o=function(a,b){var c=b?"[33m":"[31m";console.warn(c+a+"[0m\n")}:g.isNode||"string"!=typeof(new Error).stack||(o=function(a,b){console.warn("%c"+a,b?"color: darkorange":"color: red")}));var da={warnings:q,longStackTraces:!1,cancellation:!1,monitoring:!1};return r&&b.longStackTraces(),{longStackTraces:function(){return da.longStackTraces},warnings:function(){return da.warnings},cancellation:function(){return da.cancellation},monitoring:function(){return da.monitoring},propagateFromFunction:function(){return H},boundValueFunction:function(){return I},checkForgottenReturns:L,setBounds:aa,warn:N,deprecated:M,CapturedTrace:ba,fireDomEvent:u,fireGlobalEvent:v}}},{"./errors":12,"./util":36}],10:[function(a,b,c){"use strict";b.exports=function(a){function b(){return this.value}function c(){throw this.reason}a.prototype.return=a.prototype.thenReturn=function(c){return c instanceof a&&c.suppressUnhandledRejections(),this._then(b,void 0,void 0,{value:c},void 0)},a.prototype.throw=a.prototype.thenThrow=function(a){return this._then(c,void 0,void 0,{reason:a},void 0)},a.prototype.catchThrow=function(a){if(arguments.length<=1)return this._then(void 0,c,void 0,{reason:a},void 0);var b=arguments[1],d=function(){throw b};return this.caught(a,d)},a.prototype.catchReturn=function(c){if(arguments.length<=1)return c instanceof a&&c.suppressUnhandledRejections(),this._then(void 0,b,void 0,{value:c},void 0);var d=arguments[1];d instanceof a&&d.suppressUnhandledRejections();var e=function(){return d};return this.caught(c,e)}}},{}],11:[function(a,b,c){"use strict";b.exports=function(a,b){function e(){return d(this)}function f(a,d){return c(a,d,b,b)}var c=a.reduce,d=a.all;a.prototype.each=function(a){return this.mapSeries(a)._then(e,void 0,void 0,this,void 0)},a.prototype.mapSeries=function(a){return c(this,a,b,b)},a.each=function(a,b){return f(a,b)._then(e,void 0,void 0,a,void 0)},a.mapSeries=f}},{}],12:[function(a,b,c){"use strict";function i(a,b){function c(d){if(!(this instanceof c))return new c(d);h(this,"message","string"==typeof d?d:b),h(this,"name",a),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return g(c,Error),c}function s(a){if(!(this instanceof s))return new s(a);h(this,"name","OperationalError"),h(this,"message",a),this.cause=a,this.isOperational=!0,a instanceof Error?(h(this,"message",a.message),h(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var j,k,d=a("./es5"),e=d.freeze,f=a("./util"),g=f.inherits,h=f.notEnumerableProp,l=i("Warning","warning"),m=i("CancellationError","cancellation error"),n=i("TimeoutError","timeout error"),o=i("AggregateError","aggregate error");try{j=TypeError,k=RangeError}catch(a){j=i("TypeError","type error"),k=i("RangeError","range error")}for(var p="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),q=0;q<p.length;++q)"function"==typeof Array.prototype[p[q]]&&(o.prototype[p[q]]=Array.prototype[p[q]]);d.defineProperty(o.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),o.prototype.isOperational=!0;var r=0;o.prototype.toString=function(){var a=Array(4*r+1).join(" "),b="\n"+a+"AggregateError of:\n";r++,a=Array(4*r+1).join(" ");for(var c=0;c<this.length;++c){for(var d=this[c]===this?"[Circular AggregateError]":this[c]+"",e=d.split("\n"),f=0;f<e.length;++f)e[f]=a+e[f];d=e.join("\n"),b+=d+"\n"}return r--,b},g(s,Error);var t=Error.__BluebirdErrorTypes__;t||(t=e({CancellationError:m,TimeoutError:n,OperationalError:s,RejectionError:s,AggregateError:o}),d.defineProperty(Error,"__BluebirdErrorTypes__",{value:t,writable:!1,enumerable:!1,configurable:!1})),b.exports={Error:Error,TypeError:j,RangeError:k,CancellationError:t.CancellationError,OperationalError:t.OperationalError,TimeoutError:t.TimeoutError,AggregateError:t.AggregateError,Warning:l}},{"./es5":13,"./util":36}],13:[function(a,b,c){var d=function(){"use strict";return void 0===this}();if(d)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:d,propertyIsWritable:function(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return!(c&&!c.writable&&!c.set)}};else{var e={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,h=function(a){var b=[];for(var c in a)e.call(a,c)&&b.push(c);return b},i=function(a,b){return{value:a[b]}},j=function(a,b,c){return a[b]=c.value,a},k=function(a){return a},l=function(a){try{return Object(a).constructor.prototype}catch(a){return g}},m=function(a){try{return"[object Array]"===f.call(a)}catch(a){return!1}};b.exports={isArray:m,keys:h,names:h,defineProperty:j,getDescriptor:i,freeze:k,getPrototypeOf:l,isES5:d,propertyIsWritable:function(){return!0}}}},{}],14:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.map;a.prototype.filter=function(a,d){return c(this,a,d,b)},a.filter=function(a,d,e){return c(a,d,e,b)}}},{}],15:[function(a,b,c){"use strict";b.exports=function(b,c){function g(a,b,c){this.promise=a,this.type=b,this.handler=c,this.called=!1,this.cancelPromise=null}function h(a){this.finallyHandler=a}function i(a,b){return null!=a.cancelPromise&&(arguments.length>1?a.cancelPromise._reject(b):a.cancelPromise._cancel(),a.cancelPromise=null,!0)}function j(){return l.call(this,this.promise._target()._settledValue())}function k(a){if(!i(this,a))return f.e=a,f}function l(a){var d=this.promise,g=this.handler;if(!this.called){this.called=!0;var l=this.isFinallyHandler()?g.call(d._boundValue()):g.call(d._boundValue(),a);if(void 0!==l){d._setReturnedNonUndefined();var m=c(l,d);if(m instanceof b){if(null!=this.cancelPromise){if(m.isCancelled()){var n=new e("late cancellation observer");return d._attachExtraTrace(n),f.e=n,f}m.isPending()&&m._attachCancellationCallback(new h(this))}return m._then(j,k,void 0,this,void 0)}}}return d.isRejected()?(i(this),f.e=a,f):(i(this),a)}var d=a("./util"),e=b.CancellationError,f=d.errorObj;return g.prototype.isFinallyHandler=function(){return 0===this.type},h.prototype._resultCancelled=function(){i(this.finallyHandler)},b.prototype._passThrough=function(a,b,c,d){return"function"!=typeof a?this.then():this._then(c,d,void 0,new g(this,b,a),void 0)},b.prototype.lastly=b.prototype.finally=function(a){return this._passThrough(a,0,l,l)},b.prototype.tap=function(a){return this._passThrough(a,1,l)},g}},{"./util":36}],16:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function n(a,c,d){for(var f=0;f<c.length;++f){d._pushContext();var g=l(c[f])(a);if(d._popContext(),g===k){d._pushContext();var h=b.reject(k.e);return d._popContext(),h}var i=e(g,d);if(i instanceof b)return i}return null}function o(a,c,e,f){if(g.cancellation()){var h=new b(d),i=this._finallyPromise=new b(d);this._promise=h.lastly(function(){return i}),h._captureStackTrace(),h._setOnCancel(this)}else{(this._promise=new b(d))._captureStackTrace()}this._stack=f,this._generatorFunction=a,this._receiver=c,this._generator=void 0,this._yieldHandlers="function"==typeof e?[e].concat(m):m,this._yieldedPromise=null,this._cancellationPhase=!1}var h=a("./errors"),i=h.TypeError,j=a("./util"),k=j.errorObj,l=j.tryCatch,m=[];j.inherits(o,f),o.prototype._isResolved=function(){return null===this._promise},o.prototype._cleanup=function(){this._promise=this._generator=null,g.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},o.prototype._promiseCancelled=function(){if(!this._isResolved()){var c,a=void 0!==this._generator.return;if(a)this._promise._pushContext(),c=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var d=new b.CancellationError("generator .return() sentinel");b.coroutine.returnSentinel=d,this._promise._attachExtraTrace(d),this._promise._pushContext(),c=l(this._generator.throw).call(this._generator,d),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(c)}},o.prototype._promiseFulfilled=function(a){this._yieldedPromise=null,this._promise._pushContext();var b=l(this._generator.next).call(this._generator,a);this._promise._popContext(),this._continue(b)},o.prototype._promiseRejected=function(a){this._yieldedPromise=null,this._promise._attachExtraTrace(a),this._promise._pushContext();var b=l(this._generator.throw).call(this._generator,a);this._promise._popContext(),this._continue(b)},o.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof b){var a=this._yieldedPromise;this._yieldedPromise=null,a.cancel()}},o.prototype.promise=function(){return this._promise},o.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},o.prototype._continue=function(a){var c=this._promise;if(a===k)return this._cleanup(),this._cancellationPhase?c.cancel():c._rejectCallback(a.e,!1);var d=a.value;if(!0===a.done)return this._cleanup(),this._cancellationPhase?c.cancel():c._resolveCallback(d);var f=e(d,this._promise);if(!(f instanceof b)&&null===(f=n(f,this._yieldHandlers,this._promise)))return void this._promiseRejected(new i("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",d)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));f=f._target();var g=f._bitField;0==(50397184&g)?(this._yieldedPromise=f,f._proxy(this,null)):0!=(33554432&g)?this._promiseFulfilled(f._value()):0!=(16777216&g)?this._promiseRejected(f._reason()):this._promiseCancelled()},b.coroutine=function(a,b){if("function"!=typeof a)throw new i("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var c=Object(b).yieldHandler,d=o,e=(new Error).stack;return function(){var b=a.apply(this,arguments),f=new d(void 0,void 0,c,e),g=f.promise();return f._generator=b,f._promiseFulfilled(void 0),g}},b.coroutine.addYieldHandler=function(a){if("function"!=typeof a)throw new i("expecting a function but got "+j.classString(a));m.push(a)},b.spawn=function(a){if(g.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof a)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var d=new o(a,this),e=d.promise();return d._run(b.spawn),e}}},{"./errors":12,"./util":36}],17:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util");f.canEvaluate,f.tryCatch,f.errorObj;b.join=function(){var f,a=arguments.length-1;if(a>0&&"function"==typeof arguments[a]){f=arguments[a];var h}var s=[].slice.call(arguments);f&&s.pop();var h=new c(s).promise();return void 0!==f?h.spread(f):h}}},{"./util":36}],18:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function m(a,b,c,d){this.constructor$(a),this._promise._captureStackTrace();var e=h();this._callback=null===e?b:e.bind(b),this._preservedValues=d===f?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=c>=1?[]:l,this._init$(void 0,-2)}function n(a,c,e,f){if("function"!=typeof c)return d("expecting a function but got "+i.classString(c));var g=0;if(void 0!==e){if("object"!=typeof e||null===e)return b.reject(new TypeError("options argument must be an object but it is "+i.classString(e)));if("number"!=typeof e.concurrency)return b.reject(new TypeError("'concurrency' must be a number but it is "+i.classString(e.concurrency)));g=e.concurrency}return g="number"==typeof g&&isFinite(g)&&g>=1?g:0,new m(a,c,g,f).promise()}var h=b._getDomain,i=a("./util"),j=i.tryCatch,k=i.errorObj,l=[];i.inherits(m,c),m.prototype._init=function(){},m.prototype._promiseFulfilled=function(a,c){var d=this._values,f=this.length(),h=this._preservedValues,i=this._limit;if(c<0){if(c=-1*c-1,d[c]=a,i>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(i>=1&&this._inFlight>=i)return d[c]=a,this._queue.push(c),!1;null!==h&&(h[c]=a);var l=this._promise,m=this._callback,n=l._boundValue();l._pushContext();var o=j(m).call(n,a,c,f),p=l._popContext();if(g.checkForgottenReturns(o,p,null!==h?"Promise.filter":"Promise.map",l),o===k)return this._reject(o.e),!0;var q=e(o,this._promise);if(q instanceof b){q=q._target();var r=q._bitField;if(0==(50397184&r))return i>=1&&this._inFlight++,d[c]=q,q._proxy(this,-1*(c+1)),!1;if(0==(33554432&r))return 0!=(16777216&r)?(this._reject(q._reason()),!0):(this._cancel(),!0);o=q._value()}d[c]=o}return++this._totalResolved>=f&&(null!==h?this._filter(d,h):this._resolve(d),!0)},m.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;a.length>0&&this._inFlight<b;){if(this._isResolved())return;var d=a.pop();this._promiseFulfilled(c[d],d)}},m.prototype._filter=function(a,b){for(var c=b.length,d=new Array(c),e=0,f=0;f<c;++f)a[f]&&(d[e++]=b[f]);d.length=e,this._resolve(d)},m.prototype.preservedValues=function(){return this._preservedValues},b.prototype.map=function(a,b){return n(this,a,b,null)},b.map=function(a,b,c,d){return n(a,b,c,d)}}},{"./util":36}],19:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){var g=a("./util"),h=g.tryCatch;b.method=function(a){if("function"!=typeof a)throw new b.TypeError("expecting a function but got "+g.classString(a));return function(){var d=new b(c);d._captureStackTrace(),d._pushContext();var e=h(a).apply(this,arguments),g=d._popContext();return f.checkForgottenReturns(e,g,"Promise.method",d),d._resolveFromSyncValue(e),d}},b.attempt=b.try=function(a){if("function"!=typeof a)return e("expecting a function but got "+g.classString(a));var d=new b(c);d._captureStackTrace(),d._pushContext();var i;if(arguments.length>1){f.deprecated("calling Promise.try with more than 1 argument");var j=arguments[1],k=arguments[2];i=g.isArray(j)?h(a).apply(k,j):h(a).call(k,j)}else i=h(a)();var l=d._popContext();return f.checkForgottenReturns(i,l,"Promise.try",d),d._resolveFromSyncValue(i),d},b.prototype._resolveFromSyncValue=function(a){a===g.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}},{"./util":36}],20:[function(a,b,c){"use strict";function i(a){return a instanceof Error&&h.getPrototypeOf(a)===Error.prototype}function k(a){var b;if(i(a)){b=new g(a),b.name=a.name,b.message=a.message,b.stack=a.stack;for(var c=h.keys(a),e=0;e<c.length;++e){var f=c[e];j.test(f)||(b[f]=a[f])}return b}return d.markAsOriginatingFromRejection(a),a}function l(a,b){return function(c,d){if(null!==a){if(c){var f=k(e(c));a._attachExtraTrace(f),a._reject(f)}else if(b){var g=[].slice.call(arguments,1);a._fulfill(g)}else a._fulfill(d);a=null}}}var d=a("./util"),e=d.maybeWrapAsError,f=a("./errors"),g=f.OperationalError,h=a("./es5"),j=/^(?:name|message|stack|cause)$/;b.exports=l},{"./errors":12,"./es5":13,"./util":36}],21:[function(a,b,c){"use strict";b.exports=function(b){function g(a,b){var g=this;if(!c.isArray(a))return h.call(g,a,b);var i=e(b).apply(g._boundValue(),[null].concat(a));i===f&&d.throwLater(i.e)}function h(a,b){var c=this,g=c._boundValue(),h=void 0===a?e(b).call(g,null):e(b).call(g,null,a);h===f&&d.throwLater(h.e)}function i(a,b){var c=this;if(!a){var g=new Error(a+"");g.cause=a,a=g}var h=e(b).call(c._boundValue(),a);h===f&&d.throwLater(h.e)}var c=a("./util"),d=b._async,e=c.tryCatch,f=c.errorObj;b.prototype.asCallback=b.prototype.nodeify=function(a,b){if("function"==typeof a){var c=h;void 0!==b&&Object(b).spread&&(c=g),this._then(c,i,void 0,this,a)}return this}}},{"./util":36}],22:[function(a,b,c){"use strict";b.exports=function(){function f(){}function D(a,b){if("function"!=typeof b)throw new n("expecting a function but got "+h.classString(b));if(a.constructor!==E)throw new n("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function E(a){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,a!==p&&(D(this,a),this._resolveFromExecutor(a)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function F(a){this.promise._resolveCallback(a)}function G(a){this.promise._rejectCallback(a,!1)}function H(a){var b=new E(p);b._fulfillmentHandler0=a,b._rejectionHandler0=a,b._promise0=a,b._receiver0=a}var i,c=function(){return new n("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},d=function(){return new E.PromiseInspection(this._target())},e=function(a){return E.reject(new n(a))},g={},h=a("./util");i=h.isNode?function(){var a=process.domain;return void 0===a&&(a=null),a}:function(){return null},h.notEnumerableProp(E,"_getDomain",i);var j=a("./es5"),k=a("./async"),l=new k;j.defineProperty(E,"_async",{value:l});var m=a("./errors"),n=E.TypeError=m.TypeError;E.RangeError=m.RangeError;var o=E.CancellationError=m.CancellationError;E.TimeoutError=m.TimeoutError,E.OperationalError=m.OperationalError,E.RejectionError=m.OperationalError,E.AggregateError=m.AggregateError;var p=function(){},q={},r={},s=a("./thenables")(E,p),t=a("./promise_array")(E,p,s,e,f),u=a("./context")(E),v=u.create,w=a("./debuggability")(E,u),y=(w.CapturedTrace,a("./finally")(E,s)),z=a("./catch_filter")(r),A=a("./nodeback"),B=h.errorObj,C=h.tryCatch;return E.prototype.toString=function(){return"[object Promise]"},E.prototype.caught=E.prototype.catch=function(a){var b=arguments.length;if(b>1){var f,c=new Array(b-1),d=0;for(f=0;f<b-1;++f){var g=arguments[f];if(!h.isObject(g))return e("expecting an object but got "+h.classString(g));c[d++]=g}return c.length=d,a=arguments[f],this.then(void 0,z(c,a,this))}return this.then(void 0,a)},E.prototype.reflect=function(){return this._then(d,d,void 0,this,void 0)},E.prototype.then=function(a,b){if(w.warnings()&&arguments.length>0&&"function"!=typeof a&&"function"!=typeof b){var c=".then() only accepts functions but was passed: "+h.classString(a);arguments.length>1&&(c+=", "+h.classString(b)),this._warn(c)}return this._then(a,b,void 0,void 0,void 0)},E.prototype.done=function(a,b){this._then(a,b,void 0,void 0,void 0)._setIsFinal()},E.prototype.spread=function(a){return"function"!=typeof a?e("expecting a function but got "+h.classString(a)):this.all()._then(a,void 0,void 0,q,void 0)},E.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},E.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new t(this).promise()},E.prototype.error=function(a){return this.caught(h.originatesFromRejection,a)},E.getNewLibraryCopy=b.exports,E.is=function(a){return a instanceof E},E.fromNode=E.fromCallback=function(a){var b=new E(p);b._captureStackTrace();var c=arguments.length>1&&!!Object(arguments[1]).multiArgs,d=C(a)(A(b,c));return d===B&&b._rejectCallback(d.e,!0),b._isFateSealed()||b._setAsyncGuaranteed(),b},E.all=function(a){return new t(a).promise()},E.cast=function(a){var b=s(a);return b instanceof E||(b=new E(p),b._captureStackTrace(),b._setFulfilled(),b._rejectionHandler0=a),b},E.resolve=E.fulfilled=E.cast,E.reject=E.rejected=function(a){var b=new E(p);return b._captureStackTrace(),b._rejectCallback(a,!0),b},E.setScheduler=function(a){if("function"!=typeof a)throw new n("expecting a function but got "+h.classString(a));return l.setScheduler(a)},E.prototype._then=function(a,b,c,d,e){var f=void 0!==e,g=f?e:new E(p),h=this._target(),j=h._bitField;f||(g._propagateFrom(this,3),g._captureStackTrace(),void 0===d&&0!=(2097152&this._bitField)&&(d=0!=(50397184&j)?this._boundValue():h===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,g));var k=i();if(0!=(50397184&j)){var m,n,q=h._settlePromiseCtx;0!=(33554432&j)?(n=h._rejectionHandler0,m=a):0!=(16777216&j)?(n=h._fulfillmentHandler0,m=b,h._unsetRejectionIsUnhandled()):(q=h._settlePromiseLateCancellationObserver,n=new o("late cancellation observer"),h._attachExtraTrace(n),m=b),l.invoke(q,h,{handler:null===k?m:"function"==typeof m&&k.bind(m),promise:g,receiver:d,value:n})}else h._addCallbacks(a,b,g,d,k);return g},E.prototype._length=function(){return 65535&this._bitField},E.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},E.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},E.prototype._setLength=function(a){this._bitField=-65536&this._bitField|65535&a},E.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},E.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},E.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},E.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},E.prototype._isFinal=function(){return(4194304&this._bitField)>0},E.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},E.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},E.prototype._setAsyncGuaranteed=function(){l.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},E.prototype._receiverAt=function(a){var b=0===a?this._receiver0:this[4*a-4+3];if(b!==g)return void 0===b&&this._isBound()?this._boundValue():b},E.prototype._promiseAt=function(a){return this[4*a-4+2]},E.prototype._fulfillmentHandlerAt=function(a){return this[4*a-4+0]},E.prototype._rejectionHandlerAt=function(a){return this[4*a-4+1]},E.prototype._boundValue=function(){},E.prototype._migrateCallback0=function(a){var c=(a._bitField,a._fulfillmentHandler0),d=a._rejectionHandler0,e=a._promise0,f=a._receiverAt(0);void 0===f&&(f=g),this._addCallbacks(c,d,e,f,null)},E.prototype._migrateCallbackAt=function(a,b){var c=a._fulfillmentHandlerAt(b),d=a._rejectionHandlerAt(b),e=a._promiseAt(b),f=a._receiverAt(b);void 0===f&&(f=g),this._addCallbacks(c,d,e,f,null)},E.prototype._addCallbacks=function(a,b,c,d,e){var f=this._length();if(f>=65531&&(f=0,this._setLength(0)),0===f)this._promise0=c,this._receiver0=d,"function"==typeof a&&(this._fulfillmentHandler0=null===e?a:e.bind(a)),"function"==typeof b&&(this._rejectionHandler0=null===e?b:e.bind(b));else{var g=4*f-4;this[g+2]=c,this[g+3]=d,"function"==typeof a&&(this[g+0]=null===e?a:e.bind(a)),"function"==typeof b&&(this[g+1]=null===e?b:e.bind(b))}return this._setLength(f+1),f},E.prototype._proxy=function(a,b){this._addCallbacks(void 0,void 0,b,a,null)},E.prototype._resolveCallback=function(a,b){if(0==(117506048&this._bitField)){if(a===this)return this._rejectCallback(c(),!1);var d=s(a,this);if(!(d instanceof E))return this._fulfill(a);b&&this._propagateFrom(d,2);var e=d._target();if(e===this)return void this._reject(c());var f=e._bitField;if(0==(50397184&f)){var g=this._length();g>0&&e._migrateCallback0(this);for(var h=1;h<g;++h)e._migrateCallbackAt(this,h);this._setFollowing(),this._setLength(0),this._setFollowee(e)}else if(0!=(33554432&f))this._fulfill(e._value());else if(0!=(16777216&f))this._reject(e._reason());else{var i=new o("late cancellation observer");e._attachExtraTrace(i),this._reject(i)}}},E.prototype._rejectCallback=function(a,b,c){var d=h.ensureErrorObject(a),e=d===a;if(!e&&!c&&w.warnings()){var f="a promise was rejected with a non-error: "+h.classString(a);this._warn(f,!0)}this._attachExtraTrace(d,!!b&&e),this._reject(a)},E.prototype._resolveFromExecutor=function(a){var b=this;this._captureStackTrace(),this._pushContext();var c=!0,d=this._execute(a,function(a){b._resolveCallback(a)},function(a){b._rejectCallback(a,c)});c=!1,this._popContext(),void 0!==d&&b._rejectCallback(d,!0)},E.prototype._settlePromiseFromHandler=function(a,b,c,d){var e=d._bitField;if(0==(65536&e)){d._pushContext();var f;b===q?c&&"number"==typeof c.length?f=C(a).apply(this._boundValue(),c):(f=B,f.e=new n("cannot .spread() a non-array: "+h.classString(c))):f=C(a).call(b,c);var g=d._popContext();e=d._bitField,0==(65536&e)&&(f===r?d._reject(c):f===B?d._rejectCallback(f.e,!1):(w.checkForgottenReturns(f,g,"",d,this),d._resolveCallback(f)))}},E.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},E.prototype._followee=function(){return this._rejectionHandler0},E.prototype._setFollowee=function(a){this._rejectionHandler0=a},E.prototype._settlePromise=function(a,b,c,e){var g=a instanceof E,h=this._bitField,i=0!=(134217728&h);0!=(65536&h)?(g&&a._invokeInternalOnCancel(),c instanceof y&&c.isFinallyHandler()?(c.cancelPromise=a,C(b).call(c,e)===B&&a._reject(B.e)):b===d?a._fulfill(d.call(c)):c instanceof f?c._promiseCancelled(a):g||a instanceof t?a._cancel():c.cancel()):"function"==typeof b?g?(i&&a._setAsyncGuaranteed(),this._settlePromiseFromHandler(b,c,e,a)):b.call(c,e,a):c instanceof f?c._isResolved()||(0!=(33554432&h)?c._promiseFulfilled(e,a):c._promiseRejected(e,a)):g&&(i&&a._setAsyncGuaranteed(),0!=(33554432&h)?a._fulfill(e):a._reject(e))},E.prototype._settlePromiseLateCancellationObserver=function(a){var b=a.handler,c=a.promise,d=a.receiver,e=a.value;"function"==typeof b?c instanceof E?this._settlePromiseFromHandler(b,d,e,c):b.call(d,e,c):c instanceof E&&c._reject(e)},E.prototype._settlePromiseCtx=function(a){this._settlePromise(a.promise,a.handler,a.receiver,a.value)},E.prototype._settlePromise0=function(a,b,c){var d=this._promise0,e=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(d,a,e,b)},E.prototype._clearCallbackDataAtIndex=function(a){var b=4*a-4;this[b+2]=this[b+3]=this[b+0]=this[b+1]=void 0},E.prototype._fulfill=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(a===this){var d=c();return this._attachExtraTrace(d),this._reject(d)}this._setFulfilled(),this._rejectionHandler0=a,(65535&b)>0&&(0!=(134217728&b)?this._settlePromises():l.settlePromises(this))}},E.prototype._reject=function(a){var b=this._bitField;if(!((117506048&b)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=a,this._isFinal())return l.fatalError(a,h.isNode);(65535&b)>0?l.settlePromises(this):this._ensurePossibleRejectionHandled()}},E.prototype._fulfillPromises=function(a,b){for(var c=1;c<a;c++){var d=this._fulfillmentHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},E.prototype._rejectPromises=function(a,b){for(var c=1;c<a;c++){var d=this._rejectionHandlerAt(c),e=this._promiseAt(c),f=this._receiverAt(c);this._clearCallbackDataAtIndex(c),this._settlePromise(e,d,f,b)}},E.prototype._settlePromises=function(){var a=this._bitField,b=65535&a;if(b>0){if(0!=(16842752&a)){var c=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,c,a),this._rejectPromises(b,c)}else{var d=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,d,a),this._fulfillPromises(b,d)}this._setLength(0)}this._clearCancellationData()},E.prototype._settledValue=function(){var a=this._bitField;return 0!=(33554432&a)?this._rejectionHandler0:0!=(16777216&a)?this._fulfillmentHandler0:void 0},E.defer=E.pending=function(){return w.deprecated("Promise.defer","new Promise"),{promise:new E(p),resolve:F,reject:G}},h.notEnumerableProp(E,"_makeSelfResolutionError",c),a("./method")(E,p,s,e,w),a("./bind")(E,p,s,w),a("./cancel")(E,t,e,w),a("./direct_resolve")(E),a("./synchronous_inspection")(E),a("./join")(E,t,s,p,w),E.Promise=E,E.version="3.4.0",a("./map.js")(E,t,e,s,p,w),a("./call_get.js")(E),a("./using.js")(E,e,s,v,p,w),a("./timers.js")(E,p,w),a("./generators.js")(E,e,p,s,f,w),a("./nodeify.js")(E),a("./promisify.js")(E,p),a("./props.js")(E,t,s,e),a("./race.js")(E,p,s,e),a("./reduce.js")(E,t,e,s,p,w),a("./settle.js")(E,t,w),a("./some.js")(E,t,e),a("./filter.js")(E,p),a("./each.js")(E,p),a("./any.js")(E),h.toFastProperties(E),h.toFastProperties(E.prototype),H({a:1}),H({b:2}),H({c:3}),H(1),H(function(){}),H(void 0),H(!1),H(new E(p)),w.setBounds(k.firstLineError,h.lastLineError),E}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){function i(a){switch(a){case-2:return[];case-3:return{}}}function j(a){var d=this._promise=new b(c);a instanceof b&&d._propagateFrom(a,3),d._setOnCancel(this),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var g=a("./util");g.isArray;return g.inherits(j,f),j.prototype.length=function(){return this._length},j.prototype.promise=function(){return this._promise},j.prototype._init=function a(c,f){var h=d(this._values,this._promise);if(h instanceof b){h=h._target();var j=h._bitField;if(this._values=h,0==(50397184&j))return this._promise._setAsyncGuaranteed(),h._then(a,this._reject,void 0,this,f);if(0==(33554432&j))return 0!=(16777216&j)?this._reject(h._reason()):this._cancel();h=h._value()}if(null===(h=g.asArray(h))){var k=e("expecting an array or an iterable object but got "+g.classString(h)).reason();return void this._promise._rejectCallback(k,!1)}if(0===h.length)return void(-5===f?this._resolveEmptyArray():this._resolve(i(f)));this._iterate(h)},j.prototype._iterate=function(a){var c=this.getActualLength(a.length);this._length=c,this._values=this.shouldCopyValues()?new Array(c):this._values;for(var e=this._promise,f=!1,g=null,h=0;h<c;++h){var i=d(a[h],e);i instanceof b?(i=i._target(),g=i._bitField):g=null,f?null!==g&&i.suppressUnhandledRejections():null!==g?0==(50397184&g)?(i._proxy(this,h),this._values[h]=i):f=0!=(33554432&g)?this._promiseFulfilled(i._value(),h):0!=(16777216&g)?this._promiseRejected(i._reason(),h):this._promiseCancelled(h):f=this._promiseFulfilled(i,h)}f||e._setAsyncGuaranteed()},j.prototype._isResolved=function(){return null===this._values},j.prototype._resolve=function(a){this._values=null,this._promise._fulfill(a)},j.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},j.prototype._reject=function(a){this._values=null,this._promise._rejectCallback(a,!1)},j.prototype._promiseFulfilled=function(a,b){return this._values[b]=a,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},j.prototype._promiseCancelled=function(){return this._cancel(),!0},j.prototype._promiseRejected=function(a){return this._totalResolved++,this._reject(a),!0},j.prototype._resultCancelled=function(){if(!this._isResolved()){var a=this._values;if(this._cancel(),a instanceof b)a.cancel();else for(var c=0;c<a.length;++c)a[c]instanceof b&&a[c].cancel()}},j.prototype.shouldCopyValues=function(){return!0},j.prototype.getActualLength=function(a){return a},j}},{"./util":36}],24:[function(a,b,c){"use strict";b.exports=function(b,c){function p(a){return!n.test(a)}function q(a){try{return!0===a.__isPromisified__}catch(a){return!1}}function r(a,b,c){var d=e.getDataPropertyOrDefault(a,b+c,l);return!!d&&q(d)}function s(a,b,c){for(var d=0;d<a.length;d+=2){var e=a[d];if(c.test(e))for(var f=e.replace(c,""),g=0;g<a.length;g+=2)if(a[g]===f)throw new j("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",b))}}function t(a,b,c,d){for(var f=e.inheritedDataKeys(a),g=[],h=0;h<f.length;++h){var i=f[h],j=a[i],k=d===o||o(i,j,a);"function"!=typeof j||q(j)||r(a,i,b)||!d(i,j,a,k)||g.push(i,j)}return s(g,b,c),g}function A(a,i,j,k,l,m){function p(){var e=i;i===d&&(e=this);var j=new b(c);j._captureStackTrace();var k="string"==typeof o&&this!==n?this[o]:a,l=f(j,m);try{k.apply(e,g(arguments,l))}catch(a){j._rejectCallback(h(a),!0,!0)}return j._isFateSealed()||j._setAsyncGuaranteed(),j}var n=function(){return this}(),o=a;return"string"==typeof o&&(a=k),e.notEnumerableProp(p,"__isPromisified__",!0),p}function C(a,b,c,f,g){for(var h=new RegExp(u(b)+"$"),i=t(a,b,h,c),j=0,k=i.length;j<k;j+=2){var l=i[j],m=i[j+1],n=l+b;if(f===B)a[n]=B(l,d,l,m,b,g);else{var o=f(m,function(){return B(l,d,l,m,b,g)});e.notEnumerableProp(o,"__isPromisified__",!0),a[n]=o}}return e.toFastProperties(a),a}function D(a,b,c){return B(a,b,void 0,a,null,c)}var v,d={},e=a("./util"),f=a("./nodeback"),g=e.withAppended,h=e.maybeWrapAsError,i=e.canEvaluate,j=a("./errors").TypeError,k="Async",l={__isPromisified__:!0},m=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],n=new RegExp("^(?:"+m.join("|")+")$"),o=function(a){return e.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},u=function(a){return a.replace(/([$])/,"\\$")},B=i?v:A;b.promisify=function(a,b){if("function"!=typeof a)throw new j("expecting a function but got "+e.classString(a));if(q(a))return a;b=Object(b);var c=void 0===b.context?d:b.context,f=!!b.multiArgs,g=D(a,c,f);return e.copyDescriptors(a,g,p),g},b.promisifyAll=function(a,b){if("function"!=typeof a&&"object"!=typeof a)throw new j("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");b=Object(b);var c=!!b.multiArgs,d=b.suffix;"string"!=typeof d&&(d=k);var f=b.filter;"function"!=typeof f&&(f=o);var g=b.promisifier;if("function"!=typeof g&&(g=B),!e.isIdentifier(d))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var h=e.inheritedDataKeys(a),i=0;i<h.length;++i){var l=a[h[i]];"constructor"!==h[i]&&e.isClass(l)&&(C(l.prototype,d,f,g,c),C(l,d,f,g,c))}return C(a,d,f,g,c)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function l(a){var c,b=!1;if(void 0!==i&&a instanceof i)c=j(a),b=!0;else{var d=h.keys(a),e=d.length;c=new Array(2*e);for(var f=0;f<e;++f){var g=d[f];c[f]=a[g],c[f+e]=g}}this.constructor$(c),this._isMap=b,this._init$(void 0,-3)}function m(a){var c,f=d(a);return g(f)?(c=f instanceof b?f._then(b.props,void 0,void 0,void 0,void 0):new l(f).promise(),f instanceof b&&c._propagateFrom(f,2),c):e("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var i,f=a("./util"),g=f.isObject,h=a("./es5");"function"==typeof Map&&(i=Map);var j=function(){function c(c,d){this[a]=c,this[a+b]=d,a++}var a=0,b=0;return function(e){b=e.size,a=0;var f=new Array(2*e.size);return e.forEach(c,f),f}}(),k=function(a){for(var b=new i,c=a.length/2|0,d=0;d<c;++d){var e=a[c+d],f=a[d];b.set(e,f)}return b};f.inherits(l,c),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(a,b){if(this._values[b]=a,++this._totalResolved>=this._length){var d;if(this._isMap)d=k(this._values);else{d={};for(var e=this.length(),f=0,g=this.length();f<g;++f)d[this._values[f+e]]=this._values[f]}return this._resolve(d),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(a){return a>>1},b.prototype.props=function(){return m(this)},b.props=function(a){return m(a)}}},{"./es5":13,"./util":36}],26:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f=0;f<e;++f)c[f+d]=a[f+b],a[f+b]=void 0}function e(a){this._capacity=a,this._length=0,this._front=0}e.prototype._willBeOverCapacity=function(a){return this._capacity<a},e.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1),this[this._front+b&this._capacity-1]=a,this._length=b+1},e.prototype._unshiftOne=function(a){var b=this._capacity;this._checkCapacity(this.length()+1);var c=this._front,d=(c-1&b-1^b)-b;this[d]=a,this._front=d,this._length=this.length()+1},e.prototype.unshift=function(a,b,c){this._unshiftOne(c),this._unshiftOne(b),this._unshiftOne(a)},e.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},e.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(a){var b=this._capacity;this._capacity=a,d(this,0,this,b,this._front+this._length&b-1)},b.exports=e},{}],27:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function h(a,h){var i=d(a);if(i instanceof b)return g(i);if(null===(a=f.asArray(a)))return e("expecting an array or an iterable object but got "+f.classString(a));var j=new b(c);void 0!==h&&j._propagateFrom(h,3);for(var k=j._fulfill,l=j._reject,m=0,n=a.length;m<n;++m){var o=a[m];(void 0!==o||m in a)&&b.cast(o)._then(k,l,void 0,j,null)}return j}var f=a("./util"),g=function(a){return a.then(function(b){return h(b,a)})};b.race=function(a){return h(a,void 0)},b.prototype.race=function(){return h(this,void 0)}}},{"./util":36}],28:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function k(a,c,d,e){this.constructor$(a);var g=h();this._fn=null===g?c:g.bind(c),void 0!==d&&(d=b.resolve(d),d._attachCancellationCallback(this)),this._initialValue=d,this._currentCancellable=null,this._eachValues=e===f?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(a,b){this.isFulfilled()?b._resolve(a):b._reject(a)}function m(a,b,c,e){return"function"!=typeof b?d("expecting a function but got "+i.classString(b)):new k(a,b,c,e).promise()}function n(a){this.accum=a,this.array._gotAccum(a);var c=e(this.value,this.array._promise);return c instanceof b?(this.array._currentCancellable=c,c._then(o,void 0,void 0,this,void 0)):o.call(this,c)}function o(a){var c=this.array,d=c._promise,e=j(c._fn);d._pushContext();var f;(f=void 0!==c._eachValues?e.call(d._boundValue(),a,this.index,this.length):e.call(d._boundValue(),this.accum,a,this.index,this.length))instanceof b&&(c._currentCancellable=f);var h=d._popContext();return g.checkForgottenReturns(f,h,void 0!==c._eachValues?"Promise.each":"Promise.reduce",d),f}var h=b._getDomain,i=a("./util"),j=i.tryCatch;i.inherits(k,c),k.prototype._gotAccum=function(a){void 0!==this._eachValues&&a!==f&&this._eachValues.push(a)},k.prototype._eachComplete=function(a){return this._eachValues.push(a),this._eachValues},k.prototype._init=function(){},k.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},k.prototype.shouldCopyValues=function(){return!1},k.prototype._resolve=function(a){this._promise._resolveCallback(a),this._values=null},k.prototype._resultCancelled=function(a){if(a===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof b&&this._currentCancellable.cancel(),this._initialValue instanceof b&&this._initialValue.cancel())},k.prototype._iterate=function(a){this._values=a;var c,d,e=a.length;if(void 0!==this._initialValue?(c=this._initialValue,d=0):(c=b.resolve(a[0]),d=1),this._currentCancellable=c,!c.isRejected())for(;d<e;++d){var f={accum:null,value:a[d],index:d,length:e,array:this};c=c._then(n,void 0,void 0,f,void 0)}void 0!==this._eachValues&&(c=c._then(this._eachComplete,void 0,void 0,this,void 0)),c._then(l,l,void 0,c,this)},b.prototype.reduce=function(a,b){return m(this,a,b,null)},b.reduce=function(a,b,c,d){return m(a,b,c,d)}}},{"./util":36}],29:[function(a,b,c){"use strict";var e,d=a("./util"),f=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},g=d.getNativePromise();if(d.isNode&&"undefined"==typeof MutationObserver){var h=global.setImmediate,i=process.nextTick;e=d.isRecentNode?function(a){h.call(global,a)}:function(a){i.call(process,a)}}else if("function"==typeof g){var j=g.resolve();e=function(a){j.then(a)}}else e="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof setImmediate?function(a){setImmediate(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:f:function(){var a=document.createElement("div"),b={attributes:!0},c=!1,d=document.createElement("div");new MutationObserver(function(){a.classList.toggle("foo"),c=!1}).observe(d,b);var f=function(){c||(c=!0,d.classList.toggle("foo"))};return function(d){var e=new MutationObserver(function(){e.disconnect(),d()});e.observe(a,b),f()}}();b.exports=e},{"./util":36}],30:[function(a,b,c){"use strict";b.exports=function(b,c,d){function g(a){this.constructor$(a)}var e=b.PromiseInspection;a("./util").inherits(g,c),g.prototype._promiseResolved=function(a,b){return this._values[a]=b,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},g.prototype._promiseFulfilled=function(a,b){var c=new e;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(b,c)},g.prototype._promiseRejected=function(a,b){var c=new e;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(b,c)},b.settle=function(a){return d.deprecated(".settle()",".reflect()"),new g(a).promise()},b.prototype.settle=function(){return b.settle(this)}}},{"./util":36}],31:[function(a,b,c){"use strict";b.exports=function(b,c,d){function j(a){this.constructor$(a),this._howMany=0,this._unwrap=!1,this._initialized=!1}function k(a,b){if((0|b)!==b||b<0)return d("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var c=new j(a),e=c.promise();return c.setHowMany(b),c.init(),e}var e=a("./util"),f=a("./errors").RangeError,g=a("./errors").AggregateError,h=e.isArray,i={};e.inherits(j,c),j.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var a=h(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},j.prototype.init=function(){this._initialized=!0,this._init()},j.prototype.setUnwrap=function(){this._unwrap=!0},j.prototype.howMany=function(){return this._howMany},j.prototype.setHowMany=function(a){this._howMany=a},j.prototype._promiseFulfilled=function(a){return this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},j.prototype._promiseRejected=function(a){return this._addRejected(a),this._checkOutcome()},j.prototype._promiseCancelled=function(){return this._values instanceof b||null==this._values?this._cancel():(this._addRejected(i),this._checkOutcome())},j.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var a=new g,b=this.length();b<this._values.length;++b)this._values[b]!==i&&a.push(this._values[b]);return a.length>0?this._reject(a):this._cancel(),!0}return!1},j.prototype._fulfilled=function(){return this._totalResolved},j.prototype._rejected=function(){return this._values.length-this.length()},j.prototype._addRejected=function(a){this._values.push(a)},j.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a},j.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},j.prototype._getRangeError=function(a){var b="Input array must contain at least "+this._howMany+" items but contains only "+a+" items";return new f(b)},j.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},b.some=function(a,b){return k(a,b)},b.prototype.some=function(a){return k(this,a)},b._SomePromiseArray=j}},{"./errors":12,"./util":36}],32:[function(a,b,c){"use strict";b.exports=function(a){function b(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValueField=a._isFateSealed()?a._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}b.prototype._settledValue=function(){return this._settledValueField};var c=b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},d=b.prototype.error=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},e=b.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},f=b.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},g=b.prototype.isPending=function(){return 0==(50397184&this._bitField)},h=b.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};b.prototype.isCancelled=a.prototype._isCancelled=function(){return 65536==(65536&this._bitField)},a.prototype.isCancelled=function(){return this._target()._isCancelled()},a.prototype.isPending=function(){return g.call(this._target())},a.prototype.isRejected=function(){return f.call(this._target())},a.prototype.isFulfilled=function(){return e.call(this._target())},a.prototype.isResolved=function(){return h.call(this._target())},a.prototype.value=function(){return c.call(this._target())},a.prototype.reason=function(){var a=this._target();return a._unsetRejectionIsUnhandled(),d.call(a)},a.prototype._value=function(){return this._settledValue()},a.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},a.PromiseInspection=b}},{}],33:[function(a,b,c){"use strict";b.exports=function(b,c){function g(a,d){if(f(a)){if(a instanceof b)return a;var g=i(a);if(g===e){d&&d._pushContext();var h=b.reject(g.e);return d&&d._popContext(),h}if("function"==typeof g){if(k(a)){var h=new b(c);return a._then(h._fulfill,h._reject,void 0,h,null),h}return l(a,g,d)}}return a}function h(a){return a.then}function i(a){try{return h(a)}catch(a){return e.e=a,e}}function k(a){try{return j.call(a,"_promise0")}catch(a){return!1}}function l(a,f,g){function l(a){h&&(h._resolveCallback(a),h=null)}function m(a){h&&(h._rejectCallback(a,j,!0),h=null)}var h=new b(c),i=h;g&&g._pushContext(),h._captureStackTrace(),g&&g._popContext();var j=!0,k=d.tryCatch(f).call(a,l,m);return j=!1,h&&k===e&&(h._rejectCallback(k.e,!0,!0),h=null),i}var d=a("./util"),e=d.errorObj,f=d.isObject,j={}.hasOwnProperty;return g}},{"./util":36}],34:[function(a,b,c){"use strict";b.exports=function(b,c,d){function g(a){this.handle=a}function k(a){return clearTimeout(this.handle),a}function l(a){throw clearTimeout(this.handle),a}var e=a("./util"),f=b.TimeoutError;g.prototype._resultCancelled=function(){clearTimeout(this.handle)};var h=function(a){return i(+this).thenReturn(a)},i=b.delay=function(a,e){var f,i;return void 0!==e?(f=b.resolve(e)._then(h,null,null,a,void 0),d.cancellation()&&e instanceof b&&f._setOnCancel(e)):(f=new b(c),i=setTimeout(function(){f._fulfill()},+a),d.cancellation()&&f._setOnCancel(new g(i))),f._setAsyncGuaranteed(),f};b.prototype.delay=function(a){return i(a,this)};var j=function(a,b,c){var d;d="string"!=typeof b?b instanceof Error?b:new f("operation timed out"):new f(b),e.markAsOriginatingFromRejection(d),a._attachExtraTrace(d),a._reject(d),null!=c&&c.cancel()};b.prototype.timeout=function(a,b){a=+a;var c,e,f=new g(setTimeout(function(){c.isPending()&&j(c,b,e)},a));return d.cancellation()?(e=this.then(),c=e._then(k,l,void 0,f,void 0),c._setOnCancel(f)):c=this._then(k,l,void 0,f,void 0),c}}},{"./util":36}],35:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f,g){function n(a){setTimeout(function(){throw a},0)}function o(a){var b=d(a);return b!==a&&"function"==typeof a._isDisposable&&"function"==typeof a._getDisposer&&a._isDisposable()&&b._setDisposable(a._getDisposer()),b}function p(a,c){function i(){if(e>=g)return h._fulfill();var f=o(a[e++]);if(f instanceof b&&f._isDisposable()){try{f=d(f._getDisposer().tryDispose(c),a.promise)}catch(a){return n(a)}if(f instanceof b)return f._then(i,n,null,null,null)}i()}var e=0,g=a.length,h=new b(f);return i(),h}function q(a,b,c){this._data=a,this._promise=b,this._context=c}function r(a,b,c){this.constructor$(a,b,c)}function s(a){return q.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}function t(a){this.length=a,this.promise=null,this[a-1]=null}var h=a("./util"),i=a("./errors").TypeError,j=a("./util").inherits,k=h.errorObj,l=h.tryCatch,m={};q.prototype.data=function(){return this._data},q.prototype.promise=function(){return this._promise},q.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():m},q.prototype.tryDispose=function(a){var b=this.resource(),c=this._context;void 0!==c&&c._pushContext();var d=b!==m?this.doDispose(b,a):null;return void 0!==c&&c._popContext(),this._promise._unsetDisposable(),this._data=null,d},q.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose},j(r,q),r.prototype.doDispose=function(a,b){return this.data().call(a,a,b)},t.prototype._resultCancelled=function(){for(var a=this.length,c=0;c<a;++c){var d=this[c];d instanceof b&&d.cancel()}},b.using=function(){var a=arguments.length;if(a<2)return c("you must pass at least 2 arguments to Promise.using");var e=arguments[a-1];if("function"!=typeof e)return c("expecting a function but got "+h.classString(e));var f,i=!0;2===a&&Array.isArray(arguments[0])?(f=arguments[0],a=f.length,i=!1):(f=arguments,a--);for(var j=new t(a),m=0;m<a;++m){var n=f[m];if(q.isDisposer(n)){var o=n;n=n.promise(),n._setDisposable(o)}else{var r=d(n);r instanceof b&&(n=r._then(s,null,null,{resources:j,index:m},void 0))}j[m]=n}for(var u=new Array(j.length),m=0;m<u.length;++m)u[m]=b.resolve(j[m]).reflect();var v=b.all(u).then(function(a){for(var b=0;b<a.length;++b){var c=a[b];if(c.isRejected())return k.e=c.error(),k;if(!c.isFulfilled())return void v.cancel();a[b]=c.value()}w._pushContext(),e=l(e);var d=i?e.apply(void 0,a):e(a),f=w._popContext();return g.checkForgottenReturns(d,f,"Promise.using",w),d}),w=v.lastly(function(){var a=new b.PromiseInspection(v);return p(j,a)});return j.promise=w,w._setOnCancel(j),w},b.prototype._setDisposable=function(a){this._bitField=131072|this._bitField,this._disposer=a},b.prototype._isDisposable=function(){return(131072&this._bitField)>0},b.prototype._getDisposer=function(){return this._disposer},b.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},b.prototype.disposer=function(a){if("function"==typeof a)return new r(a,this,e());throw new i}}},{"./errors":12,"./util":36}],36:[function(_dereq_,module,exports){"use strict";function tryCatcher(){try{var a=tryCatchTarget;return tryCatchTarget=null,a.apply(this,arguments)}catch(a){return errorObj.e=a,errorObj}}function tryCatch(a){return tryCatchTarget=a,tryCatcher}function isPrimitive(a){return null==a||!0===a||!1===a||"string"==typeof a||"number"==typeof a}function isObject(a){return"function"==typeof a||"object"==typeof a&&null!==a}function maybeWrapAsError(a){return isPrimitive(a)?new Error(safeToString(a)):a}function withAppended(a,b){var e,c=a.length,d=new Array(c+1);for(e=0;e<c;++e)d[e]=a[e];return d[e]=b,d}function getDataPropertyOrDefault(a,b,c){if(!es5.isES5)return{}.hasOwnProperty.call(a,b)?a[b]:void 0;var d=Object.getOwnPropertyDescriptor(a,b);return null!=d?null==d.get&&null==d.set?d.value:c:void 0}function notEnumerableProp(a,b,c){if(isPrimitive(a))return a;var d={value:c,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(a,b,d),a}function thrower(a){throw a}function isClass(a){try{if("function"==typeof a){var b=es5.names(a.prototype),c=es5.isES5&&b.length>1,d=b.length>0&&!(1===b.length&&"constructor"===b[0]),e=thisAssignmentPattern.test(a+"")&&es5.names(a).length>0;if(c||d||e)return!0}return!1}catch(a){return!1}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;for(var l=8;l--;)new FakeConstructor;return obj}function isIdentifier(a){return rident.test(a)}function filledRange(a,b,c){for(var d=new Array(a),e=0;e<a;++e)d[e]=b+e+c;return d}function safeToString(a){try{return a+""}catch(a){return"[no string representation]"}}function isError(a){return null!==a&&"object"==typeof a&&"string"==typeof a.message&&"string"==typeof a.name}function markAsOriginatingFromRejection(a){try{notEnumerableProp(a,"isOperational",!0)}catch(a){}}function originatesFromRejection(a){return null!=a&&(a instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===a.isOperational)}function canAttachTrace(a){return isError(a)&&es5.propertyIsWritable(a,"stack")}function classString(a){return{}.toString.call(a)}function copyDescriptors(a,b,c){for(var d=es5.names(a),e=0;e<d.length;++e){var f=d[e];if(c(f))try{es5.defineProperty(b,f,es5.getDescriptor(a,f))}catch(a){}}}function env(a,b){return isNode?process.env[a]:b}function getNativePromise(){if("function"==typeof Promise)try{var a=new Promise(function(){});if("[object Promise]"==={}.toString.call(a))return Promise}catch(a){}}var es5=_dereq_("./es5"),canEvaluate="undefined"==typeof navigator,errorObj={e:{}},tryCatchTarget,globalObject="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==global?global:void 0!==this?this:null,inherits=function(a,b){function d(){this.constructor=a,this.constructor$=b;for(var d in b.prototype)c.call(b.prototype,d)&&"$"!==d.charAt(d.length-1)&&(this[d+"$"]=b.prototype[d])}var c={}.hasOwnProperty;return d.prototype=b.prototype,a.prototype=new d,a.prototype},inheritedDataKeys=function(){var a=[Array.prototype,Object.prototype,Function.prototype],b=function(b){for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};if(es5.isES5){var c=Object.getOwnPropertyNames;return function(a){for(var d=[],e=Object.create(null);null!=a&&!b(a);){var f;try{f=c(a)}catch(a){return d}for(var g=0;g<f.length;++g){var h=f[g];if(!e[h]){e[h]=!0;var i=Object.getOwnPropertyDescriptor(a,h);null!=i&&null==i.get&&null==i.set&&d.push(h)}}a=es5.getPrototypeOf(a)}return d}}var d={}.hasOwnProperty;return function(c){if(b(c))return[];var e=[];a:for(var f in c)if(d.call(c,f))e.push(f);else{for(var g=0;g<a.length;++g)if(d.call(a[g],f))continue a;e.push(f)}return e}}(),thisAssignmentPattern=/this\s*\.\s*\S+\s*=/,rident=/^[a-z$_][a-z$_0-9]*$/i,ensureErrorObject=function(){return"stack"in new Error?function(a){return canAttachTrace(a)?a:new Error(safeToString(a))}:function(a){if(canAttachTrace(a))return a;try{throw new Error(safeToString(a))}catch(a){return a}}}(),asArray=function(a){return es5.isArray(a)?a:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var ArrayFrom="function"==typeof Array.from?function(a){return Array.from(a)}:function(a){for(var d,b=[],c=a[Symbol.iterator]();!(d=c.next()).done;)b.push(d.value);return b};asArray=function(a){return es5.isArray(a)?a:null!=a&&"function"==typeof a[Symbol.iterator]?ArrayFrom(a):null}}var isNode=void 0!==process&&"[object process]"===classString(process).toLowerCase(),ret={isClass:isClass,isIdentifier:isIdentifier,inheritedDataKeys:inheritedDataKeys,getDataPropertyOrDefault:getDataPropertyOrDefault,thrower:thrower,isArray:es5.isArray,asArray:asArray,notEnumerableProp:notEnumerableProp,isPrimitive:isPrimitive,isObject:isObject,isError:isError,canEvaluate:canEvaluate,errorObj:errorObj,tryCatch:tryCatch,inherits:inherits,withAppended:withAppended,maybeWrapAsError:maybeWrapAsError,toFastProperties:toFastProperties,filledRange:filledRange,toString:safeToString,canAttachTrace:canAttachTrace,ensureErrorObject:ensureErrorObject,originatesFromRejection:originatesFromRejection,markAsOriginatingFromRejection:markAsOriginatingFromRejection,classString:classString,copyDescriptors:copyDescriptors,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:isNode,env:env,global:globalObject,getNativePromise:getNativePromise};ret.isRecentNode=ret.isNode&&function(){var a=process.versions.node.split(".").map(Number);return 0===a[0]&&a[1]>10||a[0]>0}(),ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(a){ret.lastLineError=a}module.exports=ret},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:15}],65:[function(a,b,c){(function(c){"use strict";function k(a){this.enabled=a&&void 0!==a.enabled?a.enabled:h}function n(a){var b=function(){return o.apply(b,arguments)};return b._styles=a,b.enabled=this.enabled,b.__proto__=m,b}function o(){var a=arguments,b=a.length,c=0!==b&&String(arguments[0]);if(b>1)for(var d=1;d<b;d++)c+=" "+a[d];if(!this.enabled||!c)return c;var f=this._styles,g=f.length,h=e.dim.open;for(!j||-1===f.indexOf("gray")&&-1===f.indexOf("grey")||(e.dim.open="");g--;){var i=e[f[g]];c=i.open+c.replace(i.closeRe,i.open)+i.close}return e.dim.open=h,c}function p(){var a={};return Object.keys(l).forEach(function(b){a[b]={get:function(){return n.call(this,[b])}}}),a}var d=a("escape-string-regexp"),e=a("ansi-styles"),f=a("strip-ansi"),g=a("has-ansi"),h=a("supports-color"),i=Object.defineProperties,j="win32"===c.platform&&!/^xterm/i.test(c.env.TERM);j&&(e.blue.open="[94m");var l=function(){var a={};return Object.keys(e).forEach(function(b){e[b].closeRe=new RegExp(d(e[b].close),"g"),a[b]={get:function(){return n.call(this,this._styles.concat(b))}}}),a}(),m=i(function(){},l);i(k.prototype,p()),b.exports=new k,b.exports.styles=e,b.exports.hasColor=g,b.exports.stripColor=f,b.exports.supportsColor=h}).call(this,a("_process"))},{_process:15,"ansi-styles":63,"escape-string-regexp":69,"has-ansi":70,"strip-ansi":191,"supports-color":192}],66:[function(a,b,c){var d={utf8:{stringToBytes:function(a){return d.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(d.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b},bytesToString:function(a){for(var b=[],c=0;c<a.length;c++)b.push(String.fromCharCode(a[c]));return b.join("")}}};b.exports=d},{}],67:[function(a,b,c){!function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c={rotl:function(a,b){return a<<b|a>>>32-b},rotr:function(a,b){return a<<32-b|a>>>b},endian:function(a){if(a.constructor==Number)return 16711935&c.rotl(a,8)|4278255360&c.rotl(a,24);for(var b=0;b<a.length;b++)a[b]=c.endian(a[b]);return a},randomBytes:function(a){for(var b=[];a>0;a--)b.push(Math.floor(256*Math.random()));return b},bytesToWords:function(a){for(var b=[],c=0,d=0;c<a.length;c++,d+=8)b[d>>>5]|=a[c]<<24-d%32;return b},wordsToBytes:function(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b},bytesToHex:function(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((15&a[c]).toString(16));return b.join("")},hexToBytes:function(a){for(var b=[],c=0;c<a.length;c+=2)b.push(parseInt(a.substr(c,2),16));return b},bytesToBase64:function(b){for(var c=[],d=0;d<b.length;d+=3)for(var e=b[d]<<16|b[d+1]<<8|b[d+2],f=0;f<4;f++)8*d+6*f<=8*b.length?c.push(a.charAt(e>>>6*(3-f)&63)):c.push("=");return c.join("")},base64ToBytes:function(b){b=b.replace(/[^A-Z0-9+\/]/gi,"");for(var c=[],d=0,e=0;d<b.length;e=++d%4)0!=e&&c.push((a.indexOf(b.charAt(d-1))&Math.pow(2,-2*e+8)-1)<<2*e|a.indexOf(b.charAt(d))>>>6-2*e);return c}};b.exports=c}()},{}],68:[function(a,b,c){(function(c,d){(function(){"use strict";function e(a){return"function"==typeof a||"object"==typeof a&&null!==a}function f(a){return"function"==typeof a}function g(a){return"object"==typeof a&&null!==a}function o(a){m=a}function p(a){n=a}function v(){var a=c.nextTick,b=c.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate),function(){a(B)}}function w(){return function(){l(B)}}function x(){var a=0,b=new s(B),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function y(){var a=new MessageChannel;return a.port1.onmessage=B,function(){a.port2.postMessage(0)}}function z(){return function(){setTimeout(B,1)}}function B(){for(var a=0;a<j;a+=2){(0,A[a])(A[a+1]),A[a]=void 0,A[a+1]=void 0}j=0}function C(){try{var b=a,c=b("vertx");return l=c.runOnLoop||c.runOnContext,w()}catch(a){return z()}}function E(){}function J(){return new TypeError("You cannot resolve a promise with itself")}function K(){return new TypeError("A promises callback cannot return that same promise.")}function L(a){try{return a.then}catch(a){return I.error=a,I}}function M(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function N(a,b,c){n(function(a){var d=!1,e=M(c,b,function(c){d||(d=!0,b!==c?Q(a,c):S(a,c))},function(b){d||(d=!0,T(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,T(a,e))},a)}function O(a,b){b._state===G?S(a,b._result):b._state===H?T(a,b._result):U(b,void 0,function(b){Q(a,b)},function(b){T(a,b)})}function P(a,b){if(b.constructor===a.constructor)O(a,b);else{var c=L(b);c===I?T(a,I.error):void 0===c?S(a,b):f(c)?N(a,b,c):S(a,b)}}function Q(a,b){a===b?T(a,J()):e(b)?P(a,b):S(a,b)}function R(a){a._onerror&&a._onerror(a._result),V(a)}function S(a,b){a._state===F&&(a._result=b,a._state=G,0!==a._subscribers.length&&n(V,a))}function T(a,b){a._state===F&&(a._state=H,a._result=b,n(R,a))}function U(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+G]=c,e[f+H]=d,0===f&&a._state&&n(V,a)}function V(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?Z(c,d,e,f):e(f);a._subscribers.length=0}}function W(){this.error=null}function Y(a,b){try{return a(b)}catch(a){return X.error=a,X}}function Z(a,b,c,d){var g,h,i,j,e=f(c);if(e){if(g=Y(c,d),g===X?(j=!0,h=g.error,g=null):i=!0,b===g)return void T(b,K())}else g=d,i=!0;b._state!==F||(e&&i?Q(b,g):j?T(b,h):a===G?S(b,g):a===H&&T(b,g))}function $(a,b){try{b(function(c){Q(a,c)},function(c){T(a,c)})}catch(b){T(a,b)}}function _(a,b){var c=this;c._instanceConstructor=a,c.promise=new a(E),c._validateInput(b)?(c._input=b,c.length=b.length,c._remaining=b.length,c._init(),0===c.length?S(c.promise,c._result):(c.length=c.length||0,c._enumerate(),0===c._remaining&&S(c.promise,c._result))):T(c.promise,c._validationError())}function ba(a){return new aa(this,a).promise}function da(a){function e(a){Q(c,a)}function f(a){T(c,a)}var b=this,c=new b(E);if(!i(a))return T(c,new TypeError("You must pass an array to race.")),c;for(var d=a.length,g=0;c._state===F&&g<d;g++)U(b.resolve(a[g]),void 0,e,f);return c}function fa(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(E);return Q(c,a),c}function ha(a){var b=this,c=new b(E);return T(c,a),c}function ka(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function la(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function na(a){this._id=ja++,this._state=void 0,this._result=void 0,this._subscribers=[],E!==a&&(f(a)||ka(),this instanceof na||la(),$(this,a))}function oa(){var a;if(void 0!==d)a=d;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;b&&"[object Promise]"===Object.prototype.toString.call(b.resolve())&&!b.cast||(a.Promise=ma)}var h;h=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var l,m,D,i=h,j=0,n=({}.toString,function(b,c){A[j]=b,A[j+1]=c,2===(j+=2)&&(m?m(B):D())}),q="undefined"!=typeof window?window:void 0,r=q||{},s=r.MutationObserver||r.WebKitMutationObserver,t=void 0!==c&&"[object process]"==={}.toString.call(c),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,A=new Array(1e3);D=t?v():s?x():u?y():void 0===q&&"function"==typeof a?C():z();var F=void 0,G=1,H=2,I=new W,X=new W;_.prototype._validateInput=function(a){return i(a)},_.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},_.prototype._init=function(){this._result=new Array(this.length)};var aa=_;_.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===F&&e<b;e++)a._eachEntry(d[e],e)},_.prototype._eachEntry=function(a,b){var c=this,d=c._instanceConstructor;g(a)?a.constructor===d&&a._state!==F?(a._onerror=null,c._settledAt(a._state,b,a._result)):c._willSettleAt(d.resolve(a),b):(c._remaining--,c._result[b]=a)},_.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===F&&(d._remaining--,a===H?T(e,c):d._result[b]=c),0===d._remaining&&S(e,d._result)},_.prototype._willSettleAt=function(a,b){var c=this;U(a,void 0,function(a){c._settledAt(G,b,a)},function(a){c._settledAt(H,b,a)})};var ca=ba,ea=da,ga=fa,ia=ha,ja=0,ma=na;na.all=ca,na.race=ea,na.resolve=ga,na.reject=ia,na._setScheduler=o,na._setAsap=p,na._asap=n,na.prototype={constructor:na,then:function(a,b){var c=this,d=c._state;if(d===G&&!a||d===H&&!b)return this;var e=new this.constructor(E),f=c._result;if(d){var g=arguments[d-1];n(function(){Z(d,e,g,f)})}else U(c,e,a,b);return e},catch:function(a){return this.then(null,a)}};var pa=oa,qa={Promise:ma,polyfill:pa};"function"==typeof define&&define.amd?define(function(){return qa}):void 0!==b&&b.exports?b.exports=qa:void 0!==this&&(this.ES6Promise=qa),pa()}).call(this)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:15}],69:[function(a,b,c){"use strict";var d=/[|\\{}()[\]^$+*?.]/g;b.exports=function(a){if("string"!=typeof a)throw new TypeError("Expected a string");return a.replace(d,"\\$&")}},{}],70:[function(a,b,c){"use strict";var d=a("ansi-regex"),e=new RegExp(d().source);b.exports=e.test.bind(e)},{"ansi-regex":62}],71:[function(a,b,c){(function(c){if("function"!=typeof d)var d=a("amdefine")(b);d(["underscore"],function(a){var b={},d=function(a){return JSON.stringify(a)},e=function(a){return JSON.parse(a)},f=function(b,d){void 0!=d&&(b=a.bind(b,d)),void 0===c?setTimeout(b,0):c.nextTick(b)},h=function(a){return a=escape(a),a.replace(/_/g,"_5f").replace(/%/g,"_25").replace(/\*/g,"_2a").replace(/@/g,"_40").replace(/\-/g,"_2d").replace(/\+/g,"_2b").replace(/\./g,"_2e").replace(/\//g,"_2f")},i=function(a){return this._preventDefault=!1,this.preventDefault=function(){this._preventDefault=!0},this.target=a,this.target.error&&this.target.errorCode&&(this.toString=function(){return"["+this.target.errorCode+"] "+this.target.error}),this},j=function(){this._error=function(b,c,d){this.error="["+c+"] "+d,err=new i(a.extend(this,{error:this.error,errorCode:c})),this._errpub(b,err)},this._errevt=function(b,c){this.error=c,c=new i(a.extend(this,{error:this.error,errorCode:this.error.code})),this._errpub(b,c)},this._errpub=function(a,b){this.onerror&&this.onerror(b),!b._preventDefault&&a&&a._error(b)}};b.VersionError=function(a,b){this.name="VersionError",this.code=a,this.message=b,this.toString=function(){return a?"["+a+"] "+this.name+": "+b:b}},b.NotFoundError=function(a,b){this.name="NotFoundError",this.code=a,this.message=b,this.toString=function(){return a?"["+a+"] "+this.name+": "+b:b}};var k=function(a,b,c,d){return this.lower=a,this.upper=b,this.lowerOpen=!!c,this.upperOpen=!!d,this};k.only=function(a){return new k(a,a,!1,!1)},k.lowerBound=function(a,b){return new k(a,void 0,b,!1)},k.upperBound=function(a,b){return new k(void 0,a,!1,b)},k.bound=function(a,b,c,d){return new k(a,b,c,d)},k.prototype.check=function(a){if(void 0!==this.lower){if(a==this.lower)return!this.lowerOpen;if(a<this.lower)return!1}if(void 0!==this.upper){if(a==this.upper)return!this.upperOpen;if(a>this.upper)return!1}return!0};var l=function(b,c){return this.objectStore=b,this._name=c,this._error=function(a){this.onerror&&this.onerror(a),a._preventDefault||this.objectStore._error(a)},this.get=function(a){return this._get(a,!1)},this.getKey=function(a){return this._get(a,!0)},this.count=function(a){var b=new j;return!a||a instanceof k||(a=k.only(a)),this._getAll(b,a,function(a,c){if(a)return b._error(this,"indexeddb.Index.Ct.10","failed to fetch objects: "+a);b.result=c.length,b.onsuccess&&b.onsuccess(new i(b))}),b},this._get=function(a,b){var c=new j;return this._getAll(c,k.only(a),function(a,d){return a?c._error(this,"indexeddb.Index.iG.10","failed to fetch object by index: "+a):d.length<=0?c._error(this,"indexeddb.Index.iG.20","no such index name in object store"):(c.result=d[0][b?"key":"value"],void(c.onsuccess&&c.onsuccess(new i(c))))}),c},this._getAll=function(c,d,e,f){var g=this;b._getAll(c,null,function(h,i){if(h)return c._error(this,"indexeddb.Index.iGA.10","failed to fetch objects by index: "+h);var j=a.find(b._meta.index,function(a){return a.name==g._name});return void 0==j?c._error(this,"indexeddb.Index.iGA.20","no such index name in object store"):d?void e.call(f,null,a.filter(i,function(a){return d.check(b._extractValue(a.value,j.keyPath))})):e.call(f,null,i)})},this.openCursor=function(a,b){var c=new j;return c.cursor=new m(this,a,b,!1,c),c.cursor.continue(),c},this.openKeyCursor=function(a,b){var c=new j;return c.cursor=new m(this,a,b,!0,c),c.cursor.continue(),c},this},m=function(a,b,c,d,e){this.source=a,this.direction=c||"next",!b||b instanceof k||(b=k.only(b)),this._range=b,this._request=e,this._data=null,this._next=0,this._retkey=d,this._error=function(a){this.onerror&&this.onerror(a),a._preventDefault||this.source._error(a)},this.continue=function(){f(function(){return"next"!=this.direction?this._request._error(this,"indexeddb.Cursor.C.5",'non-"next" cursor direction not supported'):void 0==this._data?this.source._getAll(this._request,this._range,function(a,b){if(a)return this._request._error(this,"indexeddb.Cursor.C.10","failed to fetch data for cursor: "+a);this._data=b,this._next=0,this.continue()},this):this._next>=this._data.length?void(this._request.onsuccess&&this._request.onsuccess(new i({result:null}))):(this.key=this._data[this._next].key,this.value=this._data[this._next].value,this.position=this._next,this._next+=1,void(this._request.onsuccess&&this._request.onsuccess(new i({result:this}))))},this)}},n=function(b,c,f,g){this.name=c,this.onerror=null,this._saved=!g,this._txn=b,this._meta={table:null,options:f,index:[]},this._error=function(a){this.onerror&&this.onerror(a),a._preventDefault||this._txn._error(a)},this.createIndex=function(a,b,c){if(!this._txn._db._upgrading)throw new i({error:'"createIndex" can only be called during "onupgradeneeded" handling',errorCode:"indexeddb.Store.CI.10"});this._meta.index.push({name:a,keyPath:b,options:c}),this._saved=!1},this._create=function(a){var b=new j;this._withEngine(b,a,this)},this._withEngine=function(b,c,f){if(this._saved)return void this._txn._db._withEngine(function(d,g){return d?c.call(f,d):void 0!=this._meta.table?c.call(f,null,g):void g.all('SELECT c_meta FROM "idb.store" WHERE c_dbname = ? AND c_name = ?',this._txn._db.name,this.name,a.bind(function(a,d){return a?b._error(this,"indexeddb.Store.iWI.10",a):d.length<=0?b._error(this,"indexeddb.Store.iWI.11",'store "'+this._txn._db.name+'"."'+this.name+'" not found in idb.store'):d.length>1?b._error(this,"indexeddb.Store.iWI.12","internal error: redundant rows in idb.store"):(this._meta=e(d[0].c_meta),c.call(f,null,g))},this))},this);this._txn._db._withEngine(function(e,g){if(e)return c.call(f,e);var i=a.bind(function(){g.run('INSERT OR REPLACE INTO "idb.store" (c_dbname, c_name, c_meta) VALUES ( ?, ?, ? )',this._txn._db.name,this.name,d(this._meta),function(a){return this._saved=!0,c.call(f,null,g)})},this);return void 0!=this._meta.table?i():1==this._meta.options.autoIncrement||void 0==this._meta.options.keyPath?b._error(this,"indexeddb.Store.iWI.30","auto-incrementing keys not implemented"):(this._meta.table="idb:"+h(this._txn._db.name)+"."+h(this.name),void g.run('CREATE TABLE "'+this._meta.table+'" (c_key TEXT UNIQUE NOT NULL PRIMARY KEY, c_value TEXT)',function(a){i()}))},this)},this._extractValue=function(b,c){var d=function(b,c){if(a.isArray(c))return a.map(c,function(a){return d(b,a)}).join("");var e=c.indexOf(".");return-1==e?b[c]:""+d(b[c.slice(0,e)],c.slice(e+1))};return d(b,c||this._meta.options.keyPath)},this.add=function(b){var c=new j;return this._withEngine(c,function(e,f){if(e)return c._error(this,"indexeddb.Store.A.10","failed to open a transaction: "+e);f.run('INSERT INTO "'+this._meta.table+'" (c_key, c_value) VALUES ( ?, ? )',this._extractValue(b),d(b),a.bind(function(a){if(a)return c._error(this,"indexeddb.Store.A.20","failed to add object: "+a);c.onsuccess&&c.onsuccess(new i(c))},this))},this),c},this.get=function(b){var c=new j;return this._withEngine(c,function(d,f){if(d)return c._error(this,"indexeddb.Store.G.10","failed to open a transaction: "+d);f.all('SELECT c_value FROM "'+this._meta.table+'" WHERE c_key = ?',b,a.bind(function(a,b){return a?c._error(this,"indexeddb.Store.G.20","failed to fetch object: "+a):b.length>1?c._error(this,"indexeddb.Store.G.40","internal error: multiple records for key"):(c.result=b.length>0?e(b[0].c_value):void 0,void(c.onsuccess&&c.onsuccess(new i(c))))},this))},this),c},this.put=function(a){var b=new j;return this._withEngine(b,function(c,e){if(c)return b._error(this,"indexeddb.Store.P.10","failed to open a transaction: "+c);var f=this;e.run('INSERT OR REPLACE INTO "'+this._meta.table+'" ( c_key, c_value) VALUES ( ?, ? )',this._extractValue(a),d(a),function(c){return c?b._error(f,"indexeddb.Store.P.20","failed to update object: "+c):1!=this.changes?b._error(f,"indexeddb.Store.P.30","unexpected number of changes: "+diff.changes):(b.result=a,void(b.onsuccess&&b.onsuccess(new i(b))))})},this),b},this.delete=function(a){var b=new j;return this._withEngine(b,function(c,d){if(c)return b._error(this,"indexeddb.Store.D.10","failed to open a transaction: "+c);var e=this;d.run('DELETE FROM "'+this._meta.table+'" WHERE c_key = ?',a,function(a){if(a)return b._error(e,"indexeddb.Store.D.20","failed to delete object: "+a);b.onsuccess&&b.onsuccess(new i(b))})},this),b},this.clear=function(){var b=new j;return this._withEngine(b,function(c,d){if(c)return b._error(this,"indexeddb.Store.C.10","failed to open a transaction: "+c);d.run('DELETE FROM "'+this._meta.table+'"',a.bind(function(a){if(a)return b._error(self,"indexeddb.Store.C.20","failed to clear object store: "+a);b.onsuccess&&b.onsuccess(new i(b))},this))},this),b},this.count=function(a){var b=new j;return!a||a instanceof k||(a=k.only(a)),this._getAll(b,a,function(a,c){if(a)return b._error(this,"indexeddb.Store.Ct.10","failed to fetch objects: "+a);b.result=c.length,b.onsuccess&&b.onsuccess(new i(b))}),b},this._getAll=function(b,c,d,f){this._withEngine(b,function(b,g){return b?req._error(this,"indexeddb.Store.iGA.10","failed to open a transaction: "+b):void 0!=c?d.call(f,{code:"indexeddb.Store.iGA.20",message:"range operation not supported"}):void g.all('SELECT c_key, c_value FROM "'+this._meta.table+'"',a.bind(function(b,c){if(b)return d.call(f,{code:"indexeddb.Store.iGA.30",message:"failed to fetch objects: "+b});d.call(f,null,a.map(c,function(a){return{key:a.c_key,value:e(a.c_value)}}))},this))},this)},this.index=function(a){return new l(this,a)},this.openCursor=function(a,b){var c=new j;return c.cursor=new m(this,a,b,!1,c),c.cursor.continue(),c},this.openKeyCursor=function(a,b){var c=new j;return c.cursor=new m(this,a,b,!0,c),c.cursor.continue(),c}},o=function(b,c,d){this.db=b,this.mode=d||"readonly",this.error=null,this.onerror=null,this.onabort=null,this.oncomplete=null,this.preventDefault=function(){this._preventDefault=!0},this._db=b,this._stores=c?a.isArray(c)?c:[c]:[],this._preventDefault=!1,this._error=function(a){this.onerror&&this.onerror(a),a._preventDefault||this.db._error(a)},this.objectStore=function(b){return this._stores.length>0&&-1==a.indexOf(this._stores,b)?(new j)._error(this,"indexeddb.Transaction.OS.10",'request for out-of-transaction-context object store "'+b+'"'):this.db._openStore(this,b)}},p=function(c,g,k){this.name=g,this.version=k,this.objectStoreNames=[],this.onerror=null,this._conn=c,this._meta={stores:[]},this._error=function(a){this.onerror&&this.onerror(a)},this._load=function(c){this._withEngine(function(f,g){if(f)return c._error(null,"indexeddb.Database.iL.10","failed to open a transaction: "+f);var h=this;g.run('CREATE TABLE IF NOT EXISTS "idb.database" (c_name TEXT UNIQUE NOT NULL PRIMARY KEY, c_version INTEGER, c_meta TEXT)'),g.run('CREATE TABLE IF NOT EXISTS "idb.store" (c_dbname TEXT, c_name TEXT, c_meta TEXT,  PRIMARY KEY (c_dbname, c_name) )'),g.all('SELECT c_version, c_meta FROM "idb.database" WHERE c_name = ?',h.name,function(f,j){return f?c._error(null,"indexeddb.Database.iL.20","could not select from database: "+f):j.length>1?c._error(null,"indexeddb.Database.iL.21","internal error: received multiple records for idb.database query"):1==j.length?(h._meta=e(j[0].c_meta),void g.all('SELECT c_dbname, c_name FROM "idb.store"',function(d,e){if(d)return c._error(null,"indexeddb.Database.iL.22","could not select store names from database: "+d);h.objectStoreNames=a.map(e,function(a){return a.c_name}),h.objectStoreNames.sort();var f=j[0].c_version;if(void 0!=h.version&&h.version!=f){if(h.version<f)return c._errevt(null,new b.VersionError("indexeddb.Database.iL.25","current database version "+f+" exceeds requested version "+h.version));g.run('UPDATE "idb.database" SET c_version = ? WHERE c_name = ?',h.version,h.name,function(a){return a?c._error(null,"indexeddb.Database.iL.26","could not update database version: "+a):h._upgrade(c)})}else if(h.version=f,c.onsuccess)return c.onsuccess(new i(c))})):(h.version=h.version||1,void g.run('INSERT INTO "idb.database" VALUES ( ? , ? , ? )',h.name,h.version,d(h._meta),function(a){return a?c._error(null,"indexeddb.Database.iL.30","could not insert new database: "+a):h._upgrade(c)}))})},this)},this._upgrade=function(b){var c=this,d=new i(b);d.target.transaction={mode:"versionchange"},this._upgrading=[],b.onupgradeneeded&&b.onupgradeneeded(d);var e=this._upgrading;this._upgrading=null;var f=function(e){if(!(e.length<=0)){var g=e.shift();switch(g[0]){case"create":return void g[1]._create(function(a){if(a)return b._error(null,"indexeddb.Database.iU.10",a);c.objectStoreNames.push(g[1].name),c.objectStoreNames.sort(),f(e)});case"delete":return void c._withEngine(function(d,i){if(d)return b._error(null,"indexeddb.Database.iU.20",d);i.run('DELETE FROM "idb.store" WHERE c_dbname = ? AND c_name = ?',c.name,g[1],function(d){if(d)return b._error(null,"indexeddb.Database.iU.22",'could not remove table "'+c.name+"."+g[1]+'": '+d);c.objectStoreNames=a.filter(c.objectStoreNames,function(a){return a!=g[1]});var j="idb:"+h(c.name)+"."+h(g[1]);i.run('DROP TABLE "'+j+'"',function(a){if(a)return b._error(null,"indexeddb.Database.iU.23",'could not remove data for "'+c.name+"."+g[1]+'": '+a);f(e)})})})}return b._error(null,"indexeddb.Database.iU.50","internal error: unexpected table operation: "+g[0])}if(d.target.transaction=null,b.onsuccess)return b.onsuccess(d)};f(e)},this._withEngine=function(a,b){f(function(){var c=this._conn._driver;c.serialize(function(){a.call(b,null,c)})},this)},this.createObjectStore=function(a,b){if(!this._upgrading)throw new i({error:'"createObjectStore" can only be called during "onupgradeneeded" handling',errorCode:"indexeddb.Database.COS.10"});var c=new o(this,a,"readwrite"),d=new n(c,a,b,!0);return this._upgrading.push(["create",d]),d},this.deleteObjectStore=function(c){if(!this._upgrading)throw new i({error:'"deleteObjectStore" can only be called during "onupgradeneeded" handling',errorCode:"indexeddb.Database.DOS.10"});if(!a.contains(this.objectStoreNames,c))throw new b.NotFoundError("indexeddb.Database.DOS.11",'no such table "'+this.name+"."+c+'"');this._upgrading.push(["delete",c])},this.transaction=function(a,b){if(this._upgrading)throw new i({error:'"transaction" cannot be called during "onupgradeneeded" handling',errorCode:"indexeddb.Database.T.10"});return new o(this,a,b)},this.setVersion=function(a){var b=new j;return f(function(){b._error(this,"indexeddb.Database.SV.10","setVersion() not implemented")},this),b},this._openStore=function(a,b){return new n(a,b,null,!1)},this.close=function(){}};return b.indexedDB=function(b,c){return this._type=b,this._driver=c,this.vendor="indexeddb-js",this.version="0.0.14",this.open=function(b,c){var d=a.extend(new j,{onversionchange:null,onupgradeneeded:null,onblocked:null,onerror:null,onsuccess:null,result:new p(this,b,c,!1)});return d.result._load(d),d},this},b.initScope=function(a,c,d){return d.indexedDB=new b.indexedDB(a,c),d.IDBKeyRange=k,d},b.makeScope=function(a,c){return b.initScope(a,c,{})},b})}).call(this,a("_process"))},{_process:15,amdefine:61}],72:[function(a,b,c){function d(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function e(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&d(a.slice(0,0))}b.exports=function(a){return null!=a&&(d(a)||e(a)||!!a._isBuffer)}},{}],73:[function(a,b,c){},{}],74:[function(a,b,c){(function(c,d,e){!function(){var f=void 0!==c&&c.versions&&c.versions.node,g=!f&&("undefined"!=typeof window||"undefined"!=typeof self);g&&void 0===d&&("undefined"!=typeof window?d=window:"undefined"!=typeof self?d=self:"undefined"!=typeof $&&(d=$));var h=function(b){function h(){}function G(a){for(var b=[],c=Object.keys(a).sort(),d=0;d<c.length;++d){var e=c[d],f=a[e];na(f)||(f=[f]);for(var g=0;g<f.length;++g){var h=f[g];if(!pa(h))throw new E("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:a});b.push({"@value":h,"@language":e.toLowerCase()})}}return b}function H(a,b){if(na(b))for(var c=0;c<b.length;++c)b[c]=H(a,b[c]);else if(ya(b))b["@list"]=H(a,b["@list"]);else if(la(b)){za(b)&&(b["@id"]=a.getName(b["@id"]));for(var d=Object.keys(b).sort(),e=0;e<d.length;++e){var f=d[e];"@id"!==f&&(b[f]=H(a,b[f]))}}return b}function I(a,c,d){if(null===d||void 0===d)return null;var e=ga(a,c,{vocab:!0});if("@id"===e)return ga(a,d,{base:!0});if("@type"===e)return ga(a,d,{vocab:!0,base:!0});var f=b.getContextValue(a,c,"@type");if("@id"===f||"@graph"===e&&pa(d))return{"@id":ga(a,d,{base:!0})};if("@vocab"===f)return{"@id":ga(a,d,{vocab:!0,base:!0})};if(ka(e))return d;var g={};if(null!==f)g["@type"]=f;else if(pa(d)){var h=b.getContextValue(a,c,"@language");null!==h&&(g["@language"]=h)}return-1===["boolean","number","string"].indexOf(typeof d)&&(d=d.toString()),g["@value"]=d,g}function J(a,b,c){for(var d=[],e=Object.keys(a).sort(),f=0;f<e.length;++f)for(var g=e[f],h=a[g],i=Object.keys(h).sort(),j=0;j<i.length;++j){var k=i[j],l=h[k];if("@type"===k)k=x;else if(ka(k))continue;for(var m=0;m<l.length;++m){var n=l[m],o={};if(o.type=0===g.indexOf("_:")?"blank node":"IRI",o.value=g,Aa(g)){var p={};if(p.type=0===k.indexOf("_:")?"blank node":"IRI",p.value=k,Aa(k)&&("blank node"!==p.type||c.produceGeneralizedRdf))if(ya(n))K(n["@list"],b,o,p,d);else{var q=L(n);q&&d.push({subject:o,predicate:p,object:q})}}}}return d}function K(a,b,c,d,e){for(var f={type:"IRI",value:u},g={type:"IRI",value:v},h={type:"IRI",value:w},i=0;i<a.length;++i){var j=a[i],k={type:"blank node",value:b.getName()};e.push({subject:c,predicate:d,object:k}),c=k,d=f;var l=L(j);l&&e.push({subject:c,predicate:d,object:l}),d=g}e.push({subject:c,predicate:d,object:h})}function L(a){var b={};if(xa(a)){b.type="literal";var c=a["@value"],d=a["@type"]||null;ta(c)?(b.value=c.toString(),b.datatype=d||o):ra(c)||d===p?(ra(c)||(c=parseFloat(c)),b.value=c.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),b.datatype=d||p):qa(c)?(b.value=c.toFixed(0),b.datatype=d||q):"@language"in a?(b.value=c,b.datatype=d||B,b.language=a["@language"]):(b.value=c,b.datatype=d||r)}else{var e=la(a)?a["@id"]:a;b.type=0===e.indexOf("_:")?"blank node":"IRI",b.value=e}return"IRI"!==b.type||Aa(b.value)?b:null}function M(a,b){if("IRI"===a.type||"blank node"===a.type)return{"@id":a.value};var c={"@value":a.value};if(a.language)c["@language"]=a.language;else{var d=a.datatype;if(d||(d=r),b){if(d===o)"true"===c["@value"]?c["@value"]=!0:"false"===c["@value"]&&(c["@value"]=!1);else if(sa(c["@value"]))if(d===q){var e=parseInt(c["@value"],10);e.toFixed(0)===c["@value"]&&(c["@value"]=e)}else d===p&&(c["@value"]=parseFloat(c["@value"]));-1===[o,q,p,r].indexOf(d)&&(c["@type"]=d)}else d!==r&&(c["@type"]=d)}return c}function N(a,b){for(var c=["subject","predicate","object"],d=0;d<c.length;++d){var e=c[d];if(a[e].type!==b[e].type||a[e].value!==b[e].value)return!1}return a.object.language===b.object.language&&a.object.datatype===b.object.datatype}function O(a,b){if("hash"in b[a])return b[a].hash;for(var c=b[a].quads,d=[],e=0;e<c.length;++e)d.push(Ga(c[e],c[e].name?c[e].name.value:null,a));return d.sort(),b[a].hash=Ka.hash(d)}function P(a,c,d,e,f){function k(f){if(f===j.length)return i=Object.keys(h).sort(),l(0);var g=j[f],m=Q(g.subject,a),n=null;if(null!==m?n="p":null!==(m=Q(g.object,a))&&(n="r"),null!==m){var o;o=d.isNamed(m)?d.getName(m):e.isNamed(m)?e.getName(m):O(m,c);var p=Ka.create();p.update(n),p.update(g.predicate.value),p.update(o);var q=p.digest();q in h?h[q].push(m):h[q]=[m]}b.setImmediate(function(){k(f+1)})}function l(a){function o(){function s(a){if(a===p.length)return t(!1);var b=p[a];P(b,c,d,i,function(c,d){return c?f(c):(j+=i.getName(b)+"<"+d.hash+">",i=d.pathNamer,null!==k&&j.length>=k.length&&j>k?t(!0):void s(a+1))})}function t(c){!c&&(null===k||j<k)&&(k=j,m=i),n.hasNext()?b.setImmediate(function(){o()}):(g.update(k),e=m,l(a+1))}var h=n.next(),i=e.clone(),j="",p=[];for(var q in h){var r=h[q];if(d.isNamed(r)?j+=d.getName(r):(i.isNamed(r)||p.push(r),j+=i.getName(r)),null!==k&&j.length>=k.length&&j>k)return t(!0)}s(0)}if(a===i.length)return f(null,{hash:g.digest(),pathNamer:e});var j=i[a];g.update(j);var k=null,m=null,n=new Ja(h[j]);b.setImmediate(function(){o()})}var i,g=Ka.create(),h={},j=c[a].quads;b.setImmediate(function(){k(0)})}function Q(a,b){return"blank node"===a.type&&a.value!==b?a.value:null}function R(a,c,d,e,f,g){if(na(a))for(var h=0;h<a.length;++h)R(a[h],c,d,e,void 0,g);else{if(!la(a))return void(g&&g.push(a));if(xa(a)){if("@type"in a){var i=a["@type"];0===i.indexOf("_:")&&(a["@type"]=i=e.getName(i))}return void(g&&g.push(a))}if("@type"in a)for(var j=a["@type"],h=0;h<j.length;++h){var i=j[h];0===i.indexOf("_:")&&e.getName(i)}ua(f)&&(f=za(a)?e.getName(a["@id"]):a["@id"]),g&&g.push({"@id":f});var k=c[d],l=k[f]=k[f]||{};l["@id"]=f;for(var m=Object.keys(a).sort(),n=0;n<m.length;++n){var o=m[n];if("@id"!==o)if("@reverse"!==o)if("@graph"!==o)if("@type"!==o&&ka(o)){if("@index"===o&&o in l&&(a[o]!==l[o]||a[o]["@id"]!==l[o]["@id"]))throw new E("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:l});l[o]=a[o]}else{var x=a[o];if(0===o.indexOf("_:")&&(o=e.getName(o)),0!==x.length)for(var y=0;y<x.length;++y){var z=x[y];if("@type"===o&&(z=0===z.indexOf("_:")?e.getName(z):z),va(z)||wa(z)){var A=za(z)?e.getName(z["@id"]):z["@id"];b.addValue(l,o,{"@id":A},{propertyIsArray:!0,allowDuplicate:!1}),R(z,c,d,e,A)}else if(ya(z)){var B=[];R(z["@list"],c,d,e,f,B),z={"@list":B},b.addValue(l,o,z,{propertyIsArray:!0,allowDuplicate:!1})}else R(z,c,d,e,f),b.addValue(l,o,z,{propertyIsArray:!0,allowDuplicate:!1})}else b.addValue(l,o,[],{propertyIsArray:!0})}else{f in c||(c[f]={});var w="@merged"===d?d:f;R(a[o],c,w,e)}else{var p={"@id":f},q=a["@reverse"];for(var r in q)for(var s=q[r],t=0;t<s.length;++t){var u=s[t],v=u["@id"];za(u)&&(v=e.getName(v)),R(u,c,d,e,v),b.addValue(k[v],r,p,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function S(a){for(var b=a["@default"],c=Object.keys(a).sort(),d=0;d<c.length;++d){var e=c[d];if("@default"!==e){var f=a[e],g=b[e];g?"@graph"in g||(g["@graph"]=[]):b[e]=g={"@id":e,"@graph":[]};for(var h=g["@graph"],i=Object.keys(f).sort(),j=0;j<i.length;++j){var k=f[i[j]];wa(k)||h.push(k)}}}return b}function T(a,b,c,d,e){X(c),c=c[0];for(var f=a.options,g={embed:W(c,f,"embed"),explicit:W(c,f,"explicit"),requireAll:W(c,f,"requireAll")},h=Y(a,b,c,g),i=Object.keys(h).sort(),j=0;j<i.length;++j){var k=i[j],l=h[k];if("@link"===g.embed&&k in a.link)_(d,e,a.link[k]);else{null===e&&(a.uniqueEmbeds={});var m={};if(m["@id"]=k,a.link[k]=m,"@never"===g.embed||V(l,a.subjectStack))_(d,e,m);else{"@last"===g.embed&&(k in a.uniqueEmbeds&&$(a,k),a.uniqueEmbeds[k]={parent:d,property:e}),a.subjectStack.push(l);for(var n=Object.keys(l).sort(),o=0;o<n.length;o++){var p=n[o];if(ka(p))m[p]=Ba(l[p]);else if(!g.explicit||p in c)for(var q=l[p],r=0;r<q.length;++r){var s=q[r];if(ya(s)){var t={"@list":[]};_(m,p,t);var u=s["@list"];for(var v in u)if(s=u[v],wa(s)){var w=p in c?c[p][0]["@list"]:U(g);T(a,[s["@id"]],w,t,"@list")}else _(t,"@list",Ba(s))}else if(wa(s)){var w=p in c?c[p]:U(g);T(a,[s["@id"]],w,m,p)}else _(m,p,Ba(s))}}for(var n=Object.keys(c).sort(),o=0;o<n.length;++o){var p=n[o];if(!ka(p)){var x=c[p][0];if(!(W(x,f,"omitDefault")||p in m)){var z="@null";"@default"in x&&(z=Ba(x["@default"])),na(z)||(z=[z]),m[p]=[{"@preserve":z}]}}}_(d,e,m),a.subjectStack.pop()}}}}function U(a){var b={};for(var c in a)void 0!==a[c]&&(b["@"+c]=[a[c]]);return[b]}function V(a,b){for(var c=b.length-1;c>=0;--c)if(b[c]["@id"]===a["@id"])return!0;return!1}function W(a,b,c){var d="@"+c,e=d in a?a[d][0]:b[c];return"embed"===c&&(!0===e?e="@last":!1===e?e="@never":"@always"!==e&&"@never"!==e&&"@link"!==e&&(e="@last")),e}function X(a){if(!na(a)||1!==a.length||!la(a[0]))throw new E("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:a})}function Y(a,b,c,d){for(var e={},f=0;f<b.length;++f){var g=b[f],h=a.subjects[g];Z(h,c,d)&&(e[g]=h)}return e}function Z(a,c,d){if("@type"in c&&(1!==c["@type"].length||!la(c["@type"][0]))){for(var e=c["@type"],f=0;f<e.length;++f)if(b.hasValue(a,"@type",e[f]))return!0;return!1}var g=!0,h=!1;for(var i in c){if(ka(i)){if("@id"!==i&&"@type"!==i)continue;if(g=!1,"@id"===i&&pa(c[i])){if(a[i]!==c[i])return!1;h=!0;continue}}if(g=!1,i in a){if(na(c[i])&&0===c[i].length&&void 0!==a[i])return!1;h=!0}else{var j=na(c[i])&&la(c[i][0])&&"@default"in c[i][0];if(d.requireAll&&!j)return!1}}return g||h}function $(a,c){var d=a.uniqueEmbeds,e=d[c],f=e.parent,g=e.property,h={"@id":c};if(na(f)){for(var i=0;i<f.length;++i)if(b.compareValues(f[i],h)){f[i]=h;break}}else{var j=na(f[g]);b.removeValue(f,g,h,{propertyIsArray:j}),b.addValue(f,g,h,{propertyIsArray:j})}var k=function(a){for(var b=Object.keys(d),c=0;c<b.length;++c){var e=b[c];e in d&&la(d[e].parent)&&d[e].parent["@id"]===a&&(delete d[e],k(e))}};k(c)}function _(a,c,d){la(a)?b.addValue(a,c,d,{propertyIsArray:!0}):a.push(d)}function aa(a,c,d){if(na(c)){for(var e=[],f=0;f<c.length;++f){var g=aa(a,c[f],d);null!==g&&e.push(g)}c=e}else if(la(c)){if("@preserve"in c)return"@null"===c["@preserve"]?null:c["@preserve"];if(xa(c))return c;if(ya(c))return c["@list"]=aa(a,c["@list"],d),c;var h=da(a,"@id");if(h in c){var i=c[h];if(i in d.link){var j=d.link[i].indexOf(c);if(-1!==j)return d.link[i][j];d.link[i].push(c)}else d.link[i]=[c]}for(var k in c){var g=aa(a,c[k],d),l=b.getContextValue(a,k,"@container");d.compactArrays&&na(g)&&1===g.length&&null===l&&(g=g[0]),c[k]=g}}return c}function ba(a,b){return a.length<b.length?-1:b.length<a.length?1:a===b?0:a<b?-1:1}function ca(a,b,c,d,e,f){null===f&&(f="@null");var g=[];if("@id"!==f&&"@reverse"!==f||!wa(c))g.push(f);else{"@reverse"===f&&g.push("@reverse");var h=da(a,c["@id"],null,{vocab:!0});h in a.mappings&&a.mappings[h]&&a.mappings[h]["@id"]===c["@id"]?g.push.apply(g,["@vocab","@id"]):g.push.apply(g,["@id","@vocab"])}g.push("@none");for(var i=a.inverse[b],j=0;j<d.length;++j){var k=d[j];if(k in i)for(var l=i[k][e],m=0;m<g.length;++m){var n=g[m];if(n in l)return l[n]}}return null}function da(a,b,c,d,e){if(null===b)return b;if(ua(c)&&(c=null),ua(e)&&(e=!1),d=d||{},ka(b)&&(d.vocab=!0),d.vocab&&b in a.getInverse()){var f=a["@language"]||"@none",g=[];la(c)&&"@index"in c&&g.push("@index");var h="@language",i="@null";if(e)h="@type",i="@reverse",g.push("@set");else if(ya(c)){"@index"in c||g.push("@list");for(var j=c["@list"],k=0===j.length?f:null,l=null,m=0;m<j.length;++m){var n=j[m],o="@none",p="@none";if(xa(n)?"@language"in n?o=n["@language"]:"@type"in n?p=n["@type"]:o="@null":p="@id",null===k?k=o:o!==k&&xa(n)&&(k="@none"),null===l?l=p:p!==l&&(l="@none"),"@none"===k&&"@none"===l)break}k=k||"@none",l=l||"@none","@none"!==l?(h="@type",i=l):i=k}else xa(c)?"@language"in c&&!("@index"in c)?(g.push("@language"),i=c["@language"]):"@type"in c&&(h="@type",i=c["@type"]):(h="@type",i="@id"),g.push("@set");g.push("@none");var q=ca(a,b,c,g,h,i);if(null!==q)return q}if(d.vocab&&"@vocab"in a){var r=a["@vocab"];if(0===b.indexOf(r)&&b!==r){var s=b.substr(r.length);if(!(s in a.mappings))return s}}var t=null;for(var q in a.mappings)if(-1===q.indexOf(":")){var u=a.mappings[q];if(u&&u["@id"]!==b&&0===b.indexOf(u["@id"])){var v=q+":"+b.substr(u["@id"].length),w=!(v in a.mappings)||null===c&&a.mappings[v]&&a.mappings[v]["@id"]===b;w&&(null===t||ba(v,t)<0)&&(t=v)}}return null!==t?t:d.vocab?b:ia(a["@base"],b)}function ea(a,c,d){if(xa(d)){var e=b.getContextValue(a,c,"@type"),f=b.getContextValue(a,c,"@language"),g=b.getContextValue(a,c,"@container"),h="@index"in d&&"@index"!==g;if(!h&&(d["@type"]===e||d["@language"]===f))return d["@value"];var i=Object.keys(d).length,j=1===i||2===i&&"@index"in d&&!h,k="@language"in a,l=pa(d["@value"]),m=a.mappings[c]&&null===a.mappings[c]["@language"];if(j&&(!k||!l||m))return d["@value"];var n={};return h&&(n[da(a,"@index")]=d["@index"]),"@type"in d?n[da(a,"@type")]=da(a,d["@type"],null,{vocab:!0}):"@language"in d&&(n[da(a,"@language")]=d["@language"]),n[da(a,"@value")]=d["@value"],n}var o=ga(a,c,{vocab:!0}),e=b.getContextValue(a,c,"@type"),p=da(a,d["@id"],null,{vocab:"@vocab"===e});if("@id"===e||"@vocab"===e||"@graph"===o)return p;var n={};return n[da(a,"@id")]=p,n}function fa(a,b,c,d){if(c in d){if(d[c])return;throw new E("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:b,term:c})}if(d[c]=!1,ka(c))throw new E("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:b,term:c});if(""===c)throw new E("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:b});a.mappings[c]&&delete a.mappings[c];var e=b[c];if(null===e||la(e)&&null===e["@id"])return a.mappings[c]=null,void(d[c]=!0);if(pa(e)&&(e={"@id":e}),!la(e))throw new E("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:b});var f=a.mappings[c]={};if(f.reverse=!1,"@reverse"in e){if("@id"in e)throw new E("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:b});var g=e["@reverse"];if(!pa(g))throw new E("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});var h=ga(a,g,{vocab:!0,base:!1},b,d);if(!Aa(h))throw new E("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});f["@id"]=h,f.reverse=!0}else if("@id"in e){var h=e["@id"];if(!pa(h))throw new E("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});if(h!==c){if(h=ga(a,h,{vocab:!0,base:!1},b,d),!Aa(h)&&!ka(h))throw new E("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});f["@id"]=h}}if(!("@id"in f)){var i=c.indexOf(":");if(-1!==i){var j=c.substr(0,i);if(j in b&&fa(a,b,j,d),a.mappings[j]){var k=c.substr(i+1);f["@id"]=a.mappings[j]["@id"]+k}else f["@id"]=c}else{if(!("@vocab"in a))throw new E("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b,term:c});f["@id"]=a["@vocab"]+c}}if(d[c]=!0,"@type"in e){var l=e["@type"];if(!pa(l))throw new E("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:b});if("@id"!==l&&"@vocab"!==l){if(l=ga(a,l,{vocab:!0,base:!1},b,d),!Aa(l))throw new E("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:b});if(0===l.indexOf("_:"))throw new E("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:b})}f["@type"]=l}if("@container"in e){var m=e["@container"];if("@list"!==m&&"@set"!==m&&"@index"!==m&&"@language"!==m)throw new E("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:b});if(f.reverse&&"@index"!==m&&"@set"!==m&&null!==m)throw new E("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:b});f["@container"]=m}if("@language"in e&&!("@type"in e)){var n=e["@language"];if(null!==n&&!pa(n))throw new E("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:b});null!==n&&(n=n.toLowerCase()),f["@language"]=n}var h=f["@id"];if("@context"===h||"@preserve"===h)throw new E("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:b})}function ga(a,c,d,e,f){if(null===c||ka(c))return c;if(c=String(c),e&&c in e&&!0!==f[c]&&fa(a,e,c,f),d=d||{},d.vocab){var g=a.mappings[c];if(null===g)return null;if(g)return g["@id"]}var h=c.indexOf(":");if(-1!==h){var i=c.substr(0,h),j=c.substr(h+1);if("_"===i||0===j.indexOf("//"))return c;e&&i in e&&fa(a,e,i,f);var g=a.mappings[i];return g?g["@id"]+j:c}if(d.vocab&&"@vocab"in a)return a["@vocab"]+c;var k=c;return d.base&&(k=b.prependBase(a["@base"],k)),k}function ha(a,c){if(null===a)return c;if(-1!==c.indexOf(":"))return c;pa(a)&&(a=b.url.parse(a||""));var d=b.url.parse(c),e={protocol:a.protocol||""};if(null!==d.authority)e.authority=d.authority,e.path=d.path,e.query=d.query;else if(e.authority=a.authority,""===d.path)e.path=a.path,null!==d.query?e.query=d.query:e.query=a.query;else{if(0===d.path.indexOf("/"))e.path=d.path;else{var f=a.path;""!==d.path&&(f=f.substr(0,f.lastIndexOf("/")+1),f.length>0&&"/"!==f.substr(-1)&&(f+="/"),f+=d.path),e.path=f}e.query=d.query}e.path=Oa(e.path,!!e.authority);var g=e.protocol;return null!==e.authority&&(g+="//"+e.authority),g+=e.path,null!==e.query&&(g+="?"+e.query),null!==d.fragment&&(g+="#"+d.fragment),""===g&&(g="./"),g}function ia(a,c){if(null===a)return c;pa(a)&&(a=b.url.parse(a||""));var d="";if(""!==a.href?d+=(a.protocol||"")+"//"+(a.authority||""):c.indexOf("//")&&(d+="//"),0!==c.indexOf(d))return c;for(var e=b.url.parse(c.substr(d.length)),f=a.normalizedPath.split("/"),g=e.normalizedPath.split("/"),h=e.fragment||e.query?0:1;f.length>0&&g.length>h&&f[0]===g[0];)f.shift(),g.shift();var i="";if(f.length>0){f.pop();for(var j=0;j<f.length;++j)i+="../"}return i+=g.join("/"),null!==e.query&&(i+="?"+e.query),null!==e.fragment&&(i+="#"+e.fragment),""===i&&(i="./"),i}function ja(a){function d(){var a=this;if(a.inverse)return a.inverse;for(var b=a.inverse={},c=a["@language"]||"@none",d=a.mappings,f=Object.keys(d).sort(ba),g=0;g<f.length;++g){var h=f[g],i=d[h];if(null!==i){var j=i["@container"]||"@none",k=i["@id"];na(k)||(k=[k]);for(var l=0;l<k.length;++l){var m=k[l],n=b[m];if(n||(b[m]=n={}),n[j]||(n[j]={"@language":{},"@type":{}}),n=n[j],i.reverse)e(i,h,n["@type"],"@reverse");else if("@type"in i)e(i,h,n["@type"],i["@type"]);else if("@language"in i){var o=i["@language"]||"@null";e(i,h,n["@language"],o)}else e(i,h,n["@language"],c),e(i,h,n["@type"],"@none"),e(i,h,n["@language"],"@none")}}}return b}function e(a,b,c,d){d in c||(c[d]=b)}function f(){var a={};return a["@base"]=this["@base"],a.mappings=Ba(this.mappings),a.clone=this.clone,a.inverse=null,a.getInverse=this.getInverse,"@language"in this&&(a["@language"]=this["@language"]),"@vocab"in this&&(a["@vocab"]=this["@vocab"]),a}return{"@base":b.url.parse(a.base||""),mappings:{},inverse:null,getInverse:d,clone:f}}function ka(a){if(!pa(a))return!1;switch(a){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function la(a){return"[object Object]"===Object.prototype.toString.call(a)}function ma(a){return la(a)&&0===Object.keys(a).length}function na(a){return Array.isArray(a)}function oa(a){if(!pa(a)&&!ma(a)){var b=!1;if(na(a)){b=!0;for(var c=0;c<a.length;++c)if(!pa(a[c])){b=!1;break}}if(!b)throw new E('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:a})}}function pa(a){return"string"==typeof a||"[object String]"===Object.prototype.toString.call(a)}function qa(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function ra(a){return qa(a)&&-1!==String(a).indexOf(".")}function sa(a){return!isNaN(parseFloat(a))&&isFinite(a)}function ta(a){return"boolean"==typeof a||"[object Boolean]"===Object.prototype.toString.call(a)}function ua(a){return void 0===a}function va(a){var b=!1;if(la(a)&&!("@value"in a||"@set"in a||"@list"in a)){b=Object.keys(a).length>1||!("@id"in a)}return b}function wa(a){return la(a)&&1===Object.keys(a).length&&"@id"in a}function xa(a){return la(a)&&"@value"in a}function ya(a){return la(a)&&"@list"in a}function za(a){var b=!1;return la(a)&&(b="@id"in a?0===a["@id"].indexOf("_:"):0===Object.keys(a).length||!("@value"in a||"@set"in a||"@list"in a)),b}function Aa(a){return pa(a)&&-1!==a.indexOf(":")}function Ba(a){if(a&&"object"==typeof a){var b;if(na(a)){b=[];for(var c=0;c<a.length;++c)b[c]=Ba(a[c])}else if(la(a)){b={};for(var d in a)b[d]=Ba(a[d])}else b=a.toString();return b}return a}function Ca(a,c,d,e){var f=Object.keys(c).length;if(na(a)){for(var g=0;g<a.length;++g)Ca(a[g],c,d,e);return f<Object.keys(c).length}if(la(a)){for(var h in a)if("@context"===h){var i=a[h];if(na(i))for(var j=i.length,g=0;g<j;++g){var k=i[g];pa(k)&&(k=b.prependBase(e,k),d?(k=c[k],na(k)?(Array.prototype.splice.apply(i,[g,1].concat(k)),g+=k.length-1,j=i.length):i[g]=k):k in c||(c[k]=!1))}else pa(i)&&(i=b.prependBase(e,i),d?a[h]=c[i]:i in c||(c[i]=!1))}else Ca(a[h],c,d,e);return f<Object.keys(c).length}return!1}function Da(a,b,c){var d=null,e=b.documentLoader,f=function(a,b,c,e,g){if(Object.keys(b).length>D)return d=new E("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:D}),g(d);var h={},i=function(){Ca(a,h,!0,e),g(null,a)};Ca(a,h,!1,e)||i();var j=[];for(var k in h)!1===h[k]&&j.push(k);for(var l=j.length,m=0;m<j.length;++m)!function(a){if(a in b)return d=new E("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:a}),g(d);var e=Ba(b);e[a]=!0;var j=function(b,j){if(!d){var k=j?j.document:null;if(!b&&pa(k))try{k=JSON.parse(k)}catch(a){b=a}if(b?b=new E("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:a,cause:b}):la(k)||(b=new E("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:a,cause:b})),b)return d=b,g(d);k="@context"in k?{"@context":k["@context"]}:{"@context":{}},j.contextUrl&&(na(k["@context"])||(k["@context"]=[k["@context"]]),k["@context"].push(j.contextUrl)),f(k,e,c,a,function(b,c){if(b)return g(b);h[a]=c["@context"],0===(l-=1)&&i()})}},k=c(a,j);k&&"then"in k&&k.then(j.bind(null,null),j)}(j[m])};f(a,{},e,b.base,c)}function Ea(a){for(var b="(?:<([^:]+:[^>]*)>)",c="(_:(?:[A-Za-z0-9]+))",d='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',e="(?:\\^\\^"+b+")",f="(?:@([a-z]+(?:-[a-z0-9]+)*))",g="(?:"+d+"(?:"+e+"|"+f+")?)",h="[ \\t]+",i="[ \\t]*",j=/(?:\r\n)|(?:\n)|(?:\r)/g,k=new RegExp("^"+i+"$"),l="(?:"+b+"|"+c+")"+h,m=b+h,n="(?:"+b+"|"+c+"|"+g+")"+i,o="(?:\\.|(?:(?:"+b+"|"+c+")"+i+"\\.))",p=new RegExp("^"+i+l+m+n+o+i+"$"),q={},s=a.split(j),t=0,u=0;u<s.length;++u){var v=s[u];if(t++,!k.test(v)){var w=v.match(p);if(null===w)throw new E("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:t});var x={};if(ua(w[1])?x.subject={type:"blank node",value:w[2]}:x.subject={type:"IRI",value:w[1]},x.predicate={type:"IRI",value:w[3]},ua(w[4]))if(ua(w[5])){x.object={type:"literal"},ua(w[7])?ua(w[8])?x.object.datatype=r:(x.object.datatype=B,x.object.language=w[8]):x.object.datatype=w[7];var y=w[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");x.object.value=y}else x.object={type:"blank node",value:w[5]};else x.object={type:"IRI",value:w[4]};var z="@default";if(ua(w[9])?ua(w[10])||(z=w[10]):z=w[9],z in q){for(var A=!0,C=q[z],D=0;A&&D<C.length;++D)N(C[D],x)&&(A=!1);A&&C.push(x)}else q[z]=[x]}}return q}function Fa(a){var b=[];for(var c in a)for(var d=a[c],e=0;e<d.length;++e){var f=d[e];"@default"===c&&(c=null),b.push(Ga(f,c))}return b.sort(),b.join("")}function Ga(a,b,c){var d=a.subject,e=a.predicate,f=a.object,g=b,h="";if("IRI"===d.type?h+="<"+d.value+">":h+=c?d.value===c?"_:a":"_:z":d.value,h+=" ","IRI"===e.type?h+="<"+e.value+">":h+=c?"_:p":e.value,h+=" ","IRI"===f.type)h+="<"+f.value+">";else if("blank node"===f.type)h+=c?f.value===c?"_:a":"_:z":f.value;else{var i=f.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');h+='"'+i+'"',f.datatype===B?f.language&&(h+="@"+f.language):f.datatype!==r&&(h+="^^<"+f.datatype+">")}return null!==g&&(0!==g.indexOf("_:")?h+=" <"+g+">":h+=c?" _:g":" "+g),h+=" .\n"}function Ha(a){var b={};b["@default"]=[];for(var c=a.getSubjects(),d=0;d<c.length;++d){var e=c[d];if(null!==e){var f=a.getSubjectTriples(e);if(null!==f){var g=f.predicates;for(var h in g)for(var i=g[h].objects,j=0;j<i.length;++j){var k=i[j],l={};0===e.indexOf("_:")?l.subject={type:"blank node",value:e}:l.subject={type:"IRI",value:e},0===h.indexOf("_:")?l.predicate={type:"blank node",value:h}:l.predicate={type:"IRI",value:h};var o=k.value;if(k.type===z){m||Na();var p=new m;o="";for(var q=0;q<k.value.length;q++)k.value[q].nodeType===n.ELEMENT_NODE?o+=p.serializeToString(k.value[q]):k.value[q].nodeType===n.TEXT_NODE&&(o+=k.value[q].nodeValue)}l.object={},k.type===A?0===k.value.indexOf("_:")?l.object.type="blank node":l.object.type="IRI":(l.object.type="literal",k.type===y?k.language?(l.object.datatype=B,l.object.language=k.language):l.object.datatype=r:l.object.datatype=k.type),l.object.value=o,b["@default"].push(l)}}}}return b}function Ia(a){this.prefix=a,this.counter=0,this.existing={}}function Oa(a,b){var c="";0===a.indexOf("/")&&(c="/");for(var d=a.split("/"),e=[];d.length>0;)"."===d[0]||""===d[0]&&d.length>1?d.shift():".."!==d[0]?e.push(d.shift()):(d.shift(),b||e.length>0&&".."!==e[e.length-1]?e.pop():e.push(".."));return c+e.join("/")}b.compact=function(a,c,d,e){function g(a,b,d,f){if(a)return e(a);f.compactArrays&&!f.graph&&na(b)?1===b.length?b=b[0]:0===b.length&&(b={}):f.graph&&la(b)&&(b=[b]),la(c)&&"@context"in c&&(c=c["@context"]),c=Ba(c),na(c)||(c=[c]);var g=c;c=[];for(var h=0;h<g.length;++h)(!la(g[h])||Object.keys(g[h]).length>0)&&c.push(g[h]);var i=c.length>0;if(1===c.length&&(c=c[0]),na(b)){var j=da(d,"@graph"),k=b;b={},i&&(b["@context"]=c),b[j]=k}else if(la(b)&&i){var k=b;b={"@context":c};for(var l in k)b[l]=k[l]}e(null,b,d)}return arguments.length<2?b.nextTick(function(){e(new TypeError("Could not compact, too few arguments."))}):("function"==typeof d&&(e=d,d={}),d=d||{},null===c?b.nextTick(function(){e(new E("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))}):null===a?b.nextTick(function(){e(null,null)}):("base"in d||(d.base="string"==typeof a?a:""),"compactArrays"in d||(d.compactArrays=!0),"graph"in d||(d.graph=!1),"skipExpansion"in d||(d.skipExpansion=!1),"documentLoader"in d||(d.documentLoader=b.loadDocument),"link"in d||(d.link=!1),d.link&&(d.skipExpansion=!0),void function(a,c,d){b.nextTick(function(){if(c.skipExpansion)return d(null,a);b.expand(a,c,d)})}(a,d,function(a,f){if(a)return e(new E("Could not expand input before compaction.","jsonld.CompactError",{cause:a}));var h=ja(d);b.processContext(h,c,d,function(a,b){if(a)return e(new E("Could not process context before compaction.","jsonld.CompactError",{cause:a}));var c;try{c=(new F).compact(b,null,f,d)}catch(a){return e(a)}g(null,c,b,d)})})))},b.expand=function(a,c,d){function e(a){"base"in c||(c.base=a.documentUrl||"");var b={document:Ba(a.document),remoteContext:{"@context":a.contextUrl}};if("expandContext"in c){var e=Ba(c.expandContext);b.expandContext="object"==typeof e&&"@context"in e?e:{"@context":e}}Da(b,c,function(a,b){if(a)return d(a);var e;try{var f=new F,g=ja(c),h=b.document,i=b.remoteContext["@context"];b.expandContext&&(g=f.processContext(g,b.expandContext["@context"],c)),i&&(g=f.processContext(g,i,c)),e=f.expand(g,null,h,c,!1),la(e)&&"@graph"in e&&1===Object.keys(e).length?e=e["@graph"]:null===e&&(e=[]),na(e)||(e=[e])}catch(a){return d(a)}d(null,e)})}if(arguments.length<1)return b.nextTick(function(){d(new TypeError("Could not expand, too few arguments."))});"function"==typeof c&&(d=c,c={}),c=c||{},"documentLoader"in c||(c.documentLoader=b.loadDocument),"keepFreeFloatingNodes"in c||(c.keepFreeFloatingNodes=!1),b.nextTick(function(){if("string"==typeof a){var b=function(a,b){if(a)return d(a);try{if(!b.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof b.document&&(b.document=JSON.parse(b.document))}catch(a){return d(new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:a,remoteDoc:b}))}e(b)},f=c.documentLoader(a,b);return void(f&&"then"in f&&f.then(b.bind(null,null),b))}e({contextUrl:null,documentUrl:null,document:a})})},b.flatten=function(a,c,d,e){if(arguments.length<1)return b.nextTick(function(){e(new TypeError("Could not flatten, too few arguments."))});"function"==typeof d?(e=d,d={}):"function"==typeof c&&(e=c,c=null,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=b.loadDocument),b.expand(a,d,function(a,f){if(a)return e(new E("Could not expand input before flattening.","jsonld.FlattenError",{cause:a}));var g;try{g=(new F).flatten(f)}catch(a){return e(a)}if(null===c)return e(null,g);d.graph=!0,d.skipExpansion=!0,b.compact(g,c,d,function(a,b){if(a)return e(new E("Could not compact flattened output.","jsonld.FlattenError",{cause:a}));e(null,b)})})},b.frame=function(a,c,d,e){function f(c){var g,f=c.document;f?(g=f["@context"],c.contextUrl?(g?na(g)?g.push(c.contextUrl):g=[g,c.contextUrl]:g=c.contextUrl,f["@context"]=g):g=g||{}):g={},b.expand(a,d,function(a,c){if(a)return e(new E("Could not expand input before framing.","jsonld.FrameError",{cause:a}));var h=Ba(d);h.isFrame=!0,h.keepFreeFloatingNodes=!0,b.expand(f,h,function(a,d){if(a)return e(new E("Could not expand frame before framing.","jsonld.FrameError",{cause:a}));var f;try{f=(new F).frame(c,d,h)}catch(a){return e(a)}h.graph=!0,h.skipExpansion=!0,h.link={},b.compact(f,g,h,function(a,b,c){if(a)return e(new E("Could not compact framed output.","jsonld.FrameError",{cause:a}));var d=da(c,"@graph");h.link={},b[d]=aa(c,b[d],h),e(null,b)})})})}if(arguments.length<2)return b.nextTick(function(){e(new TypeError("Could not frame, too few arguments."))});"function"==typeof d&&(e=d,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=b.loadDocument),"embed"in d||(d.embed="@last"),d.explicit=d.explicit||!1,"requireAll"in d||(d.requireAll=!0),d.omitDefault=d.omitDefault||!1,b.nextTick(function(){if("string"==typeof c){var a=function(a,b){if(a)return e(a);try{if(!b.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof b.document&&(b.document=JSON.parse(b.document))}catch(a){return e(new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:a,remoteDoc:b}))}f(b)},b=d.documentLoader(c,a);return void(b&&"then"in b&&b.then(a.bind(null,null),a))}f({contextUrl:null,documentUrl:null,document:c})})},b.link=function(a,c,d,e){var f={};c&&(f["@context"]=c),f["@embed"]="@link",b.frame(a,f,d,e)},b.objectify=function(a,c,d,e){"function"==typeof d&&(e=d,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=b.loadDocument),b.expand(a,d,function(a,f){if(a)return e(new E("Could not expand input before linking.","jsonld.LinkError",{cause:a}));var g;try{g=(new F).flatten(f)}catch(a){return e(a)}d.graph=!0,d.skipExpansion=!0,b.compact(g,c,d,function(a,c,d){if(a)return e(new E("Could not compact flattened output before linking.","jsonld.LinkError",{cause:a}));var f=da(d,"@graph"),g=c[f][0],h=function(a){if(la(a)||na(a)){if(la(a)){if(h.visited[a["@id"]])return;h.visited[a["@id"]]=!0}for(var c in a){var e=a[c],f="@id"===b.getContextValue(d,c,"@type");if(na(e)||la(e)||f)if(pa(e)&&f)a[c]=e=g[e],h(e);else if(na(e))for(var i=0;i<e.length;++i)pa(e[i])&&f?e[i]=g[e[i]]:la(e[i])&&"@id"in e[i]&&(e[i]=g[e[i]["@id"]]),h(e[i]);else if(la(e)){var j=e["@id"];a[c]=e=g[j],h(e)}}}};h.visited={},h(g),c.of_type={};for(var i in g)if("@type"in g[i]){var j=g[i]["@type"];na(j)||(j=[j]);for(var k=0;k<j.length;++k)j[k]in c.of_type||(c.of_type[j[k]]=[]),c.of_type[j[k]].push(g[i])}e(null,c)})})},b.normalize=function(a,c,d){if(arguments.length<1)return b.nextTick(function(){d(new TypeError("Could not normalize, too few arguments."))});"function"==typeof c&&(d=c,c={}),c=c||{},"base"in c||(c.base="string"==typeof a?a:""),"documentLoader"in c||(c.documentLoader=b.loadDocument);var e=Ba(c);delete e.format,e.produceGeneralizedRdf=!1,b.toRDF(a,e,function(a,b){if(a)return d(new E("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:a}));(new F).normalize(b,c,d)})},b.fromRDF=function(a,c,d){if(arguments.length<1)return b.nextTick(function(){d(new TypeError("Could not convert from RDF, too few arguments."))});"function"==typeof c&&(d=c,c={}),c=c||{},"useRdfType"in c||(c.useRdfType=!1),"useNativeTypes"in c||(c.useNativeTypes=!1),"format"in c||!pa(a)||"format"in c||(c.format="application/nquads"),b.nextTick(function(){function f(a,b,c){(new F).fromRDF(a,b,c)}var b;if(c.format){if(!(b=c.rdfParser||l[c.format]))return d(new E("Unknown input format.","jsonld.UnknownFormat",{format:c.format}))}else b=function(){return a};var e=!1;try{a=b(a,function(a,b){if(e=!0,a)return d(a);f(b,c,d)})}catch(a){if(!e)return d(a);throw a}if(a){if("then"in a)return a.then(function(a){f(a,c,d)},d);f(a,c,d)}})},b.toRDF=function(a,c,d){if(arguments.length<1)return b.nextTick(function(){d(new TypeError("Could not convert to RDF, too few arguments."))});"function"==typeof c&&(d=c,c={}),c=c||{},"base"in c||(c.base="string"==typeof a?a:""),"documentLoader"in c||(c.documentLoader=b.loadDocument),b.expand(a,c,function(a,b){if(a)return d(new E("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:a}));var e;try{if(e=F.prototype.toRDF(b,c),c.format){if("application/nquads"===c.format)return d(null,Fa(e));throw new E("Unknown output format.","jsonld.UnknownFormat",{format:c.format})}}catch(a){return d(a)}d(null,e)})},b.createNodeMap=function(a,c,d){if(arguments.length<1)return b.nextTick(function(){d(new TypeError("Could not create node map, too few arguments."))});"function"==typeof c&&(d=c,c={}),c=c||{},"base"in c||(c.base="string"==typeof a?a:""),"documentLoader"in c||(c.documentLoader=b.loadDocument),b.expand(a,c,function(a,b){if(a)return d(new E("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:a}));var e;try{e=(new F).createNodeMap(b,c)}catch(a){return d(a)}d(null,e)})},b.merge=function(a,c,d,e){function l(a,b){if(!g){if(a)return g=a,e(new E("Could not expand input before flattening.","jsonld.FlattenError",{cause:a}));f.push(b),0==--h&&m(f)}}function m(a){var f=!0;"mergeNodes"in d&&(f=d.mergeNodes);var i,g=d.namer||new Ia("_:b"),h={"@default":{}};try{for(var j=0;j<a.length;++j){var k=a[j];k=b.relabelBlankNodes(k,{namer:new Ia("_:b"+j+"-")});var l=f||0===j?h:{"@default":{}};if(R(k,l,"@default",g),l!==h)for(var m in l){var n=l[m];if(m in h){var o=h[m];for(var p in n)p in o||(o[p]=n[p])}else h[m]=n}}i=S(h)}catch(a){return e(a)}for(var q=[],r=Object.keys(i).sort(),s=0;s<r.length;++s){var t=i[r[s]];wa(t)||q.push(t)}if(null===c)return e(null,q);d.graph=!0,d.skipExpansion=!0,b.compact(q,c,d,function(a,b){if(a)return e(new E("Could not compact merged output.","jsonld.MergeError",{cause:a}));e(null,b)})}if(arguments.length<1)return b.nextTick(function(){e(new TypeError("Could not merge, too few arguments."))});if(!na(a))return b.nextTick(function(){e(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof d?(e=d,d={}):"function"==typeof c&&(e=c,c=null,d={}),d=d||{};for(var f=[],g=null,h=a.length,i=0;i<a.length;++i){var j={};for(var k in d)j[k]=d[k];b.expand(a[i],j,l)}},b.relabelBlankNodes=function(a,b){return b=b||{},H(b.namer||new Ia("_:b"),a)},b.prependBase=function(a,b){return ha(a,b)},b.documentLoader=function(a,c){var d=new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return f?c(d,{contextUrl:null,documentUrl:a,document:null}):b.promisify(function(a){a(d)})},b.loadDocument=function(a,c){var d=b.documentLoader(a,c);d&&"then"in d&&d.then(c.bind(null,null),c)},b.promises=function(c){c=c||{};var e=Array.prototype.slice,f=b.promisify,g=c.api||{},h=c.version||"jsonld.js";"string"==typeof c.api&&(c.version||(h=c.api),g={}),g.expand=function(a){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return f.apply(null,[b.expand].concat(e.call(arguments)))},g.compact=function(a,c){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var d=function(a,c,d,e){b.compact(a,c,d,function(a,b){e(a,b)})};return f.apply(null,[d].concat(e.call(arguments)))},g.flatten=function(a){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return f.apply(null,[b.flatten].concat(e.call(arguments)))},g.frame=function(a,c){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return f.apply(null,[b.frame].concat(e.call(arguments)))},g.fromRDF=function(a){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return f.apply(null,[b.fromRDF].concat(e.call(arguments)))},g.toRDF=function(a){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return f.apply(null,[b.toRDF].concat(e.call(arguments)))},g.normalize=function(a){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return f.apply(null,[b.normalize].concat(e.call(arguments)))},"jsonld.js"===h&&(g.link=function(a,c){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return f.apply(null,[b.link].concat(e.call(arguments)))},g.objectify=function(a){return f.apply(null,[b.objectify].concat(e.call(arguments)))},g.createNodeMap=function(a){return f.apply(null,[b.createNodeMap].concat(e.call(arguments)))},g.merge=function(a){return f.apply(null,[b.merge].concat(e.call(arguments)))});try{b.Promise=d.Promise||a("es6-promise").Promise}catch(a){var i=function(){throw new Error("Unable to find a Promise implementation.")};for(var j in g)g[j]=i}return g},b.promisify=function(c){if(!b.Promise)try{b.Promise=d.Promise||a("es6-promise").Promise}catch(a){throw new Error("Unable to find a Promise implementation.")}var e=Array.prototype.slice.call(arguments,1);return new b.Promise(function(a,b){c.apply(null,e.concat(function(c,d){c?b(c):a(d)}))})},b.promises({api:b.promises}),h.prototype=b.promises({version:"json-ld-1.0"}),h.prototype.toString=function(){return this instanceof h?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},b.JsonLdProcessor=h;var i=!!Object.defineProperty;if(i)try{Object.defineProperty({},"x",{})}catch(a){i=!1}i&&(Object.defineProperty(h,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(h.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:h})),g&&void 0===d.JsonLdProcessor&&(i?Object.defineProperty(d,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:h}):d.JsonLdProcessor=h);var j="function"==typeof setImmediate&&setImmediate,k=j?function(a){j(a)}:function(a){setTimeout(a,0)};"object"==typeof c&&"function"==typeof c.nextTick?b.nextTick=c.nextTick:b.nextTick=k,b.setImmediate=j?k:b.nextTick,b.parseLinkHeader=function(a){for(var b={},c=a.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),d=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,e=0;e<c.length;++e){var f=c[e].match(d);if(f){for(var g={target:f[1]},h=f[2],i=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;f=i.exec(h);)g[f[1]]=void 0===f[2]?f[3]:f[2];var j=g.rel||"";na(b[j])?b[j].push(g):b[j]=j in b?[b[j],g]:g}}return b},b.RequestQueue=function(){this._requests={}},b.RequestQueue.prototype.wrapLoader=function(a){return this._loader=a,this._usePromise=1===a.length,this.add.bind(this)},b.RequestQueue.prototype.add=function(a,c){var d=this;if(!c&&!d._usePromise)throw new Error("callback must be specified.");if(d._usePromise)return new b.Promise(function(b,c){var e=d._requests[a];e||(e=d._requests[a]=d._loader(a).then(function(b){return delete d._requests[a],b}).catch(function(b){throw delete d._requests[a],b})),e.then(function(a){b(a)}).catch(function(a){c(a)})});a in d._requests?d._requests[a].push(c):(d._requests[a]=[c],d._loader(a,function(b,c){var e=d._requests[a];delete d._requests[a];for(var f=0;f<e.length;++f)e[f](b,c)}))},b.DocumentCache=function(a){this.order=[],this.cache={},this.size=a||50,this.expires=3e4},b.DocumentCache.prototype.get=function(a){if(a in this.cache){var b=this.cache[a];if(b.expires>=+new Date)return b.ctx;delete this.cache[a],this.order.splice(this.order.indexOf(a),1)}return null},b.DocumentCache.prototype.set=function(a,b){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(a),this.cache[a]={ctx:b,expires:+new Date+this.expires}},b.ActiveContextCache=function(a){this.order=[],this.cache={},this.size=a||100},b.ActiveContextCache.prototype.get=function(a,b){var c=JSON.stringify(a),d=JSON.stringify(b),e=this.cache[c];return e&&d in e?e[d]:null},b.ActiveContextCache.prototype.set=function(a,b,c){if(this.order.length===this.size){var d=this.order.shift();delete this.cache[d.activeCtx][d.localCtx]}var e=JSON.stringify(a),f=JSON.stringify(b);this.order.push({activeCtx:e,localCtx:f}),e in this.cache||(this.cache[e]={}),this.cache[e][f]=Ba(c)},b.cache={activeCtx:new b.ActiveContextCache},b.documentLoaders={},b.documentLoaders.jquery=function(a,c){function f(d,e){return 0!==d.indexOf("http:")&&0!==d.indexOf("https:")?e(new E('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null}):c.secure&&0!==d.indexOf("https")?e(new E('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null}):void a.ajax({url:d,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(a,c,f){var g={contextUrl:null,documentUrl:d,document:a},h=f.getResponseHeader("Content-Type"),i=f.getResponseHeader("Link");if(i&&"application/ld+json"!==h){if(i=b.parseLinkHeader(i)[C],na(i))return e(new E("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:d}),g);i&&(g.contextUrl=i.target)}e(null,g)},error:function(a,b,c){e(new E("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:d,cause:c}),{contextUrl:null,documentUrl:d,document:null})}})}c=c||{};var d=new b.RequestQueue;return("usePromise"in c?c.usePromise:"undefined"!=typeof Promise)?d.wrapLoader(function(a){return b.promisify(f,a)}):d.wrapLoader(f)},b.documentLoaders.node=function(c){function j(a,i,k){function m(c,d,f){if(l={contextUrl:null,documentUrl:a,document:f||null},c)return k(new E("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:a,cause:c}),l);var m=g.STATUS_CODES[d.statusCode];if(d.statusCode>=400)return k(new E("URL could not be dereferenced: "+m,"jsonld.InvalidUrl",{code:"loading document failed",url:a,httpStatusCode:d.statusCode}),l);if(d.headers.link&&"application/ld+json"!==d.headers["content-type"]){var n=b.parseLinkHeader(d.headers.link)[C];if(na(n))return k(new E("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:a}),l);n&&(l.contextUrl=n.target)}if(d.statusCode>=300&&d.statusCode<400&&d.headers.location)return i.length===e?k(new E("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:a,httpStatusCode:d.statusCode,redirects:i}),l):-1!==i.indexOf(a)?k(new E("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:a,httpStatusCode:d.statusCode,redirects:i}),l):(i.push(a),j(d.headers.location,i,k));i.push(a);for(var o=0;o<i.length;++o)h.set(i[o],{contextUrl:null,documentUrl:i[o],document:f});k(c,l)}if(0!==a.indexOf("http:")&&0!==a.indexOf("https:"))return k(new E('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:a}),{contextUrl:null,documentUrl:a,document:null});if(c.secure&&0!==a.indexOf("https"))return k(new E('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:a}),{contextUrl:null,documentUrl:a,document:null});var l=h.get(a);if(null!==l)return k(null,l);f({url:a,headers:{Accept:"application/ld+json, application/json"},strictSSL:d,followRedirect:!1},m)}c=c||{};var d=!("strictSSL"in c)||c.strictSSL,e="maxRedirects"in c?c.maxRedirects:-1,f=a("request"),g=a("http"),h=new b.DocumentCache,i=new b.RequestQueue;return c.usePromise?i.wrapLoader(function(a){return b.promisify(j,a,[])}):i.wrapLoader(function(a,b){j(a,[],b)})},b.documentLoaders.xhr=function(a){function f(d,e){if(0!==d.indexOf("http:")&&0!==d.indexOf("https:"))return e(new E('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null});if(a.secure&&0!==d.indexOf("https"))return e(new E('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null});var f=a.xhr||XMLHttpRequest,g=new f;g.onload=function(){if(g.status>=400)return e(new E("URL could not be dereferenced: "+g.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:d,httpStatusCode:g.status}),{contextUrl:null,documentUrl:d,document:null});var h,a={contextUrl:null,documentUrl:d,document:g.response},f=g.getResponseHeader("Content-Type");if(c.test(g.getAllResponseHeaders())&&(h=g.getResponseHeader("Link")),h&&"application/ld+json"!==f){if(h=b.parseLinkHeader(h)[C],na(h))return e(new E("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:d}),a);h&&(a.contextUrl=h.target)}e(null,a)},g.onerror=function(){e(new E("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null})},g.open("GET",d,!0),g.setRequestHeader("Accept","application/ld+json, application/json"),g.send()}a=a||{};var c=/(^|(\r\n))link:/i,d=new b.RequestQueue;return("usePromise"in a?a.usePromise:"undefined"!=typeof Promise)?d.wrapLoader(function(a){return b.promisify(f,a)}):d.wrapLoader(f)},b.useDocumentLoader=function(a){if(!(a in b.documentLoaders))throw new E('Unknown document loader type: "'+a+'"',"jsonld.UnknownDocumentLoader",{type:a});b.documentLoader=b.documentLoaders[a].apply(b,Array.prototype.slice.call(arguments,1))},b.processContext=function(a,c){var d={},e=2;arguments.length>3&&(d=arguments[2]||{},e+=1);var f=arguments[e];if("base"in d||(d.base=""),"documentLoader"in d||(d.documentLoader=b.loadDocument),null===c)return f(null,ja(d));c=Ba(c),la(c)&&"@context"in c||(c={"@context":c}),Da(c,d,function(b,c){if(b)return f(b);try{c=(new F).processContext(a,c,d)}catch(a){return f(a)}f(null,c)})},b.hasProperty=function(a,b){var c=!1;if(b in a){var d=a[b];c=!na(d)||d.length>0}return c},b.hasValue=function(a,c,d){var e=!1;if(b.hasProperty(a,c)){var f=a[c],g=ya(f);if(na(f)||g){g&&(f=f["@list"]);for(var h=0;h<f.length;++h)if(b.compareValues(d,f[h])){e=!0;break}}else na(d)||(e=b.compareValues(d,f))}return e},b.addValue=function(a,c,d,e){if(e=e||{},"propertyIsArray"in e||(e.propertyIsArray=!1),"allowDuplicate"in e||(e.allowDuplicate=!0),na(d)){0!==d.length||!e.propertyIsArray||c in a||(a[c]=[]);for(var f=0;f<d.length;++f)b.addValue(a,c,d[f],e)}else if(c in a){var g=!e.allowDuplicate&&b.hasValue(a,c,d);na(a[c])||g&&!e.propertyIsArray||(a[c]=[a[c]]),g||a[c].push(d)}else a[c]=e.propertyIsArray?[d]:d},b.getValues=function(a,b){var c=a[b]||[];return na(c)||(c=[c]),c},b.removeProperty=function(a,b){delete a[b]},b.removeValue=function(a,c,d,e){"propertyIsArray"in(e=e||{})||(e.propertyIsArray=!1);var f=b.getValues(a,c).filter(function(a){return!b.compareValues(a,d)});0===f.length?b.removeProperty(a,c):1!==f.length||e.propertyIsArray?a[c]=f:a[c]=f[0]},b.compareValues=function(a,b){return a===b||(!(!xa(a)||!xa(b)||a["@value"]!==b["@value"]||a["@type"]!==b["@type"]||a["@language"]!==b["@language"]||a["@index"]!==b["@index"])||!!(la(a)&&"@id"in a&&la(b)&&"@id"in b)&&a["@id"]===b["@id"])},b.getContextValue=function(a,b,c){var d=null;if(null===b)return d;if("@language"===c&&c in a&&(d=a[c]),a.mappings[b]){var e=a.mappings[b];ua(c)?d=e:c in e&&(d=e[c])}return d};var l={};if(b.registerRDFParser=function(a,b){l[a]=b},b.unregisterRDFParser=function(a){delete l[a]},f){if(void 0===m)var m=null;if(void 0===n)var n={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var o="http://www.w3.org/2001/XMLSchema#boolean",p="http://www.w3.org/2001/XMLSchema#double",q="http://www.w3.org/2001/XMLSchema#integer",r="http://www.w3.org/2001/XMLSchema#string",s="http://www.w3.org/1999/02/22-rdf-syntax-ns#",t=s+"List",u=s+"first",v=s+"rest",w=s+"nil",x=s+"type",y=s+"PlainLiteral",z=s+"XMLLiteral",A=s+"object",B=s+"langString",C="http://www.w3.org/ns/json-ld#context",D=10,E=function(a,b,c){f?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=b||"jsonld.Error",this.message=a||"An unspecified JSON-LD error occurred.",this.details=c||{}};f?a("util").inherits(E,Error):"undefined"!=typeof Error&&(E.prototype=new Error);var F=function(){};F.prototype.compact=function(a,c,d,e){if(na(d)){for(var f=[],g=0;g<d.length;++g){var h=this.compact(a,c,d[g],e);null!==h&&f.push(h)}if(e.compactArrays&&1===f.length){var i=b.getContextValue(a,c,"@container");null===i&&(f=f[0])}return f}if(la(d)){if(e.link&&"@id"in d&&d["@id"]in e.link)for(var j=e.link[d["@id"]],g=0;g<j.length;++g)if(j[g].expanded===d)return j[g].compacted;if(xa(d)||wa(d)){var f=ea(a,c,d);return e.link&&wa(d)&&(d["@id"]in e.link||(e.link[d["@id"]]=[]),e.link[d["@id"]].push({expanded:d,compacted:f})),f}var k="@reverse"===c,f={};e.link&&"@id"in d&&(d["@id"]in e.link||(e.link[d["@id"]]=[]),e.link[d["@id"]].push({expanded:d,compacted:f}));for(var l=Object.keys(d).sort(),m=0;m<l.length;++m){var n=l[m],o=d[n];if("@id"!==n&&"@type"!==n)if("@reverse"!==n)if("@index"!==n)if("@graph"!==n&&"@list"!==n&&ka(n)){var r=da(a,n);b.addValue(f,r,o)}else{if(0===o.length){var w=da(a,n,o,{vocab:!0},k);b.addValue(f,w,o,{propertyIsArray:!0})}for(var q=0;q<o.length;++q){var x=o[q],w=da(a,n,x,{vocab:!0},k),i=b.getContextValue(a,w,"@container"),y=ya(x),z=null;y&&(z=x["@list"]);var A=this.compact(a,w,y?z:x,e);if(y)if(na(A)||(A=[A]),"@list"!==i){var B={};B[da(a,"@list")]=A,A=B,"@index"in x&&(A[da(a,"@index")]=x["@index"])}else if(w in f)throw new E('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===i||"@index"===i){var C;w in f?C=f[w]:f[w]=C={},"@language"===i&&xa(A)&&(A=A["@value"]),b.addValue(C,x[i],A)}else{var s=!e.compactArrays||"@set"===i||"@list"===i||na(A)&&0===A.length||"@list"===n||"@graph"===n;b.addValue(f,w,A,{propertyIsArray:s})}}}else{var i=b.getContextValue(a,c,"@container");if("@index"===i)continue;var r=da(a,n);b.addValue(f,r,o)}else{var p=this.compact(a,"@reverse",o,e);for(var t in p)if(a.mappings[t]&&a.mappings[t].reverse){var u=p[t],i=b.getContextValue(a,t,"@container"),v="@set"===i||!e.compactArrays;b.addValue(f,t,u,{propertyIsArray:v}),delete p[t]}if(Object.keys(p).length>0){var r=da(a,n);b.addValue(f,r,p)}}else{var p;if(pa(o))p=da(a,o,null,{vocab:"@type"===n});else{p=[];for(var q=0;q<o.length;++q)p.push(da(a,o[q],null,{vocab:!0}))}var r=da(a,n),s=na(p)&&0===o.length;b.addValue(f,r,p,{propertyIsArray:s})}}return f}return d},F.prototype.expand=function(a,c,d,e,f){var g=this;if(null===d||void 0===d)return null;if(!na(d)&&!la(d))return f||null!==c&&"@graph"!==ga(a,c,{vocab:!0})?I(a,c,d):null;if(na(d)){var h=[],i=b.getContextValue(a,c,"@container");f=f||"@list"===i;for(var j=0;j<d.length;++j){var k=g.expand(a,c,d[j],e);if(f&&(na(k)||ya(k)))throw new E("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==k&&(na(k)?h=h.concat(k):h.push(k))}return h}"@context"in d&&(a=g.processContext(a,d["@context"],e));for(var l=ga(a,c,{vocab:!0}),h={},m=Object.keys(d).sort(),n=0;n<m.length;++n){var q,o=m[n],p=d[o];if("@context"!==o){var r=ga(a,o,{vocab:!0});if(null!==r&&(Aa(r)||ka(r))){if(ka(r)){if("@reverse"===l)throw new E("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:p});if(r in h)throw new E("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:r})}if("@id"===r&&!pa(p)){if(!e.isFrame)throw new E('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:p});if(!la(p))throw new E('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:p})}if("@type"===r&&oa(p),"@graph"===r&&!la(p)&&!na(p))throw new E('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:p});if("@value"===r&&(la(p)||na(p)))throw new E('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:p});if("@language"===r){if(null===p)continue;if(!pa(p))throw new E('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:p});p=p.toLowerCase()}if("@index"===r&&!pa(p))throw new E('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:p});if("@reverse"!==r){var i=b.getContextValue(a,o,"@container");if("@language"===i&&la(p))q=G(p);else if("@index"===i&&la(p))q=function(c){for(var d=[],f=Object.keys(p).sort(),h=0;h<f.length;++h){var i=f[h],j=p[i];na(j)||(j=[j]),j=g.expand(a,c,j,e,!1);for(var k=0;k<j.length;++k){var l=j[k];"@index"in l||(l["@index"]=i),d.push(l)}}return d}(o);else{var x="@list"===r;if(x||"@set"===r){var y=c;if(x&&"@graph"===l&&(y=null),q=g.expand(a,y,p,e,x),x&&ya(q))throw new E("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else q=g.expand(a,o,p,e,!1)}if(null!==q||"@value"===r)if("@list"===r||ya(q)||"@list"!==i||(q=na(q)?q:[q],q={"@list":q}),a.mappings[o]&&a.mappings[o].reverse){var t=h["@reverse"]=h["@reverse"]||{};na(q)||(q=[q]);for(var v=0;v<q.length;++v){var w=q[v];if(xa(w)||ya(w))throw new E('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});b.addValue(t,r,w,{propertyIsArray:!0})}}else{var z=-1===["@index","@id","@type","@value","@language"].indexOf(r);b.addValue(h,r,q,{propertyIsArray:z})}}else{if(!la(p))throw new E('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:p});if("@reverse"in(q=g.expand(a,"@reverse",p,e)))for(var s in q["@reverse"])b.addValue(h,s,q["@reverse"][s],{propertyIsArray:!0});var t=h["@reverse"]||null;for(var s in q)if("@reverse"!==s){null===t&&(t=h["@reverse"]={}),b.addValue(t,s,[],{propertyIsArray:!0});for(var u=q[s],v=0;v<u.length;++v){var w=u[v];if(xa(w)||ya(w))throw new E('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});b.addValue(t,s,w,{propertyIsArray:!0})}}}}}}m=Object.keys(h);var A=m.length;if("@value"in h){if("@type"in h&&"@language"in h)throw new E('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});var B=A-1;if("@type"in h&&(B-=1),"@index"in h&&(B-=1),"@language"in h&&(B-=1),0!==B)throw new E('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:h});if(null===h["@value"])h=null;else{if("@language"in h&&!pa(h["@value"]))throw new E("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:h});if("@type"in h&&(!Aa(h["@type"])||0===h["@type"].indexOf("_:")))throw new E('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:h})}}else if("@type"in h&&!na(h["@type"]))h["@type"]=[h["@type"]];else if("@set"in h||"@list"in h){if(A>1&&!(2===A&&"@index"in h))throw new E('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:h});"@set"in h&&(h=h["@set"],m=Object.keys(h),A=m.length)}else 1===A&&"@language"in h&&(h=null);return!la(h)||e.keepFreeFloatingNodes||f||null!==c&&"@graph"!==l||(0===A||"@value"in h||"@list"in h||1===A&&"@id"in h)&&(h=null),h},F.prototype.createNodeMap=function(a,b){b=b||{};var c=b.namer||new Ia("_:b"),d={"@default":{}};return R(a,d,"@default",c),S(d)},F.prototype.flatten=function(a){for(var b=this.createNodeMap(a),c=[],d=Object.keys(b).sort(),e=0;e<d.length;++e){var f=b[d[e]];wa(f)||c.push(f)}return c},F.prototype.frame=function(a,b,c){var d={options:c,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},e=new Ia("_:b");R(a,d.graphs,"@merged",e),d.subjects=d.graphs["@merged"];var f=[];return T(d,Object.keys(d.subjects).sort(),b,f,null),f},F.prototype.normalize=function(a,c,d){function p(a){function g(h){if(h===a.length)return q(e,d,c);var i=a[h],j=O(i,f);j in d?(d[j].push(i),c.push(i)):j in e?(d[j]=[e[j],i],c.push(e[j]),c.push(i),delete e[j]):e[j]=i,b.setImmediate(function(){g(h+1)})}var c=[],d={},e={};b.setImmediate(function(){g(0)})}function q(a,b,c){for(var d=!1,e=Object.keys(a).sort(),f=0;f<e.length;++f){var g=a[e[f]];o.getName(g),d=!0}d?p(c):r(b)}function r(a){function c(e){function i(a,b){if(b===a.length){h.sort(function(a,b){return a=a.hash,b=b.hash,a<b?-1:a>b?1:0});for(var g=0;g<h.length;++g)for(var j in h[g].pathNamer.existing)o.getName(j);return c(e+1)}var k=a[b];if(o.isNamed(k))return i(a,b+1);var l=new Ia("_:b");l.getName(k),P(k,f,o,l,function(c,e){if(c)return d(c);h.push(e),i(a,b+1)})}if(e===b.length)return s();var g=a[b[e]],h=[];i(g,0)}var b=Object.keys(a).sort();c(0)}function s(){for(var a=[],b=0;b<e.length;++b){for(var f=e[b],g=["subject","object","name"],h=0;h<g.length;++h){var i=g[h];f[i]&&"blank node"===f[i].type&&0!==f[i].value.indexOf("_:c14n")&&(f[i].value=o.getName(f[i].value))}a.push(Ga(f,f.name?f.name.value:null))}if(a.sort(),c.format)return"application/nquads"===c.format?d(null,a.join("")):d(new E("Unknown output format.","jsonld.UnknownFormat",{format:c.format}));d(null,Ea(a.join("")))}var e=[],f={};for(var g in a){var h=a[g];"@default"===g&&(g=null);for(var i=0;i<h.length;++i){var j=h[i];null!==g&&(0===g.indexOf("_:")?j.name={type:"blank node",value:g}:j.name={type:"IRI",value:g}),e.push(j);for(var k=["subject","object","name"],l=0;l<k.length;++l){var m=k[l];if(j[m]&&"blank node"===j[m].type){var n=j[m].value;n in f?f[n].quads.push(j):f[n]={quads:[j]}}}}}var o=new Ia("_:c14n");return p(Object.keys(f))},F.prototype.fromRDF=function(a,c,d){var e={},f={"@default":e},g={};for(var h in a){var i=a[h];h in f||(f[h]={}),"@default"===h||h in e||(e[h]={"@id":h});for(var j=f[h],k=0;k<i.length;++k){var l=i[k],m=l.subject.value,n=l.predicate.value,o=l.object;m in j||(j[m]={"@id":m});var p=j[m],q="IRI"===o.type||"blank node"===o.type;if(!q||o.value in j||(j[o.value]={"@id":o.value}),n!==x||c.useRdfType||!q){var r=M(o,c.useNativeTypes);if(b.addValue(p,n,r,{propertyIsArray:!0}),q)if(o.value===w){var s=j[o.value];"usages"in s||(s.usages=[]),s.usages.push({node:p,property:n,value:r})}else o.value in g?g[o.value]=!1:g[o.value]={node:p,property:n,value:r}}else b.addValue(p,"@type",o.value,{propertyIsArray:!0})}}for(var h in f){var y=f[h];if(w in y){for(var z=y[w],A=0;A<z.usages.length;++A){for(var B=z.usages[A],p=B.node,C=B.property,D=B.value,E=[],F=[],G=Object.keys(p).length;C===v&&la(g[p["@id"]])&&na(p[u])&&1===p[u].length&&na(p[v])&&1===p[v].length&&(3===G||4===G&&na(p["@type"])&&1===p["@type"].length&&p["@type"][0]===t)&&(E.push(p[u][0]),F.push(p["@id"]),B=g[p["@id"]],p=B.node,C=B.property,D=B.value,G=Object.keys(p).length,0===p["@id"].indexOf("_:")););if(C===u){if(p["@id"]===w)continue;D=y[D["@id"]][v][0],E.pop(),F.pop()}delete D["@id"],D["@list"]=E.reverse();for(var H=0;H<F.length;++H)delete y[F[H]]}delete z.usages}}for(var I=[],J=Object.keys(e).sort(),A=0;A<J.length;++A){var K=J[A],p=e[K];if(K in f)for(var i=p["@graph"]=[],y=f[K],L=Object.keys(y).sort(),N=0;N<L.length;++N){var O=y[L[N]];wa(O)||i.push(O)}wa(p)||I.push(p)}d(null,I)},F.prototype.toRDF=function(a,b){var c=new Ia("_:b"),d={"@default":{}};R(a,d,"@default",c);for(var e={},f=Object.keys(d).sort(),g=0;g<f.length;++g){var h=f[g];("@default"===h||Aa(h))&&(e[h]=J(d[h],c,b))}return e},F.prototype.processContext=function(a,c,d){la(c)&&"@context"in c&&na(c["@context"])&&(c=c["@context"]);var e=na(c)?c:[c];if(0===e.length)return a.clone();for(var f=a,g=0;g<e.length;++g){var h=e[g];if(null!==h){if(la(h)&&"@context"in h&&(h=h["@context"]),!la(h))throw new E("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:h});if(b.cache.activeCtx){var i=b.cache.activeCtx.get(a,h);if(i){f=a=i;continue}}a=f,f=f.clone();var j={};if("@base"in h){var k=h["@base"];if(null===k)k=null;else{if(!pa(k))throw new E('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h});if(""!==k&&!Aa(k))throw new E('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h})}null!==k&&(k=b.url.parse(k||"")),f["@base"]=k,j["@base"]=!0}if("@vocab"in h){var l=h["@vocab"];if(null===l)delete f["@vocab"];else{if(!pa(l))throw new E('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});if(!Aa(l))throw new E('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});f["@vocab"]=l}j["@vocab"]=!0}if("@language"in h){var l=h["@language"];if(null===l)delete f["@language"];else{if(!pa(l))throw new E('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:h});f["@language"]=l.toLowerCase()}j["@language"]=!0}for(var m in h)fa(f,h,m,j);b.cache.activeCtx&&b.cache.activeCtx.set(a,h,f)}else f=a=ja(d)}return f},Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on non-object");var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}),b.registerRDFParser("application/nquads",Ea),b.registerRDFParser("rdfa-api",Ha),b.UniqueNamer=Ia,Ia.prototype.clone=function(){var a=new Ia(this.prefix);return a.counter=this.counter,a.existing=Ba(this.existing),a},Ia.prototype.getName=function(a){if(a&&a in this.existing)return this.existing[a];var b=this.prefix+this.counter;return this.counter+=1,a&&(this.existing[a]=b),b},Ia.prototype.isNamed=function(a){return a in this.existing};var Ja=function(a){this.list=a.sort(),this.done=!1,this.left={};for(var b=0;b<a.length;++b)this.left[a[b]]=!0};Ja.prototype.hasNext=function(){return!this.done},Ja.prototype.next=function(){for(var a=this.list.slice(),b=null,c=0,d=this.list.length,e=0;e<d;++e){var f=this.list[e],g=this.left[f];(null===b||f>b)&&(g&&e>0&&f>this.list[e-1]||!g&&e<d-1&&f>this.list[e+1])&&(b=f,c=e)}if(null===b)this.done=!0;else{var h=this.left[b]?c-1:c+1;this.list[c]=this.list[h],this.list[h]=b;for(var e=0;e<d;++e)this.list[e]>b&&(this.left[this.list[e]]=!this.left[this.list[e]])}return a};var Ka=b.sha1={};if(f){var La=a("crypto");Ka.create=function(){var a=La.createHash("sha1");return{update:function(b){a.update(b,"utf8")},digest:function(){return a.digest("hex")}}}}else Ka.create=function(){return new Ka.MessageDigest};if(Ka.hash=function(a){for(var b=Ka.create(),c=0;c<a.length;++c)b.update(a[c]);return b.digest()},!f){Ka.Buffer=function(){this.data="",this.read=0},Ka.Buffer.prototype.putInt32=function(a){this.data+=String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a)},Ka.Buffer.prototype.getInt32=function(){var a=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,a},Ka.Buffer.prototype.bytes=function(){return this.data.slice(this.read)},Ka.Buffer.prototype.length=function(){return this.data.length-this.read},Ka.Buffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},Ka.Buffer.prototype.toHex=function(){for(var a="",b=this.read;b<this.data.length;++b){var c=this.data.charCodeAt(b);c<16&&(a+="0"),a+=c.toString(16)}return a},Ka.MessageDigest=function(){Ma.initialized||Ma.init(),this.blockLength=64,this.digestLength=20,this.messageLength=0,this.input=new Ka.Buffer,this.words=new Array(80),this.state={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520}},Ka.MessageDigest.prototype.update=function(a){a=unescape(encodeURIComponent(a)),this.messageLength+=a.length,this.input.data+=a,Ma.update(this.state,this.words,this.input),(this.input.read>2048||0===this.input.length())&&this.input.compact()},Ka.MessageDigest.prototype.digest=function(){var a=this.messageLength,b=new Ka.Buffer;b.data+=this.input.bytes(),b.data+=Ma.padding.substr(0,64-(a+8)%64),b.putInt32(a>>>29&255),b.putInt32(a<<3&4294967295),Ma.update(this.state,this.words,b);var c=new Ka.Buffer;return c.putInt32(this.state.h0),c.putInt32(this.state.h1),c.putInt32(this.state.h2),c.putInt32(this.state.h3),c.putInt32(this.state.h4),c.toHex()};var Ma={padding:null,initialized:!1};Ma.init=function(){Ma.padding=String.fromCharCode(128);for(var a=String.fromCharCode(0),b=64;b>0;)1&b&&(Ma.padding+=a),(b>>>=1)>0&&(a+=a);Ma.initialized=!0},Ma.update=function(a,b,c){for(var d,e,f,g,h,i,j,k,l=c.length();l>=64;){for(e=a.h0,f=a.h1,g=a.h2,h=a.h3,i=a.h4,k=0;k<16;++k)d=c.getInt32(),b[k]=d,j=h^f&(g^h),d=(e<<5|e>>>27)+j+i+1518500249+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;k<20;++k)d=b[k-3]^b[k-8]^b[k-14]^b[k-16],d=d<<1|d>>>31,b[k]=d,j=h^f&(g^h),d=(e<<5|e>>>27)+j+i+1518500249+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;k<32;++k)d=b[k-3]^b[k-8]^b[k-14]^b[k-16],d=d<<1|d>>>31,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+1859775393+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;k<40;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+1859775393+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;k<60;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f&g|h&(f^g),d=(e<<5|e>>>27)+j+i+2400959708+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;k<80;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+3395469782+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;a.h0+=e,a.h1+=f,a.h2+=g,a.h3+=h,a.h4+=i,l-=64}}}if(!m)var Na=function(){m=a("xmldom").XMLSerializer};if(b.url={},b.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},b.url.parse=function(a,c){for(var d={},e=b.url.parsers[c||"full"],f=e.regex.exec(a),g=e.keys.length;g--;)d[e.keys[g]]=void 0===f[g]?null:f[g];return d.normalizedPath=Oa(d.path,!!d.authority),d},f?b.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&b.useDocumentLoader("xhr"),f){b.use=function(c){switch(c){case"request":b.request=a("./request");break;default:throw new E("Unknown extension.","jsonld.UnknownExtension",{extension:c})}};var Pa={exports:{},filename:e};a("pkginfo")(Pa,"version"),b.version=Pa.exports.version}return b},i=function(){return h(function(){return i()})};!f&&"function"==typeof define&&define.amd?define([],function(){return h(i),i}):(h(i),"function"==typeof a&&void 0!==b&&b.exports&&(b.exports=i),g&&("undefined"==typeof jsonld?jsonld=jsonldjs=i:jsonldjs=i))}()}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},"/node_modules\\jsonld\\js")},{"./request":73,_process:15,crypto:73,"es6-promise":76,http:73,pkginfo:86,request:73,util:73,xmldom:73}],75:[function(a,b,c){function e(){}var d=void 0!==b;if(e.attach=function(a,b){function e(){}function g(a){this.target=a,this.target.tripleCount=0,this.target.triplesGraph={},this.target.prefixes={},this.target.terms={},this.language=null,this.vocabulary=null,this.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",this.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",this.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",this.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.contentAttributes=["content"],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/}function h(a){this.query=function(b,c){if(!b)return a.getProjections(c);var d=[];for(var e in a._data_.triplesGraph){var f=a._data_.triplesGraph[e];for(var g in b){var h=a._data_.curieParser.parse(g,!0),i=f.predicates[h];if(!i){f=null;break}for(var k=a._data_.curieParser.parse(b[g],!1),l=null,m=0;!l&&m<i.objects.length;m++)i.objects[m].value==k&&(l=i.objects[m]);if(!l){f=null;break}}f&&d.push(j.toProjection(a,f,c))}return d}}function i(a,b){this._data_={owner:a,subject:b,properties:{}}}function j(a){this._data_={tripleCount:0,triplesGraph:{},prefixes:{},terms:{},baseURI:this.parseURI(a)};var b=this._data_;this._data_.curieParser={trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},parse:function(a,c){a=this.trim(a),"["==a.charAt(0)&&"]"==a.charAt(a.length-1)&&(a=a.substring(1,a.length-1));var d=a.indexOf(":");if(d>=0){var e=a.substring(0,d);if(""==e){var f=b.prefixes[""];return f?f+a.substring(d+1):null}if("_"==e)return"_:"+a.substring(d+1);if(j.NCNAME.test(e)){var f=b.prefixes[e];if(f)return f+a.substring(d+1)}}return c?b.baseURI.resolve(a):a}},Object.defineProperty(this,"rdfa",{value:new h(this),writable:!1,configurable:!1,enumerable:!0})}if(d)var c=a.location.href;e.SCHEME=new RegExp("^[A-Za-z][A-Za-z0-9+-.]*:"),e.prototype.parseURI=function(a){d&&(a=a||c);var b=e.SCHEME.exec(a);if(!b){if(d)throw new Error("Bad URI value, no scheme: "+a);throw"Bad URI value, no scheme: "+a}var f={spec:a};return f.scheme=b[0].substring(0,b[0].length-1),f.schemeSpecificPart=f.spec.substring(b[0].length),"/"==f.schemeSpecificPart.charAt(0)&&"/"==f.schemeSpecificPart.charAt(1)?this.parseGeneric(f):f.isGeneric=!1,f.normalize=function(){if(this.isGeneric&&0!=this.segments.length){if(this.path.length>1&&"/."==this.path.substring(this.path.length-2))return this.path=this.path.substring(0,this.path.length-1),this.segments.splice(this.segments.length-1,1),this.schemeSpecificPart="//"+this.authority+this.path,void 0!==this.query&&(this.schemeSpecificPart+="?"+this.query),void 0!==this.fragment&&(this.schemeSpecificPart+="#"+this.fragment),void(this.spec=this.scheme+":"+this.schemeSpecificPart);var a=this.path.charAt(this.path.length-1);"/"!=a&&(a="");for(var b=0;b<this.segments.length;b++)b>0&&".."==this.segments[b]&&(this.segments.splice(b-1,2),b-=2),"."==this.segments[b]&&(this.segments.splice(b,1),b--);this.path=0==this.segments.length?"/":"/"+this.segments.join("/")+a,this.schemeSpecificPart="//"+this.authority+this.path,void 0!==this.query&&(this.schemeSpecificPart+="?"+this.query),void 0!==this.fragment&&(this.schemeSpecificPart+="#"+this.fragment),this.spec=this.scheme+":"+this.schemeSpecificPart}},f.resolve=function(a){if(!a)return this.spec;if("#"==a.charAt(0)){var b=this.spec.lastIndexOf("#");return b<0?this.spec+a:this.spec.substring(0,b)+a}if(!this.isGeneric)throw"Cannot resolve uri against non-generic URI: "+this.spec;a.indexOf(":");if("/"==a.charAt(0))return this.scheme+"://"+this.authority+a;if("."==a.charAt(0)&&"/"==a.charAt(1)){if("/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a.substring(2);var d=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,d)+a.substring(1)}if(e.SCHEME.test(a))return a;if("?"==a.charAt(0))return this.scheme+"://"+this.authority+this.path+a;if("/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a;var d=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,d+1)+a},f.relativeTo=function(a){if(a.scheme!=this.scheme)return this.spec;if(!this.isGeneric)throw"A non generic URI cannot be made relative: "+this.spec;if(!a.isGeneric)throw"Cannot make a relative URI against a non-generic URI: "+a.spec;if(a.authority!=this.authority)return this.spec;for(var b=0;b<this.segments.length&&b<a.segments.length;b++)if(this.segments[b]!=a.segments[b]){for(var c="",d=b;d<a.segments.length;d++)c+="../";for(var d=b;d<this.segments.length;d++)c+=this.segments[d],d+1<this.segments.length&&(c+="/");return"/"==this.path.charAt(this.path.length-1)&&(c+="/"),c}if(this.segments.length==a.segments.length)return this.hash?this.hash:this.query?this.query:"";if(b<this.segments.length){for(var c="",d=b;d<this.segments.length;d++)c+=this.segments[d],d+1<this.segments.length&&(c+="/");return"/"==this.path.charAt(this.path.length-1)&&(c+="/"),c}throw"Cannot calculate a relative URI for "+this.spec+" against "+a.spec},f},e.prototype.parseGeneric=function(a){if("/"!=a.schemeSpecificPart.charAt(0)||"/"!=a.schemeSpecificPart.charAt(1))throw"Generic URI values should start with '//':"+a.spec;var b=a.schemeSpecificPart.substring(2),c=b.indexOf("/");a.authority=c<0?b:b.substring(0,c),a.path=c<0?"":b.substring(c);var d=a.path.indexOf("#");d>=0&&(a.fragment=a.path.substring(d+1),a.path=a.path.substring(0,d));var e=a.path.indexOf("?");e>=0&&(a.query=a.path.substring(e+1),a.path=a.path.substring(0,e)),"/"==a.path||""==a.path?a.segments=[]:(a.segments=a.path.split(/\//),a.segments.length>0&&""==a.segments[0]&&a.path.length>1&&"/"!=a.path.charAt(1)&&a.segments.shift(),a.segments.length>0&&a.path.length>0&&"/"==a.path.charAt(a.path.length-1)&&""==a.segments[a.segments.length-1]&&a.path.length>1&&"/"!=a.path.charAt(a.path.length-2)&&a.segments.pop()),a.isGeneric=!0},Object.size=function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b},g.prototype=new e,g.prototype.constructor=g,g.prototype.newBlankNode=function(){return"_:"+ ++this.blankCounter},g.nameChar="[-A-Z_a-z-----------0-F.0-9--]",g.nameStartChar="[A-Za-z------------------------------------------------------------------------------------------------------------------------------------------------------_]",g.NCNAME=new RegExp("^"+g.nameStartChar+g.nameChar+"*$"),g.prototype.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},g.prototype.tokenize=function(a){return this.trim(a).split(/\s+/)},g.prototype.parseSafeCURIEOrCURIEOrURI=function(a,b,c){return a=this.trim(a),"["==a.charAt(0)&&"]"==a.charAt(a.length-1)?(a=a.substring(1,a.length-1),a=a.trim(a),0==a.length?null:this.parseCURIE(a,b,c)):this.parseCURIEOrURI(a,b,c)},g.prototype.parseCURIE=function(a,b,c){var d=a.indexOf(":");if(d>=0){var e=a.substring(0,d);if(""==e){var f=b[""];return f?f+a.substring(d+1):null}if("_"==e)return"_:"+a.substring(d+1);if(g.NCNAME.test(e)){var f=b[e];if(f)return f+a.substring(d+1)}}return null},g.prototype.parseCURIEOrURI=function(a,b,c){var d=this.parseCURIE(a,b,c);return d||this.resolveAndNormalize(c,a)},g.prototype.parsePredicate=function(a,b,c,d,e){var f=this.parseTermOrCURIEOrAbsURI(a,b,c,d,e);return f&&0==f.indexOf("_:")?null:f},g.prototype.parseTermOrCURIEOrURI=function(a,b,c,d,e){a=this.trim(a);var f=this.parseCURIE(a,d,e);if(f)return f;var g=c[a];return g||((g=c[a.toLowerCase()])?g:b&&!this.absURIRE.exec(a)?b+a:this.resolveAndNormalize(e,a))},g.prototype.parseTermOrCURIEOrAbsURI=function(a,b,c,d,e){a=this.trim(a);var f=this.parseCURIE(a,d,e);if(f)return f;if(b&&!this.absURIRE.exec(a))return b+a;var g=c[a];return g||((g=c[a.toLowerCase()])?g:this.absURIRE.exec(a)?this.resolveAndNormalize(e,a):null)},g.prototype.resolveAndNormalize=function(a,b){var c=a.resolve(b),d=this.parseURI(c);return d.normalize(),d.spec},g.prototype.parsePrefixMappings=function(a,b){for(var c=this.tokenize(a),d=null,f=0;f<c.length;f++)":"==c[f][c[f].length-1]?d=c[f].substring(0,c[f].length-1):d&&(b[d]=c[f],d=null)},g.prototype.copyMappings=function(a){var b={};for(var c in a)b[c]=a[c];return b},g.prototype.ancestorPath=function(a){for(var b="";a&&a.nodeType!=f.DOCUMENT_NODE;)b="/"+a.localName+b,a=a.parentNode;return b},g.prototype.setContext=function(a){"html"==a.localName&&"XHTML+RDFa 1.1"==a.getAttribute("version")?this.setXHTMLContext():"html"==a.localName||"http://www.w3.org/1999/xhtml"==a.namespaceURI?this.setHTMLContext():this.setXMLContext()},g.prototype.setInitialContext=function(){this.vocabulary=null,this.target.prefixes={},this.target.terms={},this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.contentAttributes=["content"],this.target.prefixes[""]="http://www.w3.org/1999/xhtml/vocab#",this.target.prefixes.grddl="http://www.w3.org/2003/g/data-view#",this.target.prefixes.ma="http://www.w3.org/ns/ma-ont#",this.target.prefixes.owl="http://www.w3.org/2002/07/owl#",this.target.prefixes.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",this.target.prefixes.rdfa="http://www.w3.org/ns/rdfa#",this.target.prefixes.rdfs="http://www.w3.org/2000/01/rdf-schema#",this.target.prefixes.rif="http://www.w3.org/2007/rif#",this.target.prefixes.skos="http://www.w3.org/2004/02/skos/core#",this.target.prefixes.skosxl="http://www.w3.org/2008/05/skos-xl#",this.target.prefixes.wdr="http://www.w3.org/2007/05/powder#",this.target.prefixes.void="http://rdfs.org/ns/void#",this.target.prefixes.wdrs="http://www.w3.org/2007/05/powder-s#",this.target.prefixes.xhv="http://www.w3.org/1999/xhtml/vocab#",this.target.prefixes.xml="http://www.w3.org/XML/1998/namespace",this.target.prefixes.xsd="http://www.w3.org/2001/XMLSchema#",this.target.prefixes.sd="http://www.w3.org/ns/sparql-service-description#",this.target.prefixes.org="http://www.w3.org/ns/org#",this.target.prefixes.gldp="http://www.w3.org/ns/people#",this.target.prefixes.cnt="http://www.w3.org/2008/content#",this.target.prefixes.dcat="http://www.w3.org/ns/dcat#",this.target.prefixes.earl="http://www.w3.org/ns/earl#",this.target.prefixes.ht="http://www.w3.org/2006/http#",this.target.prefixes.ptr="http://www.w3.org/2009/pointers#",this.target.prefixes.cc="http://creativecommons.org/ns#",this.target.prefixes.ctag="http://commontag.org/ns#",this.target.prefixes.dc="http://purl.org/dc/terms/",this.target.prefixes.dcterms="http://purl.org/dc/terms/",this.target.prefixes.foaf="http://xmlns.com/foaf/0.1/",this.target.prefixes.gr="http://purl.org/goodrelations/v1#",this.target.prefixes.ical="http://www.w3.org/2002/12/cal/icaltzd#",this.target.prefixes.og="http://ogp.me/ns#",this.target.prefixes.rev="http://purl.org/stuff/rev#",this.target.prefixes.sioc="http://rdfs.org/sioc/ns#",this.target.prefixes.v="http://rdf.data-vocabulary.org/#",this.target.prefixes.vcard="http://www.w3.org/2006/vcard/ns#",this.target.prefixes.schema="http://schema.org/",this.target.terms.describedby="http://www.w3.org/2007/05/powder-s#describedby",this.target.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.terms.role="http://www.w3.org/1999/xhtml/vocab#role"},g.prototype.setXMLContext=function(){this.setInitialContext(),this.inXHTMLMode=!1},g.prototype.setHTMLContext=function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.contentAttributes=["value","datetime","content"],this.inXHTMLMode=!1},g.prototype.setXHTMLContext=function(){this.setInitialContext(),this.inXHTMLMode=!0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.contentAttributes=["content"],this.target.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"},g.prototype.getTransferGraph=function(){var a={};for(var b in this.target.triplesGraph){var c=this.target.triplesGraph[b],d={subject:b,predicates:{}};a[b]=d;for(var e in c.predicates){var g=c.predicates[e],h={predicate:e,objects:[]};d.predicates[e]=h;for(var i=0;i<g.objects.length;i++){var j=g.objects[i];if(j.type==this.XMLLiteralURI){for(var k=new XMLSerializer,l="",m=0;m<j.value.length;m++)j.value[m].nodeType==f.ELEMENT_NODE?l+=k.serializeToString(j.value[m]):j.value[m].nodeType==f.TEXT_NODE&&(l+=j.value[m].nodeValue);h.objects.push({type:j.type,value:l})}else h.objects.push({type:j.type,value:j.value})}}}return a},g.prototype.newSubject=function(a,b,c){var d=a.triplesGraph[c];d||(d={subject:c,predicates:{},origins:[]},a.triplesGraph[c]=d);for(var e=0;e<d.origins.length;e++)if(d.origins[e]==b)return d;return d.origins.push(b),d},g.prototype.addTriple=function(a,b,c,d,e){var g=(a.triplesGraph,this.newSubject(a,b,c)),h=g.predicates[d];h||(h={predicate:d,objects:[]},g.predicates[d]=h);for(var i=0;i<h.objects.length;i++)if(h.objects[i].type==e.type&&h.objects[i].value==e.value)return;a.tripleCount++,h.objects.push(e),e.origin=b},g.prototype.process=function(a){a.parentNode.nodeType==f.DOCUMENT_NODE&&this.setContext(a);var b=[];for(b.push({current:a,context:this.push(null,a.baseURI)});b.length>0;){var c=b.shift();if(c.parent){if(c.context.parent&&c.context.parent.listMapping==c.listMapping)continue;for(var d in c.listMapping){var e=c.listMapping[d];if(0!=e.length){for(var g=[],h=0;h<e.length;h++)g.push(this.newBlankNode()),this.newSubject(this.target,c.parent,g[h]);for(var h=0;h<g.length;h++)this.addTriple(this.target,c.parent,g[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",e[h]),this.addTriple(this.target,c.parent,g[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:this.objectURI,value:h+1<g.length?g[h+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(this.target,c.parent,c.subject,d,{type:this.objectURI,value:g[0]})}else this.addTriple(this.target,c.parent,c.subject,d,{type:this.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}}else{var i=c.current,j=c.context,k=!1,l=null,m=null,n=null,o=j.prefixes,p=!1,q=[],r=j.listMapping,s=!j.parent,t=j.language,u=j.vocabulary,v=this.parseURI(i.baseURI);i.subject=null;var w=i.getAttributeNode("vocab");if(w){var x=this.trim(w.value);if(x.length>0){u=x;var y=v.spec;this.newSubject(this.target,i,y),this.addTriple(this.target,i,y,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:this.objectURI,value:u})}else u=this.vocabulary}for(var h=0;h<i.attributes.length;h++){var z=i.attributes[h];if("x"==z.nodeName.charAt(0)&&0==z.nodeName.indexOf("xmlns:")){p||(o=this.copyMappings(o),p=!0);o[z.nodeName.substring(6)]=this.trim(z.value)}}var B=i.getAttributeNode("prefix");B&&(p||(o=this.copyMappings(o),p=!0),this.parsePrefixMappings(B.value,o));for(var C=null,h=0;!C&&h<this.langAttributes.length;h++)C=i.getAttributeNodeNS(this.langAttributes[h].namespaceURI,this.langAttributes[h].localName);if(C){var x=this.trim(C.value);x.length>0&&(t=x)}for(var D=i.getAttributeNode("rel"),E=i.getAttributeNode("rev"),F=i.getAttributeNode("typeof"),G=i.getAttributeNode("property"),H=i.getAttributeNode("datatype"),I=null,h=0;!I&&h<this.contentAttributes.length;h++)I=i.getAttributeNode(this.contentAttributes[h]);var J=i.getAttributeNode("about"),K=i.getAttributeNode("src"),L=i.getAttributeNode("resource"),M=i.getAttributeNode("href"),N=i.getAttributeNode("inlist");if(D||E?(J&&(l=this.parseSafeCURIEOrCURIEOrURI(J.value,o,v)),F&&(n=l),l||(i.parentNode.nodeType==f.DOCUMENT_NODE?l=i.baseURI:j.parentObject&&(l=i.parentNode.baseURI==j.parentObject?i.baseURI:j.parentObject)),L&&(m=this.parseSafeCURIEOrCURIEOrURI(L.value,o,v)),m||(M?m=this.resolveAndNormalize(v,M.value):K?m=this.resolveAndNormalize(v,K.value):!F||J||this.inXHTMLMode&&("head"==i.localName||"body"==i.localName)||(m=this.newBlankNode())),!F||J||!this.inXHTMLMode||"head"!=i.localName&&"body"!=i.localName?F&&!J&&(n=m):n=l):!G||I||H?(J&&(l=this.parseSafeCURIEOrCURIEOrURI(J.value,o,v)),!l&&L&&(l=this.parseSafeCURIEOrCURIEOrURI(L.value,o,v)),!l&&M&&(l=this.resolveAndNormalize(v,M.value)),!n&&K&&(l=this.resolveAndNormalize(v,K.value)),l||(i.parentNode.nodeType==f.DOCUMENT_NODE?l=i.baseURI:!this.inXHTMLMode||"head"!=i.localName&&"body"!=i.localName?F?l=this.newBlankNode():j.parentObject&&(l=i.parentNode.baseURI==j.parentObject?i.baseURI:j.parentObject,G||(k=!0)):l=i.parentNode.baseURI==j.parentObject?i.baseURI:j.parentObject),F&&(n=l)):(J&&(l=this.parseSafeCURIEOrCURIEOrURI(J.value,o,v),F&&(n=l)),l||i.parentNode.nodeType!=f.DOCUMENT_NODE?!l&&j.parentObject&&(l=i.parentNode.baseURI==j.parentObject?i.baseURI:j.parentObject):(l=i.baseURI,F&&(n=l)),F&&!n&&(L&&(n=this.parseSafeCURIEOrCURIEOrURI(L.value,o,v)),!n&&M&&(n=this.resolveAndNormalize(v,M.value)),!n&&K&&(n=this.resolveAndNormalize(v,K.value)),n||!this.inXHTMLMode||"head"!=i.localName&&"body"!=i.localName||(n=l),n||(n=this.newBlankNode()),m=n)),l&&(this.newSubject(this.target,i,l),i.subject=l),n)for(var O=this.tokenize(F.value),h=0;h<O.length;h++){var P=this.parseTermOrCURIEOrAbsURI(O[h],u,j.terms,o,v);P&&this.addTriple(this.target,i,n,this.typeURI,{type:this.objectURI,value:P})}if(l&&l!=j.parentObject&&(r={},s=!0),m){if(D&&N)for(var O=this.tokenize(D.value),h=0;h<O.length;h++){var d=this.parsePredicate(O[h],u,j.terms,o,v);if(d){var e=r[d];e||(e=[],r[d]=e),e.push({type:this.objectURI,value:m})}}else if(D)for(var O=this.tokenize(D.value),h=0;h<O.length;h++){var d=this.parsePredicate(O[h],u,j.terms,o,v);d&&this.addTriple(this.target,i,l,d,{type:this.objectURI,value:m})}if(E)for(var O=this.tokenize(E.value),h=0;h<O.length;h++){var d=this.parsePredicate(O[h],u,j.terms,o,v);d&&this.addTriple(this.target,i,m,d,{type:this.objectURI,value:l})}}else{if(l&&!m&&(D||E)&&(m=this.newBlankNode()),D&&N)for(var O=this.tokenize(D.value),h=0;h<O.length;h++){var d=this.parsePredicate(O[h],u,j.terms,o,v);if(d){var e=r[d];e||(e=[],r[d]=e),q.push({predicate:d,list:e})}}else if(D)for(var O=this.tokenize(D.value),h=0;h<O.length;h++){var d=this.parsePredicate(O[h],u,j.terms,o,v);d&&q.push({predicate:d,forward:!0})}if(E)for(var O=this.tokenize(E.value),h=0;h<O.length;h++){var d=this.parsePredicate(O[h],u,j.terms,o,v);d&&q.push({predicate:d,forward:!1})}}if(G){var Q=null,R=null;H?(Q=""==H.value?this.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(H.value,u,j.terms,o,v),R=Q==this.XMLLiteralURI?null:I?I.value:i.textContent):I?(Q=this.PlainLiteralURI,R=I.value):D||E||I||(L&&(R=this.parseSafeCURIEOrCURIEOrURI(L.value,o,v)),!R&&M?R=this.resolveAndNormalize(v,M.value):!R&&K&&(R=this.resolveAndNormalize(v,K.value)),R&&(Q=this.objectURI)),Q||(F&&!J?(Q=this.objectURI,R=n):(Q=this.PlainLiteralURI,R=i.textContent));for(var O=this.tokenize(G.value),h=0;h<O.length;h++){var d=this.parsePredicate(O[h],u,j.terms,o,v);if(d)if(N){var e=r[d];e||(e=[],r[d]=e),e.push(Q==this.XMLLiteralURI?{type:this.XMLLiteralURI,value:i.childNodes}:{type:Q||this.PlainLiteralURI,value:R,language:t})}else Q==this.XMLLiteralURI?this.addTriple(this.target,i,l,d,{type:this.XMLLiteralURI,value:i.childNodes}):this.addTriple(this.target,i,l,d,{type:Q||this.PlainLiteralURI,value:R,language:t})}}if(l&&!k)for(var h=0;h<j.incomplete.length;h++)j.incomplete[h].list?j.incomplete[h].list.push({type:this.objectURI,value:l}):j.incomplete[h].forward?this.addTriple(this.target,i,j.subject,j.incomplete[h].predicate,{type:this.objectURI,value:l}):this.addTriple(this.target,i,l,j.incomplete[h].predicate,{type:this.objectURI,value:j.subject});var S=null,T=l;k?(S=this.push(j,j.subject),S.parentObject=i.parentNode.baseURI==j.parentObject?i.baseURI:j.parentObject,S.incomplete=j.incomplete,S.language=t,S.prefixes=o,S.vocabulary=u):(S=this.push(j,l),S.parentObject=m||(l||j.subject),S.prefixes=o,S.incomplete=q,m&&(T=m,r={},s=!0),S.listMapping=r,S.language=t,S.vocabulary=u),s&&b.unshift({parent:i,context:j,subject:T,listMapping:r});for(var U=i.lastChild;U;U=U.previousSibling)U.nodeType==f.ELEMENT_NODE&&b.unshift({current:U,context:S})}}for(var V in this.target.triplesGraph){var W=this.target.triplesGraph[V];0==Object.size(W.predicates)&&delete this.target.triplesGraph[V]}},g.prototype.push=function(a,b){return{parent:a,subject:b||(a?a.subject:null),parentObject:null,incomplete:[],listMapping:a?a.listMapping:{},language:a?a.language:this.language,prefixes:a?a.prefixes:this.target.prefixes,terms:a?a.terms:this.target.terms,vocabulary:a?a.voabulary:this.vocabulary}},i.prototype.getProperties=function(){var a=[];for(var b in this._data_.properties)a.push(b);return a},i.prototype.getSubject=function(){return this._data_.subject},i.prototype.get=function(a){var b=this._data_.owner._data_.curieParser.parse(a,!0),c=this._data_.properties[b];return c?c[0]:null},i.prototype.getAll=function(a){var b=this._data_.owner._data_.curieParser.parse(a,!0);return this._data_.properties[b]},j.prototype=new e,j.prototype.constructor=j,j.nameChar="[-A-Z_a-z-----------0-F.0-9--]",j.nameStartChar="[A-Za-z------------------------------------------------------------------------------------------------------------------------------------------------------_]",j.NCNAME=new RegExp("^"+g.nameStartChar+g.nameChar+"*$"),j.toProjection=function(a,b,c){var d=new i(a,b.subject);for(var e in b.predicates){var f=b.predicates[e],g=[];d._data_.properties[e]=g;for(var h=0;h<f.objects.length;h++)g.push(f.objects[h].value)}if(c)for(var j in c){var e=c[j];e=a._data_.curieParser.parse(e,!0);var g=d._data_.properties[e];g&&(d[j]=1==g.length?g[0]:g)}return d},j.prototype.getProperties=function(a){var b=[];if(a){if(a=this._data_.curieParser.parse(a,!0),e=this._data_.triplesGraph[a])for(var c in e.predicates)b.push(c)}else{var d={};for(var a in this._data_.triplesGraph){var e=this._data_.triplesGraph[a];if(e)for(var c in e.predicates)d[c]||(d[c]=!0,b.push(c))}}return b},j.prototype.getSubjects=function(a,b){var c=[];if(a&&(a=this._data_.curieParser.parse(a,!0)),a&&b){var d=this._data_.curieParser.parse(b,!0);for(var e in this._data_.triplesGraph){var f=this._data_.triplesGraph[e],g=f.predicates[a];if(g)for(var h=0;h<g.objects.length;h++)if(g.objects[h].value==b||g.objects[h].value==d){c.push(e);break}}}else if(a)for(var e in this._data_.triplesGraph){var f=this._data_.triplesGraph[e],g=f.predicates[a];g&&c.push(e)}else if(b){var d=this._data_.curieParser.parse(b,!0);for(var e in this._data_.triplesGraph){var f=this._data_.triplesGraph[e];for(var i in f.predicates){var g=e.predicates[i];if(g){for(var j=null,h=0;!j&&h<g.objects.length;h++)g.objects[h].value!=b&&node.objects[h].value!=d||(j=g.objects[h]);if(j){c.push(e);break}}}}}else for(var e in this._data_.triplesGraph)c.push(e);return c},j.prototype.getValues=function(a,b){var c=[];if(b&&(b=this._data_.curieParser.parse(b,!0)),a){a=this._data_.curieParser.parse(a,!0);var d=this._data_.triplesGraph[a];if(d)if(b){var e=d.predicates[b];if(e)for(var f=0;f<e.objects.length;f++)c.push(e.objects[f].value)}else for(var g in d.predicates)for(var e=d.predicates[g],f=0;f<e.objects.length;f++)c.push(e.objects[f].value)}else if(b)for(var a in this._data_.triplesGraph){var d=this._data_.triplesGraph[a],e=d.predicates[b];if(e)for(var f=0;f<e.objects.length;f++)c.push(e.objects[f].value)}else for(var a in this._data_.triplesGraph){var d=this._data_.triplesGraph[a];for(var g in d.predicates)for(var e=d.predicates[g],f=0;f<e.objects.length;f++)c.push(e.objects[f].value)}return c},j.prototype.setMapping=function(a,b){this._data_.prefixes[a]=b},j.prototype.getSubjectTriples=function(a){if(!a)return null;a=this._data_.curieParser.parse(a,!0);var b={subject:a,predicates:{}},c=this._data_.triplesGraph[a];if(!c)return null;for(var d in c.predicates){var e=c.predicates[d],g=[];b.predicates[d]={predicate:d,objects:g};for(var h=0;h<e.objects.length;h++){var i=e.objects[h];if(i.type==this.XMLLiteralURI){for(var j=new XMLSerializer,k="",l=0;l<i.value.length;l++)i.value[l].nodeType==f.ELEMENT_NODE?k+=j.serializeToString(i.value[l]):i.value[l].nodeType==f.TEXT_NODE&&(k+=i.value[l].nodeValue);g.push({type:i.type,value:k})}else g.push({type:i.type,value:i.value})}}return b},j.prototype.getProjection=function(a,b){if(!a)return null;a=this._data_.curieParser.parse(a,!0);var c=this._data_.triplesGraph[a];return c?j.toProjection(this,c,b):null},j.prototype.getProjections=function(a,b,c){a&&(a=this._data_.curieParser.parse(a,!0));var d=[];if(void 0===b&&void 0===c&&(c=a),a&&b){var e=this._data_.curieParser.parse(b,!0);for(var f in this._data_.triplesGraph){var g=this._data_.triplesGraph[f],h=g.predicates[a];if(h)for(var i=0;i<h.objects.length;i++)if(h.objects[i].value==b||h.objects[i].value==e){d.push(j.toProjection(this,g,c));break}}}else if(a)for(var f in this._data_.triplesGraph){var g=this._data_.triplesGraph[f];g.predicates[a]&&d.push(j.toProjection(this,g,c))}else for(var f in this._data_.triplesGraph){var g=this._data_.triplesGraph[f];d.push(j.toProjection(this,g,c))}return d},j.attach=function(a){Object.defineProperty(a,"data",{value:new j(a.baseURI||a.location.href),writable:!1,configurable:!1,enumerable:!0}),a.getElementsByType=function(a){return this.getElementsByProperty("http://www.w3.org/1999/02/22-rdf-syntax-ns#type",a)},a.getElementsBySubject=function(a){var b=[];b.item=function(a){return this[a]},a=this.data._data_.curieParser.parse(a,!0);var c=this.data._data_.triplesGraph[a];if(c)for(var d=0;d<c.origins.length;d++)b.push(c.origins[d]);return b},a.getElementsByProperty=function(a,b){var c=[];c.item=function(a){return this[a]},b&&(b=this.data._data_.curieParser.parse(b,!1));var d=void 0===b;a=this.data._data_.curieParser.parse(a,!0);for(var e in this.data._data_.triplesGraph){var f=this.data._data_.triplesGraph[e],g=f.predicates[a];if(g)for(var h=0;h<g.objects.length;h++)(d||g.objects[h].value==b)&&c.push(g.objects[h].origin)}return c},a.getElementSubject=function(a){for(var b in this.data._data_.triplesGraph){var c=this.data._data_.triplesGraph[b];for(predicate in c.predicates)for(var d=c.predicates[predicate],e=0;e<d.objects.length;e++)if(d.objects[e].origin==a)return b}return null}};var k=a.implementation.hasFeature;a.implementation.hasFeature=function(a,b){return"RDFaAPI"==a&&"1.1"==b||k(a,b)};var l=!!a.data;if(a.head&&!d){var m=a.createElement("meta");m.setAttribute("name","green-turtle-rdfa-message"),a.head.appendChild(m);var n=function(){var b=a.createEvent("Event");return b.initEvent("green-turtle-rdfa-extension",!0,!0),b};m.addEventListener("green-turtle-rdfa-document",function(b){var c=JSON.parse(m.getAttribute("content"));if("status"==c.type){var d=n();m.setAttribute("content",'{ "type": "status", "loaded": '+l+', "count": '+a.data._data_.tripleCount+" }"),setTimeout(function(){m.dispatchEvent(d)},1)}else if("get-subjects"==c.type){var e=a.data.getSubjects();m.setAttribute("content",'{ "type": "subjects", "subjects": '+JSON.stringify(e)+" }");var b=n();setTimeout(function(){m.dispatchEvent(b)},1)}else if("get-subject"==c.type){var f=null;if(a.data.getSubjectTriples)f=a.data.getSubjectTriples(c.subject);else{for(var e={},g=a.data.getSubjects(),h=0;h<g.length;h++)e[g[h]]=!0;f={subject:c.subject,predicates:{}};for(var i=a.data.getProjection(c.subject),j=i.getProperties(),h=0;h<j.length;h++){var k=[];f.predicates[j[h]]={predicate:predicate,objects:k};for(var o=i.getAll(j[h]),p=0;p<o.length;p++)e[o[p]]?k.push({type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",value:o[p]}):k.push({type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",value:o[p]})}}var q={type:"subject",subject:c.subject,triples:f};m.setAttribute("content",JSON.stringify(q));var b=n();setTimeout(function(){m.dispatchEvent(b)},1)}},!1)}if(b||!a.data){b||j.attach(a);new g(a.data._data_).process(a.documentElement),l=!0}},d){if(b.exports=e,void 0===f)var f={ELEMENT_NODE:1,TEXT_NODE:3,DOCUMENT_NODE:9}}else"loading"==document.readyState?window.addEventListener("load",function(){e.attach(document)},!1):e.attach(document)},{}],76:[function(a,b,c){(function(a,c){(function(){"use strict";function d(a){return"function"==typeof a||"object"==typeof a&&null!==a}function e(a){return"function"==typeof a}function f(a){return"object"==typeof a&&null!==a}function j(){}function q(){return function(){a.nextTick(v)}}function r(){var a=0,b=new o(v),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function s(){var a=new MessageChannel;return a.port1.onmessage=v,function(){a.port2.postMessage(0)}}function t(){return function(){setTimeout(v,1)}}function v(){for(var a=0;a<l;a+=2){(0,u[a])(u[a+1]),u[a]=void 0,u[a+1]=void 0}l=0}function x(){}function C(){return new TypeError("You cannot resolve a promise with itself")}function D(){return new TypeError("A promises callback cannot return that same promise.")}function E(a){try{return a.then}catch(a){return B.error=a,B}}function F(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function G(a,b,c){m(function(a){var d=!1,e=F(c,b,function(c){d||(d=!0,b!==c?J(a,c):L(a,c))},function(b){d||(d=!0,M(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,M(a,e))},a)}function H(a,b){b._state===z?L(a,b._result):a._state===A?M(a,b._result):N(b,void 0,function(b){J(a,b)},function(b){M(a,b)})}function I(a,b){if(b.constructor===a.constructor)H(a,b);else{var c=E(b);c===B?M(a,B.error):void 0===c?L(a,b):e(c)?G(a,b,c):L(a,b)}}function J(a,b){a===b?M(a,C()):d(b)?I(a,b):L(a,b)}function K(a){a._onerror&&a._onerror(a._result),O(a)}function L(a,b){a._state===y&&(a._result=b,a._state=z,0===a._subscribers.length||m(O,a))}function M(a,b){a._state===y&&(a._state=A,a._result=b,m(K,a))}function N(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+z]=c,e[f+A]=d,0===f&&a._state&&m(O,a)}function O(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?S(c,d,e,f):e(f);a._subscribers.length=0}}function P(){this.error=null}function R(a,b){try{return a(b)}catch(a){return Q.error=a,Q}}function S(a,b,c,d){var g,h,i,j,f=e(c);if(f){if(g=R(c,d),g===Q?(j=!0,h=g.error,g=null):i=!0,b===g)return void M(b,D())}else g=d,i=!0;b._state!==y||(f&&i?J(b,g):j?M(b,h):a===z?L(b,g):a===A&&M(b,g))}function T(a,b){try{b(function(c){J(a,c)},function(c){M(a,c)})}catch(b){M(a,b)}}function V(a,b,c,d){this._instanceConstructor=a,this.promise=new a(x,d),this._abortOnReject=c,this._validateInput(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._init(),0===this.length?L(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&L(this.promise,this._result))):M(this.promise,this._validationError())}function aa(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ba(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function da(a){this._id=_++,this._state=void 0,this._result=void 0,this._subscribers=[],x!==a&&(e(a)||aa(),this instanceof da||ba(),T(this,a))}var g;g=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var w,h=g,l=(Date.now,Object.create,0),m=function(b,c){u[l]=b,u[l+1]=c,2===(l+=2)&&w()},n="undefined"!=typeof window?window:{},o=n.MutationObserver||n.WebKitMutationObserver,p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,u=new Array(1e3);w=void 0!==a&&"[object process]"==={}.toString.call(a)?q():o?r():p?s():t();var y=void 0,z=1,A=2,B=new P,Q=new P;V.prototype._validateInput=function(a){return h(a)},V.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},V.prototype._init=function(){this._result=new Array(this.length)};var W=V;V.prototype._enumerate=function(){for(var a=this.length,b=this.promise,c=this._input,d=0;b._state===y&&d<a;d++)this._eachEntry(c[d],d)},V.prototype._eachEntry=function(a,b){var c=this._instanceConstructor;f(a)?a.constructor===c&&a._state!==y?(a._onerror=null,this._settledAt(a._state,b,a._result)):this._willSettleAt(c.resolve(a),b):(this._remaining--,this._result[b]=this._makeResult(z,b,a))},V.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===y&&(this._remaining--,this._abortOnReject&&a===A?M(d,c):this._result[b]=this._makeResult(a,b,c)),0===this._remaining&&L(d,this._result)},V.prototype._makeResult=function(a,b,c){return c},V.prototype._willSettleAt=function(a,b){var c=this;N(a,void 0,function(a){c._settledAt(z,b,a)},function(a){c._settledAt(A,b,a)})};var X=function(b,c){return new W(this,b,!0,c).promise},Y=function(b,c){function g(a){J(e,a)}function i(a){M(e,a)}var d=this,e=new d(x,c);if(!h(b))return M(e,new TypeError("You must pass an array to race.")),e;for(var f=b.length,j=0;e._state===y&&j<f;j++)N(d.resolve(b[j]),void 0,g,i);return e},Z=function(b,c){var d=this;if(b&&"object"==typeof b&&b.constructor===d)return b;var e=new d(x,c);return J(e,b),e},$=function(b,c){var d=this,e=new d(x,c);return M(e,b),e},_=0,ca=da;da.all=X,da.race=Y,da.resolve=Z,da.reject=$,da.prototype={constructor:da,then:function(a,b){var c=this,d=c._state;if(d===z&&!a||d===A&&!b)return this;var e=new this.constructor(x),f=c._result;if(d){var g=arguments[d-1];m(function(){S(d,e,g,f)})}else N(c,e,a,b);return e},catch:function(a){return this.then(null,a)}};var ea=function(){var b;"Promise"in(b=void 0!==c?c:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in b.Promise&&"reject"in b.Promise&&"all"in b.Promise&&"race"in b.Promise&&function(){var a;return new b.Promise(function(b){a=b}),e(a)}()||(b.Promise=ca)},fa={Promise:ca,polyfill:ea};"function"==typeof define&&define.amd?define(function(){return fa}):void 0!==b&&b.exports?b.exports=fa:void 0!==this&&(this.ES6Promise=fa)}).call(this)}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:15}],77:[function(a,b,c){!function(){var c=a("crypt"),d=a("charenc").utf8,e=a("is-buffer"),f=a("charenc").bin,g=function(a,b){a.constructor==String?a=b&&"binary"===b.encoding?f.stringToBytes(a):d.stringToBytes(a):e(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||(a=a.toString());for(var h=c.bytesToWords(a),i=8*a.length,j=1732584193,k=-271733879,l=-1732584194,m=271733878,n=0;n<h.length;n++)h[n]=16711935&(h[n]<<8|h[n]>>>24)|4278255360&(h[n]<<24|h[n]>>>8);h[i>>>5]|=128<<i%32,h[14+(i+64>>>9<<4)]=i;for(var o=g._ff,p=g._gg,q=g._hh,r=g._ii,n=0;n<h.length;n+=16){var s=j,t=k,u=l,v=m;j=o(j,k,l,m,h[n+0],7,-680876936),m=o(m,j,k,l,h[n+1],12,-389564586),l=o(l,m,j,k,h[n+2],17,606105819),k=o(k,l,m,j,h[n+3],22,-1044525330),j=o(j,k,l,m,h[n+4],7,-176418897),m=o(m,j,k,l,h[n+5],12,1200080426),l=o(l,m,j,k,h[n+6],17,-1473231341),k=o(k,l,m,j,h[n+7],22,-45705983),j=o(j,k,l,m,h[n+8],7,1770035416),m=o(m,j,k,l,h[n+9],12,-1958414417),l=o(l,m,j,k,h[n+10],17,-42063),k=o(k,l,m,j,h[n+11],22,-1990404162),j=o(j,k,l,m,h[n+12],7,1804603682),m=o(m,j,k,l,h[n+13],12,-40341101),l=o(l,m,j,k,h[n+14],17,-1502002290),k=o(k,l,m,j,h[n+15],22,1236535329),j=p(j,k,l,m,h[n+1],5,-165796510),m=p(m,j,k,l,h[n+6],9,-1069501632),l=p(l,m,j,k,h[n+11],14,643717713),k=p(k,l,m,j,h[n+0],20,-373897302),j=p(j,k,l,m,h[n+5],5,-701558691),m=p(m,j,k,l,h[n+10],9,38016083),l=p(l,m,j,k,h[n+15],14,-660478335),k=p(k,l,m,j,h[n+4],20,-405537848),j=p(j,k,l,m,h[n+9],5,568446438),m=p(m,j,k,l,h[n+14],9,-1019803690),l=p(l,m,j,k,h[n+3],14,-187363961),k=p(k,l,m,j,h[n+8],20,1163531501),j=p(j,k,l,m,h[n+13],5,-1444681467),m=p(m,j,k,l,h[n+2],9,-51403784),l=p(l,m,j,k,h[n+7],14,1735328473),k=p(k,l,m,j,h[n+12],20,-1926607734),j=q(j,k,l,m,h[n+5],4,-378558),m=q(m,j,k,l,h[n+8],11,-2022574463),l=q(l,m,j,k,h[n+11],16,1839030562),k=q(k,l,m,j,h[n+14],23,-35309556),j=q(j,k,l,m,h[n+1],4,-1530992060),m=q(m,j,k,l,h[n+4],11,1272893353),l=q(l,m,j,k,h[n+7],16,-155497632),k=q(k,l,m,j,h[n+10],23,-1094730640),j=q(j,k,l,m,h[n+13],4,681279174),m=q(m,j,k,l,h[n+0],11,-358537222),l=q(l,m,j,k,h[n+3],16,-722521979),k=q(k,l,m,j,h[n+6],23,76029189),j=q(j,k,l,m,h[n+9],4,-640364487),m=q(m,j,k,l,h[n+12],11,-421815835),l=q(l,m,j,k,h[n+15],16,530742520),k=q(k,l,m,j,h[n+2],23,-995338651),j=r(j,k,l,m,h[n+0],6,-198630844),m=r(m,j,k,l,h[n+7],10,1126891415),l=r(l,m,j,k,h[n+14],15,-1416354905),k=r(k,l,m,j,h[n+5],21,-57434055),j=r(j,k,l,m,h[n+12],6,1700485571),m=r(m,j,k,l,h[n+3],10,-1894986606),l=r(l,m,j,k,h[n+10],15,-1051523),k=r(k,l,m,j,h[n+1],21,-2054922799),j=r(j,k,l,m,h[n+8],6,1873313359),m=r(m,j,k,l,h[n+15],10,-30611744),l=r(l,m,j,k,h[n+6],15,-1560198380),k=r(k,l,m,j,h[n+13],21,1309151649),j=r(j,k,l,m,h[n+4],6,-145523070),m=r(m,j,k,l,h[n+11],10,-1120210379),l=r(l,m,j,k,h[n+2],15,718787259),k=r(k,l,m,j,h[n+9],21,-343485551),j=j+s>>>0,k=k+t>>>0,l=l+u>>>0,m=m+v>>>0}return c.endian([j,k,l,m])};g._ff=function(a,b,c,d,e,f,g){var h=a+(b&c|~b&d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._gg=function(a,b,c,d,e,f,g){var h=a+(b&d|c&~d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._hh=function(a,b,c,d,e,f,g){var h=a+(b^c^d)+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._ii=function(a,b,c,d,e,f,g){var h=a+(c^(b|~d))+(e>>>0)+g;return(h<<f|h>>>32-f)+b},g._blocksize=16,g._digestsize=16,b.exports=function(a,b){if(void 0===a||null===a)throw new Error("Illegal argument "+a);var d=c.wordsToBytes(g(a,b));return b&&b.asBytes?d:b&&b.asString?f.bytesToString(d):c.bytesToHex(d)}}()},{charenc:66,crypt:67,"is-buffer":72}],78:[function(a,b,c){var d=a;a=function(){};var c=b.exports={Lexer:a("./lib/N3Lexer"),Parser:a("./lib/N3Parser"),Writer:a("./lib/N3Writer"),Store:a("./lib/N3Store"),StreamParser:a("./lib/N3StreamParser"),StreamWriter:a("./lib/N3StreamWriter"),Util:a("./lib/N3Util")};Object.keys(c).forEach(function(a){Object.defineProperty(c,a,{configurable:!0,enumerable:!0,get:function(){return delete c[a],c[a]=d("./lib/N3"+a)}})})},{"./lib/N3Lexer":79,"./lib/N3Parser":80,"./lib/N3Store":81,"./lib/N3StreamParser":82,"./lib/N3StreamWriter":83,"./lib/N3Util":84,"./lib/N3Writer":85}],79:[function(a,b,c){function i(a){if(!(this instanceof i))return new i(a);if(a&&a.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var b=this;this._tokenize=this.tokenize,this.tokenize=function(a,c){this._tokenize(a,function(a,d){!a&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(d.type)?c&&c(a,d):c&&c(a||b._syntaxError(d.type,c=null))})}}}var d=String.fromCharCode,e="function"==typeof setImmediate?setImmediate:function(b){setTimeout(b,0)},f=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,g={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},h=/[\x00-\x20<>\\"\{\}\|\^\`]/;i.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(a,b){function o(b){a(b._syntaxError(/^\S*/.exec(c)[0]))}for(var c=this._input;;){for(var d;d=this._newline.exec(c);)c=c.substr(d[0].length,c.length),this._line++;if((d=this._whitespace.exec(c))&&(c=c.substr(d[0].length,c.length)),this._endOfFile.test(c))return b&&a(c=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=c;var m,e=this._line,f="",g="",i="",j=c[0],k=null,l=0,n=!1;switch(j){case"^":if(1===c.length)break;if("^"!==c[1])return o(this);if(this._prevTokenType="^",c=c.substr(2),"<"!==c[0]){n=!0;break}case"<":if(k=this._unescapedIri.exec(c))f="IRI",g=k[1];else if(k=this._iri.exec(c)){if(null===(m=this._unescape(k[1]))||h.test(m))return o(this);f="IRI",g=m}break;case"_":((k=this._blank.exec(c))||b&&(k=this._blank.exec(c+" ")))&&(f="prefixed",i="_",g=k[1]);break;case'"':case"'":if(k=this._unescapedString.exec(c))f="literal",g=k[0];else if(k=this._singleQuotedString.exec(c)){if(null===(m=this._unescape(k[0])))return o(this);f="literal",g=m.replace(/^'|'$/g,'"')}else if(k=this._tripleQuotedString.exec(c)){if(m=k[1]||k[2],this._line+=m.split(/\r\n|\r|\n/).length-1,null===(m=this._unescape(m)))return o(this);f="literal",g=m.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(k=this._langcode.exec(c))?(f="langcode",g=k[1]):(k=this._keyword.exec(c))&&(f=k[0]);break;case".":if(1===c.length?b:c[1]<"0"||c[1]>"9"){f=".",l=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(k=this._number.exec(c))&&(f="literal",g='"'+k[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(k[1]?"double":/^[+\-]?\d+$/.test(k[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(k=this._sparqlKeyword.exec(c))?f=k[0].toUpperCase():n=!0;break;case"f":case"t":(k=this._boolean.exec(c))?(f="literal",g='"'+k[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):n=!0;break;case"a":(k=this._shortPredicates.exec(c))?(f="abbreviation",g="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):n=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":l=1,f=j;break;default:n=!0}if(n&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(k=this._prefix.exec(c))?((k=this._prefixed.exec(c))||b&&(k=this._prefixed.exec(c+" ")))&&(f="prefixed",i=k[1]||"",g=this._unescape(k[2])):(f="prefix",g=k[1]||"")),"^"===this._prevTokenType&&(f="IRI"===f||"prefixed"===f?"type":""),!f)return b||!/^'''|^"""/.test(c)&&/\n|\r/.test(c)?o(this):this._input=c;a(null,{line:e,type:f,value:g,prefix:i}),this._prevTokenType=f,c=c.substr(l||k[0].length,c.length)}},_unescape:function(a){try{return a.replace(f,function(a,b,c,e){var f;if(b){if(f=parseInt(b,16),isNaN(f))throw new Error;return d(f)}if(c){if(f=parseInt(c,16),isNaN(f))throw new Error;return f<=65535?d(f):d(55296+(f-=65536)/1024,56320+(1023&f))}var h=g[e];if(!h)throw new Error;return h})}catch(a){return null}},_syntaxError:function(a){return this._input=null,new Error('Syntax error: unexpected "'+a+'" on line '+this._line+".")},tokenize:function(a,b){function d(a){null!==c._input&&(c._input+=a,c._tokenizeToEnd(b,!1))}function f(){null!==c._input&&c._tokenizeToEnd(b,!0)}var c=this;this._line=1,"string"==typeof a?(this._input=a,e(function(){c._tokenizeToEnd(b,!0)})):(this._input="",a&&"function"!=typeof a?("function"==typeof a.setEncoding&&a.setEncoding("utf8"),a.on("data",d),a.on("end",f)):(this.addChunk=d,this.end=f,b||(b=a)))}},b.exports=i},{}],80:[function(a,b,c){function n(a){if(!(this instanceof n))return new n(a);this._tripleStack=[],this._graph=null,a=a||{},this._setBase(a.documentIRI);var b="string"==typeof a.format&&a.format.match(/\w*$/)[0].toLowerCase(),c="turtle"===b,e="trig"===b,f=/triple/.test(b),g=/quad/.test(b),h=f||g;(this._supportsNamedGraphs=!c)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(c||e||f),h&&(this._base="",this._resolveIRI=function(a){return this._error("Disallowed relative IRI",a),this._callback=o,this._subject=null}),this._blankNodePrefix="string"!=typeof a.blankNodePrefix?"":"_:"+a.blankNodePrefix.replace(/^_:/,""),this._lexer=a.lexer||new d({lineMode:h})}function o(){}var d=a("./N3Lexer"),e="http://www.w3.org/1999/02/22-rdf-syntax-ns#",f=e+"nil",g=e+"first",h=e+"rest",i=/^[a-z][a-z0-9+.-]*:/i,j=/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i,k=/(?:^|\/)\.\.?(?:$|[\/#?])/,l=0,m=0;n._resetBlankNodeIds=function(){l=m=0},n.prototype={_setBase:function(a){if(a){if(a.indexOf("#")>=0)throw new Error("Invalid base IRI "+a)}else a=null;(this._base=a)&&(this._basePath=a.replace(/[^\/?]*(?:\?.*)?$/,""),a=a.match(j),this._baseRoot=a[0],this._baseScheme=a[1])},_readInTopContext:function(a){switch(a.type){case"eof":return null!==this._graph?this._error("Unclosed graph",a):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(a)}},_readSubject:function(a){switch(this._predicate=null,a.type){case"IRI":null===this._base||i.test(a.value)?this._subject=a.value:this._subject=this._resolveIRI(a);break;case"prefixed":var b=this._prefixes[a.prefix];if(void 0===b)return this._error('Undefined prefix "'+a.prefix+':"',a);this._subject=b+a.value;break;case"[":return this._subject="_:b"+m++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:f,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(a);default:return this._error("Expected subject but got "+a.type,a)}return this._readPredicateOrNamedGraph},_readPredicate:function(a){var b=a.type;switch(b){case"IRI":case"abbreviation":null===this._base||i.test(a.value)?this._predicate=a.value:this._predicate=this._resolveIRI(a);break;case"prefixed":if("_"===a.prefix)return this._error("Disallowed blank node as predicate",a);var c=this._prefixes[a.prefix];if(void 0===c)return this._error('Undefined prefix "'+a.prefix+':"',a);this._predicate=c+a.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+b,a):(this._subject=null,"]"===b?this._readBlankNodeTail(a):this._readPunctuation(a));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',a)}return this._readObject},_readObject:function(a){switch(a.type){case"IRI":null===this._base||i.test(a.value)?this._object=a.value:this._object=this._resolveIRI(a);break;case"prefixed":var b=this._prefixes[a.prefix];if(void 0===b)return this._error('Undefined prefix "'+a.prefix+':"',a);this._object=b+a.value;break;case"literal":return this._object=a.value,this._readDataTypeOrLang;case"[":var c="_:b"+m++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:c,type:"blank"}),this._subject=c,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:f,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',a)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(a){return"{"===a.type?this._readGraph(a):this._readPredicate(a)},_readGraph:function(a){return"{"!==a.type?this._error("Expected graph but got "+a.type,a):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(a){return"]"===a.type?(this._subject=null,this._readBlankNodeTail(a)):(this._predicate=null,this._readPredicate(a))},_readBlankNodeTail:function(a){if("]"!==a.type)return this._readBlankNodePunctuation(a);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var b=this._tripleStack.pop();return this._subject=b.subject,null!==b.object?(this._predicate=b.predicate,this._object=b.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(a){switch(a.type){case"type":var b;if(""===a.prefix)b=null===this._base||i.test(a.value)?a.value:this._resolveIRI(a);else{var c=this._prefixes[a.prefix];if(void 0===c)return this._error('Undefined prefix "'+a.prefix+':"',a);b=c+a.value}return this._object+="^^"+b,this._getTripleEndReader();case"langcode":return this._object+="@"+a.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,a)}},_readListItem:function(a){var b=null,c=null,d=this._subject,e=this._tripleStack,j=e[e.length-1],k=this._readListItem;switch(a.type){case"IRI":b=null===this._base||i.test(a.value)?a.value:this._resolveIRI(a);break;case"prefixed":var l=this._prefixes[a.prefix];if(void 0===l)return this._error('Undefined prefix "'+a.prefix+':"',a);b=l+a.value;break;case"literal":b=a.value,k=this._readDataTypeOrLang;break;case"[":c="_:b"+m++,b="_:b"+m++,e.push({subject:c,predicate:g,object:b,type:"blank"}),this._subject=b,k=this._readBlankNodeHead;break;case"(":c="_:b"+m++,e.push({subject:c,predicate:g,object:f,type:"list"}),this._subject=null,k=this._readListItem;break;case")":if(e.pop(),0!==e.length&&"list"===e[e.length-1].type&&this._callback(null,{subject:j.subject,predicate:j.predicate,object:j.object,graph:this._graph||""}),this._subject=j.subject,null===j.predicate){if(k=this._readPredicate,j.subject===f)return k}else if(this._predicate=j.predicate,this._object=j.object,k=this._getTripleEndReader(),j.object===f)return k;c=f;break;default:return this._error('Expected list item instead of "'+a.type+'"',a)}return null===c&&(this._subject=c="_:b"+m++),null===d?j.object===f?j.object=c:j.subject=c:this._callback(null,{subject:d,predicate:h,object:c,graph:this._graph||""}),null!==b&&this._callback(null,{subject:c,predicate:g,object:b,graph:this._graph||""}),k},_readPunctuation:function(a){var b,c=this._subject,d=this._graph;switch(a.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",a);this._graph=null;case".":this._subject=null,b=this._readInTopContext;break;case";":b=this._readPredicate;break;case",":b=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){d=null===this._base||i.test(a.value)?a.value:this._resolveIRI(a),c=this._subject,b=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){var e=this._prefixes[a.prefix];if(void 0===e)return this._error('Undefined prefix "'+a.prefix+':"',a);d=e+a.value,b=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',a)}return null!==c&&this._callback(null,{subject:c,predicate:this._predicate,object:this._object,graph:d||""}),b},_readBlankNodePunctuation:function(a){var b;switch(a.type){case";":b=this._readPredicate;break;case",":b=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',a)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),b},_readQuadPunctuation:function(a){return"."!==a.type?this._error("Expected dot to follow quad",a):this._readInTopContext},_readPrefix:function(a){return"prefix"!==a.type?this._error("Expected prefix to follow @prefix",a):(this._prefix=a.value,this._readPrefixIRI)},_readPrefixIRI:function(a){if("IRI"!==a.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',a);var b;return b=null===this._base||i.test(a.value)?a.value:this._resolveIRI(a),this._prefixes[this._prefix]=b,this._prefixCallback(this._prefix,b),this._readDeclarationPunctuation},_readBaseIRI:function(a){if("IRI"!==a.type)return this._error("Expected IRI to follow base declaration",a);try{this._setBase(null===this._base||i.test(a.value)?a.value:this._resolveIRI(a))}catch(b){this._error(b.message,a)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(a){switch(a.type){case"IRI":case"prefixed":return this._readSubject(a),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",a)}},_readNamedGraphBlankLabel:function(a){return"]"!==a.type?this._error("Invalid graph label",a):(this._subject="_:b"+m++,this._readGraph)},_readDeclarationPunctuation:function(a){return this._sparqlStyle?this._readInTopContext(a):"."!==a.type?this._error("Expected declaration to end with a dot",a):this._readInTopContext},_getTripleEndReader:function(){var a=this._tripleStack;if(0===a.length)return this._readPunctuation;switch(a[a.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(a,b){this._callback(new Error(a+" at line "+b.line+"."))},_resolveIRI:function(a){var b=a.value;switch(b[0]){case void 0:return this._base;case"#":return this._base+b;case"?":return this._base.replace(/(?:\?.*)?$/,b);case"/":return("/"===b[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(b);default:return this._removeDotSegments(this._basePath+b)}},_removeDotSegments:function(a){if(!k.test(a))return a;for(var b="",c=a.length,d=-1,e=-1,f=0,g="/";d<c;){switch(g){case":":if(e<0&&"/"===a[++d]&&"/"===a[++d])for(;(e=d+1)<c&&"/"!==a[e];)d=e;break;case"?":case"#":d=c;break;case"/":if("."===a[d+1])switch(g=a[++d+1]){case"/":b+=a.substring(f,d-1),f=d+1;break;case void 0:case"?":case"#":return b+a.substring(f,d)+a.substr(d+1);case".":if(void 0===(g=a[++d+1])||"/"===g||"?"===g||"#"===g){if(b+=a.substring(f,d-2),(f=b.lastIndexOf("/"))>=e&&(b=b.substr(0,f)),"/"!==g)return b+"/"+a.substr(d+1);f=d+1}}}g=a[++d]}return b+a.substring(f)},parse:function(a,b,c){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+l+++"_","function"==typeof a&&(c=b,b=a,a=null),this._callback=b||o,this._prefixCallback=c||o;var d=this;this._lexer.tokenize(a,function(a,b){null!==a?(d._callback(a),d._callback=o):void 0!==d._readCallback&&(d._readCallback=d._readCallback(b))}),a||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},b.exports=n},{"./N3Lexer":79}],81:[function(a,b,c){function e(a,b){if(!(this instanceof e))return new e(a,b);this._size=0,this._graphs=Object.create(null),this._entities=Object.create(null),this._entities["><"]=0,this._entityCount=0,this._blankNodeIndex=0,b||!a||a[0]||(b=a,a=null),this._prefixes=Object.create(null),b&&b.prefixes&&this.addPrefixes(b.prefixes),a&&this.addTriples(a)}var d=a("./N3Util").expandPrefixedName;e.prototype={get size(){var a=this._size;if(null!==a)return a;var c,d,b=this._graphs;for(var e in b)for(var f in c=b[e].subjects)for(var g in d=c[f])a+=Object.keys(d[g]).length;return this._size=a},_addToIndex:function(a,b,c,d){var e=a[b]||(a[b]={});(e[c]||(e[c]={}))[d]=null},_removeFromIndex:function(a,b,c,d){var g,e=a[b],f=e[c];delete f[d];for(g in f)return;delete e[c];for(g in e)return;delete a[b]},_findInIndex:function(a,b,c,d,e,f,g,h){var k,l,m,i=[],j=Object.keys(this._entities);b&&((k=a,a={})[b]=k[b]);for(var n in a){var o=j[n];if(l=a[n]){c&&((k=l,l={})[c]=k[c]);for(var p in l){var q=j[p];if(m=l[p])for(var r=(d?d in m?[d]:[]:Object.keys(m)),s=r.length-1;s>=0;s--){var t={subject:"",predicate:"",object:"",graph:h};t[e]=o,t[f]=q,t[g]=j[r[s]],i.push(t)}}}}return i},_countInIndex:function(a,b,c,d){var f,g,h,e=0;b&&((f=a,a={})[b]=f[b]);for(var i in a)if(g=a[i]){c&&((f=g,g={})[c]=f[c]);for(var j in g)(h=g[j])&&(d?d in h&&e++:e+=Object.keys(h).length)}return e},addTriple:function(a,b,c,d){b||(d=a.graph,c=a.object,b=a.predicate,a=a.subject),d=d||"";var e=this._graphs[d];e||(e=this._graphs[d]={subjects:{},predicates:{},objects:{}},Object.freeze(e));var f=this._entities;a=f[a]||(f[a]=++this._entityCount),b=f[b]||(f[b]=++this._entityCount),c=f[c]||(f[c]=++this._entityCount),this._addToIndex(e.subjects,a,b,c),this._addToIndex(e.predicates,b,c,a),this._addToIndex(e.objects,c,a,b),this._size=null},addTriples:function(a){for(var b=a.length-1;b>=0;b--)this.addTriple(a[b])},addPrefix:function(a,b){this._prefixes[a]=b},addPrefixes:function(a){for(var b in a)this.addPrefix(b,a[b])},removeTriple:function(a,b,c,d){b||(d=a.graph,c=a.object,b=a.predicate,a=a.subject),d=d||"";var e,f=this._entities,g=this._graphs;if((a=f[a])&&(b=f[b])&&(c=f[c])&&(e=g[d])){var h,i;if((h=e.subjects[a])&&(i=h[b])&&c in i){this._removeFromIndex(e.subjects,a,b,c),this._removeFromIndex(e.predicates,b,c,a),this._removeFromIndex(e.objects,c,a,b),null!==this._size&&this._size--;for(a in e.subjects)return;delete g[d]}}},removeTriples:function(a){for(var b=a.length-1;b>=0;b--)this.removeTriple(a[b])},find:function(a,b,c,e){var f=this._prefixes;return this.findByIRI(d(a,f),d(b,f),d(c,f),d(e,f))},findByIRI:function(a,b,c,d){d=d||"";var e=this._graphs[d],f=this._entities;return e?a&&!(a=f[a])?[]:b&&!(b=f[b])?[]:c&&!(c=f[c])?[]:a?c?this._findInIndex(e.objects,c,a,b,"object","subject","predicate",d):this._findInIndex(e.subjects,a,b,null,"subject","predicate","object",d):b?this._findInIndex(e.predicates,b,c,null,"predicate","object","subject",d):c?this._findInIndex(e.objects,c,null,null,"object","subject","predicate",d):this._findInIndex(e.subjects,null,null,null,"subject","predicate","object",d):[]},count:function(a,b,c,e){var f=this._prefixes;return this.countByIRI(d(a,f),d(b,f),d(c,f),d(e,f))},countByIRI:function(a,b,c,d){d=d||"";var e=this._graphs[d],f=this._entities;return e?a&&!(a=f[a])?0:b&&!(b=f[b])?0:c&&!(c=f[c])?0:a?c?this._countInIndex(e.objects,c,a,b):this._countInIndex(e.subjects,a,b,c):b?this._countInIndex(e.predicates,b,c,a):this._countInIndex(e.objects,c,a,b):0},createBlankNode:function(a){var b,c;if(a)for(b=a="_:"+a,c=1;this._entities[b];)b=a+c++;else do{b="_:b"+this._blankNodeIndex++}while(this._entities[b]);return this._entities[b]=++this._entityCount,b}},b.exports=e},{"./N3Util":84}],82:[function(a,b,c){function g(a){if(!(this instanceof g))return new g(a);d.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var b=this,c=new f(a);c.parse(function(a,c){c&&b.push(c)||a&&b.emit("error",a)},this.emit.bind(this,"prefix")),this._transform=function(a,b,d){c.addChunk(a),d()},this._flush=function(a){c.end(),a()}}var d=a("stream").Transform,e=a("util"),f=a("./N3Parser.js");e.inherits(g,d),b.exports=g},{"./N3Parser.js":80,stream:33,util:43}],83:[function(a,b,c){function g(a){if(!(this instanceof g))return new g(a);d.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var b=this,c=new f({write:function(a,c,d){b.push(a),d&&d()},end:function(a){b.push(null),a&&a()}},a);this._transform=function(a,b,d){c.addTriple(a,d)},this._flush=function(a){c.end(a)}}var d=a("stream").Transform,e=a("util"),f=a("./N3Writer.js");e.inherits(g,d),b.exports=g},{"./N3Writer.js":85,stream:33,util:43}],84:[function(a,b,c){function k(a,b){for(var c in j)b?a.prototype[c]=l(j[c]):a[c]=j[c];return a}function l(a){return function(b){return a(this,b)}}var d="http://www.w3.org/2001/XMLSchema#",e=d+"string",f=d+"integer",g=d+"decimal",h=d+"boolean",i="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",j={isIRI:function(a){if(!a)return a;var b=a[0];return'"'!==b&&"_"!==b},isLiteral:function(a){return a&&'"'===a[0]},isBlank:function(a){return a&&"_:"===a.substr(0,2)},getLiteralValue:function(a){var b=/^"([^]*)"/.exec(a);if(!b)throw new Error(a+" is not a literal");return b[1]},getLiteralType:function(a){var b=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(a);if(!b)throw new Error(a+" is not a literal");return b[1]||(b[2]?i:e)},getLiteralLanguage:function(a){var b=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(a);if(!b)throw new Error(a+" is not a literal");return b[1]?b[1].toLowerCase():""},isPrefixedName:function(a){return a&&/^[^:\/"']*:[^:\/"']+$/.test(a)},expandPrefixedName:function(a,b){var d,e,f,c=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(a);return c&&(d=c[1],e=b[d],f=c.index),void 0===e?a:0===f?e+a.substr(d.length+1):a.substr(0,f+3)+e+a.substr(f+d.length+4)},createIRI:function(a){return a&&'"'===a[0]?j.getLiteralValue(a):a},createLiteral:function(a,b){if(!b)switch(typeof a){case"boolean":b=h;break;case"number":if(isFinite(a)){b=a%1==0?f:g;break}default:return'"'+a+'"'}return'"'+a+(/^[a-z]+(-[a-z0-9]+)*$/i.test(b)?'"@'+b.toLowerCase():'"^^'+b)}};b.exports=k(k)},{}],85:[function(a,b,c){function j(a,b){if(!(this instanceof j))return new j(a,b);if(a&&"function"!=typeof a.write&&(b=a,a=null),b=b||{},a)this._outputStream=a,this._endStream=void 0===b.end||!!b.end;else{var c="";this._outputStream={write:function(a,b,d){c+=a,d&&d()},end:function(a){a&&a(null,c)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(b.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),b.prefixes&&this.addPrefixes(b.prefixes))}function k(a){var b=i[a];return void 0===b&&(1===a.length?(b=a.charCodeAt(0).toString(16),b="\\u0000".substr(0,6-b.length)+b):(b=(1024*(a.charCodeAt(0)-55296)+a.charCodeAt(1)+9216).toString(16),b="\\U00000000".substr(0,10-b.length)+b)),b}var d=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,e="http://www.w3.org/1999/02/22-rdf-syntax-ns#",f=e+"type",g=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,h=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,i={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};j.prototype={_write:function(a,b){this._outputStream.write(a,"utf8",b)},_writeTriple:function(a,b,c,d,e){try{this._graph!==d&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(d?this._encodeIriOrBlankNode(d)+" {\n":"")),this._subject=null,this._graph="["!==d[0]?d:"]"),this._subject===a?this._predicate===b?this._write(", "+this._encodeObject(c),e):this._write(";\n    "+this._encodePredicate(this._predicate=b)+" "+this._encodeObject(c),e):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=a)+" "+this._encodePredicate(this._predicate=b)+" "+this._encodeObject(c),e)}catch(a){e&&e(a)}},_writeTripleLine:function(a,b,c,d,e){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(a)+" "+this._encodeIriOrBlankNode(b)+" "+this._encodeObject(c)+(d?" "+this._encodeIriOrBlankNode(d)+".\n":".\n"),e)}catch(a){e&&e(a)}},_encodeIriOrBlankNode:function(a){var b=a[0];if("["===b||"("===b||"_"===b&&":"===a[1])return a;g.test(a)&&(a=a.replace(h,k));var c=this._prefixRegex.exec(a);return c?c[1]?this._prefixIRIs[c[1]]+c[2]:a:"<"+a+">"},_encodeLiteral:function(a,b,c){return g.test(a)&&(a=a.replace(h,k)),c?'"'+a+'"@'+c:b?'"'+a+'"^^'+this._encodeIriOrBlankNode(b):'"'+a+'"'},_encodeSubject:function(a){if('"'===a[0])throw new Error("A literal as subject is not allowed: "+a);return"["===a[0]&&(this._subject="]"),this._encodeIriOrBlankNode(a)},_encodePredicate:function(a){if('"'===a[0])throw new Error("A literal as predicate is not allowed: "+a);return a===f?"a":this._encodeIriOrBlankNode(a)},_encodeObject:function(a){if('"'!==a[0])return this._encodeIriOrBlankNode(a);var b=d.exec(a);if(!b)throw new Error("Invalid literal: "+a);return this._encodeLiteral(b[1],b[2],b[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(a,b,c,d,e){void 0===c?this._writeTriple(a.subject,a.predicate,a.object,a.graph||"",b):"string"!=typeof d?this._writeTriple(a,b,c,"",d):this._writeTriple(a,b,c,d,e)},addTriples:function(a){for(var b=0;b<a.length;b++)this.addTriple(a[b])},addPrefix:function(a,b,c){var d={};d[a]=b,this.addPrefixes(d,c)},addPrefixes:function(a,b){var c=this._prefixIRIs,d=!1;for(var e in a){var f=a[e];/[#\/]$/.test(f)&&c[f]!==(e+=":")&&(d=!0,c[f]=e,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+e+" <"+f+">.\n"))}if(d){var g="",h="";for(var i in c)g+=g?"|"+i:i,h+=(h?"|":"")+c[i];g=g.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+h+")[^/]*$|^("+g+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(d?"\n":"",b)},blank:function(a,b){var d,e,c=a;switch(void 0===a?c=[]:"string"==typeof a?c=[{predicate:a,object:b}]:"length"in a||(c=[a]),e=c.length){case 0:return"[]";case 1:if(d=c[0],"["!==d.object[0])return"[ "+this._encodePredicate(d.predicate)+" "+this._encodeObject(d.object)+" ]";default:for(var f="[",g=0;g<e;g++)d=c[g],d.predicate===a?f+=", "+this._encodeObject(d.object):(f+=(g?";\n  ":"\n  ")+this._encodePredicate(d.predicate)+" "+this._encodeObject(d.object),a=d.predicate);return f+"\n]"}},list:function(a){for(var b=a&&a.length||0,c=new Array(b),d=0;d<b;d++)c[d]=this._encodeObject(a[d]);return"("+c.join(" ")+")"},_prefixRegex:/$0^/,end:function(a){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var b=a&&function(c,d){b=null,a(c,d)};if(this._endStream)try{return this._outputStream.end(b)}catch(a){}b&&b()}},b.exports=j},{}],86:[function(a,b,c){(function(c){var d=a("fs"),e=a("path"),f=b.exports=function(a,b){var c=[].slice.call(arguments,2).filter(function(a){return"string"==typeof a});Array.isArray(b)?b={include:b}:"string"==typeof b&&(b={include:[b]}),b=b||{},b.include=b.include||[],c.length>0&&(b.include=b.include.concat(c));var d=f.read(a,b.dir).package;return Object.keys(d).forEach(function(c){b.include.length>0&&!~b.include.indexOf(c)||a.exports[c]||(a.exports[c]=d[c])}),f};f.find=function(a,b){if(b||(b=e.dirname(a.filename)),~d.readdirSync(b).indexOf("package.json"))return e.join(b,"package.json");if("/"===b)throw new Error("Could not find package.json up from: "+b);if(!b||"."===b)throw new Error("Cannot find package.json from unspecified directory");return f.find(a,e.dirname(b))},f.read=function(a,b){b=f.find(a,b);var c=d.readFileSync(b).toString();return{dir:b,package:JSON.parse(c)}},f(b,{dir:c,include:["version"],target:f})}).call(this,"/node_modules\\pkginfo\\lib")},{fs:1,path:14}],87:[function(a,b,c){(function(a){!function(a){"use strict";if("function"==typeof bootstrap)bootstrap("promise",a);else if("object"==typeof c&&"object"==typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=a}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var d="undefined"!=typeof window?window:self,e=d.Q;d.Q=a(),d.Q.noConflict=function(){return d.Q=e,this}}}(function(){"use strict";function h(a){return function(){return g.apply(a,arguments)}}function q(a){return a===Object(a)}function r(a){return"[object StopIteration]"===p(a)||a instanceof s}function u(a,c){if(b&&c.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(t)){for(var d=[],e=c;e;e=e.source)e.stack&&d.unshift(e.stack);d.unshift(a.stack);var f=d.join("\n"+t+"\n");a.stack=v(f)}}function v(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];y(e)||w(e)||!e||c.push(e)}return c.join("\n")}function w(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function x(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function y(a){var b=x(a);if(!b)return!1;var e=b[0],f=b[1];return e===d&&f>=c&&f<=ia}function z(){if(b)try{throw new Error}catch(b){var a=b.stack.split("\n"),c=a[0].indexOf("@")>0?a[1]:a[2],e=x(c);if(!e)return;return d=e[0],e[1]}}function A(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function B(a){return a instanceof F?a:J(a)?W(a):V(a)}function C(){function g(b){d=b,f.source=b,j(a,function(a,c){B.nextTick(function(){b.promiseDispatch.apply(b,c)})},void 0),a=void 0,c=void 0}var d,a=[],c=[],e=m(C.prototype),f=m(F.prototype);if(f.promiseDispatch=function(b,e,f){var g=i(arguments);a?(a.push(g),"when"===e&&f[1]&&c.push(f[1])):B.nextTick(function(){d.promiseDispatch.apply(d,g)})},f.valueOf=function(){if(a)return f;var b=H(d);return I(b)&&(d=b),b},f.inspect=function(){return d?d.inspect():{state:"pending"}},B.longStackSupport&&b)try{throw new Error}catch(a){f.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(a){d||g(B(a))},e.fulfill=function(a){d||g(V(a))},e.reject=function(a){d||g(U(a))},e.notify=function(a){d||j(c,function(b,c){B.nextTick(function(){c(a)})},void 0)},e}function D(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=C();try{a(b.resolve,b.reject,b.notify)}catch(a){b.reject(a)}return b.promise}function E(a){return D(function(b,c){for(var d=0,e=a.length;d<e;d++)B(a[d]).then(b,c)})}function F(a,b,c){void 0===b&&(b=function(a){return U(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=m(F.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(a){g=U(a)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function G(a,b,c,d){return B(a).then(b,c,d)}function H(a){if(I(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function I(a){return a instanceof F}function J(a){return q(a)&&"function"==typeof a.then}function K(a){return I(a)&&"pending"===a.inspect().state}function L(a){return!I(a)||"fulfilled"===a.inspect().state}function M(a){return I(a)&&"rejected"===a.inspect().state}function R(){N.length=0,O.length=0,Q||(Q=!0)}function S(b,c){Q&&("object"==typeof a&&"function"==typeof a.emit&&B.nextTick.runAfter(function(){-1!==k(O,b)&&(a.emit("unhandledRejection",c,b),P.push(b))}),O.push(b),c&&void 0!==c.stack?N.push(c.stack):N.push("(no stack) "+c))}function T(b){if(Q){var c=k(O,b);-1!==c&&("object"==typeof a&&"function"==typeof a.emit&&B.nextTick.runAfter(function(){var d=k(P,b);-1!==d&&(a.emit("rejectionHandled",N[c],b),P.splice(d,1))}),O.splice(c,1),N.splice(c,1))}}function U(a){var b=F({when:function(b){return b&&T(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return S(b,a),b}function V(a){return F({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},delete:function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return o(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function W(a){var b=C();return B.nextTick(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(a){b.reject(a)}}),b.promise}function X(a){return F({isDef:function(){}},function(c,d){return ba(a,c,d)},function(){return B(a).inspect()})}function Y(a,b,c){return B(a).spread(b,c)}function Z(a){return function(){function b(a,b){var f;if("undefined"==typeof StopIteration){try{f=c[a](b)}catch(a){return U(a)}return f.done?B(f.value):G(f.value,d,e)}try{f=c[a](b)}catch(a){return r(a)?B(a.value):U(a)}return G(f,d,e)}var c=a.apply(this,arguments),d=b.bind(b,"next"),e=b.bind(b,"throw");return d()}}function $(a){B.done(B.async(a)())}function _(a){throw new s(a)}function aa(a){return function(){return Y([this,ca(arguments)],function(b,c){return a.apply(b,c)})}}function ba(a,b,c){return B(a).dispatch(b,c)}function ca(a){return G(a,function(a){var b=0,c=C();return j(a,function(d,e,f){var g;I(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,G(e,function(d){a[f]=d,0==--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function da(a){if(0===a.length)return B.resolve();var b=B.defer(),c=0;return j(a,function(d,e,f){function h(a){b.resolve(a)}function i(){0===--c&&b.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function j(a){b.notify({index:f,value:a})}var g=a[f];c++,G(g,h,i,j)},void 0),b.promise}function ea(a){return G(a,function(a){return a=l(a,B),G(ca(l(a,function(a){return G(a,e,e)})),function(){return a})})}function fa(a){return B(a).allSettled()}function ga(a,b){return B(a).then(void 0,void 0,b)}function ha(a,b){return B(a).nodeify(b)}var b=!1;try{throw new Error}catch(a){b=!!a.stack}var d,s,c=z(),e=function(){},f=function(){function i(){for(var a,c;b.next;)b=b.next,a=b.task,b.task=void 0,c=b.domain,c&&(b.domain=void 0,c.enter()),j(a,c);for(;h.length;)a=h.pop(),j(a);d=!1}function j(a,b){try{a()}catch(a){if(g)throw b&&b.exit(),setTimeout(i,0),b&&b.enter(),a;setTimeout(function(){throw a},0)}b&&b.exit()}var b={task:void 0,next:null},c=b,d=!1,e=void 0,g=!1,h=[];if(f=function(b){c=c.next={task:b,domain:g&&a.domain,next:null},d||(d=!0,e())},"object"==typeof a&&"[object process]"===a.toString()&&a.nextTick)g=!0,e=function(){a.nextTick(i)};else if("function"==typeof setImmediate)e="undefined"!=typeof window?setImmediate.bind(window,i):function(){setImmediate(i)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel;k.port1.onmessage=function(){e=l,k.port1.onmessage=i,i()};var l=function(){k.port2.postMessage(0)};e=function(){setTimeout(i,0),l()}}else e=function(){setTimeout(i,0)};return f.runAfter=function(a){h.push(a),d||(d=!0,e())},f}(),g=Function.call,i=h(Array.prototype.slice),j=h(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;c<d;c++)c in this&&(b=a(b,this[c],c));return b}),k=h(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),l=h(Array.prototype.map||function(a,b){var c=this,d=[];return j(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),m=Object.create||function(a){function b(){}return b.prototype=a,new b},n=h(Object.prototype.hasOwnProperty),o=Object.keys||function(a){var b=[];for(var c in a)n(a,c)&&b.push(c);return b},p=h(Object.prototype.toString);s="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var t="From previous event:";B.resolve=B,B.nextTick=f,B.longStackSupport=!1,"object"==typeof a&&a&&a.env&&a.env.Q_DEBUG&&(B.longStackSupport=!0),B.defer=C,C.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):arguments.length>2?a.resolve(i(arguments,1)):a.resolve(c)}},B.Promise=D,B.promise=D,D.race=E,D.all=ca,D.reject=U,D.resolve=B,B.passByCopy=function(a){return a},F.prototype.passByCopy=function(){return this},B.join=function(a,b){return B(a).join(b)},F.prototype.join=function(a){return B([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},B.race=E,F.prototype.race=function(){return this.then(B.race)},B.makePromise=F,F.prototype.toString=function(){return"[object Promise]"},F.prototype.then=function(a,b,c){function g(b){try{return"function"==typeof a?a(b):b}catch(a){return U(a)}}function h(a){if("function"==typeof b){u(a,d);try{return b(a)}catch(a){return U(a)}}return U(a)}function i(a){return"function"==typeof c?c(a):a}var d=this,e=C(),f=!1;return B.nextTick(function(){d.promiseDispatch(function(a){f||(f=!0,e.resolve(g(a)))},"when",[function(a){f||(f=!0,e.resolve(h(a)))}])}),d.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=i(a)}catch(a){if(c=!0,!B.onerror)throw a;B.onerror(a)}c||e.notify(b)}]),e.promise},B.tap=function(a,b){return B(a).tap(b)},F.prototype.tap=function(a){return a=B(a),this.then(function(b){return a.fcall(b).thenResolve(b)})},B.when=G,F.prototype.thenResolve=function(a){return this.then(function(){return a})},B.thenResolve=function(a,b){return B(a).thenResolve(b)},F.prototype.thenReject=function(a){return this.then(function(){throw a})},B.thenReject=function(a,b){return B(a).thenReject(b)},B.nearer=H,B.isPromise=I,B.isPromiseAlike=J,B.isPending=K,F.prototype.isPending=function(){return"pending"===this.inspect().state},B.isFulfilled=L,F.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},B.isRejected=M,F.prototype.isRejected=function(){return"rejected"===this.inspect().state};var N=[],O=[],P=[],Q=!0;B.resetUnhandledRejections=R,B.getUnhandledReasons=function(){return N.slice()},B.stopUnhandledRejectionTracking=function(){R(),Q=!1},R(),B.reject=U,B.fulfill=V,B.master=X,B.spread=Y,F.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},B.async=Z,B.spawn=$,B.return=_,B.promised=aa,B.dispatch=ba,F.prototype.dispatch=function(a,b){var c=this,d=C();return B.nextTick(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},B.get=function(a,b){return B(a).dispatch("get",[b])},F.prototype.get=function(a){return this.dispatch("get",[a])},B.set=function(a,b,c){return B(a).dispatch("set",[b,c])},F.prototype.set=function(a,b){return this.dispatch("set",[a,b])},B.del=B.delete=function(a,b){return B(a).dispatch("delete",[b])},F.prototype.del=F.prototype.delete=function(a){return this.dispatch("delete",[a])},B.mapply=B.post=function(a,b,c){return B(a).dispatch("post",[b,c])},F.prototype.mapply=F.prototype.post=function(a,b){return this.dispatch("post",[a,b])},B.send=B.mcall=B.invoke=function(a,b){return B(a).dispatch("post",[b,i(arguments,2)])},F.prototype.send=F.prototype.mcall=F.prototype.invoke=function(a){return this.dispatch("post",[a,i(arguments,1)])},B.fapply=function(a,b){return B(a).dispatch("apply",[void 0,b])},F.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},B.try=B.fcall=function(a){return B(a).dispatch("apply",[void 0,i(arguments,1)])},F.prototype.fcall=function(){return this.dispatch("apply",[void 0,i(arguments)])},B.fbind=function(a){var b=B(a),c=i(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(i(arguments))])}},F.prototype.fbind=function(){var a=this,b=i(arguments);return function(){return a.dispatch("apply",[this,b.concat(i(arguments))])}},B.keys=function(a){return B(a).dispatch("keys",[])},F.prototype.keys=function(){return this.dispatch("keys",[])},B.all=ca,F.prototype.all=function(){return ca(this)},B.any=da,F.prototype.any=function(){return da(this)},B.allResolved=A(ea,"allResolved","allSettled"),F.prototype.allResolved=function(){return ea(this)},B.allSettled=fa,F.prototype.allSettled=function(){return this.then(function(a){return ca(l(a,function(a){function b(){return a.inspect()}return a=B(a),a.then(b,b)}))})},B.fail=B.catch=function(a,b){return B(a).then(void 0,b)},F.prototype.fail=F.prototype.catch=function(a){return this.then(void 0,a)},B.progress=ga,F.prototype.progress=function(a){return this.then(void 0,void 0,a)},B.fin=B.finally=function(a,b){return B(a).finally(b)},F.prototype.fin=F.prototype.finally=function(a){return a=B(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},B.done=function(a,b,c,d){return B(a).done(b,c,d)},F.prototype.done=function(b,c,d){var e=function(a){B.nextTick(function(){if(u(a,f),!B.onerror)throw a;B.onerror(a)})},f=b||c||d?this.then(b,c,d):this;"object"==typeof a&&a&&a.domain&&(e=a.domain.bind(e)),f.then(void 0,e)},B.timeout=function(a,b,c){return B(a).timeout(b,c)},F.prototype.timeout=function(a,b){var c=C(),d=setTimeout(function(){b&&"string"!=typeof b||(b=new Error(b||"Timed out after "+a+" ms"),b.code="ETIMEDOUT"),c.reject(b)},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},B.delay=function(a,b){return void 0===b&&(b=a,a=void 0),B(a).delay(b)},F.prototype.delay=function(a){return this.then(function(b){var c=C();return setTimeout(function(){c.resolve(b)},a),c.promise})},B.nfapply=function(a,b){return B(a).nfapply(b)},F.prototype.nfapply=function(a){var b=C(),c=i(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},B.nfcall=function(a){var b=i(arguments,1);return B(a).nfapply(b)},F.prototype.nfcall=function(){var a=i(arguments),b=C();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},B.nfbind=B.denodeify=function(a){var b=i(arguments,1);return function(){var c=b.concat(i(arguments)),d=C();return c.push(d.makeNodeResolver()),B(a).fapply(c).fail(d.reject),d.promise}},F.prototype.nfbind=F.prototype.denodeify=function(){var a=i(arguments);return a.unshift(this),B.denodeify.apply(void 0,a)},B.nbind=function(a,b){var c=i(arguments,2);return function(){function f(){return a.apply(b,arguments)}var d=c.concat(i(arguments)),e=C();return d.push(e.makeNodeResolver()),B(f).fapply(d).fail(e.reject),e.promise}},F.prototype.nbind=function(){var a=i(arguments,0);return a.unshift(this),B.nbind.apply(void 0,a)},B.nmapply=B.npost=function(a,b,c){return B(a).npost(b,c)},F.prototype.nmapply=F.prototype.npost=function(a,b){var c=i(b||[]),d=C();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},B.nsend=B.nmcall=B.ninvoke=function(a,b){var c=i(arguments,2),d=C();return c.push(d.makeNodeResolver()),B(a).dispatch("post",[b,c]).fail(d.reject),d.promise},F.prototype.nsend=F.prototype.nmcall=F.prototype.ninvoke=function(a){var b=i(arguments,1),c=C();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},B.nodeify=ha,F.prototype.nodeify=function(a){if(!a)return this;this.then(function(b){B.nextTick(function(){a(null,b)})},function(b){B.nextTick(function(){a(b)})})},B.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ia=z();return B})}).call(this,a("_process"))},{_process:15}],88:[function(a,b,c){"use strict";var d=function(a){var b={};b.options={convertStringUrls:!0},b.urlRegEx=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;var c=function(d){if(d){if(Array.isArray(d))return d.map(function(a){return c(a)});if("object"==typeof d&&d.interfaceName)return d;if("string"==typeof d)return b.options.convertStringUrls&&b.urlRegEx.test(d)?a.createNamedNode(d):a.createLiteral(d);if("number"==typeof d)return a.createLiteral(d+"");throw"unknown type"}},d=function(a,b,e){return Array.isArray(a)?a.map(function(a){return d(a,b,e)}):(a=c(a),a.graph=b,a.graphIri=e,a)},e=function(a,b){return b.some(function(b){return b.equals(a)})},f=function(a){if(a)return Array.isArray(a)?a:[a]};b.Graph=function(a,d){if(!(this instanceof b.Graph))return new b.Graph(a,d);this.context=c(f(d));var h=function(b,d,g,h){var i=[];return d=c(f(d)),a.forEach(function(a){(null===b||e(a.subject,b))&&(null===d||e(a.predicate,d))&&(null===g||e(a.object,g))&&i.push(a[h])}),i};this.graph=function(){return a},this.node=function(c){return b.Graph(a,c)},this.in=function(c){return b.Graph(a,h(null,c,this.context,"subject"))},this.out=function(c){return b.Graph(a,h(this.context,c,null,"object"))},this.nodes=function(){return this.context?this.context:[]},this.literal=function(){if(this.context)return this.context.map(function(a){return a.toString()})},this.removeIn=function(b){return b&&(b=c(f(b))),this.nodes().forEach(function(c){b?b.forEach(function(b){a.removeMatches(null,b,c)}):a.removeMatches(null,null,c)}),this},this.removeOut=function(b){return b&&(b=c(f(b))),this.nodes().forEach(function(c){b?b.forEach(function(b){a.removeMatches(c,b,null)}):a.removeMatches(c,null,null)}),this},this.toArray=function(){return this.nodes().map(this.node)},this.forEach=function(a){return this.toArray().forEach(a)},this.map=function(a){return this.toArray().map(a)},this.toString=function(){return this.literal().join()}},b.Store=function(a,c){if(!(this instanceof b.Store))return new b.Store(a,c);this.context=f(c),this.store=function(){return a},this.graphs=function(){var a=[];return this.nodes().forEach(function(b){-1===a.indexOf(b.graph)&&a.push(b.graph)}),a},this.node=function(c,e,f){return e=e||c.graphIri||c,a.graph(e).then(function(g){return f?Promise.resolve(f(b.Store(a,d(c,g,e)))):b.Store(a,d(c,g,e))})},this.in=function(c){var e=[];return this.nodes().forEach(function(a){e=e.concat(b.Graph(a.graph,a).in(c).nodes().map(function(b){return d(b,a.graph,a.graphIri)}))}),b.Store(a,e)},this.out=function(c){var e=[];return this.nodes().forEach(function(a){e=e.concat(b.Graph(a.graph,a).out(c).nodes().map(function(b){return d(b,a.graph,a.graphIri)}))}),b.Store(a,e)},this.jump=function(c){return Promise.all(this.nodes().map(function(b){return a.graph(b.nominalValue).then(function(a){return d(b,a,b.nominalValue)})})).then(function(d){return c?Promise.resolve(c(b.Store(a,d))):b.Store(a,d)})},this.nodes=function(){return this.context?this.context:[]},this.literal=function(){if(this.context)return this.context.map(function(a){return a.toString()})},this.toArray=function(){return this.nodes().map(function(c){return b.Store(a,c)})},this.forEach=function(a){return this.toArray().forEach(a)},this.map=function(a){return this.toArray().map(a)},this.toString=function(){return this.literal().join()}},a.cf=b};b.exports=d},{}],89:[function(a,b,c){"use strict";var d=function(a){var b={};this.graph=function(c,d){var e=null;void 0===c?(e=a.createGraph(),this.forEach(function(a){e.addAll(a)})):c in b&&(e=b[c]),d(e)},this.match=function(a,b,c,d,e,f){this.graph(a,function(a){e(a?a.match(b,c,d,f):null)})},this.add=function(c,d,e){b[c]=a.createGraph(),b[c].addAll(d),e(d)},this.merge=function(a,c,d){a in b?b[a].addAll(c):b[a]=c,d(c)},this.remove=function(c,d,e){c in b&&(b[c]=a.Graph.difference(b[c],d)),e(!0)},this.removeMatches=function(a,c,d,e,f){a in b&&b[a].removeMatches(c,d,e),f(!0)},this.delete=function(a,c){a in b&&delete b[a],c(!0)},this.forEach=function(a){Object.keys(b).forEach(function(c){a(b[c],c)})}};b.exports=function(a){a.InMemoryStore=d.bind(null,a),a.createStore=function(){return new a.InMemoryStore}}},{}],90:[function(a,b,c){"use strict";var d=a("jsonld"),e=a("jsonld/js/rdfa"),f=function(a,b){"importPrefixMap"in(b=b||{})||(b.importPrefixMap=!0);var c=function(a,b,c){d.expand(a,{base:b},function(a,b){if(a)return c(null,a.message);d.flatten(b,{},function(a,b){return a?c(null,a.message):"@graph"in b?void c(b["@graph"]):c(null)})})},e=function(a){return a=a||[],Array.isArray(a)?a:[a]};this.process=function(d,f,g,h,i){"string"==typeof d&&(d=JSON.parse(d)),g=g||"",h=h||function(){return!0},i=i||function(){};var j=function(b){var c=null,d=null;return"@type"in b&&(c=l(b["@type"])),"@language"in b&&(d=b["@language"]),a.createLiteral(b["@value"],d,c)},k={},l=function(b){return b in k?k[b]:b?0===b.indexOf("_:")?k[b]=a.createBlankNode():k[b]=a.createNamedNode(b):a.createBlankNode()},m=function(b,c,d){var e=a.createTriple(b,c,d);h(e)&&f(e)},n=function(b){var c=b["@id"];e(b["@type"]).forEach(function(b){m(l(c),l(a.ns.type),l(b))});for(var f in b)0!==f.indexOf("@")&&o(c,f,e(b[f]))},o=function(a,b,c){c.forEach(function(c){m(l(a),l(b),p(c))})},p=function(b){return"string"==typeof b?a.createLiteral(b):"@id"in b?l(b["@id"]):"@list"in b?q(b["@list"]):j(b)},q=function(a){var d,b=l(),c=b;return a.forEach(function(b,e){d=e!==a.length-1?l():l("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"),m(c,l("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),l(b["@id"])),m(c,l("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),d),c=d}),b};if(b.importPrefixMap&&"@context"in d&&"object"==typeof d["@context"]){var r=d["@context"];Object.keys(r).forEach(function(b){"@"!==b.slice(1)&&"string"==typeof r[b]&&(a.prefixes[b]=r[b])})}return c(d,g,function(a,b){return b?i(!1,b):a?(a.forEach(function(a){n(a)}),void i(!0)):i(!0)}),!0},this.parse=function(b,c,d,e,f){return f=f||a.createGraph(),this.process(b,function(a){f.add(a)},d,e,function(a,b){c(a?f:null,b)})}},g=function(a){var b=new f(a);this.parse=function(c,f,g,h,i){if("string"==typeof c)try{c=a.parseHtml(c)}catch(a){return f(null,a),!1}return i=i||a.createGraph(),c.location={href:g},e.attach(c),d.fromRDF(c.data,{format:"rdfa-api"},function(a,c){a?f(null,a):b.process(c,function(a){i.add(a)},g,h,function(a,b){f(a?i:null,b)})}),!0}};b.exports=function(a){a.JsonLdParser=f.bind(null,a);var b=new f(a);a.parseJsonLd=b.parse.bind(b),a.utils.mimeTypeParserMap["application/ld+json"]=a.parseJsonLd,a.RdfaParser=g.bind(null,a);var c=new g(a);a.parseRdfa=c.parse.bind(c)}},{jsonld:74,"jsonld/js/rdfa":75}],91:[function(a,b,c){"use strict";var e=(a("jsonld"),function(a){var b=a.createNamedNode("http://www.w3.org/2001/XMLSchema#string");this.serialize=function(a,c){c=c||function(){};var d=[],e={},f=function(a){var b=a.valueOf();return void 0===e[b]&&("BlankNode"==a.interfaceName?d.push({"@id":"_:"+b}):d.push({"@id":b}),e[b]=d.length-1),e[b]},g=function(a){return"NamedNode"==a.interfaceName?{"@id":a.valueOf()}:"BlankNode"==a.interfaceName?{"@id":"_:"+a.valueOf()}:a.language?{"@language":a.language,"@value":a.valueOf()}:"datatype"in a&&a.datatype&&!b.equals(a.datatype)?{"@type":a.datatype.valueOf(),"@value":a.valueOf()}:a.valueOf()};return a.forEach(function(a){var b=f(a.subject),c=a.predicate.valueOf();"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"==c?(void 0===d[b]["@type"]&&(d[b]["@type"]=[]),d[b]["@type"].push(a.object.valueOf())):void 0===d[b][c]?d[b][c]=g(a.object):(Array.isArray(d[b][c])||(d[b][c]=[d[b][c]]),d[b][c].push(g(a.object)))}),c(d),d}});b.exports=function(a){a.JsonLdSerializer=e.bind(null,a);var b=new e(a);a.serializeJsonLd=b.serialize.bind(b)}},{jsonld:74}],92:[function(a,b,c){"use strict";var d=function(a,b){var c=this;b=b||{},c.parsers=b.parsers||d.defaultParsers(a),c.serializers=b.serializers||d.defaultSerializers(a),c.defaultParser=b.defaultParser||"text/turtle",c.defaultSerializer=b.defaultSerializer||"text/turtle",c.defaultPatchSerializer=b.defaultPatchSerializer||b.defaultSerializer||"text/turtle",c.request=b.request||a.defaultRequest;var e=function(){var a=null;for(var b in c.parsers)a?a+=", "+b:a=b;return a},f=function(a){return a>=200&&a<300};c.graph=function(a,b,d){d=d||{},c.request("GET",a,{Accept:e()},null,function(e,g,h,i){if(i)return b(null,"request error: "+i);if(!f(e)&&0!==e)return b(null,"status code error: "+e);var j=c.defaultParser;"content-type"in g&&g["content-type"]in c.parsers&&(j=g["content-type"]),"forceContentType"in d&&d.forceContentType in c.parsers&&(j=d.forceContentType),c.parsers[j](h,function(a,c){if(c)return b(null,"parser error: "+c);"useEtag"in d&&d.useEtag&&"etag"in g&&(a.etag=g.etag),b(a)},a)})},c.match=function(a,b,d,e,f,g){c.graph(a,function(a,c){if(c)return f(null,c);f(a.match(b,d,e,g))})},c.add=function(a,b,d,e){var g="PUT",h=c.defaultSerializer,i={};e=e||{},i["Content-Type"]=h,"method"in e&&(g=e.method),"etag"in e&&(i["If-Match"]=e.etag),"useEtag"in e&&e.useEtag&&"etag"in b&&(i["If-Match"]=b.etag),c.serializers[h](b,function(e,h){if(h)return d(null,h);c.request(g,a,i,e,function(a,c,e,g){return g?d(null,g):f(a)?void d(b):d(null,"status code error: "+a)})})},c.merge=function(a,b,d,e){var g=c.defaultPatchSerializer,h={};e=e||{},h["Content-Type"]=g,"etag"in e&&(h["If-Match"]=e.etag),"useEtag"in e&&e.useEtag&&"etag"in b&&(h["If-Match"]=b.etag),c.serializers[g](b,function(e,g){if(g)return d(null,g);c.request("PATCH",a,h,e,function(a,c,e,g){return g?d(null,g):f(a)?void d(b):d(null,"status code error: "+a)})})},c.remove=function(a,b,c){},c.removeMatches=function(a,b,c,d,e){},c.delete=function(a,b){c.request("DELETE",a,{},null,function(a,c,d,e){return e?b(!1,"request error: "+e):f(a)?void b(!0):b(!1,"status code error: "+a)})}};d.serializeSparqlUpdate=function(a,b,c){a.serializeNTriples(b,function(a,b){if(b)return c(null,b);c("INSERT DATA { "+a+" }")})},d.defaultParsers=function(a){return{"application/ld+json":a.parseJsonLd,"application/n-triples":a.parseTurtle,"text/turtle":a.parseTurtle}},d.defaultSerializers=function(a){return{"application/ld+json":a.serializeJsonLd,"application/n-triples":a.serializeNTriples,"application/sparql-update":d.serializeSparqlUpdate.bind(null,a),"text/turtle":a.serializeNTriples}},b.exports=function(a){a.LdpStore=d.bind(null,a)}},{}],93:[function(a,b,c){"use strict";var d=a("./uri-resolver"),e=function(){this.blankCounter=0,this.vocabularies=[{namespaceURI:"http://schema.org/",isMember:function(a){return 0===a.indexOf(this.namespaceURI)},getProperty:function(a){return this.namespaceURI+a}}]};e.prototype=new d,e.prototype.constructor=e,e.typeNode=rdf.createNamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),e.integerNode=rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#integer"),e.doubleNode=rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#double"),e.timeNode=rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#time"),e.dateTimeNode=rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#dateTime"),e.durationNode=rdf.createNamedNode("http://www.w3.org/2001/XMLSchema#duration"),e.absoluteURIRE=/[\w\_\-]+:\S+/,e.prototype.resolve=function(a){return a},e.trim=function(a){return a=a||"",a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},e.tokenize=function(a){return e.trim(a).split(/\s+/).reduce(function(a,b){return b&&a.push(b),a},[])},e.prototype.getVocabulary=function(a){for(var b=0;b<this.vocabularies.length;b++)if(this.vocabularies[b].isMember(a))return this.vocabularies[b];var c=function(a){return{namespaceURI:a,getProperty:function(a){return this.namespaceURI+a}}},d=a.indexOf("#");if(d>=0)return c(a.substring(0,d+1));var e=a.lastIndexOf("/");return c(e>=0?a.substring(0,e+1):a)},e.prototype.getProperty=function(a,b){return e.absoluteURIRE.exec(a)?a:b?b.getProperty(a):base.resolve("#"+a)},e.valueMappings={link:function(a,b){return rdf.createNamedNode(b.resolve(a.getAttribute("href")))},media:function(a,b){return rdf.createNamedNode(b.resolve(a.getAttribute("src")))},meta:function(a){var b=a.getAttribute("content"),c=a.getAttribute("lang");return rdf.createLiteral(b,c||null)},number:function(a){var b=a.getAttribute("value");return b===parseInt(b).toString()?rdf.createLiteral(b,null,e.integerNode):b===parseFloat(b).toString()?rdf.createLiteral(b,null,e.doubleNode):rdf.createLiteral(b)},object:function(a,b){return rdf.createNamedNode(b.resolve(a.getAttribute("data")))},time:function(a){var b=a.getAttribute("datetime"),c=a.getAttribute("lang");return 9===b.length?rdf.createLiteral(b,null,e.timeNode):20===b.length?rdf.createLiteral(b,null,e.dateTimeNode):"P"===b.substr(0,1)?rdf.createLiteral(b,null,e.durationNode):rdf.createLiteral(b,c||null)}},e.valueMappings.a=e.valueMappings.link,e.valueMappings.area=e.valueMappings.a,e.valueMappings.audio=e.valueMappings.media,e.valueMappings.data=e.valueMappings.number,e.valueMappings.embed=e.valueMappings.media,e.valueMappings.iframe=e.valueMappings.media,e.valueMappings.img=e.valueMappings.media,e.valueMappings.meter=e.valueMappings.number,e.valueMappings.source=e.valueMappings.media,e.valueMappings.track=e.valueMappings.media,e.valueMappings.video=e.valueMappings.media,e.prototype.getValue=function(a,b){var c=e.valueMappings[a.localName];return c?c(a,b):rdf.createLiteral(a.textContent)},e.prototype.process=function(a,b,c){var d=this;a.nodeType===a.DOCUMENT_NODE&&(a=a.documentElement),c=d.parseURI(c);var f=function(a,b,c,d){return{memory:a||{},subject:b,type:c,vocabulary:d}},g=function(a,g){for(var h,j,k,l,m,n,o=a.item.firstChild;o;o=o.nextSibling)o.nodeType===o.ELEMENT_NODE&&(j=o.getAttribute("itemprop"),k=o.hasAttribute("itemscope"),h=f(a.context.memory,a.context.subject,g,a.context.vocabulary),m=i({item:o,context:h}),j&&e.tokenize(j).forEach(function(f){l=e.absoluteURIRE.test(f)?rdf.createNamedNode(f):h.vocabulary?rdf.createNamedNode(h.vocabulary+f):rdf.createNamedNode(c.resolve("#"+f)),n=d.getValue(o,c),k&&(n=m),b(rdf.createTriple(a.context.subject,l,n))}))},h=function(a){var h,i,f=a.item.getAttribute("itemtype");e.tokenize(f).forEach(function(d){e.absoluteURIRE.test(d)&&(h||(h=d),b(rdf.createTriple(a.context.subject,e.typeNode,rdf.createNamedNode(c.resolve(d)))))}),h||(h=a.context.type),h&&(i=d.getVocabulary(h),i=i?i.namespaceURI:null),i&&(a.context.vocabulary=i),g(a,h)},i=function(a){var b=a.item.getAttribute("id"),d=a.item.getAttribute("itemid"),f=a.item.getAttribute("itemref"),g=a.item.hasAttribute("itemscope");return b in a.context.memory?a.context.memory[b].forEach(function(b){h({item:a.item,context:b})}):(g&&(a.context.subject=d?rdf.createNamedNode(c.resolve(d)):rdf.createBlankNode(),e.tokenize(f).forEach(function(b){b in a.context.memory||(a.context.memory[b]=[]),a.context.memory[b].push(a.context)})),h(a)),a.context.subject};i({item:a,context:f(null,null,null,null)})};var f=function(a){var b=new e;this.process=function(c,d,e,f,g){return e=e||"",f=f||function(){return!0},g=g||function(){},b.process(a.parseHtml(c,e),d,e),g(!0),!0},this.parse=function(b,c,d,e,f){return f=f||a.createGraph(),this.process(b,function(a){f.add(a)},d,e,function(a){c(a?f:null)})}};b.exports=function(a){a.MicrodataParser=f.bind(null,a);var b=new f(a);a.parseMicrodata=b.parse.bind(b)}},{"./uri-resolver":102}],94:[function(a,b,c){"use strict";var d=function(a){this.serialize=function(b,c){c=c||function(){};var d=a.Graph.toString(b);return c(d),d}};b.exports=function(a){a.NTriplesSerializer=d.bind(null,a);var b=new d(a);a.serializeNTriples=b.serialize.bind(b)}},{}],95:[function(a,b,c){"use strict";var d=function(a,b){return function(){var c=arguments;return new b(function(b,d){a(c,function(a,c){c?d(c):b(a)})})}},e=function(a,b){this.process=d(function(a,c){b.process(a[0],a[1],a[2],a[3],c)},a),this.parse=d(function(a,c){b.parse(a[0],c,a[1],a[2],a[3])},a),this.parser=function(){return b}},f=function(a,b){this.serialize=d(function(a,c){b.serialize(a[0],c)},a),this.serializer=function(){return b}},g=function(a,b){this.graph=d(function(a,c){b.graph(a[0],c)},a),this.match=d(function(a,c){b.match(a[0],a[1],a[2],a[3],c,a[5])},a),this.add=d(function(a,c){b.add(a[0],a[1],c)},a),this.merge=d(function(a,c){b.merge(a[0],a[1],c)},a),this.remove=d(function(a,c){b.remove(a[0],a[1],c)},a),this.removeMatches=d(function(a,c){b.removeMatches(a[0],a[1],a[2],a[3],c)},a),this.delete=d(function(a,c){b.delete(a[0],c)},a),this.store=function(){return b}},h=function(a,b){return d(function(a,c){b(a[0],c,a[1],a[2],a[3])},a)};b.exports=function(a){a.promise={},a.promise.Parser=e.bind(null,a.Promise),a.promise.Serializer=f.bind(null,a.Promise),a.promise.Store=g.bind(null,a.Promise),a.promise.parse=h.bind(null,a.Promise)}},{}],96:[function(a,b,c){"use strict";var d=function(a){var b=this,c=a.rdf;b.graph=function(b,c){a.graph(b,function(a,b){c(a?b:null)})},b.match=function(a,c,d,e,f,g){b.graph(a,function(a){f(a?a.match(c,d,e,g):null)})},b.add=function(b,c,d){a.clear(b,function(){a.insert(c,b,function(a){a?d(c):d(null,"couldn'n insert graph")})})},b.merge=function(b,c,d){a.insert(c,b,function(a){a?d(c):d(null,"couldn'n insert graph")})},b.remove=function(a,d,e){b.graph(a,function(f){var g=c.Graph.difference(f,d);b.add(a,g,function(a){e(!!a)})})},b.removeMatches=function(a,c,d,e,f){b.graph(a,function(g){var h=g.removeMatches(c,d,e);b.add(a,h,function(a){f(!!a)})})},b.delete=function(b,c){a.clear(b,function(a){a?c(!0):c(null,"couldn'n delete graph")})}};b.exports=function(a){a.RdfstoreStore=d}},{}],97:[function(a,b,c){var d=function(a){var b={};b.ns={RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"},b.nodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},this.frameFactory=function(a,c,d){return{NODE:1,ARC:2,parent:c,parser:a,store:a.store,element:d,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(a,b){b=e(b,this.base),this.node=this.store.sym(b),this.nodeType=a},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),null!=this.parent.rdfid){var a=this.store.sym(e("#"+this.parent.rdfid,this.base));this.store.add(a,this.store.sym(b.ns.RDF+"type"),this.store.sym(b.ns.RDF+"Statement"),this.parser.why),this.store.add(a,this.store.sym(b.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(a,this.store.sym(b.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(a,this.store.sym(b.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return null!=this.parent&&null!=this.parent.parent&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(a){this.addSymbol(this.NODE,a),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(a){null!=a?null!=this.parser.bnodes[a]?this.node=this.parser.bnodes[a]:this.node=this.parser.bnodes[a]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(a){a===b.ns.RDF+"li"&&(a=b.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,a)},addLiteral:function(a){this.parent.datatype?this.node=this.store.literal(a,"",this.store.sym(this.parent.datatype)):this.node=this.store.literal(a,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}},this.getAttributeNodeNS=function(a,b,c){var d=null;if(a.getAttributeNodeNS)d=a.getAttributeNodeNS(b,c);else for(var f,e=a.attributes,h=0;h<e.length;++h)if(f=e[h],f.namespaceURI===b&&(f.prefix?f.prefix+":"+c:c)===f.nodeName){d=f;break}return d},this.store=a,this.bnodes={},this.why=null,this.reify=!1,this.parse=function(a,c,d){var e=a.childNodes;this.cleanParser();var f;if(a.nodeType===b.nodeType.DOCUMENT){for(var g=0;g<e.length;g++)if(e[g].nodeType===b.nodeType.ELEMENT){f=e[g];break}}else{if(a.nodeType!==b.nodeType.ELEMENT)throw new Error("RDFParser: can't find root in "+c+". Halting. ");f=a}this.why=d;var h=this.frameFactory(this);return this.base=c,h.base=c,h.lang="",this.parseDOM(this.buildFrame(h,f)),!0},this.parseDOM=function(a){for(var c,d=function(a){var b="";if(null==a.namespaceURI)throw new Error("RDF/XML syntax error: No namespace for "+a.localName+" in "+this.base);return a.namespaceURI&&(b+=a.namespaceURI),a.localName?b+=a.localName:a.nodeName&&(a.nodeName.indexOf(":")>=0?b+=a.nodeName.split(":")[1]:b+=a.nodeName),b}.bind(this),f=!0;a.parent;){var g=a.element,h=g.attributes;if(g.nodeType===b.nodeType.TEXT||g.nodeType===b.nodeType.CDATA_SECTION)a.parent.nodeType==a.NODE&&(a.addArc(b.ns.RDF+"value"),a=this.buildFrame(a)),a.addLiteral(g.nodeValue);else if(d(g)!==b.ns.RDF+"RDF")if(a.parent&&a.parent.collection&&(a.addCollectionArc(),a=this.buildFrame(a,a.element),a.parent.element=null),a.parent&&a.parent.nodeType&&a.parent.nodeType!==a.ARC){a.addArc(d(g)),this.reify&&(c=this.getAttributeNodeNS(g,b.ns.RDF,"ID"))&&(a.rdfid=c.nodeValue,g.removeAttributeNode(c));var m=this.getAttributeNodeNS(g,b.ns.RDF,"parseType"),n=this.getAttributeNodeNS(g,b.ns.RDF,"datatype");if(n&&(a.datatype=n.nodeValue,g.removeAttributeNode(n)),m){var o=m.nodeValue;"Literal"===o?(a.datatype=b.ns.RDF+"XMLLiteral",a=this.buildFrame(a),a.addLiteral(g),f=!1):"Resource"===o?(a=this.buildFrame(a,a.element),a.parent.element=null,a.addBNode()):"Collection"===o&&(a=this.buildFrame(a,a.element),a.parent.element=null,a.addCollection()),g.removeAttributeNode(m)}if(0!==h.length){var p=this.getAttributeNodeNS(g,b.ns.RDF,"resource"),q=this.getAttributeNodeNS(g,b.ns.RDF,"nodeID");a=this.buildFrame(a),p?(a.addNode(p.nodeValue),g.removeAttributeNode(p)):q?(a.addBNode(q.nodeValue),g.removeAttributeNode(q)):a.addBNode();for(var r=h.length-1;r>=0;r--){var s=this.buildFrame(a);s.addArc(d(h[r])),d(h[r])===b.ns.RDF+"type"?this.buildFrame(s).addNode(h[r].nodeValue):this.buildFrame(s).addLiteral(h[r].nodeValue)}}else 0===g.childNodes.length&&this.buildFrame(a).addLiteral("")}else{var i=this.getAttributeNodeNS(g,b.ns.RDF,"about");if(c=this.getAttributeNodeNS(g,b.ns.RDF,"ID"),i&&c)throw new Error("RDFParser: "+g.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!i&&c)a.addNode("#"+c.nodeValue),g.removeAttributeNode(c);else if(null==i&&null==c){var j=this.getAttributeNodeNS(g,b.ns.RDF,"nodeID");j?(a.addBNode(j.nodeValue),g.removeAttributeNode(j)):a.addBNode()}else a.addNode(i.nodeValue),g.removeAttributeNode(i);var k=this.getAttributeNodeNS(g,b.ns.RDF,"type");b.ns.RDF+"Description"!==d(g)&&(k={nodeValue:d(g)}),null!=k&&(this.store.add(a.node,this.store.sym(b.ns.RDF+"type"),this.store.sym(e(k.nodeValue,a.base)),this.why),k.nodeName&&g.removeAttributeNode(k));for(var l=h.length-1;l>=0;l--)this.store.add(a.node,this.store.sym(d(h[l])),this.store.literal(h[l].nodeValue,a.lang),this.why)}for(g=a.element;a.parent;){for(var t=a;null==g;)a=a.parent,g=a.element;var u=g.childNodes&&g.childNodes[a.lastChild];if(u&&f){if((u.nodeType===b.nodeType.ELEMENT||u.nodeType===b.nodeType.TEXT||u.nodeType===b.nodeType.CDATA_SECTION)&&(u.nodeType!==b.nodeType.TEXT&&u.nodeType!==b.nodeType.CDATA_SECTION||1===g.childNodes.length)){a.lastChild++,a=this.buildFrame(t,g.childNodes[a.lastChild-1]);break}a.lastChild++}else{if(a.terminateFrame(),!(a=a.parent))break;g=a.element,f=!0}}}},this.cleanParser=function(){this.bnodes={},this.why=null},this.buildFrame=function(a,c){var d=this.frameFactory(this,a,c);if(a&&(d.base=a.base,d.lang=a.lang),!c||c.nodeType===b.nodeType.TEXT||c.nodeType===b.nodeType.CDATA_SECTION)return d;var f=c.attributes,g=c.getAttributeNode("xml:base");null!=g&&(d.base=g.nodeValue,c.removeAttribute("xml:base"));var h=c.getAttributeNode("xml:lang");null!=h&&(d.lang=h.nodeValue,c.removeAttribute("xml:lang"));for(var i=f.length-1;i>=0;i--)if("xml"===f[i].nodeName.substr(0,3)){if("xmlns:"===f[i].name.slice(0,6)){var j=f[i].nodeValue;this.base&&(j=e(j,this.base)),this.store.setPrefixForURI(f[i].name.slice(6),j)}c.removeAttributeNode(f[i])}return d}},e=function(a,b){var c,d,e,f,h,i;if(d=b.indexOf("#"),d>0&&(b=b.slice(0,d)),0===a.length)return b;if(0===a.indexOf("#"))return b+a;if(a.indexOf(":")>=0)return a;if(c=b.indexOf(":"),0===b.length)return a;if(c<0)return alert("Invalid base: "+b+" in join with given: "+a),a;if(e=b.slice(0,+c+1||9e9),0===a.indexOf("//"))return e+a;if(b.indexOf("//",c)===c+1){if((f=b.indexOf("/",c+3))<0)return b.length-c-3>0?b+"/"+a:e+a}else if((f=b.indexOf("/",c+1))<0)return b.length-c-1>0?b+"/"+a:e+a;if(0===a.indexOf("/"))return b.slice(0,f)+a;if(i=b.slice(f),(h=i.lastIndexOf("/"))<0)return e+a;for(h>=0&&h<i.length-1&&(i=i.slice(0,+h+1||9e9)),i+=a;i.match(/[^\/]*\/\.\.\//);)i=i.replace(/[^\/]*\/\.\.\//,"");return i=i.replace(/\.\//g,""),i=i.replace(/\/\.$/,"/"),b.slice(0,f)+i},f=function(a){this.process=function(b,c,e,f,g){"string"==typeof b&&(b=a.parseXml(b)),e=e||"",f=f||function(){return!0};var h=function(a){for(var b="",c=0;c<a.length;c++)b+=a[c].toString();return b},i={};return i.add=function(b,d,e){var g=a.createTriple(b,d,e);f(g)&&c(g)},i.bnode=function(){return a.createBlankNode()},i.literal=function(b,c,d){return d&&"http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"===d.toString()&&(b=h(b.childNodes)),a.createLiteral(b,c,d)},i.setPrefixForURI=function(){},i.sym=function(b){return a.createNamedNode(b)},new d(i).parse(b,e),g(!0),!0},this.parse=function(b,c,d,e,f){return f=f||a.createGraph(),this.process(b,function(a){f.add(a)},d,e,function(a){c(a?f:null)})}};b.exports=function(a){a.RdfXmlParser=f.bind(null,a);var b=new f(a);a.parseRdfXml=b.parse.bind(b),a.utils.mimeTypeParserMap["application/rdf+xml"]=a.parseRdfXml}},{}],98:[function(a,b,c){"use strict";var d=function(a,b){this.graph=function(a,c){c(b)},this.match=function(a,c,d,e,f,g){f(b.match(c,d,e,g))},this.add=function(a,c,d){d(b=c)},this.merge=function(a,c,d){b.addAll(c),d(c)},this.remove=function(c,d,e){b=a.difference(b,d),e(!0)},this.removeMatches=function(a,c,d,e,f){b.removeMatches(c,d,e),f(!0)},this.delete=function(a,c){b.removeMatches(),c(!0)}};b.exports=function(a){a.SingleGraphStore=d.bind(null,a)}},{}],99:[function(a,b,c){"use strict";var d=function(a,b){var c=this;b=b||{},c.endpointUrl=b.endpointUrl,c.updateUrl=b.updateUrl||c.endpointUrl,c.mimeType=b.mimeType||"text/turtle",c.serialize=b.serialize||a.serializeNTriples,c.parse=b.parse||a.parseTurtle,c.request=b.request||a.defaultRequest;var d=function(a){return a>=200&&a<300},e=function(a,b,c){var d="",e=function(a){return"string"==typeof a?"_:"===a.substr(0,2)?a:"<"+a+">":a.toNT()};return d+=a?e(a):"?s",d+=b?" "+e(b):" ?p",d+=c?" "+e(c):" ?o"};c.graph=function(a,b){c.match(a,null,null,null,b)},c.match=function(a,b,f,g,h,i){var j=e(b,f,g),k="CONSTRUCT { "+j+" } { GRAPH <"+a+"> {"+j+" }}",l=c.endpointUrl+"?query="+encodeURIComponent(k);c.request("GET",l,{Accept:c.mimeType},null,function(a,b,e,f){return f?h(null,"request error: "+f):d(a)?void c.parse(e,h):h(null,"status code error: "+a)})};var f=function(a,b,e){c.request("POST",c.updateUrl,{"Content-Type":"application/sparql-update"},a,function(a,c,f,g){return g?e(null,"request error: "+g):d(a)?void e(b):e(null,"status code error: "+a)})};c.add=function(a,b,d){var e="DROP SILENT GRAPH <"+a+">;INSERT DATA { GRAPH <"+a+"> { "+c.serialize(b)+" } }";f(e,b,d)},c.merge=function(a,b,d){var e="INSERT DATA { GRAPH <"+a+"> { "+c.serialize(b)+" } }";f(e,b,d)},c.remove=function(a,b,d){var e="DELETE DATA FROM <"+a+"> { "+c.serialize(b)+" }";f(e,!0,d)},c.removeMatches=function(a,b,c,d,g){var h="DELETE FROM GRAPH <"+a+"> WHERE { "+e(b,c,d)+" }";f(h,!0,g)},c.delete=function(a,b){f("CLEAR  GRAPH <"+a+">",!0,b)}};b.exports=function(a){a.SparqlStore=d.bind(null,a)}},{}],100:[function(a,b,c){"use strict";var d=a("n3"),e=function(a,b){b=b||{},"importPrefixMap"in b||(b.importPrefixMap=!0),this.process=function(c,e,f,g,h){var i={};i.documentIRI=f,g=g||function(){return!0},h=h||function(){};var j=d.Parser(i),k={};return j.parse(c,function(c,f,i){if(c)return h(!1,c);if(b.importPrefixMap&&i&&Object.keys(i).forEach(function(b){a.prefixes[b]=i[b]}),!f)return h(!0);var j=function(b){if(d.Util.isIRI(b))return a.createNamedNode(b);if(d.Util.isBlank(b))return b in k?k[b]:k[b]=a.createBlankNode();var c=d.Util.getLiteralLanguage(b),e=d.Util.getLiteralType(b);return""===c&&(c=null),"http://www.w3.org/2001/XMLSchema#string"===e&&(e=null),a.createLiteral(d.Util.getLiteralValue(b),c,e?a.createNamedNode(e):null)};!function(b){var c=a.createTriple(j(b.subject),j(b.predicate),j(b.object));g(c)&&e(c)}(f)}),!0},this.parse=function(b,c,d,e,f){return f=f||a.createGraph(),this.process(b,function(a){f.add(a)},d,e,function(a,b){c(a?f:null,b)})}};b.exports=function(a){a.TurtleParser=e.bind(null,a),a.NTriplesParser=e.bind(null,a);var b=new e(a);a.parseTurtle=b.parse.bind(b),a.parseNTriples=b.parse.bind(b),a.utils.mimeTypeParserMap["application/n-triples"]=a.parseNTriples,a.utils.mimeTypeParserMap["text/n3"]=a.parseTurtle,a.utils.mimeTypeParserMap["text/turtle"]=a.parseTurtle}},{n3:78}],101:[function(a,b,c){"use strict";var d=a("n3"),e=function(a,b){b=b||{},b.usePrefixMap=b.usePrefixMap||!0,this.serialize=function(c,e){var g,f={};e=e||function(){},b.usePrefixMap&&(f.prefixes={},Object.keys(a.prefixes).forEach(function(b){"string"==typeof a.prefixes[b]&&(f.prefixes[b]=a.prefixes[b])})),g=d.Writer(f);var h=function(a){return"NamedNode"===a.interfaceName.toString()?a.nominalValue:"BlankNode"===a.interfaceName.toString()?"_:"+a.nominalValue:a.datatype?'"'+a.nominalValue+'"^^'+a.datatype.nominalValue:a.language?'"'+a.nominalValue+'"@'+a.language:'"'+a.nominalValue+'"'};return c.forEach(function(a){g.addTriple(h(a.subject),h(a.predicate),h(a.object))}),g.end(function(a,b){a?e(null,a):e(b)}),!0}};b.exports=function(a){a.TurtleSerializer=e.bind(null,a);var b=new e(a);a.serializeTurtle=b.serialize.bind(b)}},{n3:78}],102:[function(a,b,c){"use strict";var d=function(){};d.SCHEME=/^[A-Za-z][A-Za-z0-9\+\-\.]*\:/,d.prototype.parseURI=function(a){var b=d.SCHEME.exec(a);if(!b)throw"Bad URI value, no scheme: "+a;var c={spec:a};return c.scheme=b[0].substring(0,b[0].length-1),c.schemeSpecificPart=c.spec.substring(b[0].length),"/"==c.schemeSpecificPart.charAt(0)&&"/"==c.schemeSpecificPart.charAt(1)?this.parseGeneric(c):c.isGeneric=!1,c.normalize=function(){if(this.isGeneric&&0!=this.segments.length){if(this.path.length>1&&"/."==this.path.substring(this.path.length-2))return this.path=this.path.substring(0,this.path.length-1),this.segments.splice(this.segments.length-1,1),this.schemeSpecificPart="//"+this.authority+this.path,void 0!==this.query&&(this.schemeSpecificPart+="?"+this.query),void 0!==this.fragment&&(this.schemeSpecificPart+="#"+this.fragment),void(this.spec=this.scheme+":"+this.schemeSpecificPart);var a=this.path.charAt(this.path.length-1);"/"!=a&&(a="");for(var b=0;b<this.segments.length;b++)b>0&&".."==this.segments[b]&&(this.segments.splice(b-1,2),b-=2),"."==this.segments[b]&&(this.segments.splice(b,1),b--);this.path=0==this.segments.length?"/":"/"+this.segments.join("/")+a,this.schemeSpecificPart="//"+this.authority+this.path,void 0!==this.query&&(this.schemeSpecificPart+="?"+this.query),void 0!==this.fragment&&(this.schemeSpecificPart+="#"+this.fragment),this.spec=this.scheme+":"+this.schemeSpecificPart}},c.resolve=function(a){if(!a)return this.spec;if("#"==a.charAt(0)){var b=this.spec.lastIndexOf("#");return b<0?this.spec+a:this.spec.substring(0,b)+a}if(!this.isGeneric)throw"Cannot resolve uri against non-generic URI: "+this.spec;a.indexOf(":");if("/"==a.charAt(0))return this.scheme+"://"+this.authority+a;if("."==a.charAt(0)&&"/"==a.charAt(1)){if("/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a.substring(2);var e=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,e)+a.substring(1)}if(d.SCHEME.test(a))return a;if("?"==a.charAt(0))return this.scheme+"://"+this.authority+this.path+a;if("/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a;var e=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,e+1)+a},c.relativeTo=function(a){if(a.scheme!=this.scheme)return this.spec;if(!this.isGeneric)throw"A non generic URI cannot be made relative: "+this.spec;if(!a.isGeneric)throw"Cannot make a relative URI against a non-generic URI: "+a.spec;if(a.authority!=this.authority)return this.spec;for(var b=0;b<this.segments.length&&b<a.segments.length;b++)if(this.segments[b]!=a.segments[b]){for(var c="",d=b;d<a.segments.length;d++)c+="../";for(var d=b;d<this.segments.length;d++)c+=this.segments[d],d+1<this.segments.length&&(c+="/");return"/"==this.path.charAt(this.path.length-1)&&(c+="/"),c}if(this.segments.length==a.segments.length)return this.hash?this.hash:this.query?this.query:"";if(b<this.segments.length){for(var c="",d=b;d<this.segments.length;d++)c+=this.segments[d],d+1<this.segments.length&&(c+="/");return"/"==this.path.charAt(this.path.length-1)&&(c+="/"),c}throw"Cannot calculate a relative URI for "+this.spec+" against "+a.spec},c},d.prototype.parseGeneric=function(a){if("/"!=a.schemeSpecificPart.charAt(0)||"/"!=a.schemeSpecificPart.charAt(1))throw"Generic URI values should start with '//':"+a.spec;var b=a.schemeSpecificPart.substring(2),c=b.indexOf("/");a.authority=c<0?b:b.substring(0,c),a.path=c<0?"":b.substring(c);var d=a.path.indexOf("#");d>=0&&(a.fragment=a.path.substring(d+1),a.path=a.path.substring(0,d));var e=a.path.indexOf("?");if(e>=0&&(a.query=a.path.substring(e+1),a.path=a.path.substring(0,e)),"/"==a.path||""==a.path)a.segments=[];else{a.segments=a.path.split(/\//),a.segments.length>0&&""==a.segments[0]&&a.path.length>1&&"/"!=a.path.charAt(1)&&a.segments.shift(),a.segments.length>0&&a.path.length>0&&"/"==a.path.charAt(a.path.length-1)&&""==a.segments[a.segments.length-1]&&a.path.length>1&&"/"!=a.path.charAt(a.path.length-2)&&a.segments.pop();for(var f=0;f<a.segments.length;f++)for(var g=a.segments[f].split(/%[A-Za-z0-9][A-Za-z0-9]|[\ud800-\udfff][\ud800-\udfff]|[A-Za-z0-9\-\._~!$&'()*+,;=@:\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/),h=0;h<g.length;h++)if(g[h].length>0)throw"Unecaped character "+g[h].charAt(0)+" ("+g[h].charCodeAt(0)+") in URI "+a.spec}a.isGeneric=!0},b.exports=d},{}],103:[function(a,b,c){"use strict";var d={};d.defaultRequest=function(a,b,c,d,e){var f=new XMLHttpRequest;f.onreadystatechange=function(){if(f.readyState===f.DONE){for(var a=f.getAllResponseHeaders().split("\r\n"),b={},c=0;c<a.length;c++){var d=a[c].split(": ",2);b[d[0].toLowerCase()]=d[1]}e(f.status,b,f.responseText)}},f.open(a,b,!0);for(var g in c)f.setRequestHeader(g,c[g]);f.send(d)},d.corsProxyRequest=function(a,b,c,e,f,g){var h=a+"?url="+encodeURIComponent(c);d.defaultRequest(b,h,e,f,g)},d.parseHtml=function(a,b){return(new DOMParser).parseFromString(a,"text/html")},d.parseXml=function(a,b){return(new DOMParser).parseFromString(a,"application/xml")},d.mixin=function(a){a.defaultRequest=d.defaultRequest,a.corsProxyRequest=d.corsProxyRequest,a.parseHtml=d.parseHtml,a.parseXml=d.parseXml},b.exports=d.mixin},{}],104:[function(a,b,c){"use strict";var d=a("http"),e=a("https"),f=a("url"),g={};g.defaultRequest=function(a,b,c,g,h){var i=f.parse(b),j=d;i.hash=null,i.method=a,i.headers=c,"https:"===i.protocol&&(j=e);var k=j.request(i,function(a){var b="";a.setEncoding("utf8"),a.on("data",function(a){b+=a}),a.on("end",function(){h(a.statusCode,a.headers,b)})});k.on("error",function(a){h(null,null,null,a)}),g&&k.write(g),k.end()},g.parseHtml=function(b,c){return(new(a("xmldom").DOMParser)).parseFromString(b,"text/html")},g.parseXml=function(b,c){return(new(a("xmldom").DOMParser)).parseFromString(b,"application/xml")},g.mixin=function(b){b.Promise=b.Promise||a("es6-promise").Promise,b.defaultRequest=g.defaultRequest,b.parseHtml=g.parseHtml,b.parseXml=g.parseXml},b.exports=g.mixin},{"es6-promise":68,http:34,https:9,url:40,xmldom:193}],105:[function(a,b,c){"use strict";var d={};d.filter={},d.filter.namedNode=function(a){return"NamedNode"===a.interfaceName},d.filter.blankNode=function(a){return"BlankNode"===a.interfaceName},d.filter.literal=function(a){return"Literal"===a.interfaceName},d.filter.namedNodeSubject=function(a){return function(b){return"NamedNode"!==b.subject.interfaceName||b.subject.equals(a)}},d.list={},d.list.tripleParts=function(a,b,c){var d={};return c=c||function(){return!0},a.forEach(function(a){d[a[b].toNT()]=a[b]}),d=Object.keys(d).map(function(a){return d[a]}).filter(function(a){return c(a)})},d.list.subjects=function(a,b){return d.list.tripleParts(a,"subject",b)},d.list.predicates=function(a,b){return d.list.tripleParts(a,"predicate",b)},d.list.objects=function(a,b){return d.list.tripleParts(a,"object",b)},d.createSubGraph=function(a,b,c,d){var e={},f=a.createGraph(),g=function(c){if(0!==c.length){var h=[],i=a.createGraph();c.forEach(function(a){i.addAll(b.match(a))}),d&&(i=i.filter(d)),i.forEach(function(a){var b=a.object.toNT();b in e||(h.push(a.object),e[b]=!0)}),f.addAll(i),g(h)}};return g([c]),f},d.createSubGraphByNamedNodeSubject=function(a,b,c){return a.utils.createSubGraph(b,c,d.filter.namedNodeSubject(c))},d.splitGraphByNamedNodeSubject=function(a,b,c){c=c||new a.promise.Store(a.createStore());var e=[];return d.list.subjects(b,d.filter.namedNode).forEach(function(f){e.push(c.add(f,d.createSubGraphByNamedNodeSubject(a,b,f)))}),Promise.all(e).then(function(){return c})},d.mapNamespaceNode=function(a,b,c,d){return"NamedNode"!==b.interfaceName?b:0!==b.nominalValue.toString().indexOf(c)?b:a.createNamedNode(d+b.nominalValue.toString().substr(c.length))},d.mapNamespaceTriple=function(a,b,c,e){return a.createTriple(d.mapNamespaceNode(a,b.subject,c,e),d.mapNamespaceNode(a,b.predicate,c,e),d.mapNamespaceNode(a,b.object,c,e))},d.mapNamespaceGraph=function(a,b,c,e){var f=a.createGraph();return b.forEach(function(b){f.add(d.mapNamespaceTriple(a,b,c,e))}),f},d.mimeTypeParserMap={},d.parse=function(a,b,c,e,f){return a in d.mimeTypeParserMap?rdf.promise.parse(d.mimeTypeParserMap[a])(b,c,e,f):Promise.reject("no parser available for mime type: "+a)},d.mixin=function(a){a.utils={},a.utils.filter=d.filter,a.utils.list=d.list,a.utils.createSubGraph=d.createSubGraph.bind(null,a),a.utils.createSubGraphByNamedNodeSubject=d.createSubGraphByNamedNodeSubject.bind(null,a),a.utils.splitGraphByNamedNodeSubject=d.splitGraphByNamedNodeSubject.bind(null,a),a.utils.mapNamespaceNode=d.mapNamespaceNode.bind(null,a),a.utils.mapNamespaceTriple=d.mapNamespaceTriple.bind(null,a),a.utils.mapNamespaceGraph=d.mapNamespaceGraph.bind(null,a),a.utils.mimeTypeParserMap=d.mimeTypeParserMap,a.utils.parse=d.parse},b.exports=d.mixin},{}],106:[function(a,b,c){(function(c){"use strict";var d=a("rdf-interfaces");d.isNode=void 0!==c&&c.versions&&c.versions.node;var e=function(b){b=b||{},"undefined"!=typeof window&&(window.rdf=d),"undefined"!=typeof Promise?d.Promise=Promise:d.Promise=null,d.defaultRequest=null,d.corsProxyRequest=null,d.ns={type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},a("./lib/utils")(d),d.isNode?a("./lib/utils-node")(d):a("./lib/utils-browser")(d),void 0===d.Graph&&(d.Graph={}),d.Graph.difference=function(a,b){var c=d.createGraph();return a.forEach(function(a){b.some(function(b){return a.equals(b)})||c.add(a)}),c},d.Graph.intersection=function(a,b){var c=d.createGraph();return a.forEach(function(a){b.some(function(b){return a.equals(b)})&&c.add(a)}),c},d.Graph.map=function(a,b){var c=[];return a.forEach(function(a){c.push(b(a))}),c},d.Graph.merge=function(a,b){var c=d.createGraph();return c.addAll(a),c.addAll(b),c},d.Graph.toString=function(a){var b="";return a.forEach(function(a){b+=a.toString()+"\n"}),b};var c=d.createGraph.bind(d);return d.createGraphExt=function(a){var e=c(a);return e.difference=d.Graph.difference.bind(e,e),e.intersection=d.Graph.intersection.bind(e,e),e.map=d.Graph.map.bind(e,e),e.toString=d.Graph.toString.bind(e,e),"replaceMerge"in b&&b.replaceMerge&&(e.merge=d.Graph.merge.bind(e,e)),e},Object.defineProperty(d,"createGraph",{value:d.createGraphExt}),a("./lib/clownface.js")(d),a("./lib/inmemory-store.js")(d),a("./lib/jsonld-parser.js")(d),a("./lib/jsonld-serializer.js")(d),a("./lib/ldp-store.js")(d),a("./lib/microdata-parser.js")(d),a("./lib/ntriples-serializer.js")(d),a("./lib/promise.js")(d),a("./lib/rdfstore-store.js")(d),a("./lib/rdfxml-parser.js")(d),a("./lib/singlegraph-store.js")(d),a("./lib/sparql-store.js")(d),a("./lib/turtle-parser.js")(d),a("./lib/turtle-serializer.js")(d),d};d.isNode||e(),b.exports=e}).call(this,a("_process"))},{"./lib/clownface.js":88,"./lib/inmemory-store.js":89,"./lib/jsonld-parser.js":90,"./lib/jsonld-serializer.js":91,"./lib/ldp-store.js":92,"./lib/microdata-parser.js":93,"./lib/ntriples-serializer.js":94,"./lib/promise.js":95,"./lib/rdfstore-store.js":96,"./lib/rdfxml-parser.js":97,"./lib/singlegraph-store.js":98,"./lib/sparql-store.js":99,"./lib/turtle-parser.js":100,"./lib/turtle-serializer.js":101,"./lib/utils":105,"./lib/utils-browser":103,"./lib/utils-node":104,_process:15,"rdf-interfaces":107}],107:[function(a,b,c){rdf=function(){var a={};a.encodeString=function(a){for(var b="",c=!1,d=0,e=a.length;d<e;){var f=d++;if(c)c=!c;else{var g=a.charCodeAt(f);if(55296<=g&&g<=56319){g=1024*(g-55296)+(a.charCodeAt(f+1)-56320)+65536,c=!0}if(g>1114111)throw new Error("Char out of range");var i="00000000".concat(new Number(g).toString(16).toUpperCase());if(g>=65536)b+="\\U"+i.slice(-8);else if(g>=127||g<=31)switch(g){case 9:b+="\\t";break;case 10:b+="\\n";break;case 13:b+="\\r";break;default:b+="\\u"+i.slice(-4)}else switch(g){case 34:b+='\\"';break;case 92:b+="\\\\";break;default:b+=a.charAt(f)}}}return b},a.BlankNode=function(){return Object.defineProperties({},{interfaceName:{writable:!1,configurable:!1,enumerable:!0,value:"BlankNode"},nominalValue:{writable:!1,configurable:!1,enumerable:!0,value:"b".concat(++a.BlankNode.NEXTID)},valueOf:{writable:!1,configurable:!1,enumerable:!0,value:function(){return this.nominalValue}},equals:{writable:!0,configurable:!1,enumerable:!0,value:function(a){return a.hasOwnProperty("interfaceName")?a.interfaceName==this.interfaceName&&this.nominalValue==a.nominalValue:"function"==typeof a&&"RegExp"==a.constructor.name?a.test(this.valueOf().toString()):this.valueOf()==a}},toString:{writable:!1,configurable:!1,enumerable:!0,value:function(){return"_:".concat(this.nominalValue)}},toNT:{writable:!1,configurable:!1,enumerable:!0,value:function(){return a.encodeString(this.toString())}},h:{configurable:!1,enumerable:!1,get:function(){return this.nominalValue}}})},a.BlankNode.NEXTID=0,a.NamedNode=function(b){return Object.defineProperties({},{interfaceName:{writable:!1,configurable:!1,enumerable:!0,value:"NamedNode"},nominalValue:{writable:!1,configurable:!1,enumerable:!0,value:b},valueOf:{writable:!1,configurable:!1,enumerable:!0,value:function(){return this.nominalValue}},equals:{writable:!0,configurable:!1,enumerable:!0,value:function(a){return a.hasOwnProperty("interfaceName")?a.interfaceName==this.interfaceName&&this.nominalValue==a.nominalValue:"function"==typeof a&&"RegExp"==a.constructor.name?a.test(this.valueOf().toString()):this.valueOf()==a}},toString:{writable:!1,configurable:!1,enumerable:!0,value:function(){return this.nominalValue.toString()}},toNT:{writable:!1,configurable:!1,enumerable:!0,value:function(){return"<"+a.encodeString(this.toString())+">"}},h:{configurable:!1,enumerable:!1,get:function(){return this.nominalValue}}})},a.Literal=function(b,c,d,e){return"string"==typeof c&&"@"==c[0]&&(c=c.slice(1)),Object.defineProperties({},{interfaceName:{writable:!1,configurable:!1,enumerable:!0,value:"Literal"},nominalValue:{writable:!1,configurable:!1,enumerable:!0,value:b},valueOf:{writable:!1,configurable:!1,enumerable:!0,value:function(){return null===e?this.nominalValue:e}},language:{writable:!1,configurable:!1,enumerable:!0,value:c},datatype:{writable:!1,configurable:!1,enumerable:!0,value:d},equals:{writable:!0,configurable:!1,enumerable:!0,value:function(a){return a.hasOwnProperty("interfaceName")?a.interfaceName==this.interfaceName&&this.h==a.h:"function"==typeof a&&"RegExp"==a.constructor.name?a.test(this.valueOf().toString()):this.valueOf()==a}},toString:{writable:!1,configurable:!1,enumerable:!0,value:function(){return this.nominalValue.toString()}},toNT:{writable:!1,configurable:!1,enumerable:!0,value:function(){var b='"'+a.encodeString(this.nominalValue)+'"';return Boolean(this.language).valueOf()?b.concat("@"+this.language):Boolean(this.datatype).valueOf()?b.concat("^^"+this.datatype.toNT()):b}},h:{writable:!1,configurable:!1,enumerable:!1,value:c+"|"+(d?d.toString():"")+"|"+b.toString()}})},a.Triple=function(a,b,c){return Object.defineProperties({},{subject:{writable:!1,configurable:!1,enumerable:!0,value:a},predicate:{writable:!1,configurable:!1,enumerable:!0,value:b},object:{writable:!1,configurable:!1,enumerable:!0,value:c},equals:{writable:!0,configurable:!1,enumerable:!0,value:function(a){return this.s.equals(a.s)&&this.p.equals(a.p)&&this.o.equals(a.o)}},toString:{writable:!1,configurable:!1,enumerable:!0,value:function(){return this.s.toNT()+" "+this.p.toNT()+" "+this.o.toNT()+" ."}},s:{configurable:!1,enumerable:!1,get:function(){return this.subject}},p:{configurable:!1,enumerable:!1,get:function(){return this.predicate}},o:{configurable:!1,enumerable:!1,get:function(){return this.object}}})},a.Graph=function(b){return Object.defineProperties({},{_graph:{writable:!0,configurable:!1,enumerable:!1,value:[]},_spo:{writable:!0,configurable:!1,enumerable:!1,value:{}},length:{configurable:!1,enumerable:!0,get:function(){return this._graph.length}},add:{writable:!1,configurable:!1,enumerable:!0,value:function(a){return this._spo[a.s.h]||(this._spo[a.s.h]={}),this._spo[a.s.h][a.p.h]||(this._spo[a.s.h][a.p.h]={}),this._spo[a.s.h][a.p.h][a.o.h]||(this._spo[a.s.h][a.p.h][a.o.h]=a,this._graph.push(a),this.actions.forEach(function(b){b.run(a)})),this}},addArray:{writable:!1,configurable:!1,enumerable:!1,value:function(a){if(Array.isArray(a)){var b=this;a.forEach(function(a){b.add(a)})}return this}},remove:{writable:!1,configurable:!1,enumerable:!0,value:function(a){return this._spo[a.s.h]&&this._spo[a.s.h][a.p.h]&&this._spo[a.s.h][a.p.h][a.o.h]&&delete this._spo[a.s.h][a.p.h][a.o.h]&&this._graph.splice(this._graph.indexOf(a),1),this}},removeMatches:{writable:!1,configurable:!1,enumerable:!0,value:function(a,b,c){a=void 0===arguments[0]?null:a,b=void 0===arguments[1]?null:b,c=void 0===arguments[2]?null:c;var d=[];this.forEach(function(e,f){(null===a||e.s.equals(a))&&(null===b||e.p.equals(b))&&(null===c||e.o.equals(c))&&d.push(e)});for(var e in d)this.remove(d[e]);return this}},toArray:{writable:!1,configurable:!1,enumerable:!0,value:function(){return this._graph.slice(0)}},some:{writable:!1,configurable:!1,enumerable:!0,value:function(a){return this._graph.some(a)}},every:{writable:!1,configurable:!1,enumerable:!0,value:function(a){return this._graph.every(a)}},filter:{writable:!1,configurable:!1,enumerable:!0,value:function(b){return new a.Graph(this._graph.filter(b))}},forEach:{writable:!1,configurable:!1,enumerable:!0,value:function(a){var b=this;this._graph.forEach(function(c){a(c,b)})}},match:{writable:!1,configurable:!1,enumerable:!0,value:function(b,c,d,e){b=void 0===arguments[0]?null:b,c=void 0===arguments[1]?null:c,d=void 0===arguments[2]?null:d,e=void 0===arguments[3]?null:e;var f=0;return e<1&&(e=-1),new a.Graph(this._graph.filter(function(a){return f!=e&&((null===b||a.s.equals(b))&&(null===c||a.p.equals(c))&&(null===d||a.o.equals(d))&&++f)}))}},merge:{writable:!1,configurable:!1,enumerable:!0,value:function(b){return(new a.Graph).addAll(this).addAll(b)}},addAll:{writable:!1,configurable:!1,enumerable:!0,value:function(a){return this.addArray(a.toArray())}},actions:{writable:!1,configurable:!1,enumerable:!0,value:[]},addAction:{writable:!1,configurable:!1,enumerable:!0,value:function(a,b){return b&&this.forEach(function(b,c){a.run(b,c)}),this.actions.push(a),this}}}).addArray(b)},a.TripleAction=function(a,b){return Object.defineProperties({},{action:{writable:!0,configurable:!1,enumerable:!0,value:b},test:{writable:!0,configurable:!1,enumerable:!0,value:a},run:{writable:!1,configurable:!1,enumerable:!0,value:function(a,b){this.test(a)&&this.action(a,b)}}})},a.PrefixMap=function(a){return Object.defineProperties({},{resolve:{writable:!1,configurable:!1,enumerable:!0,value:function(a){var b=a.indexOf(":");if(b<0||a.indexOf("//")>=0)return null;var c=a.slice(0,b).toLowerCase();return this[c]?this[c].concat(a.slice(++b)):null}},shrink:{writable:!1,configurable:!1,enumerable:!0,value:function(a){for(pref in this)if(a.substr(0,this[pref].length)==this[pref])return pref+":"+a.slice(this[pref].length);return a}},setDefault:{writable:!1,configurable:!1,enumerable:!0,value:function(a){this[""]=a}},addAll:{writable:!1,configurable:!1,enumerable:!0,value:function(a,b){for(p in a)this[p]&&!b||(this[p]=a[p]);return this}}}).addAll(a)},a.TermMap=function(a){return Object.defineProperties({},{resolve:{writable:!1,configurable:!1,enumerable:!0,value:function(a){return this[a]?this[a]:this[""]?this[""].concat(a):null}},shrink:{writable:!1,configurable:!1,enumerable:!0,value:function(a){for(t in this)if(this[t]==a)return t;return a}},setDefault:{writable:!1,configurable:!1,enumerable:!0,value:function(a){this[""]=a}},addAll:{writable:!1,configurable:!1,enumerable:!0,value:function(a,b){for(t in a)this[t]&&!b||(this[t]=a[t]);return this}}}).addAll(a)},a.Profile=function(b){return Object.defineProperties({},{prefixes:{writable:!1,configurable:!1,enumerable:!0,value:new a.PrefixMap},terms:{writable:!1,configurable:!1,enumerable:!0,value:new a.TermMap},resolve:{writable:!1,configurable:!1,enumerable:!0,value:function(a){return a.indexOf(":")>=0?this.prefixes.resolve(a):this.terms.resolve(a)}},setDefaultVocabulary:{writable:!1,configurable:!1,enumerable:!0,value:function(a){this.terms.setDefault(a)}},setDefaultPrefix:{writable:!1,configurable:!1,enumerable:!0,value:function(a){this.prefixes.setDefault(a)}},setTerm:{writable:!1,configurable:!1,enumerable:!0,value:function(a,b){this.terms[a]=b}},setPrefix:{writable:!1,configurable:!1,enumerable:!0,value:function(a,b){this.prefixes[a]=b}},importProfile:{writable:!1,configurable:!1,enumerable:!0,value:function(a,b){return a?(this.prefixes.addAll(a.prefixes,b),this.terms.addAll(a.terms,b),this):this}}}).importProfile(b)},a.RDFEnvironment=function(){var b={terms:{},prefixes:{owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdfa:"http://www.w3.org/ns/rdfa#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#"}},c={};for(v in x=["string","boolean","dateTime","date","time","int","double","float","decimal","integer","nonPositiveInteger","negativeInteger","long","int","short","byte","nonNegativeInteger","unsignedLong","unsignedInt","unsignedShort","unsignedByte","positiveInteger"])c[x[v]]=b.prefixes.xsd.concat(x[v]);return Object.defineProperties(new a.Profile(b),{createBlankNode:{writable:!1,configurable:!1,enumerable:!0,value:function(){return new a.BlankNode}},createNamedNode:{writable:!1,configurable:!1,enumerable:!0,value:function(b){return new a.NamedNode(b)}},createLiteral:{writable:!1,configurable:!1,enumerable:!0,value:function(b){var d=null,e=arguments[2],f=b;if(arguments[1]&&(arguments[1].hasOwnProperty("interfaceName")?e=arguments[1]:d=arguments[1]),e)switch(e.valueOf()){case c.string:f=new String(f);break;case c.boolean:f=new Boolean("false"!=f&&f).valueOf();break;case c.float:case c.integer:case c.long:case c.double:case c.decimal:case c.nonPositiveInteger:case c.nonNegativeInteger:case c.negativeInteger:case c.int:case c.unsignedLong:case c.positiveInteger:case c.short:case c.unsignedInt:case c.byte:case c.unsignedShort:case c.unsignedByte:f=new Number(f).valueOf();break;case c.date:case c.time:case c.dateTime:f=new Date(f)}return new a.Literal(b,d,e,f)}},createTriple:{writable:!1,configurable:!1,enumerable:!0,value:function(b,c,d){return new a.Triple(b,c,d)}},createGraph:{writable:!1,configurable:!0,enumerable:!0,value:function(b){return new a.Graph(b)}},createAction:{writable:!1,configurable:!1,enumerable:!0,value:function(b,c){return new a.TripleAction(b,c)}},createProfile:{writable:!1,configurable:!1,enumerable:!0,value:function(b){return new a.Profile(b?null:this)}},createTermMap:{writable:!1,configurable:!1,enumerable:!0,value:function(b){return new a.TermMap(b?null:this.terms)}},createPrefixMap:{writable:!1,configurable:!1,enumerable:!0,value:function(b){return new a.PrefixMap(b?null:this.prefixes)}}})};var b=new a.RDFEnvironment;return Object.keys(a).forEach(function(c){b[c]=a[c]}),a=b}(),void 0!==b&&(b.exports=rdf)},{}],108:[function(a,b,c){function g(a,b){this.name="NonSupportedSparqlFeatureError",this.feature=a,this.message=b||"SPARQL feature "+a+" non supported"}function h(a){this.name=ParserError,this.message=a||"Error parsing SPARQL query"}var d=a("./parser"),e=a("./utils"),f=e;g.prototype=new Error,g.constructor=g,h.prototype=new Error,h.constructor=h,AbstractQueryTree=function(){},AbstractQueryTree.prototype.parseQueryString=function(a){return d.parse(a)},AbstractQueryTree.prototype.parseExecutableUnit=function(a){if("select"===a.kind)return this.parseSelect(a);if("ask"===a.kind)return this.parseSelect(a);if("modify"===a.kind)return this.parseSelect(a);if("construct"===a.kind)return this.parseSelect(a);if("insertdata"===a.kind)return this.parseInsertData(a);if("deletedata"===a.kind)return this.parseInsertData(a);if("load"===a.kind)return a;if("clear"===a.kind)return a;if("drop"===a.kind)return a;if("create"===a.kind)return a;throw new Error("unknown executable unit: "+a.kind)},AbstractQueryTree.prototype.parseSelect=function(a){if(null==a)return console.log("error parsing query"),null;var b={freshCounter:0};return a.pattern=this.build(a.pattern,b),a},AbstractQueryTree.prototype.parseInsertData=function(a){return null==a?(console.log("error parsing query"),null):a},AbstractQueryTree.prototype.build=function(a,b){if("groupgraphpattern"===a.token)return this._buildGroupGraphPattern(a,b);if("basicgraphpattern"===a.token){var c={kind:"BGP",value:a.triplesContext};return c=AbstractQueryTree.translatePathExpressionsInBGP(c,b)}if("graphunionpattern"===a.token){return{kind:"UNION",value:[this.build(a.value[0],b),this.build(a.value[1],b)]}}if("graphgraphpattern"===a.token){return{kind:"GRAPH",value:this.build(a.value,b),graph:a.graph}}throw null!=a.token?new g(a.token,"Non implemented SPARQL graph pattern: '"+a.token+"'"):new h("Error parsing graph pattern: '"+JSON.stringify(a)+"'")},AbstractQueryTree.translatePathExpressionsInBGP=function(a,b){for(var c,e,g,d=[],h=0;h<a.value.length;h++)if(a.value[h].predicate&&"path"===a.value[h].predicate.token){c=a.value[h],e=a.value.slice(h+1);var i=AbstractQueryTree.translatePathExpression(c,b),j=null;if("BGP"!==i.kind){if("ZERO_OR_MORE_PATH"===i.kind||"ONE_OR_MORE_PATH"===i.kind){if(g=d.length>0?{kind:"JOIN",lvalue:{kind:"BGP",value:d},rvalue:i}:i,"ZERO_OR_MORE_PATH"===i.kind)if("var"===i.y.token&&0===i.y.value.indexOf("fresh:")&&"var"===i.x.token&&0===i.x.value.indexOf("fresh:"))for(var k=0;k<a.value.length;k++)a.value[k].object&&"var"===a.value[k].object.token&&a.value[k].object.value===i.x.value&&(j=f.clone(a.value[k],!0),j.object=i.y);else if("var"===i.y.token&&0===i.y.value.indexOf("fresh:"))for(var k=0;k<a.value.length;k++)a.value[k].subject&&"var"===a.value[k].subject.token&&a.value[k].subject.value===i.y.value&&(j=f.clone(a.value[k],!0),j.subject=i.x);if(e.length>0){var l=AbstractQueryTree.translatePathExpressionsInBGP({kind:"BGP",value:e},b);if(null!=j){var m=d.concat([j]).concat(e);return{kind:"UNION",value:[{kind:"JOIN",lvalue:g,rvalue:l},{kind:"BGP",value:m}]}}return{kind:"JOIN",lvalue:g,rvalue:l}}return g}return i}d=d.concat(i.value)}else d.push(a.value[h]);return a.value=d,a},AbstractQueryTree.translatePathExpression=function(a,b){if("element"===a.predicate.kind){if("+"===a.predicate.modifier){a.predicate.modifier=null;var c=AbstractQueryTree.translatePathExpression(a,b);return{kind:"ONE_OR_MORE_PATH",path:c,x:a.subject,y:a.object}}if("*"===a.predicate.modifier){a.predicate.modifier=null;var c=AbstractQueryTree.translatePathExpression(a,b);return{kind:"ZERO_OR_MORE_PATH",path:c,x:a.subject,y:a.object}}return a.predicate=a.predicate.value,{kind:"BGP",value:[a]}}if("sequence"===a.predicate.kind){for(var i,j,d=a.subject,e=a.object,h=a.graph,k=[],l=0;l<a.predicate.value.length;l++)l!=a.predicate.value.length-1?(i={token:"var",value:"fresh:"+b.freshCounter},b.freshCounter++):i=e,j={subject:d,predicate:a.predicate.value[l],object:i},null!=h&&(j.graph=f.clone(h,!0)),k.push(j),l!=a.predicate.value.length-1&&(d=f.clone(i,!0));var m={kind:"BGP",value:k};return AbstractQueryTree.translatePathExpressionsInBGP(m,b)}throw new g("Non supported path expression "+a.predicate.kind)},AbstractQueryTree.prototype._buildGroupGraphPattern=function(a,b){for(var c=a.filters||[],d=a.binds||[],e={kind:"EMPTY_PATTERN"},f=0;f<a.patterns.length;f++){var g=a.patterns[f];if("optionalgraphpattern"===g.token){var h=this.build(g.value,b);e="FILTER"===h.kind?{kind:"LEFT_JOIN",lvalue:e,rvalue:h.value,filter:h.filter}:{kind:"LEFT_JOIN",lvalue:e,rvalue:h,filter:!0}}else{var h=this.build(g,b);e="EMPTY_PATTERN"==e.kind?h:{kind:"JOIN",lvalue:e,rvalue:h}}}if(e.binds=d,0!=c.length){if("EMPTY_PATTERN"===e.kind)return{kind:"FILTER",filter:c,value:e};if("LEFT_JOIN"===e.kind&&!0===e.filter)return{kind:"FILTER",filter:c,value:e};if("LEFT_JOIN"===e.kind)return{kind:"FILTER",filter:c,value:e};if("JOIN"===e.kind)return{kind:"FILTER",filter:c,value:e};if("UNION"===e.kind)return{kind:"FILTER",filter:c,value:e};if("GRAPH"===e.kind)return{kind:"FILTER",filter:c,value:e};if("BGP"===e.kind)return{kind:"FILTER",filter:c,value:e};throw new Error("Unknow kind of algebra expression: "+e.kind)}return e},AbstractQueryTree.prototype.collectBasicTriples=function(a,b){if(null==b&&(b=[]),"select"===a.kind)b=this.collectBasicTriples(a.pattern,b);else if("BGP"===a.kind)b=b.concat(a.value);else if("ZERO_OR_MORE_PATH"===a.kind)b=this.collectBasicTriples(a.path);else if("UNION"===a.kind)b=this.collectBasicTriples(a.value[0],b),b=this.collectBasicTriples(a.value[1],b);else if("GRAPH"===a.kind)b=this.collectBasicTriples(a.value,b);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)b=this.collectBasicTriples(a.lvalue,b),b=this.collectBasicTriples(a.rvalue,b);else if("FILTER"===a.kind)b=this.collectBasicTriples(a.value,b);else if("construct"===a.kind)b=this.collectBasicTriples(a.pattern,b);else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return b},AbstractQueryTree.prototype.bind=function(a,b){if(null!=a.graph&&a.graph.token&&"var"===a.graph.token&&null!=b[a.graph.value]&&(a.graph=b[a.graph.value]),null!=a.filter){for(var c=[],d=0;d<a.filter.length;d++)a.filter[d].value=this._bindFilter(a.filter[d].value,b),c.push(a.filter[d]);a.filter=c}if("select"===a.kind)a.pattern=this.bind(a.pattern,b);else if("BGP"===a.kind)a.value=this._bindTripleContext(a.value,b);else if("ZERO_OR_MORE_PATH"===a.kind)a.path=this._bindTripleContext(a.path,b),a.x&&"var"===a.x.token&&null!=b[a.x.value]&&(a.x=b[a.x.value]),a.y&&"var"===a.y.token&&null!=b[a.y.value]&&(a.y=b[a.y.value]);else if("UNION"===a.kind)a.value[0]=this.bind(a.value[0],b),a.value[1]=this.bind(a.value[1],b);else if("GRAPH"===a.kind)a.value=this.bind(a.value,b);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)a.lvalue=this.bind(a.lvalue,b),a.rvalue=this.bind(a.rvalue,b);else if("FILTER"===a.kind){var e=this;a.value=this.bind(a.value,b),a.filter=a.filter.map(function(a){return{token:"filter",value:e._bindFilter(a.value,b)}})}else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return a},AbstractQueryTree.prototype._bindTripleContext=function(a,b){for(var c=0;c<a.length;c++){delete a[c].graph,delete a[c].variables;for(var d in a[c]){var e=a[c][d];"var"===e.token&&null!=b[e.value]&&(a[c][d]=b[e.value])}}return a},AbstractQueryTree.prototype._bindFilter=function(a,b){if(null!=a.expressionType){var c=a.expressionType;if("relationalexpression"==c)a.op1=this._bindFilter(a.op1,b),a.op2=this._bindFilter(a.op2,b);else if("conditionalor"==c||"conditionaland"==c)for(var d=0;d<a.operands.length;d++)a.operands[d]=this._bindFilter(a.operands[d],b);else if("additiveexpression"==c){a.summand=this._bindFilter(a.summand,b);for(var d=0;d<a.summands.length;d++)a.summands[d].expression=this._bindFilter(a.summands[d].expression,b)}else if("builtincall"==c)for(var d=0;d<a.args.length;d++)a.args[d]=this._bindFilter(a.args[d],b);else if("multiplicativeexpression"==c){a.factor=this._bindFilter(a.factor,b);for(var d=0;d<a.factors.length;d++)a.factors[d].expression=this._bindFilter(a.factors[d].expression,b)}else if("unaryexpression"==c)a.expression=this._bindFilter(a.expression,b);else if("irireforfunction"==c)for(var d=0;d<a.factors.args;d++)a.args[d]=this._bindFilter(a.args[d],b);else if("atomic"==c&&"var"==a.primaryexpression&&null!=b[a.value.value]){var e=b[a.value.value];"uri"===e.token?a.primaryexpression="iri":a.primaryexpression="literal",a.value=e}}return a},AbstractQueryTree.prototype.replace=function(a,b,c,d){if(null!=a.graph&&a.graph.token&&a.graph.token===b.token&&a.graph.value==b.value&&(a.graph=f.clone(c,!0)),null!=a.filter){for(var e=[],g=0;g<a.filter.length;g++)a.filter[g].value=this._replaceFilter(a.filter[g].value,b,c,d),e.push(a.filter[g]);a.filter=e}if("select"===a.kind)a.pattern=this.replace(a.pattern,b,c,d);else if("BGP"===a.kind)a.value=this._replaceTripleContext(a.value,b,c,d);else if("ZERO_OR_MORE_PATH"===a.kind)a.path=this._replaceTripleContext(a.path,b,c,d),a.x&&a.x.token===b.token&&a.value===b.value&&(a.x=f.clone(c,!0)),a.y&&a.y.token===b.token&&a.value===b.value&&(a.y=f.clone(c,!0));else if("UNION"===a.kind)a.value[0]=this.replace(a.value[0],b,c,d),a.value[1]=this.replace(a.value[1],b,c,d);else if("GRAPH"===a.kind)a.value=this.replace(a.value,b,c);else if("LEFT_JOIN"===a.kind||"JOIN"===a.kind)a.lvalue=this.replace(a.lvalue,b,c,d),a.rvalue=this.replace(a.rvalue,b,c,d);else if("FILTER"===a.kind)a.value=this._replaceFilter(a.value,b,c,d);else if("EMPTY_PATTERN"!==a.kind)throw"Unknown pattern: "+a.kind;return a},AbstractQueryTree.prototype._replaceTripleContext=function(a,b,c,d){for(var f=0;f<a.length;f++)for(var g in a[f]){var h=a[f][g];"var"===h.token&&"var"===b.token&&h.value===b.value?a[f][g]=c:"blank"===h.token&&"blank"===b.token&&h.value===b.value?a[f][g]=c:"literal"!==h.token&&"uri"!==h.token||"literal"!==b.token&&"uri"!==b.token||h.token!==b.token||e.lexicalFormTerm(h,d)[h.token]!==e.lexicalFormTerm(b,d)[h.token]||(a[f][g]=c)}return a},AbstractQueryTree.prototype._replaceFilter=function(a,b,c,d){if(null!=a.expressionType){var e=a.expressionType;if("relationalexpression"==e)a.op1=this._replaceFilter(a.op1,b,c,d),a.op2=this._replaceFilter(a.op2,b,c,d);else if("conditionalor"==e||"conditionaland"==e)for(var f=0;f<a.operands.length;f++)a.operands[f]=this._replaceFilter(a.operands[f],b,c,d);else if("additiveexpression"==e){a.summand=this._replaceFilter(a.summand,b,c,d);for(var f=0;f<a.summands.length;f++)a.summands[f].expression=this._replaceFilter(a.summands[f].expression,b,c,d)}else if("builtincall"==e)for(var f=0;f<a.args.length;f++)a.args[f]=this._replaceFilter(a.args[f],b,c,d);else if("multiplicativeexpression"==e){a.factor=this._replaceFilter(a.factor,b,c,d);for(var f=0;f<a.factors.length;f++)a.factors[f].expression=this._replaceFilter(a.factors[f].expression,b,c,d)}else if("unaryexpression"==e)a.expression=this._replaceFilter(a.expression,b,c,d);else if("irireforfunction"==e)for(var f=0;f<a.factors.args;f++)a.args[f]=this._replaceFilter(a.args[f],b,c,d);else if("atomic"==e){var g=null;a.primaryexpression==b.token&&a.value==b.value?g=c.value:"iri"==a.primaryexpression&&"uri"==b.token&&a.value==b.value&&(g=c.value),null!=g&&("uri"===c.token?a.primaryexpression="iri":a.primaryexpression=c.token,a.value=g)}}return a},AbstractQueryTree.prototype.treeWithUnion=function(a){if(null==a)return!1;if(null==a.kind)return!1;if("select"===a.kind)return this.treeWithUnion(a.pattern);if("BGP"===a.kind)return this.treeWithUnion(a.value);if("ZERO_OR_MORE_PATH"===a.kind)return!1;if("UNION"===a.kind){if(null==a.value[0].value||null==a.value[0].value.variables||null==a.value[1].value||null==a.value[1].value.variables)return!0;if(a.value[0].variables.join("/")===a.values[1].variables.join("/"))return!!this.treeWithUnion(a.value[0])||this.treeWithUnion(a.value[1])}else{if("GRAPH"===a.kind)return!1;if("LEFT_JOIN"!==a.kind&&"JOIN"!==a.kind)return"FILTER"!==a.kind&&(a.kind,!1);if(this.treeWithUnion(a.lvalue))return!0;this.treeWithUnion(a.rvalue)}},b.exports={AbstractQueryTree:AbstractQueryTree,NonSupportedSparqlFeatureError:g,SparqlParserError:h}},{"./parser":114,"./utils":126}],109:[function(a,b,c){"use strict";var d=a("./utils"),e=d,f=d.nextTick,g=-1,h=1,i=function(a,b){if(0!=arguments.length){this.order=a,this.root=this._allocateNode(),this.root.isLeaf=!0,this.root.level=0;var c=this;this._diskWrite(this.root,function(a){c.root=a,c._updateRootNode(c.root,function(a){c.comparator=function(a,b){return a<b?-1:a>b?1:0},c.merger=null,null!=b&&b(c)})})}};i.prototype._allocateNode=function(){return new j},i.prototype._diskWrite=function(a,b){f(function(){b(a)})},i.prototype._diskRead=function(a,b){f(function(){b(a)})},i.prototype._diskDelete=function(a,b){f(function(){b()})},i.prototype._updateRootNode=function(a,b){b(a)},i.prototype.search=function(a,b,c){var d=this.root,e=this;e.__search(e,a,d,b,c)},i.prototype.__search=function(a,b,c,d,e){for(var f=0;f<c.numberActives&&1===a.comparator(b,c.keys[f].key);)f++;f<c.numberActives&&0===a.comparator(c.keys[f].key,b)?d(null!=e&&1==e?!0:c.keys[f].data):!0===c.isLeaf?d(null):a._diskRead(c.children[f],function(c){a.__search(a,b,c,d,e)})},i.prototype.walk=function(a,b){this.__walk(this,this.root,a,b)},i.prototype.__walk=function(a,b,c,d){var f=b.numberActives,g=0;if(b.isLeaf){for(g=0;g<b.numberActives;g++)c(b.keys[g]);return d()}e.whilst(function(){return g<f},function(d){a._diskRead(b.children[g],function(e){a.__walk(a,e,c,function(){a._diskRead(b.keys[g],function(a){c(a),g++,d()})})})},function(){a._diskRead(b.children[f],function(b){a.__walk(a,b,c,function(){d()})})})},i.prototype.walkNodes=function(a){this.__walkNodes(this,root,a,function(){})},i.prototype.__walkNodes=function(a,b,c,d){if(b.isLeaf)return c(b),d();c(b);var f=b.numberActives,g=0;e.whilst(function(){return g<f},function(d){a._diskRead(b.children[g],function(b){a.__walkNodes(a,b,c,function(){g++,d()})})},function(){a._diskRead(b.children[f],function(b){a.__walkNodes(a,b,c,function(){})})})},i.prototype._splitChild=function(a,b,c,d){var e=this._allocateNode();e.isLeaf=c.isLeaf,e.level=c.level,e.numberActives=this.order-1;var f=c.keys[this.order-1];c.keys[this.order-1]=null;for(var g=0;g<this.order-1;g++)e.keys[g]=c.keys[g+this.order],c.keys[g+this.order]=null,c.isLeaf||(e.children[g]=c.children[g+this.order],c.children[g+this.order]=null);for(c.isLeaf||(e.children[g]=c.children[g+this.order],c.children[g+this.order]=null),c.numberActives=this.order-1,g=a.numberActives+1;g>b+1;g--)a.children[g]=a.children[g-1];for(a.children[b+1]=e,g=a.numberActives;g>b;g--)a.keys[g]=a.keys[g-1];a.keys[b]=f,a.numberActives++;var h=this;this._diskWrite(e,function(e){h._diskWrite(a,function(a){a.children[b+1]=e,h._diskWrite(c,function(b){return d(a)})})})},i.prototype.insert=function(a,b,c){if(this.root.numberActives===2*this.order-1){var d=this._allocateNode();d.isLeaf=!1,d.level=this.root.level+1,d.numberActives=0,d.children[0]=this.root;var e=this;this._splitChild(d,0,this.root,function(f){d=f,e.root=d,e._updateRootNode(d,function(d){e._insertNonFull(d,a,b,c)})})}else this._insertNonFull(this.root,a,b,c)},i.prototype._insertNonFull=function(a,b,c,d){var e=a.numberActives-1;this.__insertNonFull(this,a,e,b,c,d)},i.prototype.__insertNonFull=function(a,b,c,d,e,f){if(b.isLeaf){for(;c>=0&&-1===a.comparator(d,b.keys[c].key);)b.keys[c+1]=b.keys[c],c--;c>=0&&0===a.comparator(d,b.keys[c].key)?b.keys[c]={key:d,data:e}:(b.keys[c+1]={key:d,data:e},b.numberActives++),a._diskWrite(b,function(a){return f(a)})}else{for(;c>=0&&-1===a.comparator(d,b.keys[c].key);)c--;c++;var g=a;a._diskRead(b.children[c],function(h){h.numberActives===2*g.order-1?g._splitChild(b,c,h,function(){1===g.comparator(d,b.keys[c].key)&&c++,g._diskRead(b.children[c],function(b){c=b.numberActives-1,g.__insertNonFull(a,b,c,d,e,f)})}):g._diskRead(b.children[c],function(b){c=b.numberActives-1,g.__insertNonFull(a,b,c,d,e,f)})})}},i.prototype.delete=function(a,b){var c=this.root;i.prototype.__deleteSearchNode(this,a,c,b)},i.prototype.__deleteSearchNode=function(a,b,c,d){var e=0;if(0===c.numberActives)return d(!1);for(;e<c.numberActives&&1===a.comparator(b,c.keys[e].key);)e++;var f=e;if(e<c.numberActives&&0===a.comparator(b,c.keys[e].key))return a.__deleteNodeFound(a,f,b,c,d);if(!0===c.isLeaf)return d(!1);var i=c;a._diskRead(c.children[e],function(c){if(null===c)return d(!1);var j=!1,k=!1,l=null,m=null;f===i.numberActives?(k=!0,m=i.children[f-1],l=i.children[f-1]):0===f?(j=!0,l=i.children[1],m=i.children[1]):(m=i.children[f-1],l=i.children[f+1]),a._diskRead(m,function(f){a._diskRead(l,function(l){!0===k&&(l=null),!0===j&&(f=null),c.numberActives===a.order-1&&null!=i?null!=l&&l.numberActives>a.order-1?a._moveKey(i,e,g,function(e){a.__deleteSearchNode(a,b,c,d)}):null!=f&&f.numberActives>a.order-1?a._moveKey(i,e,h,function(e){a.__deleteSearchNode(a,b,c,d)}):null!=f&&f.numberActives===a.order-1?a._mergeSiblings(i,e,g,function(c){a.__deleteSearchNode(a,b,c,d)}):null!=l&&l.numberActives===a.order-1&&a._mergeSiblings(i,e,h,function(c){a.__deleteSearchNode(a,b,c,d)}):a.__deleteSearchNode(a,b,c,d)})})})},i.prototype.__deleteNodeFound=function(a,b,c,d,e){return d.isLeaf&&d.numberActives>a.order-1?(a._deleteKeyFromNode(d,b,function(){e(!0)}),!0):d.isLeaf&&d===a.root?(a._deleteKeyFromNode(d,b,function(){e(!0)}),!0):(!1===d.isLeaf&&a._diskRead(d.children[b],function(f){f.numberActives>a.order-1?a._getMaxKeyPos(a,f,function(g){c=g.node.keys[g.index],d.keys[b]=c,a._diskWrite(d,function(b){b=f,c=c.key,a.__deleteSearchNode(a,c,b,e)})}):a._diskRead(d.children[b+1],function(g){g.numberActives>a.order-1?a._getMinKeyPos(a,g,function(f){c=f.node.keys[f.index],d.keys[b]=c,a._diskWrite(d,function(b){b=g,c=c.key,a.__deleteSearchNode(a,c,b,e)})}):f.numberActives===a.order-1&&g.numberActives===a.order-1&&a._mergeNodes(f,d.keys[b],g,function(f){d.children[b]=f,b++;for(var g=b;g<d.numberActives;g++)d.children[g]=d.children[g+1],d.keys[g-1]=d.keys[g];d.children[g]=null,d.keys[g-1]=null,d.numberActives--,0===d.numberActives&&a.root===d&&(a.root=f),a._diskWrite(d,function(b){a.__deleteSearchNode(a,c,f,e)})})})}),void(d.isLeaf&&d.numberActives>a.order-1&&a._deleteKeyFromNode(d,b,function(b){a.__deleteSearchNode(a,c,b,e)})))},i.prototype._moveKey=function(a,b,c,d){c===h&&b--;var e=this;e._diskRead(a.children[b],function(f){e._diskRead(a.children[b+1],function(h){if(c==g){f.keys[f.numberActives]=a.keys[b],f.children[f.numberActives+1]=h.children[0],h.children[0]=null,f.numberActives++,a.keys[b]=h.keys[0];for(var i=1;i<h.numberActives;i++)h.keys[i-1]=h.keys[i],h.children[i-1]=h.children[i];h.children[h.numberActives-1]=h.children[h.numberActives],h.numberActives--}else{h.children[h.numberActives+1]=h.children[h.numberActives];for(var i=h.numberActives;i>0;i--)h.children[i]=h.children[i-1],h.keys[i]=h.keys[i-1];h.keys[0]=null,h.children[0]=null,h.children[0]=f.children[f.numberActives],h.keys[0]=a.keys[b],h.numberActives++,f.children[f.numberActives]=null,a.keys[b]=f.keys[f.numberActives-1],f.keys[f.numberActives-1]=null,f.numberActives--}e._diskWrite(f,function(b){e._diskWrite(h,function(b){e._diskWrite(a,function(a){return d(a)})})})})})},i.prototype._mergeSiblings=function(a,b,c,d){var e,f,i,j;b===a.numberActives?(b--,i=a.children[a.numberActives-1],j=a.children[a.numberActives]):(i=a.children[b],j=a.children[b+1]);var k=this;k._diskRead(i,function(c){k._diskRead(j,function(g){var h=k._allocateNode();for(h.isLeaf=c.isLeaf,h.level=c.level,f=0;f<k.order-1;f++)h.keys[f]=c.keys[f],h.children[f]=c.children[f];for(h.keys[k.order-1]=a.keys[b],h.children[k.order-1]=c.children[k.order-1],f=0;f<k.order-1;f++)h.keys[f+k.order]=g.keys[f],h.children[f+k.order]=g.children[f];for(h.children[2*k.order-1]=g.children[k.order-1],a.children[b]=h,f=b;f<a.numberActives;f++)a.keys[f]=a.keys[f+1],a.children[f+1]=a.children[f+2];for(h.numberActives=c.numberActives+g.numberActives+1,a.numberActives--,e=a.numberActives;e<2*k.order-1;e++)a.keys[e]=null;0===a.numberActives&&k.root===a&&(k.root=h,h.level?h.isLeaf=!1:h.isLeaf=!0),k._diskWrite(h,function(b){k._diskWrite(a,function(a){k._diskDelete(c,function(){k._diskDelete(g,function(){if(k.root!==b)return d(b);k._updateRootNode(k.root,function(){return d(b)})})})})})})})},i.prototype._deleteKeyFromNode=function(a,b,c){var d=2*this.order-1;a.numberActives<d&&(d=a.numberActives);var e;if(!1===a.isLeaf)return!1;a.keys[b];for(e=b;e<d-1;e++)a.keys[e]=a.keys[e+1];a.keys.pop(),a.numberActives--,this._diskWrite(a,function(a){return c(a)})},i.prototype._mergeNodes=function(a,b,c,d){var e,f;for(e=this._allocateNode(),e.isLeaf=!0,f=0;f<a.numberActives;f++)e.keys[f]=a.keys[f],e.children[f]=a.children[f];for(e.children[a.numberActives]=a.children[a.numberActives],e.keys[a.numberActives]=b,f=0;f<c.numberActives;f++)e.keys[f+a.numberActives+1]=c.keys[f],e.children[f+a.numberActives+1]=c.children[f];e.children[2*this.order-1]=c.children[c.numberActives],e.numberActives=a.numberActives+c.numberActives+1,e.isLeaf=a.isLeaf,e.level=a.level;var g=this;this._diskWrite(e,function(b){g._diskDelete(a,function(){g._diskDelete(c,function(){return d(b)})})})},i.prototype.audit=function(a){var b=[],c=[],d=this,e=function(e){for(var f=0;f<c.length;f++)if(0===d.comparator(c[f],e)){var g=" !!! duplicated key "+e;!0===a&&console.log(g),b.push(g)}},f=null,d=this;return this.walkNodes(function(g){!0===a&&(console.log("--- Node at "+g.level+" level"),console.log(" - leaf? "+g.isLeaf),console.log(" - num actives? "+g.numberActives),console.log(" - keys: "));for(var h=g.numberActives;h<g.keys.length;h++)null!=g.keys[h]&&!0===a&&(console.log(" * warning : redundant key data"),b.push(" * warning : redundant key data"));for(var h=g.numberActives+1;h<g.children.length;h++)null!=g.children[h]&&!0===a&&(console.log(" * warning : redundant children data"),b.push(" * warning : redundant key data"));if(!1===g.isLeaf)for(var h=0;h<g.numberActives;h++){var i=this._diskRead(g.children[h]).keys[this._diskRead(g.children[h]).numberActives-1].key,j=this._diskRead(g.children[h+1]).keys[0].key;if(!0===a&&console.log("   "+g.keys[h].key+"("+i+","+j+")"),-1===d.comparator(g.keys[h].key,i)){var k=" !!! value max left "+i+" > key "+g.keys[h].key;!0===a&&console.log(k),b.push(k)}if(1===d.comparator(g.keys[h].key,j)){var k=" !!! value min right "+j+" < key "+g.keys[h].key;!0===a&&console.log(k),b.push(k)}e(g.keys[h].key),c.push(g.keys[h].key)}else{if(null===f)f=g.level;else if(f!=g.level){var k=" !!! Leaf node with wrong level value";!0===a&&console.log(k),b.push(k)}for(var h=0;h<g.numberActives;h++)!0===a&&console.log(" "+g.keys[h].key),e(g.keys[h].key),c.push(g.keys[h].key)}if(g!=d.root){if(g.numberActives>2*d.order-1){if(!0===a)var k=" !!!! MAX num keys restriction violated ";console.log(k),b.push(k)}if(g.numberActives<d.order-1){if(!0===a)var k=" !!!! MIN num keys restriction violated ";console.log(k),b.push(k)}}}),b},i.prototype._getMaxKeyPos=function(a,b,c){var d={};return null===b?c(null):!0===b.isLeaf?(d.node=b,d.index=b.numberActives-1,c(d)):(d.node=b,d.index=b.numberActives-1,a._diskRead(b.children[b.numberActives],function(b){return a._getMaxKeyPos(a,b,c)}),void 0)},i.prototype._getMinKeyPos=function(a,b,c){var d={};if(null===b&&c(null),!0===b.isLeaf)return d.node=b,d.index=0,c(d);d.node=b,d.index=0,a._diskRead(b.children[0],function(b){return a._getMinKeyPos(a,b,c)})};var j=function(){this.numberActives=0,this.isLeaf=null,this.keys=[],this.children=[],this.level=0};b.exports={Tree:i,Node:j}},{"./utils":126}],110:[function(a,b,c){var d=a("./utils"),e=a("./utils"),g=(a("./quad_index").QuadIndex,a("./quad_index").Pattern),h=a("./rdf_model"),i=a("./abstract_query_tree").AbstractQueryTree;Callbacks={},Callbacks.ANYTHING={token:"var",value:"_"},Callbacks.added="added",Callbacks.deleted="deleted",Callbacks.eventsFlushed="eventsFlushed",Callbacks.CallbacksBackend=function(){this.aqt=new i,this.engine=arguments[0],this.indexMap={},this.observersMap={},this.queriesIndexMap={},this.emptyNotificationsMap={},this.queriesList=[],this.pendingQueries=[],this.matchedQueries=[],this.updateInProgress=null,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},this.callbackCounter=0,this.callbacksMap={},this.callbacksInverseMap={},this.queryCounter=0,this.queriesMap={},this.queriesCallbacksMap={},this.queriesInverseMap={};for(var a=0;a<this.indices.length;a++){var b=this.indices[a];this.indexMap[b]={},this.queriesIndexMap[b]={}}},Callbacks.CallbacksBackend.prototype.startGraphModification=function(){!0!==this.ongoingModification&&(this.pendingQueries=[].concat(this.queriesList),this.matchedQueries=[],null==this.updateInProgress&&(this.updateInProgress={},this.updateInProgress[Callbacks.added]=[],this.updateInProgress[Callbacks.deleted]=[]))},Callbacks.CallbacksBackend.prototype.nextGraphModification=function(a,b){this.updateInProgress[a].push(b)},Callbacks.CallbacksBackend.prototype.endGraphModification=function(a){if(!0!==this.ongoingModification){var b=this;if(null!=this.updateInProgress){var c=b.updateInProgress;b.updateInProgress=null,this.sendNotification(Callbacks.deleted,c[Callbacks.deleted],function(){b.sendNotification(Callbacks.added,c[Callbacks.added],function(){b.sendEmptyNotification(Callbacks.eventsFlushed,null,function(){b.dispatchQueries(function(){a(!0)})})})})}else a(!0)}else a(!0)},Callbacks.CallbacksBackend.prototype.cancelGraphModification=function(){!0!==this.ongoingModification&&(this.updateInProgress=null)},Callbacks.CallbacksBackend.prototype.sendNotification=function(a,b,c){for(var d={},e=0;e<b.length;e++){var f=b[e];for(var g in this.indexMap){var h=this.indexMap[g],i=this.componentOrders[g];this._searchCallbacksInIndex(h,i,a,f,d),0!=this.pendingQueries.length&&(h=this.queriesIndexMap[g],this._searchQueriesInIndex(h,i,f))}}this.dispatchNotifications(d),null!=c&&c(!0)},Callbacks.CallbacksBackend.prototype.sendEmptyNotification=function(a,b,c){for(var d=this.emptyNotificationsMap[a]||[],e=0;e<d.length;e++)d[e](a,b);c()},Callbacks.CallbacksBackend.prototype.dispatchNotifications=function(a){for(var b in a){var c=this.callbacksMap[b],d=a[b][Callbacks.deleted];if(null!=d)try{c(Callbacks.deleted,d)}catch(a){}for(var e in a[b])if(e!=Callbacks.deleted)try{c(e,a[b][e])}catch(a){}}},Callbacks.CallbacksBackend.prototype._searchCallbacksInIndex=function(a,b,c,d,e){for(var f=d[1],d=d[0],g=0;g<b.length+1;g++){for(var h=a._||[],i=[],j=0;j<h.length;j++){var k=h[j];null!=this.callbacksMap[k]&&(e[k]=e[k]||{},e[k][c]=e[k][c]||[],e[k][c].push(d),i.push(k))}a._=i;var l=b[g];if(null==a[""+f[l]])break;a=a[""+f[l]]}},Callbacks.CallbacksBackend.prototype.subscribeEmpty=function(a,b){var c=this.emptyNotificationsMap[a]||[];c.push(b),this.emptyNotificationsMap[a]=c},Callbacks.CallbacksBackend.prototype.unsubscribeEmpty=function(a,b){var c=this.emptyNotificationsMap[a];null!=c&&(c=d.reject(c,function(a){return a===b})),this.emptyNotificationsMap[a]=c},Callbacks.CallbacksBackend.prototype.subscribe=function(a,b,c,d,e,f){var h=this._tokenizeComponents(a,b,c,d),i={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,i);var j=this;this.engine.normalizeQuad(h,i,!0,function(a){for(var b=new g(a),c=j._indexForPattern(b),d=j.componentOrders[c],h=j.indexMap[c],i=0;i<d.length;i++){var k=d[i],l=a[k];if("_"===l){null==h._&&(h._=[]),j.callbackCounter++,h._.push(j.callbackCounter),j.callbacksMap[j.callbackCounter]=e,j.callbacksInverseMap[e]=j.callbackCounter;break}i===d.length-1?(h[l]=h[l]||{_:[]},j.callbackCounter++,h[l]._.push(j.callbackCounter),j.callbacksMap[j.callbackCounter]=e,j.callbacksInverseMap[e]=j.callbackCounter):(h[l]=h[l]||{},h=h[l])}null!=f&&f(!0)})},Callbacks.CallbacksBackend.prototype.unsubscribe=function(a){var b=this.callbacksInverseMap[a];null!=b&&(delete this.callbacksInverseMap[a],delete this.callbacksMap[b])},Callbacks.CallbacksBackend.prototype._tokenizeComponents=function(a,b,c,d){var e={};return null==a?e.subject=Callbacks.ANYTHING:0==a.indexOf("_:")?e.subject={token:"blank",value:a}:e.subject={token:"uri",value:a},e.predicate=null==b?Callbacks.ANYTHING:{token:"uri",value:b},e.object=null==c?Callbacks.ANYTHING:{token:"uri",value:c},e.graph=null==d?Callbacks.ANYTHING:{token:"uri",value:d},e},Callbacks.CallbacksBackend.prototype._indexForPattern=function(a){for(var b=a.indexKey,c=this.indices,e=0;e<c.length;e++)for(var f=c[e],g=this.componentOrders[f],h=0;h<g.length&&!1!==d.include(b,g[h]);h++)if(h==b.length-1)return f;return"SPOG"},Callbacks.CallbacksBackend.prototype.observeNode=function(){var a,b,c,d;4===arguments.length?(a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3]):(a=arguments[0],b=this.engine.lexicon.defaultGraphUri,c=arguments[1],d=arguments[2]);var e="CONSTRUCT { <"+a+"> ?p ?o } WHERE { GRAPH <"+b+"> { <"+a+"> ?p ?o } }",f=this,g={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,g);var i=[];this.engine.execute(e,function(b,e){if(b)d&&d(!1);else{var j=e,k=!1,l=function(a,b){if("eventsFlushed"===a&&k){k=!1;try{c(j)}catch(a){}}else if("eventsFlushed"!==a){k=!0;for(var d=0;d<b.length;d++){var e=b[d],l=h.buildRDFResource(e.subject,i,f.engine,g),m=h.buildRDFResource(e.predicate,i,f.engine,g),n=h.buildRDFResource(e.object,i,f.engine,g);null!=l&&null!=m&&null!=n&&(e=new h.Triple(l,m,n),a===Callbacks.added?j.add(e):a===Callbacks.deleted&&j.remove(e))}}};f.observersMap[c]=l,f.subscribeEmpty(Callbacks.eventsFlushed,l),f.subscribe(a,null,null,null,l,function(){try{c(j)}catch(a){}d&&d(!0)})}})},Callbacks.CallbacksBackend.prototype.stopObservingNode=function(a){var b=this.observersMap[a];return!!b&&(this.unsubscribe(b),this.unsubscribeEmpty(Callbacks.eventsFlushed,b),!0)},Callbacks.CallbacksBackend.prototype.observeQuery=function(a,b,c){var d=this.aqt.parseQueryString(a),f=this.aqt.parseSelect(d.units[0]),h=this.aqt.collectBasicTriples(f),i=this,j={blanks:{},outCache:{}};this.engine.registerNsInEnvironment(null,j);var k=this.queryCounter;this.queryCounter++,this.queriesMap[k]=a,this.queriesInverseMap[a]=k,this.queriesList.push(k),this.queriesCallbacksMap[k]=b,e.eachSeries(h,function(a,b){null==a.graph&&(a.graph=i.engine.lexicon.defaultGraphUriTerm),i.engine.normalizeQuad(a,j,!0,function(a){for(var c=new g(a),d=i._indexForPattern(c),e=i.componentOrders[d],f=i.queriesIndexMap[d],h=0;h<e.length;h++){var j=e[h],l=a[j];if("string"==typeof l){null==f._&&(f._=[]),f._.push(k);break}h===e.length-1?(f[l]=f[l]||{_:[]},f[l]._.push(k)):(f[l]=f[l]||{},f=f[l])}b()})},function(){i.engine.execute(a,function(a,c){a?console.log("ERROR in query callback "+c):b(c)}),null!=c&&c()})},Callbacks.CallbacksBackend.prototype.stopObservingQuery=function(a){var b=this.queriesInverseMap[a];null!=b&&(delete this.queriesInverseMap[a],delete this.queriesMap[b],this.queriesList=d.reject(this.queriesList,function(a){return a===b}))},Callbacks.CallbacksBackend.prototype._searchQueriesInIndex=function(a,b,c){for(var e=c[1],c=c[0],f=0;f<b.length+1;f++){for(var g=a._||[],h=[],i=0;i<g.length;i++){var j=g[i];d.include(this.pendingQueries,j)&&(d.remove(this.pendingQueries,function(a){return a===j}),this.matchedQueries.push(j)),null!=this.queriesMap[j]&&h.push(j)}a._=h;var k=b[f];if(null==a[""+e[k]])break;a=a[""+e[k]]}},Callbacks.CallbacksBackend.prototype.dispatchQueries=function(a){var c,d,b=this,f={};e.eachSeries(this.matchedQueries,function(a,e){null==f[a]?(f[a]=!0,c=b.queriesMap[a],d=b.queriesCallbacksMap[a],b.engine.execute(c,function(a,b){if(!a)try{d(b)}catch(a){}e()})):e()},function(){a()})},Callbacks.CallbacksBackend.added=Callbacks.added,Callbacks.CallbacksBackend.deleted=Callbacks.deleted,Callbacks.CallbacksBackend.eventsFlushed=Callbacks.eventsFlushed,b.exports=Callbacks},{"./abstract_query_tree":108,"./quad_index":118,"./rdf_model":123,"./utils":126}],111:[function(a,b,c){var d=a("jsonld"),e=function(a,b,c){var e=null;d.normalize(a,{},function(a,d){if(a)c(a);else{var f=function(a){return"blank node"===a.type?{blank:a.value}:"IRI"===a.type?{token:"uri",value:a.value}:"literal"===a.type?null!=a.language?{literal:'"'+a.value+'"@'+a.language}:null!==a.datatype?{literal:'"'+a.value+'"^^<'+a.datatype+">"}:{literal:'"'+a.value+'"'}:void 0};e=[];var g=function(a,c,d){e.push({subject:f(a),predicate:f(c),object:f(d),graph:b})};for(var i in d)for(var j=d[i],k=0;k<j.length;k++){var l=j[k];g(l.subject,l.predicate,l.object)}c(null,e)}})};c.JSONLDParser={};var f=c.JSONLDParser;f.parser={async:!0,parse:function(a,b,c,d){try{"string"==typeof a&&(a=JSON.parse(a)),e(a,b,d)}catch(a){d(a)}}},b.exports={JSONLDParser:f}},{jsonld:74}],112:[function(a,b,c){var d=a("./utils"),e=a("./btree").Tree;Lexicon=function(a){var b=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,d.seq(function(a){new e(2,function(c){b.uris=c,a()})},function(a){new e(2,function(c){b.literals=c,a()})},function(a){new e(2,function(c){b.knownGraphs=c,a()})},function(a){new e(2,function(c){b.oidUris=c,a()})},function(a){new e(2,function(c){b.oidLiterals=c,a()})},function(a){new e(2,function(c){b.oidBlanks=c,a()})})(function(){null!=a&&a(b)})},Lexicon.prototype.registerGraph=function(a,b,c){a!=this.defaultGraphOid?this.knownGraphs.insert(a,b,function(){c()}):c()},Lexicon.prototype.registeredGraphs=function(a,b){var c=[];this.knownGraphs.walk(function(b){!0===a?c.push(b.data):c.push(b.key)},function(){b(c)})},Lexicon.prototype.registerUri=function(a,b){var c=this;a===this.defaultGraphUri?b(this.defaultGraphOid):this.uris.search(a,function(e){if(null==e){var f=c.oidCounter,g="u"+f;c.oidCounter++,d.seq(function(b){c.uris.insert(a,[f,0],function(){b()})},function(b){c.oidUris.insert(g,a,function(){b()})})(function(){b(f)})}else f=e[0],e[1]=e[1]+1,b(f)})},Lexicon.prototype.resolveUri=function(a,b){a===this.defaultGraphUri?b(this.defaultGraphOid):this.uris.search(a,function(a){b(null!=a?a[0]:-1)})},Lexicon.prototype.resolveUriCost=function(a,b){a===this.defaultGraphUri?b(0):this.uris.search(a,function(a){b(null!=a?a[1]:-1)})},Lexicon.prototype.registerBlank=function(a){var b=this.oidCounter;this.oidCounter++;var c=""+b;this.oidBlanks.insert(c,c,function(){a(b)})},Lexicon.prototype.resolveBlank=function(a,b){var c=this;this.oidBlanks.search(a,function(a){if(null!=a)b(a);else{var d=c.oidCounter;this.oidCounter++,b(""+d)}})},Lexicon.prototype.resolveBlankCost=function(a,b){b(0)},Lexicon.prototype.registerLiteral=function(a,b){var c=this;this.literals.search(a,function(e){if(null==e){var f=c.oidCounter,g="l"+f;c.oidCounter++,d.seq(function(b){c.literals.insert(a,[f,0],function(){b()})},function(b){c.oidLiterals.insert(g,a,function(){b()})})(function(){b(f)})}else{var f=e[0];e[1]=e[1]+1,b(f)}})},Lexicon.prototype.resolveLiteral=function(a,b){this.literals.search(a,function(a){b(null!=a?a[0]:-1)})},Lexicon.prototype.resolveLiteralCost=function(a,b){this.literals.search(a,function(a){b(null!=a?a[1]:-1)})},Lexicon.prototype.parseLiteral=function(a){var b=a.lastIndexOf("@");if(-1!=b&&'"'===a[b-1]&&null!=a.substring(b,a.length).match(/^@[a-zA-Z\-]+$/g)){var c=a.substring(1,b-1);return{token:"literal",value:c,lang:a.substring(b+1,a.length)}}var b=a.lastIndexOf("^^");if(-1!=b&&'"'===a[b-1]&&"<"===a[b+2]&&">"===a[a.length-1]){var c=a.substring(1,b-1);return{token:"literal",value:c,type:a.substring(b+3,a.length-1)}}var c=a.substring(1,a.length-1);return{token:"literal",value:c}},Lexicon.prototype.parseUri=function(a){return{token:"uri",value:a}},Lexicon.prototype.retrieve=function(a,b){var c=this;a===this.defaultGraphOid?b({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0}):d.seq(function(b,d){c.oidUris.search("u"+a,function(a){null!=a?d(null,c.parseUri(a)):d(null,null)})},function(b,d){null==b?c.oidLiterals.search("l"+a,function(a){null!=a?d(null,c.parseLiteral(a)):d(null,null)}):d(null,b)},function(b,d){null==b?c.oidBlanks.search(""+a,function(b){null!=b?d(null,{token:"blank",value:"_:"+a}):d(null,null)}):d(null,b)})(null,function(a,c){b(c)})},Lexicon.prototype.clear=function(a){var b=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,d.seq(function(a){new e(2,function(c){b.uris=c,a()})},function(a){new e(2,function(c){b.literals=c,a()})},function(a){new e(2,function(c){b.knownGraphs=c,a()})},function(a){new e(2,function(c){b.oidUris=c,a()})},function(a){new e(2,function(c){b.oidLiterals=c,a()})},function(a){new e(2,function(c){b.oidBlanks=c,a()})})(function(){null!=a&&a()})},Lexicon.prototype.unregister=function(a,b,c){var e=this;d.seq(function(c){e._unregisterTerm(a.subject.token,b.subject,c)},function(c){e._unregisterTerm(a.predicate.token,b.predicate,c)},function(c){e._unregisterTerm(a.object.token,b.object,c)},function(c){null!=a.graph?e._unregisterTerm(a.graph.token,b.graph,c):c()})(function(){c(!0)})},Lexicon.prototype._unregisterTerm=function(a,b,c){var e=this;if("uri"===a)if(b!=this.defaultGraphOid){var f="u"+b;e.oidUris.search(f,function(a){e.uris.search(a,function(g){var h=g[1];""+g[0]==""+b?0===h?d.seq(function(a){e.oidUris.delete(f,function(){a()})},function(b){e.uris.delete(a,function(){b()})},function(a){e.knownGraphs.delete(b,function(){a()})})(function(){c()}):e.uris.insert(a,[b,h-1],function(){c()}):c()})})}else c();else if("literal"===a){this.oidCounter++;var f="l"+b;e.oidLiterals.search(f,function(a){e.literals.search(a,function(g){var h=g[1];""+g[0]==""+b?0===h?d.seq(function(a){e.oidLiterals.delete(f,function(){a()})},function(b){e.literals.delete(a,function(){b()})})(function(){c()}):e.literals.insert(a,[b,h-1],function(){c()}):c()})})}else"blank"===a?e.oidBlanks.delete(""+b,function(){c()}):c()},b.exports={Lexicon:Lexicon}},{"./btree":109,"./utils":126}],113:[function(a,b,c){var d=a("http"),e=a("https"),f=a("url");NetworkTransport={load:function(a,b,c,g){var h=null==g?3:g,i=f.parse(a,!0,!0),j={host:i.host,hostname:i.hostname,method:"GET",path:i.path,headers:{host:i.hostname,Accept:b}},k=null;"http:"===i.protocol?(j.port=i.port||80,k=d):"https:"===i.protocol&&(j.port=i.port||443,k=e);var l=k.request(j,function(a){var d=a.headers,e="";if("2"==(""+a.statusCode)[0])a.on("end",function(){c(null,{headers:d,data:e})}),a.on("data",function(a){e+=a});else if("3"==(""+a.statusCode)[0])if(0==h)c(new Error("Too many redirections"));else{var f=d.Location||d.location;null!=f?NetworkTransport.load(f,b,c,h-1):c(new Error("Redirection without location header"))}else c(new Error("HTTP error: "+a.statusCode))});l.on("error",c),l.end()}},b.exports={NetworkTransport:NetworkTransport}},{http:34,https:9,url:40}],114:[function(a,b,c){b.exports=function(){"use strict";function a(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a){function u(b){var d,e,c=l[b];if(c)return c;for(d=b-1;!l[d];)d--;for(c=l[d],c={line:c.line,column:c.column,seenCR:c.seenCR};d<b;)e=a.charAt(d),"\n"===e?(c.seenCR||c.line++,c.column=1,c.seenCR=!1):"\r"===e||"\u2028"===e||"\u2029"===e?(c.line++,c.column=1,c.seenCR=!0):(c.column++,c.seenCR=!1),d++;return l[b]=c,c}function v(a,b){var c=u(a),d=u(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:d.line,column:d.column}}}function w(a){j<m||(j>m&&(m=j,n=[]),n.push(a))}function x(a,c,d,e){function f(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function g(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var e,f,g,d=new Array(a.length);for(g=0;g<a.length;g++)d[g]=a[g].description;return e=a.length>1?d.slice(0,-1).join(", ")+" or "+d[a.length-1]:d[0],f=b?'"'+c(b)+'"':"end of input","Expected "+e+" but "+f+" found."}return null!==c&&f(c),new b(null!==a?a:g(c,d),c,d,e)}function y(a){var c,b=new Array(a.length);for(c=0;c<a.length;c++)b[c]=a.charCodeAt(c)-32;return b}function z(b){for(var n,p,c=i[b],d=0,f=[],g=c.length,l=[],m=[];;){for(;d<g;)switch(c[d]){case 0:m.push(h[c[d+1]]),d+=2;break;case 1:m.push(void 0),d++;break;case 2:m.push(null),d++;break;case 3:m.push(e),d++;break;case 4:m.push([]),d++;break;case 5:m.push(j),d++;break;case 6:m.pop(),d++;break;case 7:j=m.pop(),d++;break;case 8:m.length-=c[d+1],d+=2;break;case 9:m.splice(-2,1),d++;break;case 10:m[m.length-2].push(m.pop()),d++;break;case 11:m.push(m.splice(m.length-c[d+1],c[d+1])),d+=2;break;case 12:m.push(a.substring(m.pop(),j)),d++;break;case 13:l.push(g),f.push(d+3+c[d+1]+c[d+2]),m[m.length-1]?(g=d+3+c[d+1],d+=3):(g=d+3+c[d+1]+c[d+2],d+=3+c[d+1]);break;case 14:l.push(g),f.push(d+3+c[d+1]+c[d+2]),m[m.length-1]===e?(g=d+3+c[d+1],d+=3):(g=d+3+c[d+1]+c[d+2],d+=3+c[d+1]);break;case 15:l.push(g),f.push(d+3+c[d+1]+c[d+2]),m[m.length-1]!==e?(g=d+3+c[d+1],d+=3):(g=d+3+c[d+1]+c[d+2],d+=3+c[d+1]);break;case 16:m[m.length-1]!==e?(l.push(g),f.push(d),g=d+2+c[d+1],d+=2):d+=2+c[d+1];break;case 17:l.push(g),f.push(d+3+c[d+1]+c[d+2]),a.length>j?(g=d+3+c[d+1],d+=3):(g=d+3+c[d+1]+c[d+2],d+=3+c[d+1]);break;case 18:l.push(g),f.push(d+4+c[d+2]+c[d+3]),a.substr(j,h[c[d+1]].length)===h[c[d+1]]?(g=d+4+c[d+2],d+=4):(g=d+4+c[d+2]+c[d+3],d+=4+c[d+2]);break;case 19:l.push(g),f.push(d+4+c[d+2]+c[d+3]),a.substr(j,h[c[d+1]].length).toLowerCase()===h[c[d+1]]?(g=d+4+c[d+2],d+=4):(g=d+4+c[d+2]+c[d+3],d+=4+c[d+2]);break;case 20:l.push(g),f.push(d+4+c[d+2]+c[d+3]),h[c[d+1]].test(a.charAt(j))?(g=d+4+c[d+2],d+=4):(g=d+4+c[d+2]+c[d+3],d+=4+c[d+2]);break;case 21:m.push(a.substr(j,c[d+1])),j+=c[d+1],d+=2;break;case 22:m.push(h[c[d+1]]),j+=h[c[d+1]].length,d+=2;break;case 23:m.push(e),0===o&&w(h[c[d+1]]),d+=2;break;case 24:k=m[m.length-1-c[d+1]],d+=2;break;case 25:k=j,d++;break;case 26:for(n=c.slice(d+4,d+4+c[d+3]),p=0;p<c[d+3];p++)n[p]=m[m.length-1-n[p]];m.splice(m.length-c[d+2],c[d+2],h[c[d+1]].apply(null,n)),d+=4+c[d+3];break;case 27:m.push(z(c[d+1])),d+=2;break;case 28:o++,d++;break;case 29:o--,d++;break;default:throw new Error("Invalid opcode: "+c[d]+".")}if(!(l.length>0))break;g=l.pop(),d=f.pop()}return m[0]}var p,c=arguments.length>1?arguments[1]:{},e={},f={DOCUMENT:0},g=0,h=[{type:"other",description:"[1] QueryUnit"},{type:"other",description:"[2] Query"},function(a,b,c){return{token:"query",kind:"query",prologue:a,units:[b],inlineData:c}},{type:"other",description:"[3] Prologue"},function(a,b){return{token:"prologue",base:a,prefixes:b}},{type:"other",description:"[4] BaseDecl"},"BASE",{type:"literal",value:"BASE",description:'"BASE"'},"base",{type:"literal",value:"base",description:'"base"'},function(a){E(a);var b={};return b.token="base",b.value=a,b},{type:"other",description:"[5] PrefixDecl"},"PREFIX",{type:"literal",value:"PREFIX",description:'"PREFIX"'},"prefix",{type:"literal",value:"prefix",description:'"prefix"'},function(a,b){D(a,b);var c={};return c.token="prefix",c.prefix=a,c.local=b,c},{type:"other",description:"[6] SelectQuery"},function(a,b,c,d){for(var e={named:[],implicit:[]},f=0;f<b.length;f++){var g=b[f];"default"===g.kind?e.implicit.push(g.graph):e.named.push(g.graph)}0===e.named.length&&0===e.implicit.length&&e.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var h={};return h.kind="select",h.token="executableunit",h.dataset=e,h.projection=a.vars,h.modifier=a.modifier,h.pattern=c,null!=d&&null!=d.limit&&(h.limit=d.limit),null!=d&&null!=d.offset&&(h.offset=d.offset),null!=d&&null!=d.order&&""!=d.order&&(h.order=d.order),null!=d&&null!=d.group&&(h.group=d.group),h},{type:"other",description:"[7] SubSelect"},function(a,b,c){var d={};return d.kind="select",d.token="subselect",d.projection=a.vars,d.modifier=a.modifier,d.pattern=b,null!=c&&null!=c.limit&&(d.limit=c.limit),null!=c&&null!=c.offset&&(d.offset=c.offset),null!=c&&null!=c.order&&""!=c.order&&(d.order=c.order),null!=c&&null!=c.group&&(d.group=c.group),d},{type:"other",description:"[8] SelectClause"},"SELECT",{type:"literal",value:"SELECT",description:'"SELECT"'},"select",{type:"literal",value:"select",description:'"select"'},"DISTINCT",{type:"literal",value:"DISTINCT",description:'"DISTINCT"'},"distinct",{type:"literal",value:"distinct",description:'"distinct"'},"REDUCED",{type:"literal",value:"REDUCED",description:'"REDUCED"'},"reduced",{type:"literal",value:"reduced",description:'"reduced"'},"(",{type:"literal",value:"(",description:'"("'},"AS",{type:"literal",value:"AS",description:'"AS"'},"as",{type:"literal",value:"as",description:'"as"'},")",{type:"literal",value:")",description:'")"'},"*",{type:"literal",value:"*",description:'"*"'},function(a,b){var c=[];if(3===b.length&&"*"===b[1])return{vars:[{token:"variable",kind:"*"}],modifier:F(a)};for(var d=0;d<b.length;d++){var e=b[d];3===e.length?c.push({token:"variable",kind:"var",value:e[1]}):c.push({token:"variable",kind:"aliased",expression:e[3],alias:e[7]})}return{vars:c,modifier:F(a)}},{type:"other",description:"[9] ConstructQuery"},"CONSTRUCT",{type:"literal",value:"CONSTRUCT",description:'"CONSTRUCT"'},"construct",{type:"literal",value:"construct",description:'"construct"'},function(a,b,c,d){for(var e={named:[],implicit:[]},f=0;f<b.length;f++){var g=b[f];"default"===g.kind?e.implicit.push(g.graph):e.named.push(g.graph)}0===e.named.length&&0===e.implicit.length&&e.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var h={};return h.kind="construct",h.token="executableunit",h.dataset=e,h.template=a,h.pattern=c,null!=d&&null!=d.limit&&(h.limit=d.limit),null!=d&&null!=d.offset&&(h.offset=d.offset),null!=d&&null!=d.order&&""!=d.order&&(h.order=d.order),h},"WHERE",{type:"literal",value:"WHERE",description:'"WHERE"'},"where",{type:"literal",value:"where",description:'"where"'},"{",{type:"literal",value:"{",description:'"{"'},"}",{type:"literal",value:"}",description:'"}"'},function(a,b,c){for(var d={named:[],implicit:[]},e=0;e<a.length;e++){var f=a[e];"default"===f.kind?d.implicit.push(f.graph):d.named.push(f.graph)}0===d.named.length&&0===d.implicit.length&&d.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var g={};return g.kind="construct",g.token="executableunit",g.dataset=d,g.template=b,g.pattern={token:"basicgraphpattern",triplesContext:b.triplesContext},null!=c&&null!=c.limit&&(g.limit=c.limit),null!=c&&null!=c.offset&&(g.offset=c.offset),null!=c&&null!=c.order&&""!=c.order&&(g.order=c.order),g},{type:"other",description:"[10] DescribeQuery"},"DESCRIBE",{type:"literal",value:"DESCRIBE",description:'"DESCRIBE"'},{type:"other",description:"[11] AskQuery"},"ASK",{type:"literal",value:"ASK",description:'"ASK"'},"ask",{type:"literal",value:"ask",description:'"ask"'},function(a,b){for(var c={named:[],implicit:[]},d=0;d<a.length;d++){var e=a[d];"implicit"===e.kind?c.implicit.push(e.graph):c.named.push(e.graph)}0===c.named.length&&0===c.implicit.length&&c.implicit.push({token:"uri",prefix:null,suffix:null,value:"https://github.com/antoniogarrote/rdfstore-js#default_graph"});var f={};return f.kind="ask",f.token="executableunit",f.dataset=c,f.pattern=b,f},{type:"other",description:"[12] DatasetClause"},"FROM",{type:"literal",value:"FROM",description:'"FROM"'},"from",{type:"literal",value:"from",description:'"from"'},function(a){return a},{type:"other",description:"[13] DefaultGraphClause"},function(a){return{graph:a,kind:"default",token:"graphClause"}},{type:"other",description:"[14] NamedGraphClause"},"NAMED",{type:"literal",value:"NAMED",description:'"NAMED"'},"named",{type:"literal",value:"named",description:'"named"'},function(a){return{graph:a,kind:"named",token:"graphCluase"}},{type:"other",description:"[15] SourceSelector"},{type:"other",description:"[16] WhereClause"},function(a){return a},{type:"other",description:"[17] SolutionModifier"},function(a,b,c){var d={};return null!=c&&(null!=c.limit&&(d.limit=c.limit),null!=c.offset&&(d.offset=c.offset)),null!=a&&(d.group=a),d.order=b,d},{type:"other",description:"[18] GroupClause"},"GROUP",{type:"literal",value:"GROUP",description:'"GROUP"'},"group",{type:"literal",value:"group",description:'"group"'},"BY",{type:"literal",value:"BY",description:'"BY"'},"by",{type:"literal",value:"by",description:'"by"'},function(a){return a},{type:"other",description:"[19] GroupCondition"},function(a){return a},function(a){return a},function(a,b){return 0!=b.length?{token:"aliased_expression",expression:a,alias:b[2]}:a},function(a){return a},{type:"other",description:"[20] HavingClause"},"HAVING",{type:"literal",value:"HAVING",description:'"HAVING"'},{type:"other",description:"[21] HavingCondition"},{type:"other",description:"[22] OrderClause"},"ORDER",{type:"literal",value:"ORDER",description:'"ORDER"'},"order",{type:"literal",value:"order",description:'"order"'},function(a){return a},{type:"other",description:"[23] OrderCondition"},"ASC",{type:"literal",value:"ASC",description:'"ASC"'},"asc",{type:"literal",value:"asc",description:'"asc"'},"DESC",{type:"literal",value:"DESC",description:'"DESC"'},"desc",{type:"literal",value:"desc",description:'"desc"'},function(a,b){return{direction:a.toUpperCase(),expression:b}},function(a){if("var"===a.token)var a={token:"expression",expressionType:"atomic",primaryexpression:"var",value:a};return{direction:"ASC",expression:a}},{type:"other",description:"[24] LimitOffsetClauses"},function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];null!=d&&null!=d.limit?b.limit=d.limit:null!=d&&null!=d.offset&&(b.offset=d.offset)}return b},{type:"other",description:"[25] LimitClause"},"LIMIT",{type:"literal",value:"LIMIT",description:'"LIMIT"'},"limit",{type:"literal",value:"limit",description:'"limit"'},function(a){return{limit:parseInt(a.value)}},{type:"other",description:"[26] OffsetClause"},"OFFSET",{type:"literal",value:"OFFSET",description:'"OFFSET"'},"offset",{type:"literal",value:"offset",description:'"offset"'},function(a){return{offset:parseInt(a.value)}},{type:"other",description:"[27] BindingsClause"},"BINDINGS",{type:"literal",value:"BINDINGS",description:'"BINDINGS"'},{type:"other",description:"[28] BindingValue"},"UNDEF",{type:"literal",value:"UNDEF",description:'"UNDEF"'},{type:"other",description:"[28]\tValuesClause\t  ::=\t( 'VALUES' DataBlock )?"},"VALUES",{type:"literal",value:"VALUES",description:'"VALUES"'},"values",{type:"literal",value:"values",description:'"values"'},function(a){return null!=a?a[1]:null},{type:"other",description:"[29] UpdateUnit"},{type:"other",description:"[30] Update"},";",{type:"literal",value:";",description:'";"'},function(a,b,c){var d={};d.token="query",d.kind="update",d.prologue=a;var e=[b];return null!=c&&null!=c.length&&null!=c[3]&&null!=c[3].units&&(e=e.concat(c[3].units)),d.units=e,d},{type:"other",description:"[31] Update1"},{type:"other",description:"[32] Load"},"LOAD",{type:"literal",value:"LOAD",description:'"LOAD"'},"load",{type:"literal",value:"load",description:'"load"'},"INTO",{type:"literal",value:"INTO",description:'"INTO"'},"into",{type:"literal",value:"into",description:'"into"'},function(a,b){var c={};return c.kind="load",c.token="executableunit",c.sourceGraph=a,null!=b&&(c.destinyGraph=b[2]),c},{type:"other",description:"[33] Clear"},"CLEAR",{type:"literal",value:"CLEAR",description:'"CLEAR"'},"clear",{type:"literal",value:"clear",description:'"clear"'},"SILENT",{type:"literal",value:"SILENT",description:'"SILENT"'},"silent",{type:"literal",value:"silent",description:'"silent"'},function(a){var b={};return b.kind="clear",b.token="executableunit",b.destinyGraph=a,b},{type:"other",description:"[34] Drop"},"DROP",{type:"literal",value:"DROP",description:'"DROP"'},"drop",{type:"literal",value:"drop",description:'"drop"'},function(a){var b={};return b.kind="drop",b.token="executableunit",b.destinyGraph=a,b},{type:"other",description:"[35] Create"},"CREATE",{type:"literal",value:"CREATE",description:'"CREATE"'},"create",{type:"literal",value:"create",description:'"create"'},function(a){var b={};return b.kind="create",b.token="executableunit",b.destinyGraph=a,b},{type:"other",description:"[36] InsertData"},"INSERT",{type:"literal",value:"INSERT",description:'"INSERT"'},"insert",{type:"literal",value:"insert",description:'"insert"'},"DATA",{type:"literal",value:"DATA",description:'"DATA"'},"data",{type:"literal",value:"data",description:'"data"'},function(a){var b={};return b.kind="insertdata",b.token="executableunit",b.quads=a,b},{type:"other",description:"[37] DeleteData"},"DELETE",{type:"literal",value:"DELETE",description:'"DELETE"'},"delete",{type:"literal",value:"delete",description:'"delete"'},function(a){var b={};return b.kind="deletedata",b.token="executableunit",b.quads=a,b},{type:"other",description:"[38] DeleteWhere"},function(a){var b={};b.kind="modify",b.pattern=a,b.with=null,b.using=null;var c=[],d=a.patterns[0];d=null==d.triplesContext&&null!=d.patterns?d.patterns[0].triplesContext:d.triplesContext;for(var e=0;e<d.length;e++){var f={},g=d[e];f.subject=g.subject,f.predicate=g.predicate,f.object=g.object,f.graph=g.graph,c.push(f)}return b.delete=c,b},{type:"other",description:"[39] Modify"},"WITH",{type:"literal",value:"WITH",description:'"WITH"'},"with",{type:"literal",value:"with",description:'"with"'},function(a,b,c,d){var e={};return e.kind="modify",e.with=""!=a&&null!=a?a[2]:null,3!==b.length||""!==b[2]&&null!=b[2]?3===b.length&&null!=b[0].length&&null!=b[1].length&&null!=b[2].length?(e.delete=b[0],e.insert=b[2]):(e.insert=b,e.delete=null):(e.delete=b[0],e.insert=null),""!=c&&(e.using=c),e.pattern=d,e},{type:"other",description:"[40] DeleteClause"},function(a){return a},{type:"other",description:"[41] InsertClause"},{type:"other",description:"[42] UsingClause"},"USING",{type:"literal",value:"USING",description:'"USING"'},"using",{type:"literal",value:"using",description:'"using"'},function(a){return null!=a.length?{kind:"named",uri:a[2]}:{kind:"default",uri:a}},{type:"other",description:"[43] GraphRef"},"GRAPH",{type:"literal",value:"GRAPH",description:'"GRAPH"'},"graph",{type:"literal",value:"graph",description:'"graph"'},function(a){return a},{type:"other",description:"[44] GraphRefAll"},"DEFAULT",{type:"literal",value:"DEFAULT",description:'"DEFAULT"'},"default",{type:"literal",value:"default",description:'"default"'},function(){return"default"},function(){return"named"},"ALL",{type:"literal",value:"ALL",description:'"ALL"'},"all",{type:"literal",value:"all",description:'"all"'},function(){return"all"},{type:"other",description:"[45] QuadPattern"},function(a){return a.quadsContext},{type:"other",description:"[46] QuadData"},{type:"other",description:"[47] Quads"},".",{type:"literal",value:".",description:'"."'},function(a,b){var c=[];if(null!=a&&null!=a.triplesContext)for(var d=0;d<a.triplesContext.length;d++){var e=a.triplesContext[d];e.graph=null,c.push(e)}if(b&&b.length>0&&b[0].length>0&&(c=c.concat(b[0][0].quadsContext),null!=b[0][2]&&null!=b[0][2].triplesContext))for(var d=0;d<b[0][2].triplesContext.length;d++){var e=b[0][2].triplesContext[d];e.graph=null,c.push(e)}return{token:"quads",quadsContext:c}},{type:"other",description:"[48] QuadsNotTriples"},function(a,b){var c=[];if(null!=b)for(var d=0;d<b.triplesContext.length;d++){var e=b.triplesContext[d];e.graph=a,c.push(e)}return{token:"quadsnottriples",quadsContext:c}},{type:"other",description:"[49] TriplesTemplate"},function(a,b){var c=a.triplesContext;return null!=b&&"object"==typeof b&&null!=b.length&&null!=b[3]&&null!=b[3].triplesContext&&(c=c.concat(b[3].triplesContext)),{token:"triplestemplate",triplesContext:c}},{type:"other",description:"[50] GroupGraphPattern"},function(a){return a},{type:"other",description:"[51] GroupGraphPatternSub"},function(a,b){var c=[];null!=a&&a!=[]&&c.push(a);for(var d=0;d<b.length;d++)for(var e=0;e<b[d].length;e++)null!=b[d][e]&&null!=b[d][e].token&&c.push(b[d][e]);for(var f=[],g=[],h=[],i=[],d=0;d<c.length;d++)if("triplespattern"!==c[d].token&&"filter"!==c[d].token&&"bind"!==c[d].token){if(0!=g.length||0!=h.length){for(var j=[],e=0;e<g.length;e++)j=j.concat(g[e].triplesContext);j.length>0&&f.push({token:"basicgraphpattern",triplesContext:j}),g=[]}f.push(c[d])}else"triplespattern"===c[d].token?g.push(c[d]):"bind"===c[d].token?i.push(c[d]):h.push(c[d]);if(0!=g.length||0!=h.length){for(var j=[],e=0;e<g.length;e++)j=j.concat(g[e].triplesContext);j.length>0&&f.push({token:"basicgraphpattern",triplesContext:j})}return{token:"groupgraphpattern",patterns:f,filters:h,binds:i}},{type:"other",description:"[54] TriplesBlock"},function(a,b){var c=a.triplesContext;return null!=b&&"object"==typeof b&&null!=b&&null!=b.length&&null!=b[2]&&null!=b[2].triplesContext&&(c=c.concat(b[2].triplesContext)),{token:"triplespattern",triplesContext:c}},{type:"other",description:"[53] GraphPatternNotTriples"},{type:"other",description:"[54] OptionalGraphPattern"},"OPTIONAL",{type:"literal",value:"OPTIONAL",description:'"OPTIONAL"'},"optional",{type:"literal",value:"optional",description:'"optional"'},function(a){return{token:"optionalgraphpattern",value:a}},{type:"other",description:"[55] GraphGraphPattern"},function(a,b){for(var c=0;c<b.patterns.length;c++)for(var e=b.patterns[c],f=0;f<e.triplesContext.length;f++){var g=e.triplesContext[f];g.graph=a}return b.token="groupgraphpattern",b},{type:"other",description:"[56] ServiceGraphPattern"},"SERVICE",{type:"literal",value:"SERVICE",description:'"SERVICE"'},function(a,b){return{token:"servicegraphpattern",status:"todo",value:[a,b]}},{type:"other",description:"[57] MinusGraphPattern"},"MINUS",{type:"literal",value:"MINUS",description:'"MINUS"'},"minus",{type:"literal",value:"minus",description:'"minus"'},function(a){return{token:"minusgraphpattern",status:"todo",value:a}},{type:"other",description:"[58] GroupOrUnionGraphPattern"},"UNION",{type:"literal",value:"UNION",description:'"UNION"'},"union",{type:"literal",value:"union",description:'"union"'},function(a,b){if(0===b.length)return a;for(var c={token:"graphunionpattern",value:[a]},d=0;d<b.length;d++)if(d==b.length-1)c.value.push(b[d][3]);else{c.value.push(b[d][3]);var e={token:"graphunionpattern",value:[c]};c=e}return c},{type:"other",description:"[59] Filter"},"FILTER",{type:"literal",value:"FILTER",description:'"FILTER"'},"filter",{type:"literal",value:"filter",description:'"filter"'},function(a){return{token:"filter",value:a}},{type:"other",description:"[60] Bind"},"BIND",{type:"literal",value:"BIND",description:'"BIND"'},"bind",{type:"literal",value:"bind",description:'"bind"'},function(a,b){return{token:"bind",expression:a,as:b}},{type:"other",description:"[60] Constraint"},{type:"other",description:"[61] InlineData"},function(a){return a},{type:"other",description:"[62] DataBlock"},{type:"other",description:"[63] InlineDataOneVar"},function(a,b){return{token:"inlineData",values:[{var:a,value:b}]}},{type:"other",description:"[64] InlineDataFull"},function(a,b){return{token:"inlineData",values:[],todo:!0}},{type:"other",description:"[65] DataBlockValue"},{type:"other",description:"[61] FunctionCall"},function(a,b){var c={};return c.token="expression",c.expressionType="irireforfunction",c.iriref=a,c.args=b.value,c},{type:"other",description:"[62] ArgList"},function(){var a={};return a.token="args",a.value=[],a},",",{type:"literal",value:",",description:'","'},function(a,b,c){for(var d=[],e=0;e<c.length;e++)d.push(c[e][1]);var f={};return f.token="args",f.value=[b].concat(d),null!=a&&"DISTINCT"===a.toUpperCase()?f.distinct=!0:f.distinct=!1,f},{type:"other",description:"[63] ExpressionList"},function(a,b){for(var c=[],d=0;d<b.length;d++)c.push(b[d][1]);var e={};return e.token="args",e.value=[a].concat(c),e},{type:"other",description:"[64] ConstructTemplate"},function(a){return a},{type:"other",description:"[65] ConstructTriples"},function(a,b){var c=a.triplesContext;return null!=b&&"object"==typeof b&&null!=b.length&&null!=b[3]&&null!=b[3].triplesContext&&(c=c.concat(b[3].triplesContext)),{token:"triplestemplate",triplesContext:c}},{type:"other",description:"[66] TriplesSameSubject"},function(a,b){var c=b.triplesContext,d=a;if(b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e],g=null;null!=f[1].length&&(f[1]=f[1][0]),d.token&&"triplesnodecollection"===d.token?(g={subject:d.chainSubject[0],predicate:f[0],object:f[1]},c.push(g),c=c.concat(d.triplesContext)):(g={subject:d,predicate:f[0],object:f[1]},c.push(g))}var h={};return h.token="triplessamesubject",h.triplesContext=c,h.chainSubject=d,h},function(a,b){var c=a.triplesContext,d=a.chainSubject;if(b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e];if(null!=f[1].length&&(f[1]=f[1][0]),"triplesnodecollection"===a.token)for(var g=0;g<d.length;g++){var h=d[g];if(null!=h.triplesContext){var i={subject:h.chainSubject,predicate:f[0],object:f[1]};c.concat(h.triplesContext)}else{var i={subject:d[g],predicate:f[0],object:f[1]};c.push(i)}}else{var i={subject:d,predicate:f[0],object:f[1]};c.push(i)}}var j={};return j.token="triplessamesubject",j.triplesContext=c,j.chainSubject=d,j},{type:"other",description:"[83] PropertyListPathNotEmpty"},function(a,b,c){var d={};d.token="propertylist";for(var e=[],f=[],h=0;h<b.length;h++)null!=b[h].triplesContext?(e=e.concat(b[h].triplesContext),"triplesnodecollection"===b[h].token&&null!=b[h].chainSubject.length?f.push([a,b[h].chainSubject[0]]):f.push([a,b[h].chainSubject])):f.push([a,b[h]]);for(var h=0;h<c.length;h++)for(var i=c[h][3],j=i[0],k=i[2]||[],l=0;l<k.length;l++)null!=k[l].triplesContext?(e=e.concat(k[l].triplesContext),f.push([j,k[l].chainSubject])):f.push([j,k[l]]);return d.pairs=f,d.triplesContext=e,d},{type:"other",description:"[67] PropertyListNotEmpty"},function(a,b,c){var d={};d.token="propertylist";for(var e=[],f=[],h=0;h<b.length;h++)null!=b[h].triplesContext?(e=e.concat(b[h].triplesContext),"triplesnodecollection"===b[h].token&&null!=b[h].chainSubject.length?f.push([a,b[h].chainSubject[0]]):f.push([a,b[h].chainSubject])):f.push([a,b[h]]);for(var h=0;h<c.length;h++)for(var i=c[h][3],j=i[0],k=i[2]||[],l=0;l<k.length;l++)null!=k[l].triplesContext?(e=e.concat(k[l].triplesContext),f.push([j,k[l].chainSubject])):f.push([j,k[l]]);return d.pairs=f,d.triplesContext=e,d},{type:"other",description:"[68] PropertyList"},{type:"other",description:"[86] ObjectListPath"},function(a,b){var c=[];c.push(a);for(var d=0;d<b.length;d++)for(var e=0;e<b[d].length;e++)"object"==typeof b[d][e]&&null!=b[d][e].token&&c.push(b[d][e]);return c},{type:"other",description:"[69] ObjectList"},function(a,b){var c=[];c.push(a);for(var d=0;d<b.length;d++)for(var e=0;e<b[d].length;e++)"object"==typeof b[d][e]&&null!=b[d][e].token&&c.push(b[d][e]);return c},{type:"other",description:"[87] ObjectPath"},{type:"other",description:"[70] Object"},{type:"other",description:"[71] Verb"},"a",{type:"literal",value:"a",description:'"a"'},function(){return{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}},{type:"other",description:"[72] TriplesSameSubjectPath"},function(a,b){var c=b.triplesContext,d=a;if(b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e],g=null;null!=f[1].length&&(f[1]=f[1][0]),d.token&&"triplesnodecollection"===d.token?(g={subject:d.chainSubject[0],predicate:f[0],object:f[1]},"path"===g.predicate.token&&"element"===g.predicate.kind&&(g.predicate=g.predicate.value),c.push(g),c=c.concat(d.triplesContext)):(g={subject:d,predicate:f[0],object:f[1]},"path"===g.predicate.token&&"element"===g.predicate.kind&&(g.predicate=g.predicate.value),c.push(g))}var h={};return h.token="triplessamesubject",h.triplesContext=c,h.chainSubject=d,h},function(a,b){var c=a.triplesContext,d=a.chainSubject;if(null!=b&&null!=b.pairs)for(var e=0;e<b.pairs.length;e++){var f=b.pairs[e];if(null!=f[1].length&&(f[1]=f[1][0]),"triplesnodecollection"===a.token)for(var g=0;g<d.length;g++){var h=d[g];if(null!=h.triplesContext){var i={subject:h.chainSubject,predicate:f[0],object:f[1]};c.concat(h.triplesContext)}else{var i={subject:d[g],predicate:f[0],object:f[1]};c.push(i)}}else{var i={subject:d,predicate:f[0],object:f[1]};c.push(i)}}var j={};return j.token="triplessamesubject",j.triplesContext=c,j.chainSubject=d,j},{type:"other",description:"[73] PropertyListNotEmptyPath"},function(a,b,c){var d={};d.token="propertylist";for(var e=[],f=[],h=0;h<b.length;h++)null!=b[h].triplesContext?(e=e.concat(b[h].triplesContext),"triplesnodecollection"===b[h].token&&null!=b[h].chainSubject.length?f.push([a,b[h].chainSubject[0]]):f.push([a,b[h].chainSubject])):f.push([a,b[h]]);for(var h=0;h<c.length;h++)for(var i=c[h][3],j=i[0],k=i[1]||[],l=0;l<k.length;l++)null!=k[l].triplesContext?(e=e.concat(k[l].triplesContext),f.push([j,k[l].chainSubject])):f.push([j,k[l]]);return d.pairs=f,d.triplesContext=e,d},{type:"other",description:"[74] PropertyListPath"},{type:"other",description:"[75]"},function(a){var b={};return b.token="path",b.kind="element",b.value=a,a},{type:"other",description:"[76] VerbSimple"},{type:"other",description:"[77] Path"},{type:"other",description:"[78] PathAlternative"},"|",{type:"literal",value:"|",description:'"|"'},function(a,b){if(null==b||0===b.length)return a;for(var c=[],d=0;d<b.length;d++)c.push(b[1]);var e={};return e.token="path",e.kind="alternative",e.value=c,e},{type:"other",description:"[79] PathSequence"},"/",{type:"literal",value:"/",description:'"/"'},function(a,b){if(null==b||0===b.length)return a;for(var c=[a],d=0;d<b.length;d++)c.push(b[d][1]);var e={};return e.token="path",e.kind="sequence",e.value=c,e},{type:"other",description:"[88] PathElt"},function(a,b){if(a.token&&"path"!=a.token&&""==b)return a;if(a.token&&a.token!=c&&""!=b){var c={};return c.token="path",c.kind="element",c.value=a,c.modifier=b,c}return a.modifier=b,a},{type:"other",description:"[81] PathEltOrInverse"},"^",{type:"literal",value:"^",description:'"^"'},function(a){var b={};return b.token="path",b.kind="inversePath",b.value=a,b},{type:"other",description:"[82] PathMod"},"?",{type:"literal",value:"?",description:'"?"'},"+",{type:"literal",value:"+",description:'"+"'},{type:"other",description:"[83] PathPrimary"},"!",{type:"literal",value:"!",description:'"!"'},{type:"other",description:"[85] PathOneInPropertySet"},{type:"other",description:"[86] Integer"},{type:"other",description:"[100] TriplesNodePath"},function(a){for(var b=[],c=[],d=null,e=0;e<a.length;e++){B++;var f=null;null==a[e].chainSubject&&null==a[e].triplesContext?f=a[e]:(f=a[e].chainSubject,b=b.concat(a[e].triplesContext)),d={subject:{token:"blank",value:"_:"+B},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:f},0==e&&c.push(d.subject),b.push(d),d=e===a.length-1?{subject:{token:"blank",value:"_:"+B},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+B},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(B+1)}},b.push(d)}return{token:"triplesnodecollection",triplesContext:b,chainSubject:c}},{type:"other",description:"[87] TriplesNode"},function(a){for(var b=[],c=[],d=null,e=0;e<a.length;e++){B++;var f=null;null==a[e].chainSubject&&null==a[e].triplesContext?f=a[e]:(f=a[e].chainSubject,b=b.concat(f.triplesContext)),d={subject:{token:"blank",value:"_:"+B},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#first"},object:f},0==e&&c.push(d.subject),b.push(d),d=e===a.length-1?{subject:{token:"blank",value:"_:"+B},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}}:{subject:{token:"blank",value:"_:"+B},predicate:{token:"uri",prefix:null,suffix:null,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"},object:{token:"blank",value:"_:"+(B+1)}},b.push(d)}return{token:"triplesnodecollection",triplesContext:b,chainSubject:c}},{type:"other",description:"[101] BlankNodePropertyListPath"},"[",{type:"literal",value:"[",description:'"["'},"]",{type:"literal",value:"]",description:'"]"'},function(a){B++;for(var b={token:"blank",value:"_:"+B},c=[],d=0;d<a.pairs.length;d++){var e=a.pairs[d],f={};f.subject=b,f.predicate=e[0],null!=e[1].length&&(e[1]=e[1][0]),f.object=e[1],c.push(f)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(c),chainSubject:b}},{type:"other",description:"[88] BlankNodePropertyList"},function(a){B++;for(var b={token:"blank",value:"_:"+B},c=[],d=0;d<a.pairs.length;d++){var e=a.pairs[d],f={};f.subject=b,f.predicate=e[0],null!=e[1].length&&(e[1]=e[1][0]),f.object=e[1],c.push(f)}return{token:"triplesnode",kind:"blanknodepropertylist",triplesContext:a.triplesContext.concat(c),chainSubject:b}},{type:"other",description:"[103] CollectionPath"},function(a){return a},{type:"other",description:"[89] Collection"},{type:"other",description:"[105] GraphNodePath"},function(a){return a[1]},{type:"other",description:"[90] GraphNode"},{type:"other",description:"[91] VarOrTerm"},{type:"other",description:"[92] VarOrIRIref"},{type:"other",description:"[93] Var"},function(a){var b={};return b.token="var",b.value=a,b},{type:"other",description:"[94] GraphTerm"},{type:"other",description:"[95] Expression"},{type:"other",description:"[96] ConditionalOrExpression"},"||",{type:"literal",value:"||",description:'"||"'},function(a,b){if(0===b.length)return a;var c={};c.token="expression",c.expressionType="conditionalor";for(var d=[a],e=0;e<b.length;e++)d.push(b[e][3]);return c.operands=d,c},{type:"other",description:"[97] ConditionalAndExpression"},"&&",{type:"literal",value:"&&",description:'"&&"'},function(a,b){if(0===b.length)return a;var c={};c.token="expression",c.expressionType="conditionaland";for(var d=[a],e=0;e<b.length;e++)d.push(b[e][3]);return c.operands=d,c},{type:"other",description:"[98] ValueLogical"},{type:"other",description:"[99] RelationalExpression"},"=",{type:"literal",value:"=",description:'"="'},"!=",{type:"literal",value:"!=",description:'"!="'},"<",{type:"literal",value:"<",description:'"<"'},">",{type:"literal",value:">",description:'">"'},"<=",{type:"literal",value:"<=",description:'"<="'},">=",{type:"literal",value:">=",description:'">="'},"I",{type:"literal",value:"I",description:'"I"'},"i",{type:"literal",value:"i",description:'"i"'},"N",{type:"literal",value:"N",description:'"N"'},"n",{type:"literal",value:"n",description:'"n"'},"O",{type:"literal",value:"O",description:'"O"'},"o",{type:"literal",value:"o",description:'"o"'},"T",{type:"literal",value:"T",description:'"T"'},"t",{type:"literal",value:"t",description:'"t"'},function(a,b){if(0===b.length)return a;if("i"===b[0][1]||"I"===b[0][1]||"n"===b[0][1]||"N"===b[0][1]){var c={};if("i"===b[0][1]||"I"===b[0][1]){var d="=";c.expressionType="conditionalor"}else{var d="!=";c.expressionType="conditionaland"}for(var e=a,f=[],g=0;g<b[0].length;g++)if("args"===b[0][g].token){f=b[0][g].value;break}c.token="expression",c.operands=[];for(var h=0;h<f.length;h++){var i={};i.token="expression",i.expressionType="relationalexpression",i.operator=d,i.op1=e,i.op2=f[h],c.operands.push(i)}return c}var c={};return c.expressionType="relationalexpression",c.operator=b[0][1],c.op1=a,c.op2=b[0][3],c.token="expression",c},{type:"other",description:"[100] NumericExpression"},{type:"other",description:"[101] AdditiveExpression"},"-",{type:"literal",value:"-",description:'"-"'},function(a,b){if(0===b.length)return a;var c={};c.token="expression",c.expressionType="additiveexpression",c.summand=a,c.summands=[];for(var d=0;d<b.length;d++){var e=b[d],f={};if(4==e.length&&"string"==typeof e[1])f.operator=e[1],f.expression=e[3];else{var g={},h=f[0],j=(f[1][1],f[1][3]);h.value<0?(f.operator="-",h.value=-h.value):f.operator="+",g.token="expression",g.expressionType="multiplicativeexpression",g.operator=h,g.factors=[{operator:null,expression:j}],f.expression=g}c.summands.push(f)}return c},{type:"other",description:"[102] MultiplicativeExpression"},function(a,b){if(0===b.length)return a;var c={};c.token="expression",c.expressionType="multiplicativeexpression",c.factor=a,c.factors=[];for(var d=0;d<b.length;d++){var e=b[d],f={};f.operator=e[1],f.expression=e[3],c.factors.push(f)}return c},{type:"other",description:"[103] UnaryExpression"},function(a){var b={};return b.token="expression",b.expressionType="unaryexpression",b.unaryexpression="!",b.expression=a,b},function(a){var b={};return b.token="expression",b.expressionType="unaryexpression",b.unaryexpression="+",b.expression=a,b},function(a){var b={};return b.token="expression",b.expressionType="unaryexpression",b.unaryexpression="-",b.expression=a,b},{type:"other",description:"[104] PrimaryExpression"},function(a){var b={};return b.token="expression",b.expressionType="atomic",b.primaryexpression="rdfliteral",b.value=a,b},function(a){var b={};return b.token="expression",b.expressionType="atomic",b.primaryexpression="numericliteral",b.value=a,b},function(a){var b={};return b.token="expression",b.expressionType="atomic",b.primaryexpression="booleanliteral",b.value=a,b},function(a){var b={};return b.token="expression",b.expressionType="atomic",b.primaryexpression="var",b.value=a,b},{type:"other",description:"[105] BrackettedExpression"},function(a){return a},{type:"other",description:"[106] BuiltInCall"},"STR",{type:"literal",value:"STR",description:'"STR"'},"str",{type:"literal",value:"str",description:'"str"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="str",b.args=[a],b},"LANG",{type:"literal",value:"LANG",description:'"LANG"'},"lang",{type:"literal",value:"lang",description:'"lang"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="lang",b.args=[a],b},"LANGMATCHES",{type:"literal",value:"LANGMATCHES",description:'"LANGMATCHES"'},"langmatches",{type:"literal",value:"langmatches",description:'"langmatches"'},function(a,b){var c={};return c.token="expression",c.expressionType="builtincall",c.builtincall="langmatches",c.args=[a,b],c},"DATATYPE",{type:"literal",value:"DATATYPE",description:'"DATATYPE"'},"datatype",{type:"literal",value:"datatype",description:'"datatype"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="datatype",b.args=[a],b},"BOUND",{type:"literal",value:"BOUND",description:'"BOUND"'},"bound",{type:"literal",value:"bound",description:'"bound"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="bound",b.args=[a],b},"IRI",{type:"literal",value:"IRI",description:'"IRI"'},"iri",{type:"literal",value:"iri",description:'"iri"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="iri",b.args=[a],b},"URI",{type:"literal",value:"URI",description:'"URI"'},"uri",{type:"literal",value:"uri",description:'"uri"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="uri",b.args=[a],b},"BNODE",{type:"literal",value:"BNODE",description:'"BNODE"'},"bnode",{type:"literal",value:"bnode",description:'"bnode"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="bnode",5===a.length?b.args=[a[2]]:b.args=null,b},"COALESCE",{type:"literal",value:"COALESCE",description:'"COALESCE"'},"coalesce",{type:"literal",value:"coalesce",description:'"coalesce"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="coalesce",b.args=a,b},"IF",{type:"literal",value:"IF",description:'"IF"'},"if",{type:"literal",value:"if",description:'"if"'},function(a,b,c){var d={};return d.token="expression",d.expressionType="builtincall",d.builtincall="if",d.args=[a,b,c],d},"ISLITERAL",{type:"literal",value:"ISLITERAL",description:'"ISLITERAL"'},"isliteral",{type:"literal",value:"isliteral",description:'"isliteral"'},"isLITERAL",{type:"literal",value:"isLITERAL",description:'"isLITERAL"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="isliteral",b.args=[a],b},"ISBLANK",{type:"literal",value:"ISBLANK",description:'"ISBLANK"'},"isblank",{type:"literal",value:"isblank",description:'"isblank"'},"isBLANK",{type:"literal",value:"isBLANK",description:'"isBLANK"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="isblank",b.args=[a],b},"SAMETERM",{type:"literal",value:"SAMETERM",description:'"SAMETERM"'},"sameterm",{type:"literal",value:"sameterm",description:'"sameterm"'},function(a,b){var c={};return c.token="expression",c.expressionType="builtincall",c.builtincall="sameterm",c.args=[a,b],c},"ISURI",{type:"literal",value:"ISURI",description:'"ISURI"'},"isuri",{type:"literal",value:"isuri",description:'"isuri"'},"isURI",{type:"literal",value:"isURI",description:'"isURI"'},"ISIRI",{type:"literal",value:"ISIRI",description:'"ISIRI"'},"isiri",{type:"literal",value:"isiri",description:'"isiri"'},"isIRI",{type:"literal",value:"isIRI",description:'"isIRI"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="isuri",b.args=[a],b},"custom:",{type:"literal",value:"custom:",description:'"custom:"'},"CUSTOM:",{type:"literal",value:"CUSTOM:",description:'"CUSTOM:"'},/^[a-zA-Z0-9_]/,{type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},function(a,b,c){var d={};d.token="expression",d.expressionType="custom",d.name=a.join("");for(var e=[],f=0;f<b.length;f++)e.push(b[f][1]);return e.push(c),d.args=e,d},{type:"other",description:"[107] RegexExpression"},"REGEX",{type:"literal",value:"REGEX",description:'"REGEX"'},"regex",{type:"literal",value:"regex",description:'"regex"'},function(a,b,c){var d={};return d.token="expression",d.expressionType="regex",d.text=a,d.pattern=b,null!=c&&(d.flags=c[2]),d},{type:"other",description:"[108] ExistsFunc"},"EXISTS",{type:"literal",value:"EXISTS",description:'"EXISTS"'},"exists",{type:"literal",value:"exists",description:'"exists"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="exists",b.args=[a],b},{type:"other",description:"[109] NotExistsFunc"},"NOT",{type:"literal",value:"NOT",description:'"NOT"'},"not",{type:"literal",value:"not",description:'"not"'},function(a){var b={};return b.token="expression",b.expressionType="builtincall",b.builtincall="notexists",b.args=[a],b},{type:"other",description:"[110] Aggregate"},"COUNT",{type:"literal",value:"COUNT",description:'"COUNT"'},"count",{type:"literal",value:"count",description:'"count"'},function(a,b){var c={};return c.token="expression",c.expressionType="aggregate",c.aggregateType="count",c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c},"GROUP_CONCAT",{type:"literal",value:"GROUP_CONCAT",description:'"GROUP_CONCAT"'},"group_concat",{type:"literal",value:"group_concat",description:'"group_concat"'},"SEPARATOR",{type:"literal",value:"SEPARATOR",description:'"SEPARATOR"'},function(a,b,c){var d={};return d.token="expression",d.expressionType="aggregate",d.aggregateType="group_concat",d.distinct=""!=a&&null!=a?"DISTINCT":a,d.expression=b,d.separator=c,d},"SUM",{type:"literal",value:"SUM",description:'"SUM"'},"sum",{type:"literal",value:"sum",description:'"sum"'},function(a,b){var c={};return c.token="expression",c.expressionType="aggregate",c.aggregateType="sum",c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c},"MIN",{type:"literal",value:"MIN",description:'"MIN"'},"min",{type:"literal",value:"min",description:'"min"'},function(a,b){var c={};return c.token="expression",c.expressionType="aggregate",c.aggregateType="min",c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c},"MAX",{type:"literal",value:"MAX",description:'"MAX"'},"max",{type:"literal",value:"max",description:'"max"'},function(a,b){var c={};return c.token="expression",c.expressionType="aggregate",c.aggregateType="max",c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c},"AVG",{type:"literal",value:"AVG",description:'"AVG"'},"avg",{type:"literal",value:"avg",description:'"avg"'},function(a,b){var c={};return c.token="expression",c.expressionType="aggregate",c.aggregateType="avg",c.distinct=""!=a&&null!=a?"DISTINCT":a,c.expression=b,c},{type:"other",description:"[117] IRIrefOrFunction"},function(a,b){var c={};return c.token="expression",c.expressionType="irireforfunction",c.iriref=a,c.args=b.value,c},{type:"other",description:"[112] RDFLiteral"},"^^",{type:"literal",value:"^^",description:'"^^"'},function(a,b){return"string"==typeof b&&b.length>0?{token:"literal",value:a.value,lang:b.slice(1),type:null}:null!=b&&"object"==typeof b?(b.shift(),{token:"literal",value:a.value,lang:null,type:b[0]}):{token:"literal",value:a.value,lang:null,type:null}},{type:"other",description:"[113] NumericLiteral"},{type:"other",description:"[114] NumericLiteralUnsigned"},{type:"other",description:"[115] NumericLiteralPositive"},{type:"other",description:"[116] NumericLiteralNegative"},{type:"other",description:"[117] BooleanLiteral"},"TRUE",{type:"literal",value:"TRUE",description:'"TRUE"'},"true",{type:"literal",value:"true",description:'"true"'},function(){var a={};return a.token="literal",a.lang=null,a.type="http://www.w3.org/2001/XMLSchema#boolean",a.value=!0,a},"FALSE",{type:"literal",value:"FALSE",description:'"FALSE"'},"false",{type:"literal",value:"false",description:'"false"'},function(){var a={};return a.token="literal",a.lang=null,a.type="http://www.w3.org/2001/XMLSchema#boolean",a.value=!1,a},{type:"other",description:"[118] String"},function(a){return{token:"string",value:a}},{type:"other",description:"[119] IRIref"},function(a){return{token:"uri",prefix:null,suffix:null,value:a}},function(a){return a},{type:"other",description:"[120] PrefixedName"},function(a){return{token:"uri",prefix:a[0],suffix:a[1],value:null}},function(a){return{token:"uri",prefix:a,suffix:"",value:null}},{type:"other",description:"[121] BlankNode"},function(a){return{token:"blank",value:a}},function(){return B++,{token:"blank",value:"_:"+B}},{type:"other",description:"[122] IRI_REF"},/^[^<>"{}|\^`\\]/,{type:"class",value:'[^<>\\"\\{\\}|^`\\\\]',description:'[^<>\\"\\{\\}|^`\\\\]'},function(a){return a.join("")},{type:"other",description:"[123] PNAME_NS"},":",{type:"literal",value:":",description:'":"'},{type:"other",description:"[124] PNAME_LN"},function(a,b){return[a,b]},{type:"other",description:"[125] BLANK_NODE_LABEL"},"_:",{type:"literal",value:"_:",description:'"_:"'},function(a){return a},{type:"other",description:"[126] VAR1"},function(a){return a},{type:"other",description:"[127] VAR2"},"$",{type:"literal",value:"$",description:'"$"'},{type:"other",description:"[128] LANGTAG"},"@",{type:"literal",value:"@",description:'"@"'},/^[a-zA-Z]/,{type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},/^[a-zA-Z0-9]/,{type:"class",value:"[a-zA-Z0-9]",description:"[a-zA-Z0-9]"},function(a,b){return 0===b.length?("@"+a.join("")).toLowerCase():("@"+a.join("")+"-"+b[0][1].join("")).toLowerCase()},{type:"other",description:"[129] INTEGER"},/^[0-9]/,{type:"class",value:"[0-9]",description:"[0-9]"},function(a){var b={};return b.token="literal",b.lang=null,b.type="http://www.w3.org/2001/XMLSchema#integer",b.value=A(a),b},{type:"other",description:"[130] DECIMAL"},function(a,b,c){var d={};return d.token="literal",d.lang=null,d.type="http://www.w3.org/2001/XMLSchema#decimal",d.value=A([a,b,c]),d},function(a,b){var c={};return c.token="literal",c.lang=null,c.type="http://www.w3.org/2001/XMLSchema#decimal",c.value=A([a,b]),c},{type:"other",description:"[131] DOUBLE"},function(a,b,c,d){var e={};return e.token="literal",e.lang=null,e.type="http://www.w3.org/2001/XMLSchema#double",e.value=A([a,b,c,d]),e},function(a,b,c){var d={};return d.token="literal",d.lang=null,d.type="http://www.w3.org/2001/XMLSchema#double",d.value=A([a,b,c]),d},function(a,b){var c={};return c.token="literal",c.lang=null,c.type="http://www.w3.org/2001/XMLSchema#double",c.value=A([a,b]),c},{type:"other",description:"[132] INTEGER_POSITIVE"},function(a){return a.value="+"+a.value,a},{type:"other",description:"[133] DECIMAL_POSITIVE"},function(a){return a.value="+"+a.value,a},{type:"other",description:"[134] DOUBLE_POSITIVE"},{type:"other",description:"[135] INTEGER_NEGATIVE"},function(a){return a.value="-"+a.value,a},{type:"other",description:"[136] DECIMAL_NEGATIVE"},{type:"other",description:"[137] DOUBLE_NEGATIVE"},{type:"other",description:"[138] EXPONENT"},/^[eE]/,{type:"class",value:"[eE]",description:"[eE]"},/^[+\-]/,{type:"class",value:"[+-]",description:"[+-]"},function(a,b,c){return A([a,b,c])},{type:"other",description:"[139] STRING_LITERAL1"},"'",{type:"literal",value:"'",description:'"\'"'},/^[^'\\\n\r]/,{type:"class",value:"[^\\u0027\\u005C\\u000A\\u000D]",description:"[^\\u0027\\u005C\\u000A\\u000D]"},function(a){return A(a)},{type:"other",description:"[140] STRING_LITERAL2"},'"',{type:"literal",value:'"',description:'"\\""'},/^[^"\\\n\r]/,{type:"class",value:"[^\\u0022\\u005C\\u000A\\u000D]",description:"[^\\u0022\\u005C\\u000A\\u000D]"},{type:"other",description:"[141] STRING_LITERAL_LONG1"},"'''",{type:"literal",value:"'''",description:"\"'''\""},/^[^'\\]/,{type:"class",value:"[^\\'\\\\]",description:"[^\\'\\\\]"},{type:"other",description:"[142] STRING_LITERAL_LONG2"},'"""',{type:"literal",value:'"""',description:'"\\"\\"\\""'},/^[^"\\]/,{type:"class",value:'[^\\"\\\\]',description:'[^\\"\\\\]'},{type:"other",description:"[143] ECHAR"},"\\",{type:"literal",value:"\\",description:'"\\\\"'},/^[tbnrf"']/,{type:"class",value:"[tbnrf\\\"\\']",description:"[tbnrf\\\"\\']"},{type:"other",description:"[144] NIL"},function(){return{token:"triplesnodecollection",triplesContext:[],chainSubject:[{token:"uri",value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"}]}},{type:"other",description:"[145] WS"},/^[ ]/,{type:"class",value:"[\\u0020]",description:"[\\u0020]"},/^[\t]/,{type:"class",value:"[\\u0009]",description:"[\\u0009]"},/^[\r]/,{type:"class",value:"[\\u000D]",description:"[\\u000D]"},/^[\n]/,{type:"class",value:"[\\u000A]",description:"[\\u000A]"},{type:"other",description:" COMMENT"},"#",{type:"literal",value:"#",description:'"#"'},/^[^\n\r]/,{type:"class",value:"[^\\u000A\\u000D]",description:"[^\\u000A\\u000D]"},{type:"other",description:"[146] ANON"},{type:"other",description:"[147] PN_CHARS_BASE"},/^[A-Z]/,{type:"class",value:"[A-Z]",description:"[A-Z]"},/^[a-z]/,{type:"class",value:"[a-z]",description:"[a-z]"},/^[\xC0-\xD6]/,{type:"class",value:"[\\u00C0-\\u00D6]",description:"[\\u00C0-\\u00D6]"},/^[\xD8-\xF6]/,{type:"class",value:"[\\u00D8-\\u00F6]",description:"[\\u00D8-\\u00F6]"},/^[\xF8-\u02FF]/,{type:"class",value:"[\\u00F8-\\u02FF]",description:"[\\u00F8-\\u02FF]"},/^[\u0370-\u037D]/,{type:"class",value:"[\\u0370-\\u037D]",description:"[\\u0370-\\u037D]"},/^[\u037F-\u1FFF]/,{type:"class",value:"[\\u037F-\\u1FFF]",description:"[\\u037F-\\u1FFF]"},/^[\u200C-\u200D]/,{type:"class",value:"[\\u200C-\\u200D]",description:"[\\u200C-\\u200D]"},/^[\u2070-\u218F]/,{type:"class",value:"[\\u2070-\\u218F]",description:"[\\u2070-\\u218F]"},/^[\u2C00-\u2FEF]/,{type:"class",value:"[\\u2C00-\\u2FEF]",description:"[\\u2C00-\\u2FEF]"},/^[\u3001-\uD7FF]/,{type:"class",value:"[\\u3001-\\uD7FF]",description:"[\\u3001-\\uD7FF]"},/^[\uF900-\uFDCF]/,{type:"class",value:"[\\uF900-\\uFDCF]",description:"[\\uF900-\\uFDCF]"},/^[\uFDF0-\uFFFD]/,{type:"class",value:"[\\uFDF0-\\uFFFD]",description:"[\\uFDF0-\\uFFFD]"},/^[\u1000-\uEFFF]/,{type:"class",value:"[\\u1000-\\uEFFF]",description:"[\\u1000-\\uEFFF]"},{type:"other",description:"[148] PN_CHARS_U"},"_",{type:"literal",value:"_",description:'"_"'},{type:"other",description:"[149] VARNAME"},/^[\xB7]/,{type:"class",value:"[\\u00B7]",description:"[\\u00B7]"},/^[\u0300-\u036F]/,{type:"class",value:"[\\u0300-\\u036F]",description:"[\\u0300-\\u036F]"},/^[\u203F-\u2040]/,{type:"class",value:"[\\u203F-\\u2040]",description:"[\\u203F-\\u2040]"},function(a,b){return a+b.join("")},{type:"other",description:"[150] PN_CHARS"},{type:"other",description:"[151] PN_PREFIX"},function(a,b){if("."==b[b.length-1])throw new Error("Wrong PN_PREFIX, cannot finish with '.'");return a+b.join("")},{type:"other",description:"[152] PN_LOCAL"},function(a,b){return a+(b||[]).join("")},{type:"other",description:"[170] PLX"},{type:"other",description:"[171] PERCENT"},"%",{type:"literal",value:"%",description:'"%"'},function(a){return a.join("")},{type:"other",description:"[172] HEX"},/^[A-F]/,{type:"class",value:"[A-F]",description:"[A-F]"},/^[a-f]/,{type:"class",value:"[a-f]",description:"[a-f]"},{type:"other",description:"[173] PN_LOCAL_ESC"},"~",{type:"literal",value:"~",description:'"~"'},"&",{type:"literal",value:"&",description:'"&"'},function(a){return"\\"+a}],i=[y(";!"),y(';".# &;?'),y('<;#=." 7 '),y("<%;$/N#;'./ &;*.) &;+.# &;,/3$;>/*$8#:\"##\"! )(#'#(\"'#&'#=.\" 7!"),y('<%;%." &"/I#$;0#*;&/9$$;&0#*;&&/)$8#:$#"" )(#\'#("\'#&\'#=." 7#'),y('<%$;0#*;&/\\#2&""6&7\'.) &2(""6(7)/A$$;0#*;&/1$;/($8$:*$! )($\'#(#\'#("\'#&\'#=." 7%'),y('<%$;0#*;&/v#2,""6,7-.) &2.""6.7//[$$;0#*;&/K$;/B$$;0#*;&/2$;/)$8&:0&"" )(&\'#(%\'#($\'#(#\'#("\'#&\'#=." 7+'),y("<%;)/#$;0#*;&/$$;-0#*;-&/v$$;0#*;&/f$;1/]$$;0#*;&/M$;2/D$$;0#*;&/4$;</+$8):2)$(&$\")()'#(('#(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 71"),y("<%;)/<#;1/3$;2/*$8#:4##\"! )(#'#(\"'#&'#=.\" 73"),y('<%$;0#*;&/#26""6677.) &28""6879/$$;0#*;&/$2:""6:7;.) &2<""6<7=.5 &2>""6>7?.) &2@""6@7A." &"/$$;0#*;&/$$%$;0#*;&/<#;/3$$;0#*;&/#$+#)(#\'#("\'#&\'#. &%$;0#*;&/#2B""6B7C/$$;0#*;&/$;/$$;0#*;&/$2D""6D7E.) &2F""6F7G/k$$;0#*;&/[$;/R$$;0#*;&/B$2H""6H7I/3$$;0#*;&/#$++)(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#/#0*%$;0#*;&/<#;/3$$;0#*;&/#$+#)(#\'#("\'#&\'#. &%$;0#*;&/#2B""6B7C/$$;0#*;&/$;/$$;0#*;&/$2D""6D7E.) &2F""6F7G/k$$;0#*;&/[$;/R$$;0#*;&/B$2H""6H7I/3$$;0#*;&/#$++)(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#&&&#.S &%$;0#*;&/B#2J""6J7K/3$$;0#*;&/#$+#)(#\'#("\'#&\'#/)$8&:L&"" )(&\'#(%\'#($\'#(#\'#("\'#&\'#=." 75'),y("<%$;0#*;&/#2N\"\"6N7O.) &2P\"\"6P7Q/$$;0#*;&/$;h/}$$;0#*;&/m$$;-0#*;-&/]$$;0#*;&/M$;1/D$$;0#*;&/4$;2/+$8*:R*$&$\" )(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\"'#&'#. &%$;0#*;&/#2N\"\"6N7O.) &2P\"\"6P7Q/$$;0#*;&/$$;-0#*;-&/$$;0#*;&/$2S\"\"6S7T.) &2U\"\"6U7V/$$;0#*;&/$2W\"\"6W7X/$$;0#*;&/p$;S.\" &\"/b$$;0#*;&/R$2Y\"\"6Y7Z/C$$;0#*;&/3$;2/*$8.:[.#*$ )(.'#(-'#(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 7M"),y('<%2]""6]7^/l#$;/&#0#*;&&&#.) &2J""6J7K/J$$;-0#*;-&/:$;1." &"/,$;2/#$+%)(%\'#($\'#(#\'#("\'#&\'#=." 7\\'),y('<%$;0#*;&/}#2`""6`7a.) &2b""6b7c/b$$;0#*;&/R$$;-0#*;-&/B$$;0#*;&/2$;1/)$8&:d&"" )(&\'#(%\'#($\'#(#\'#("\'#&\'#=." 7_'),y('<%2f""6f7g.) &2h""6h7i/W#$;0#*;&/G$;..# &;//8$$;0#*;&/($8$:j$!!)($\'#(#\'#("\'#&\'#=." 7e'),y('<%$;0#*;&/1#;0/($8":l"! )("\'#&\'#=." 7k'),y('<%2n""6n7o.) &2p""6p7q/A#$;0#*;&/1$;0/($8#:r#! )(#\'#("\'#&\'#=." 7m'),y('<;=." 7s'),y('<%2S""6S7T.) &2U""6U7V." &"/Q#$;0#*;&/A$;T/8$$;0#*;&/($8$:u$!!)($\'#(#\'#("\'#&\'#=." 7t'),y('<%;3." &"/T#;5." &"/F$;7." &"/8$;9." &"/*$8$:w$##! )($\'#(#\'#("\'#&\'#=." 7v'),y('<%2y""6y7z.) &2{""6{7|/y#$;0#*;&/i$2}""6}7~.) &2""67/N$$;0#*;&/>$$;4/&#0#*;4&&&#/($8%:%! )(%\'#($\'#(#\'#("\'#&\'#=." 7x'),y("<%$;0#*;&/A#;/8$$;0#*;&/($8#:#!!)(#'#(\"'#&'#. &%$;0#*;&/A#;e/8$$;0#*;&/($8#:#!!)(#'#(\"'#&'#. &%$;0#*;&/#2B\"\"6B7C/$$;0#*;&/$;/$$;0#*;&/$%2D\"\"6D7E.) &2F\"\"6F7G/<#$;0#*;&/,$;/#$+#)(#'#(\"'#&'#.\" &\"/X$$;0#*;&/H$2H\"\"6H7I/9$$;0#*;&/)$8):)\"%#)()'#(('#(''#(&'#(%'#($'#(#'#(\"'#&'#.R &%$;0#*;&/A#;/8$$;0#*;&/($8#:#!!)(#'#(\"'#&'#=.\" 7"),y('<%2""67/9#$;6/&#0#*;6&&&#/#$+")("\'#&\'#=." 7'),y('<;_=." 7'),y('<%2""67.) &2""67/#$;0#*;&/y$2}""6}7~.) &2""67/^$$;0#*;&/N$$;8/&#0#*;8&&&#/8$$;0#*;&/($8&:&!!)(&\'#(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.A &2""67.5 &2""67.) &2""67/R#$;0#*;&/B$;/9$$;0#*;&/)$8$:$"#!)($\'#(#\'#("\'#&\'#.H &%;_.# &;/8#$;0#*;&/($8":"!!)("\'#&\'#=." 7'),y('<%%;:/1#;;." &"/#$+")("\'#&\'#.; &%;;/1#;:." &"/#$+")("\'#&\'#/\' 8!:!! )=." 7'),y('<%2""67.) &2""67/Q#$;0#*;&/A$;/8$$;0#*;&/($8$:$!!)($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/Q#$;0#*;&/A$;/8$$;0#*;&/($8$:$!!)($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67/#$;0#*;&/$2W""6W7X/$$%2B""6B7C/H#$;=/&#0#*;=&&&#/2$2H""6H7I/#$+#)(#\'#("\'#&\'#.# &;0^*%2B""6B7C/H#$;=/&#0#*;=&&&#/2$2H""6H7I/#$+#)(#\'#("\'#&\'#.# &;&/2$2Y""6Y7Z/#$+%)(%\'#($\'#(#\'#("\'#&\'#." &"=." 7'),y('<;.; &;.5 &;./ &;.) &2""67=." 7'),y('<%%2""67.) &2""67/,#;a/#$+")("\'#&\'#." &"/\' 8!:!! )=." 7'),y('<;@=." 7'),y('<%;$/#$;0#*;&/$;A/v$%$;0#*;&/P#2""67/A$$;0#*;&/1$;@." &"/#$+$)($\'#(#\'#("\'#&\'#." &"/*$8$:$##! )($\'#(#\'#("\'#&\'#=." 7'),y('<;B.G &;C.A &;D.; &;E.5 &;F./ &;G.) &;H.# &;I=." 7'),y('<%2""67.) &2""67/#$;0#*;&/$;/|$$;0#*;&/l$%2""67.) &2""67/<#$;0#*;&/,$;M/#$+#)(#\'#("\'#&\'#." &"/)$8%:%"" )(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/q#$;0#*;&/a$2""67.) &2""67." &"/A$$;0#*;&/1$;N/($8%:%! )(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/q#$;0#*;&/a$2""67.) &2""67." &"/A$$;0#*;&/1$;N/($8%:%! )(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/q#$;0#*;&/a$2""67.) &2""67." &"/A$$;0#*;&/1$;M/($8%:%! )(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/l#$;0#*;&/\\$2""67.) &2""67/A$$;0#*;&/1$;P/($8%:%! )(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/\\#$;0#*;&/L$2""67.) &2""67/1$;P/($8$:$! )($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/l#$;0#*;&/\\$2S""6S7T.) &2U""6U7V/A$$;0#*;&/1$;T/($8%:%! )(%\'#($\'#(#\'#("\'#&\'#=." 7'),y("<%%2\"\"67.) &2\"\"67/<#$;0#*;&/,$;/#$+#)(#'#(\"'#&'#.\" &\"/#$;0#*;&/$%;J/A#$;0#*;&/1$;K.\" &\"/#$+#)(#'#(\"'#&'#.# &;K/$$;0#*;&/$$;L0#*;L&/$$;0#*;&/o$2S\"\"6S7T.) &2U\"\"6U7V/T$$;0#*;&/D$;T/;$$;0#*;&/+$8*:*$)'%!)(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 7"),y('<%2""67.) &2""67/1#;O/($8":"! )("\'#&\'#=." 7'),y('<%2""67.) &2""67/1#;O/($8":"! )("\'#&\'#=." 7'),y('<%$;0#*;&/#2""67.) &2""67/|$$;0#*;&/l$;.X &%2n""6n7o.) &2p""6p7q/<#$;0#*;&/,$;/#$+#)(#\'#("\'#&\'#/($8$:$! )($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/A#$;0#*;&/1$;/($8#:#! )(#\'#("\'#&\'#=." 7'),y('<%;M/\' 8!:u!! ). &%2""67.) &2""67/& 8!:! ).c &%2n""6n7o.) &2p""6p7q/& 8!:! ).@ &%2""67.) &2""67/& 8!:! )=." 7'),y("<%$;0#*;&/#2W\"\"6W7X/p$$;0#*;&/`$;Q/W$$;0#*;&/G$2Y\"\"6Y7Z/8$$;0#*;&/($8':'!#)(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 7"),y("<%$;0#*;&/#2W\"\"6W7X/p$$;0#*;&/`$;Q/W$$;0#*;&/G$2Y\"\"6Y7Z/8$$;0#*;&/($8':'!#)(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 7"),y('<%;S." &"/#$%;R/E#2""67." &"/1$;S." &"/#$+#)(#\'#("\'#&\'#0O*%;R/E#2""67." &"/1$;S." &"/#$+#)(#\'#("\'#&\'#&/)$8":""! )("\'#&\'#=." 7'),y("<%$;0#*;&/#2\"\"67.) &2\"\"67/$$;0#*;&/$;/$$;0#*;&/$2W\"\"6W7X/v$$;0#*;&/f$;S.\" &\"/X$$;0#*;&/H$2Y\"\"6Y7Z/9$$;0#*;&/)$8+:+\"'#)(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 7"),y('<%;j/u#%$;0#*;&/P#2""67/A$$;0#*;&/1$;S." &"/#$+$)($\'#(#\'#("\'#&\'#." &"/)$8":""! )("\'#&\'#=." 7'),y('<%2W""6W7X/`#$;0#*;&/P$;(/G$$;0#*;&/7$2Y""6Y7Z/($8%:%!")(%\'#($\'#(#\'#("\'#&\'#.p &%2W""6W7X/`#$;0#*;&/P$;U/G$$;0#*;&/7$2Y""6Y7Z/($8%:%!")(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%;V." &"/#$;0#*;&/$$%;W/e#$;0#*;&/U$2""67." &"/A$$;0#*;&/1$;V." &"/#$+%)(%\'#($\'#(#\'#("\'#&\'#0o*%;W/e#$;0#*;&/U$2""67." &"/A$$;0#*;&/1$;V." &"/#$+%)(%\'#($\'#(#\'#("\'#&\'#&/)$8#:#"" )(#\'#("\'#&\'#=." 7'),y('<%;s/e#%$;0#*;&/@#2""67/1$;V." &"/#$+#)(#\'#("\'#&\'#." &"/)$8":""! )("\'#&\'#=." 7'),y('<;\\.G &;X.A &;[.; &;Y.5 &;Z./ &;].) &;^.# &;`=." 7'),y('<%$;0#*;&/\\#2""67.) &2""67/A$$;0#*;&/1$;T/($8$:$! )($\'#(#\'#("\'#&\'#=." 7'),y('<%$;0#*;&/v#2""67.) &2""67/[$$;0#*;&/K$;/B$$;0#*;&/2$;T/)$8&:&"" )(&\'#(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67/;#;/2$;T/)$8#:#"! )(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/A#$;0#*;&/1$;T/($8#:#! )(#\'#("\'#&\'#=." 7'),y('<%;T/#$%$;0#*;&/W#2""67.) &2""67/<$$;0#*;&/,$;T/#$+$)($\'#(#\'#("\'#&\'#0h*%$;0#*;&/W#2""67.) &2""67/<$$;0#*;&/,$;T/#$+$)($\'#(#\'#("\'#&\'#&/)$8":""! )("\'#&\'#=." 7'),y('<%$;0#*;&/\\#2""67.) &2""67/A$$;0#*;&/1$;_/($8$:$! )($\'#(#\'#("\'#&\'#=." 7'),y('<%$;0#*;&/#2""67.) &2""67/$$;0#*;&/$2B""6B7C/$$;0#*;&/$;/$$;0#*;&/|$2F""6F7G.) &2D""6D7E/a$$;0#*;&/Q$;/H$$;0#*;&/8$2H""6H7I/)$8,:,"&")(,\'#(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<;.) &;.# &;e=." 7'),y('<%$;0#*;&/\\#2""67.) &2""67/A$$;0#*;&/1$;a/($8$:$! )($\'#(#\'#("\'#&\'#=." 7'),y('<;b.# &;c=." 7'),y("<%$;0#*;&/#;/w$$;0#*;&/g$2W\"\"6W7X/X$$;0#*;&/H$$;d0#*;d&/8$2Y\"\"6Y7Z/)$8':'\"%!)(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 7"),y("<%$;0#*;&/#;.r &%2B\"\"6B7C/b#$;0#*;&/R$$;0#*;&/B$$;0#*;&/2$2H\"\"6H7I/#$+%)(%'#($'#(#'#(\"'#&'#/$$;0#*;&/$2W\"\"6W7X/$$;0#*;&/$$%$;0#*;&/#2B\"\"6B7C/r$$;0#*;&/b$$;d0#*;d&/R$$;0#*;&/B$2H\"\"6H7I/3$$;0#*;&/#$+')(''#(&'#(%'#($'#(#'#(\"'#&'#.# &;0*%$;0#*;&/#2B\"\"6B7C/r$$;0#*;&/b$$;d0#*;d&/R$$;0#*;&/B$2H\"\"6H7I/3$$;0#*;&/#$+')(''#(&'#(%'#($'#(#'#(\"'#&'#.# &;&/H$$;0#*;&/8$2Y\"\"6Y7Z/)$8(:(\"&\")(('#(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 7"),y('<%$;0#*;&/_#;.; &;.5 &;./ &;.) &2""67/8$$;0#*;&/($8#:#!!)(#\'#("\'#&\'#=." 7'),y('<%;/2#;f/)$8":""! )("\'#&\'#=." 7'),y('<%;/& 8!:! ). &%2B""6B7C/#2:""6:7;.) &2<""6<7=." &"/$;/{$$%2""67/,#;/#$+")("\'#&\'#0<*%2""67/,#;/#$+")("\'#&\'#&/9$2H""6H7I/*$8%:%##"!)(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%;/& 8!:! ). &%2B""6B7C/#;.# &;/$$%2""67/2#;.# &;/#$+")("\'#&\'#0B*%2""67/2#;.# &;/#$+")("\'#&\'#&/8$2H""6H7I/)$8$:$""!)($\'#(#\'#("\'#&\'#=." 7'),y('<%2W""6W7X/e#$;0#*;&/U$;i." &"/G$$;0#*;&/7$2Y""6Y7Z/($8%:%!")(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%;j/u#%$;0#*;&/P#2""67/A$$;0#*;&/1$;i." &"/#$+$)($\'#(#\'#("\'#&\'#." &"/)$8":""! )("\'#&\'#=." 7'),y("<%$;0#*;&/K#;/B$$;0#*;&/2$;l/)$8$:$\"\" )($'#(#'#(\"'#&'#.\\ &%$;0#*;&/K#;/B$$;0#*;&/2$;m/)$8$:$\"\" )($'#(#'#(\"'#&'#=.\" 7"),y("<%;v.# &;w/#$;0#*;&/$;n/$$%$;0#*;&/y#2\"\"67/j$$;0#*;&/Z$%;v.# &;w/<#$;0#*;&/,$;o/#$+#)(#'#(\"'#&'#.\" &\"/#$+$)($'#(#'#(\"'#&'#0*%$;0#*;&/y#2\"\"67/j$$;0#*;&/Z$%;v.# &;w/<#$;0#*;&/,$;o/#$+#)(#'#(\"'#&'#.\" &\"/#$+$)($'#(#'#(\"'#&'#&/*$8$:$##! )($'#(#'#(\"'#&'#=.\" 7"),y("<%;r/#$;0#*;&/$;o/$$%$;0#*;&/s#2\"\"67/d$$;0#*;&/T$%;r/<#$;0#*;&/,$;o/#$+#)(#'#(\"'#&'#.\" &\"/#$+$)($'#(#'#(\"'#&'#0*%$;0#*;&/s#2\"\"67/d$$;0#*;&/T$%;r/<#$;0#*;&/,$;o/#$+#)(#'#(\"'#&'#.\" &\"/#$+$)($'#(#'#(\"'#&'#&/*$8$:$##! )($'#(#'#(\"'#&'#=.\" 7"),y('<;l." &"=." 7'),y('<%;p/#$;0#*;&/$$%2""67/<#$;0#*;&/,$;p/#$+#)(#\'#("\'#&\'#0L*%2""67/<#$;0#*;&/,$;p/#$+#)(#\'#("\'#&\'#&/)$8#:#"" )(#\'#("\'#&\'#=." 7'),y('<%;q/#$;0#*;&/$$%2""67/<#$;0#*;&/,$;q/#$+#)(#\'#("\'#&\'#0L*%2""67/<#$;0#*;&/,$;q/#$+#)(#\'#("\'#&\'#&/)$8#:#"" )(#\'#("\'#&\'#=." 7'),y('<;=." 7'),y('<;=." 7'),y('<;.4 &%2""67/& 8!:! )=." 7'),y("<%$;0#*;&/K#;/B$$;0#*;&/2$;t/)$8$:$\"\" )($'#(#'#(\"'#&'#.\\ &%$;0#*;&/K#;/B$$;0#*;&/2$;u/)$8$:$\"\" )($'#(#'#(\"'#&'#=.\" 7"),y("<%;v.# &;w/#$;0#*;&/$;n/$$%$;0#*;&/i#2\"\"67/Z$$;0#*;&/J$%;v.# &;w/,#;o/#$+\")(\"'#&'#.\" &\"/#$+$)($'#(#'#(\"'#&'#0z*%$;0#*;&/i#2\"\"67/Z$$;0#*;&/J$%;v.# &;w/,#;o/#$+\")(\"'#&'#.\" &\"/#$+$)($'#(#'#(\"'#&'#&/*$8$:$##! )($'#(#'#(\"'#&'#=.\" 7"),y('<;k." &"=." 7'),y("<%;x/' 8!:!! )=.\" 7"),y('<;=." 7'),y('<;y=." 7'),y('<%;z/k#$%2""67/,#;z/#$+")("\'#&\'#0<*%2""67/,#;z/#$+")("\'#&\'#&/)$8":""! )("\'#&\'#=." 7'),y('<%;|/k#$%2""67/,#;|/#$+")("\'#&\'#0<*%2""67/,#;|/#$+")("\'#&\'#&/)$8":""! )("\'#&\'#=." 7'),y('<%;~/7#;}." &"/)$8":""! )("\'#&\'#=." 7'),y('<;{.A &%2""67/1#;{/($8":"! )("\'#&\'#=." 7'),y('<2J""6J7K. &2""67. &2""67. &%2W""6W7X/#%;/v#%2""67/Q#2Y""6Y7Z.< &%;/2#2Y""6Y7Z/#$+")("\'#&\'#/#$+")("\'#&\'#.) &2Y""6Y7Z/#$+")("\'#&\'#.K &%2""67/;#;/2$2Y""6Y7Z/#$+#)(#\'#("\'#&\'#/#$+")("\'#&\'#=." 7'),y('<;. &%2""67/& 8!:! ).o &%2""67/,#;/#$+")("\'#&\'#.P &%2B""6B7C/@#;x/7$2H""6H7I/($8#:#!!)(#\'#("\'#&\'#=." 7'),y(';. &%2B""6B7C/#%;/e#$%2""67/,#;/#$+")("\'#&\'#0<*%2""67/,#;/#$+")("\'#&\'#&/#$+")("\'#&\'#." &"/2$2H""6H7I/#$+#)(#\'#("\'#&\'#'),y('<;.T &2""67.H &%2""67/8#;.) &2""67/#$+")("\'#&\'#=." 7'),y('<;=." 7'),y("<%;/' 8!:!! ).# &;=.\" 7"),y("<%;/' 8!:!! ).# &;=.\" 7"),y('<%$;0#*;&/o#2""67/`$$;0#*;&/P$;t/G$2""67/8$$;0#*;&/($8&:&!")(&\'#(%\'#($\'#(#\'#("\'#&\'#=." 7'),y("<%$;0#*;&/#2\"\"67/p$$;0#*;&/`$;l/W$$;0#*;&/G$2\"\"67/8$$;0#*;&/($8':'!#)(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 7"),y("<%$;0#*;&/#2B\"\"6B7C/}$$;0#*;&/m$$;/&#0#*;&&&#/W$$;0#*;&/G$2H\"\"6H7I/8$$;0#*;&/($8':'!#)(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 7"),y("<%$;0#*;&/#2B\"\"6B7C/}$$;0#*;&/m$$;/&#0#*;&&&#/W$$;0#*;&/G$2H\"\"6H7I/8$$;0#*;&/($8':'!#)(''#(&'#(%'#($'#(#'#(\"'#&'#=.\" 7"),y("<%%$;0#*;&/<#;/3$$;0#*;&/#$+#)(#'#(\"'#&'#.M &%$;0#*;&/<#;/3$$;0#*;&/#$+#)(#'#(\"'#&'#/' 8!:!! )=.\" 7"),y("<%%$;0#*;&/<#;/3$$;0#*;&/#$+#)(#'#(\"'#&'#.M &%$;0#*;&/<#;/3$$;0#*;&/#$+#)(#'#(\"'#&'#/' 8!:!! )=.\" 7"),y('<;.# &;=." 7'),y('<;.# &;=." 7'),y("<%$;0#*;&/G#;.# &;/8$$;0#*;&/($8#:#!!)(#'#(\"'#&'#=.\" 7"),y('<;.; &;.5 &;./ &;.) &;.# &;=." 7'),y('<;=." 7'),y('<%;/#$%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#0\\*%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#&/)$8":""! )("\'#&\'#=." 7'),y('<%;/#$%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#0\\*%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#&/)$8":""! )("\'#&\'#=." 7'),y('<;=." 7'),y('<%;/#$%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/r#2""67.) &2""67/W$2""67.) &2""67/<$$;0#*;&/,$;g/#$+%)(%\'#($\'#(#\'#("\'#&\'#. &%$;0#*;&/#2""67.) &2""67/$2""67.) &2""67/$2""67.) &2""67/$$;0#*;&/r$2""67.) &2""67/W$2""67.) &2""67/<$$;0#*;&/,$;g/#$+))()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#0*%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/K#2""67/<$$;0#*;&/,$;/#$+$)($\'#(#\'#("\'#&\'#. &%$;0#*;&/r#2""67.) &2""67/W$2""67.) &2""67/<$$;0#*;&/,$;g/#$+%)(%\'#($\'#(#\'#("\'#&\'#. &%$;0#*;&/#2""67.) &2""67/$2""67.) &2""67/$2""67.) &2""67/$$;0#*;&/r$2""67.) &2""67/W$2""67.) &2""67/<$$;0#*;&/,$;g/#$+))()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#&/)$8":""! )("\'#&\'#=." 7'),y('<;=." 7'),y("<%;/#$%$;0#*;&/K#2\"\"67/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#. &%$;0#*;&/K#2\"\"67/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#. &%;.# &;/#%$;0#*;&/K#2J\"\"6J7K/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#.\\ &%$;0#*;&/K#2\"\"67/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#.\" &\"/#$+\")(\"'#&'#0*%$;0#*;&/K#2\"\"67/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#. &%$;0#*;&/K#2\"\"67/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#. &%;.# &;/#%$;0#*;&/K#2J\"\"6J7K/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#.\\ &%$;0#*;&/K#2\"\"67/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#.\" &\"/#$+\")(\"'#&'#&/)$8\":\"\"! )(\"'#&'#=.\" 7"),y("<%;/#$%$;0#*;&/K#2J\"\"6J7K/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#.\\ &%$;0#*;&/K#2\"\"67/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#0*%$;0#*;&/K#2J\"\"6J7K/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#.\\ &%$;0#*;&/K#2\"\"67/<$$;0#*;&/,$;/#$+$)($'#(#'#(\"'#&'#&/)$8\":\"\"! )(\"'#&'#=.\" 7"),y('<%2""67/A#$;0#*;&/1$;/($8#:#! )(#\'#("\'#&\'#. &%2""67/A#$;0#*;&/1$;/($8#:#! )(#\'#("\'#&\'#.W &%2""67/A#$;0#*;&/1$;/($8#:#! )(#\'#("\'#&\'#.# &;=." 7'),y("<;.w &;.q &;.k &%;/' 8!:!! ).Y &%;/' 8!:!! ).G &%;/' 8!:!! ).5 &;./ &%;/' 8!:!! )=.\" 7"),y('<%2B""6B7C/`#$;0#*;&/P$;/G$$;0#*;&/7$2H""6H7I/($8%:%!")(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/#$;0#*;&/o$2B""6B7C/`$$;0#*;&/P$;/G$$;0#*;&/7$2H""6H7I/($8\':\'!")(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/o$2B""6B7C/`$$;0#*;&/P$;/G$$;0#*;&/7$2H""6H7I/($8\':\'!")(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/$2B""6B7C/$$;0#*;&/$;/$$;0#*;&/p$2""67/a$$;0#*;&/Q$;/H$$;0#*;&/8$2H""6H7I/)$8+:+"&")(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/o$2B""6B7C/`$$;0#*;&/P$;/G$$;0#*;&/7$2H""6H7I/($8\':\'!")(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/o$2B""6B7C/`$$;0#*;&/P$;/G$$;0#*;&/7$2H""6H7I/($8\':\'!")(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/o$2B""6B7C/`$$;0#*;&/P$;/G$$;0#*;&/7$2H""6H7I/($8\':\'!")(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/o$2B""6B7C/`$$;0#*;&/P$;/G$$;0#*;&/7$2H""6H7I/($8\':\'!")(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/$%2B""6B7C/[#$;0#*;&/K$;/B$$;0#*;&/2$2H""6H7I/#$+%)(%\'#($\'#(#\'#("\'#&\'#.# &;/($8#:#! )(#\'#("\'#&\'#. &%2""67.) &2""67/A#$;0#*;&/1$;g/($8#:#! )(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/$2B""6B7C/$$;0#*;&/$;/$$;0#*;&/$2""67/$$;0#*;&/$;/$$;0#*;&/q$2""67/b$$;0#*;&/R$;/I$$;0#*;&/9$2H""6H7I/*$8/:/#*&")(/\'#(.\'#(-\'#(,\'#(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.5 &2""67.) &2""67/#$;0#*;&/o$2B""6B7C/`$$;0#*;&/P$;/G$$;0#*;&/7$2H""6H7I/($8\':\'!")(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.5 &2""67.) &2""67/#$;0#*;&/o$2B""6B7C/`$$;0#*;&/P$;/G$$;0#*;&/7$2H""6H7I/($8\':\'!")(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/$2B""6B7C/$$;0#*;&/$;/$$;0#*;&/p$2""67/a$$;0#*;&/Q$;/H$$;0#*;&/8$2H""6H7I/)$8+:+"&")(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.Y &2""67.M &2""67.A &2""67.5 &2""67.) &2""67/#$;0#*;&/o$2B""6B7C/`$$;0#*;&/P$;/G$$;0#*;&/7$2H""6H7I/($8\':\'!")(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$4""5!7/,#0)*4""5!7&&&#/$$;0#*;&/$2B""6B7C/$$%$;0#*;&/;#;/2$2""67/#$+#)(#\'#("\'#&\'#0L*%$;0#*;&/;#;/2$2""67/#$+#)(#\'#("\'#&\'#&/b$$;0#*;&/R$;/I$$;0#*;&/9$2H""6H7I/*$8):)#\'$")()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#./ &;.) &;.# &;=." 7'),y('<%2""67.) &2""67/#$;0#*;&/$2B""6B7C/$$;0#*;&/$;/$$;0#*;&/$2""67/$$;0#*;&/$;/$$;0#*;&/$%2""67/<#$;0#*;&/,$;/#$+#)(#\'#("\'#&\'#." &"/I$$;0#*;&/9$2H""6H7I/*$8-:-#($")(-\'#(,\'#(+\'#(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/A#$;0#*;&/1$;T/($8#:#! )(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/l#$;0#*;&/\\$2""67.) &2""67/A$$;0#*;&/1$;T/($8%:%! )(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%2""67.) &2""67/#$;0#*;&/$2B""6B7C/$$;0#*;&/$2:""6:7;.) &2<""6<7=." &"/}$$;0#*;&/m$2J""6J7K.# &;/X$$;0#*;&/H$2H""6H7I/9$$;0#*;&/)$8*:*"%#)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/$2B""6B7C/$$;0#*;&/$2:""6:7;.) &2<""6<7=." &"/$$;0#*;&/$;/$%2""67/#$;0#*;&/z$2""67/k$$;0#*;&/[$2""67/L$$;0#*;&/<$;/3$$;0#*;&/#$+()((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#." &"/I$2H""6H7I/:$$;0#*;&/*$8*:*#%#")(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/$2B""6B7C/$$;0#*;&/$2:""6:7;.) &2<""6<7=." &"/q$$;0#*;&/a$;/X$$;0#*;&/H$2H""6H7I/9$$;0#*;&/)$8*:*"%#)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/$2B""6B7C/$$;0#*;&/$2:""6:7;.) &2<""6<7=." &"/q$$;0#*;&/a$;/X$$;0#*;&/H$2H""6H7I/9$$;0#*;&/)$8*:*"%#)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/$2B""6B7C/$$;0#*;&/$2:""6:7;.) &2<""6<7=." &"/q$$;0#*;&/a$;/X$$;0#*;&/H$2H""6H7I/9$$;0#*;&/)$8*:*"%#)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#. &%2""67.) &2""67/#$;0#*;&/$2B""6B7C/$$;0#*;&/$2:""6:7;.) &2<""6<7=." &"/q$$;0#*;&/a$;/X$$;0#*;&/H$2H""6H7I/9$$;0#*;&/)$8*:*"%#)(*\'#()\'#((\'#(\'\'#(&\'#(%\'#($\'#(#\'#("\'#&\'#=." 7'),y('<%;/7#;f." &"/)$8":""! )("\'#&\'#=." 7'),y('<%;/V#;.< &%2""67/,#;/#$+")("\'#&\'#." &"/)$8":""! )("\'#&\'#=." 7'),y('<;.) &;.# &;=." 7'),y('<;.) &;.# &;=." 7'),y('<;.) &;.# &;=." 7'),y('<;.) &;.# &;=." 7'),y('<%2""67.) &2""67/& 8!:! ).@ &%2""67.) &2""67/& 8!:! )=." 7'),y("<%;/' 8!:!! ).S &%;/' 8!:!! ).A &%;/' 8!:!! )./ &%;/' 8!:!! )=.\" 7"),y("<%;/' 8!:!! )./ &%;/' 8!:!! )=.\" 7"),y("<%;/' 8!:!! )./ &%;/' 8!:!! )=.\" 7"),y("<%;/' 8!:!! ).. &%;/& 8!:! )=.\" 7"),y('<%2""67/S#$4""5!70)*4""5!7&/7$2""67/($8#:#!!)(#\'#("\'#&\'#=." 7'),y('<%;." &"/7#2""67/($8":"!!)("\'#&\'#=." 7'),y('<%;/2#;/)$8":""! )("\'#&\'#=." 7'),y('<%2""67/1#;/($8":"! )("\'#&\'#=." 7'),y('<%2""67/1#;/($8":"! )("\'#&\'#=." 7'),y('<%2""67/1#;/($8":"! )("\'#&\'#=." 7'),y('<%2""67/#$4""5!7/,#0)*4""5!7&&&#/$$%2""67/E#$4""5!7/,#0)*4""5!7&&&#/#$+")("\'#&\'#0U*%2""67/E#$4""5!7/,#0)*4""5!7&&&#/#$+")("\'#&\'#&/)$8#:#"! )(#\'#("\'#&\'#=." 7'),y('<%$4""5!7/,#0)*4""5!7&&&#/\' 8!:!! )=." 7'),y('<%$4""5!7/,#0)*4""5!7&&&#/U#2""67/F$$4""5!70)*4""5!7&/*$8#:##"! )(#\'#("\'#&\'#.[ &%2""67/K#$4""5!7/,#0)*4""5!7&&&#/)$8":""! )("\'#&\'#=." 7'),y('<%$4""5!7/,#0)*4""5!7&&&#/_#2""67/P$$4""5!70)*4""5!7&/4$;/+$8$:$$#"! )($\'#(#\'#("\'#&\'#. &%2""67/U#$4""5!7/,#0)*4""5!7&&&#/3$;/*$8#:##"! )(#\'#("\'#&\'#.U &%$4""5!7/,#0)*4""5!7&&&#/2#;/)$8":""! )("\'#&\'#=." 7'),y('<%2""67/1#;/($8":"! )("\'#&\'#=." 7'),y('<%2""67/1#;/($8":"! )("\'#&\'#=." 7'),y('<%2""67/1#;/($8":"! )("\'#&\'#=." 7'),y('<%2""67/1#;/($8":"! )("\'#&\'#=." 7'),y('<%2""67/1#;/($8":"! )("\'#&\'#=." 7'),y('<%2""67/1#;/($8":"! )("\'#&\'#=." 7'),y('<%4""5!7/`#4""5!7." &"/L$$4""5!7/,#0)*4""5!7&&&#/*$8#:##"! )(#\'#("\'#&\'#=." 7'),y('<%2""67/_#$4""5!7.# &;0/*4""5!7.# &;&/7$2""67/($8#:#!!)(#\'#("\'#&\'#=." 7'),y('<%2""67/_#$4""5!7.# &;0/*4""5!7.# &;&/7$2""67/($8#:#!!)(#\'#("\'#&\'#=." 7'),y('<%2""67/_#$4""5!7.# &;0/*4""5!7.# &;&/7$2""67/($8#:#!!)(#\'#("\'#&\'#=." 7'),y('<%2""67/_#$4""5!7.# &;0/*4""5!7.# &;&/7$2""67/($8#:#!!)(#\'#("\'#&\'#=." 7'),y('<%2""67/2#4""5!7/#$+")("\'#&\'#=." 7'),y('<%2B""6B7C/F#$;0#*;&/6$2H""6H7I/\'$8#:# )(#\'#("\'#&\'#=." 7'),y('<4""5!7.G &4""5!7.; &4""5!7./ &4""5!7.# &;=." 7'),y('<%2""67/?#$4""5!70)*4""5!7&/#$+")("\'#&\'#=." 7'),y('<%2""67/B#$;0#*;&/2$2""67/#$+#)(#\'#("\'#&\'#=." 7'),y('<4""5!7. &4""5!7. &4""5!7. &4""5!7. &4""5!7. &4""5!7.} &4""5!7.q &4""5!7.e &4""5!7.Y &4""5!7.M &4""5!7.A &4""5!7.5 &4""5!7.) &4""5!7=." 7'),y('<;.) &2""67=." 7'),y('<%;.) &4""5!7/#$;.M &4""5!7.A &4""5!7.5 &4""5!7.) &4""5!70S*;.M &4""5!7.A &4""5!7.5 &4""5!7.) &4""5!7&/)$8":""! )("\'#&\'#=." 7'),y('<;.Y &2""67.M &4""5!7.A &4""5!7.5 &4""5!7.) &4""5!7=." 7'),y('<%;/Q#$;.) &2""670/*;.) &2""67&/)$8":""! )("\'#&\'#=." 7'),y('<%;.; &4""5!7./ &2""67.# &;/u#$;.; &2""67./ &2""67.# &;0A*;.; &2""67./ &2""67.# &;&/)$8":""! )("\'#&\'#=." 7'),y('<;.# &;=." 7'),y("<%%2\"\"67/5#;/,$;/#$+#)(#'#(\"'#&'#/' 8!:!! )=.\" 7"),y('<4""5!7.5 &4""5!7.) &4""5!7=." 7'),y('<%2""67/#2""67. &2""67. &2""67. &2""67. &2""67. &2""67. &2""67. &2""67. &2B""6B7C. &2H""6H7I. &2J""6J7K. &2""67. &2""67.} &2""67.q &2""67.e &2""67.Y &2""67.M &2""67.A &2""67.5 &2""67.) &2""67/($8":"! )("\'#&\'#=." 7')],j=0,k=0,l=[{line:1,column:1,seenCR:!1}],m=0,n=[],o=0;if("startRule"in c){if(!(c.startRule in f))throw new Error("Can't start parsing from rule \""+c.startRule+'".');g=f[c.startRule]}var A=function(a){for(var b="",c=0;c<a.length;c++)"string"==typeof a[c]?b+=a[c]:b+=a[c].join("");return b},B=0,C={},D=function(a,b){C[a]=b},E=function(a){C[null]=a},F=function(a){var b="";if(null==a)return null;for(var c=0;c<a.length;c++)b+=a[c];return b.toUpperCase()};if((p=z(g))!==e&&j===a.length)return p;throw p!==e&&j<a.length&&w({type:"end",description:"end of input"}),x(null,n,m<a.length?a.charAt(m):null,m<a.length?v(m,m+1):v(m,m))}return a(b,Error),{SyntaxError:b,parse:c}}()},{}],115:[function(a,b,c){var e=(a("./btree").Tree,a("./utils")),f=e,g=a("./lexicon").Lexicon;Lexicon=function(a,b){var c=this;e.registerIndexedDB(c),this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri},this.oidCounter=1,c.dbName=b||"rdfstorejs";var d=c.indexedDB.open(this.dbName+"_lexicon",1);d.onerror=function(b){a(null,new Error("Error opening IndexedDB: "+b.target.errorCode))},d.onsuccess=function(b){c.db=b.target.result,a(c)},d.onupgradeneeded=function(a){c.db=a.target.result,c.db.createObjectStore("knownGraphs",{keyPath:"oid"}).createIndex("uriToken","uriToken",{unique:!0}),c.db.createObjectStore("uris",{keyPath:"id",autoIncrement:!0}).createIndex("uri","uri",{unique:!0}),c.db.createObjectStore("blanks",{keyPath:"id",autoIncrement:!0}).createIndex("label","label",{unique:!0}),c.db.createObjectStore("literals",{keyPath:"id",autoIncrement:!0}).createIndex("literal","literal",{unique:!0})}},Lexicon.prototype.registerGraph=function(a,b,c){if(a!=this.defaultGraphOid){var d=this.db.transaction(["knownGraphs"],"readwrite");d.onerror=function(a){c(null,new Error(a.target.statusCode))};d.objectStore("knownGraphs").add({oid:a,uriToken:b}).onsuccess=function(a){c(!0)}}else c()},Lexicon.prototype.registeredGraphs=function(a,b){var c=[],d=this.db.transaction(["knownGraphs"],"readwrite").objectStore("knownGraphs"),e=d.openCursor();e.onsuccess=function(d){var e=d.target.result;e?(!0===a?c.push(e.value.uriToken):c.push(e.value.oid),e.continue()):b(c)},e.onerror=function(a){b(null,new Error("Error retrieving data from the cursor: "+a.target.errorCode))}},Lexicon.prototype.registerUri=function(a,b){var c=this;if(a===this.defaultGraphUri)b(this.defaultGraphOid);else{var d=c.db.transaction(["uris"],"readwrite").objectStore("uris"),e=d.index("uri").get(a);e.onsuccess=function(c){var e=c.target.result;if(e){e.counter++;var f=e.id,g=d.put(e);g.onsuccess=function(a){b(f)},g.onerror=function(a){b(null,new Error("Error updating the URI data"+a.target.errorCode))}}else{var h=d.add({uri:a,counter:0});h.onsuccess=function(a){b(a.target.result)},h.onerror=function(a){b(null,new Error("Error inserting the URI data"+a.target.errorCode))}}},e.onerror=function(a){b(null,new Error("Error retrieving the URI data"+a.target.errorCode))}}},Lexicon.prototype.resolveUri=function(a,b){if(a===this.defaultGraphUri)b(this.defaultGraphOid);else{var c=this.db.transaction(["uris"]).objectStore("uris"),d=c.index("uri").get(a);d.onsuccess=function(a){b(null!=a.target.result?a.target.result.id:-1)},d.onerror=function(a){b(null,new Error("Error retrieving uri data "+a.target.errorCode))}}},Lexicon.prototype.resolveUriCost=function(a,b){if(a===this.defaultGraphUri)b(0);else{var c=that.db.transaction(["uris"]).objectStore("uris"),d=c.index("uri").get(a);d.onsuccess=function(a){b(null!=a.target.result?a.target.result.cost:-1)},d.onerror=function(a){b(null,new Error("Error retrieving uri data "+a.target.errorCode))}}},Lexicon.prototype.registerBlank=function(a){var b=guid(),c=this,d=c.db.transaction(["blanks"],"readwrite").objectStore("blanks"),e=d.add({label:b,counter:0});e.onsuccess=function(b){a(b.target.result)},e.onerror=function(b){a(null,new Error("Error inserting the URI data"+b.target.errorCode))}},Lexicon.prototype.resolveBlankCost=function(a,b){b(0)},Lexicon.prototype.registerLiteral=function(a,b){var c=this,d=c.db.transaction(["literals"],"readwrite").objectStore("literals"),e=d.index("literal").get(a);e.onsuccess=function(c){var e=c.target.result;if(e){e.counter++;var f=e.id,g=d.put(e);g.onsuccess=function(a){b(f)},g.onerror=function(a){b(null,new Error("Error updating the literal data"+a.target.errorCode))}}else{var h=d.add({literal:a,counter:0});h.onsuccess=function(a){b(a.target.result)},h.onerror=function(a){b(null,new Error("Error inserting the literal data"+a.target.errorCode))}}},e.onerror=function(a){b(null,new Error("Error retrieving the literal data"+a.target.errorCode))}},Lexicon.prototype.resolveLiteral=function(a,b){var c=that.db.transaction(["literals"]).objectStore("literals"),d=c.index("literal").get(a);d.onsuccess=function(a){b(null!=a.target.result?a.target.result.id:-1)},d.onerror=function(a){b(null,new Error("Error retrieving literal data "+a.target.errorCode))}},Lexicon.prototype.resolveLiteralCost=function(a,b){var c=that.db.transaction(["literals"]).objectStore("literals"),d=c.index("literal").get(a);d.onsuccess=function(a){b(null!=a.target.result?a.target.result.cost:-1)},d.onerror=function(a){b(null,new Error("Error retrieving literal data "+a.target.errorCode))}},Lexicon.prototype.parseLiteral=function(a){return g.prototype.parseLiteral(a)},Lexicon.prototype.parseUri=function(a){return g.prototype.parseUri(a)},Lexicon.prototype.retrieve=function(a,b){var c=this;if(a===this.defaultGraphOid)b({token:"uri",value:this.defaultGraphUri,prefix:null,suffix:null,defaultGraph:!0});else{var d=c.db.transaction(["uris","literals","blanks"]);f.seq(function(b,e){var f=d.objectStore("uris").get(a);f.onsuccess=function(a){null!=a.target.result?e(null,c.parseUri(a.target.result.uri)):e(null,null)},f.onerror=function(a){e(new Error("Error searching in URIs data "+a.target.errorCode))}},function(b,e){if(null==b){var f=d.objectStore("literals").get(a);f.onsuccess=function(a){null!=a.target.result?e(null,c.parseLiteral(a.target.result.literal)):e(null,null)},f.onerror=function(a){e(new Error("Error searching in Literals data "+a.target.errorCode))}}else e(null,b)},function(b,e){if(null==b){var f=d.objectStore("blanks").get(a);f.onsuccess=function(a){if(null!=a.target.result){var b="_:"+a.target.result.id;e(null,c.parseLiteral({token:"blank",value:b}))}else e(null,null)},f.onerror=function(a){e(new Error("Error searching in blanks data "+a.target.errorCode))}}else e(null,b)})(null,function(a,c){a?b(null,a):b(c)})}},Lexicon.prototype.clear=function(a){var b=this;this.defaultGraphOid=0,this.defaultGraphUri="https://github.com/antoniogarrote/rdfstore-js#default_graph",this.defaultGraphUriTerm={token:"uri",prefix:null,suffix:null,value:this.defaultGraphUri};var d,c=b.db.transaction(["uris","literals","blanks"],"readwrite"),e=c.objectStore("uris"),f=c.objectStore("literals"),g=c.objectStore("blanks"),h=function(){null!=a&&a()};d=e.clear(),d.onsuccess=function(){d=f.clear(),d.onsuccess=function(){d=g.clear(),d.onsuccess=h,d.onerror=h},d.onerror=h},d.onerror=h},Lexicon.prototype.unregister=function(a,b,c){var d=this;f.seq(function(c){d._unregisterTerm(a.subject.token,b.subject,c)},function(c){d._unregisterTerm(a.predicate.token,b.predicate,c)},function(c){d._unregisterTerm(a.object.token,b.object,c)},function(c){null!=a.graph?d._unregisterTerm(a.graph.token,b.graph,c):c()})(function(){c(!0)})},Lexicon.prototype._unregisterTerm=function(a,b,c){var f,d=this,e=d.db.transaction(["uris","literals","blanks","knownGraphs"],"readwrite");if("uri"===a)if(b!=this.defaultGraphOid){var g=function(){e.objectStore("knownGraphs").delete(b).onsuccess=function(){c()}},f=e.objectStore("uris").delete(b);f.onsuccess=g()}else c();else if("literal"===a){var f=e.objectStore("literals").delete(b);f.onsuccess=function(){c()}}else if("blank"===a){var f=e.objectStore("blanks").delete(b);f.onsuccess=function(){c()}}else c()},b.exports={Lexicon:Lexicon}},{"./btree":109,"./lexicon":112,"./utils":126}],116:[function(a,b,c){var d=a("./utils"),e=d;QuadBackend=function(a,b){var c=this;if(0!==arguments){d.registerIndexedDB(c),this.indexMap={},this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]},c.dbName=a.name||"rdfstorejs";var f=c.indexedDB.open(this.dbName+"_db",1);f.onerror=function(a){b(null,new Error("Error opening IndexedDB: "+a.target.errorCode))},f.onsuccess=function(a){c.db=a.target.result,b(c)},f.onupgradeneeded=function(a){var b=a.target.result,d=b.createObjectStore(c.dbName,{keyPath:"SPOG"});e.each(c.indices,function(a){"SPOG"!==a&&d.createIndex(a,a,{unique:!1})})}}},QuadBackend.prototype.index=function(a,b){var c=this;e.each(this.indices,function(b){a[b]=c._genMinIndexKey(a,b)});var d=c.db.transaction([c.dbName],"readwrite");d.oncomplete=function(a){},d.onerror=function(a){b(null,new Error(a.target.statusCode))},d.objectStore(c.dbName).add(a).onsuccess=function(a){b(!0)}},QuadBackend.prototype.range=function(a,b){var j,c=this,d=c.db.transaction([c.dbName]).objectStore(c.dbName),e=this._indexForPattern(a),f=this._genMinIndexKey(a,e),g=this._genMaxIndexKey(a,e),h=c.IDBKeyRange.bound(f,g,!1,!1),i=[];j="SPOG"===e?d:d.index(e),j.openCursor(h).onsuccess=function(a){var c=a.target.result;c?(i.push(c.value),c.continue()):b(i)}},QuadBackend.prototype.search=function(a,b){var c=this,d=c.db.transaction([c.dbName]).objectStore(c.dbName),e=this._genMinIndexKey(a,"SPOG"),f=d.get(e);f.onerror=function(a){b(null,new Error(a.target.statusCode))},f.onsuccess=function(a){b(null!=a.target.result)}},QuadBackend.prototype.delete=function(a,b){var c=this,d=c._genMinIndexKey(a,"SPOG"),e=c.db.transaction([c.dbName],"readwrite").objectStore(c.dbName).delete(d);e.onsuccess=function(){b(!0)},e.onerror=function(a){b(null,new Error(a.target.statusCode))}},QuadBackend.prototype._genMinIndexKey=function(a,b){var c=this.componentOrders[b];return e.map(c,function(b){return"string"==typeof a[b]||null==a[b]?"-1":""+a[b]}).join(".")},QuadBackend.prototype._genMaxIndexKey=function(a,b){for(var c=this.componentOrders[b],d=[],f=!1,g=0;g<c.length;g++){var h=c[g],i=a[h];"string"==typeof i?(!1===f&&(f=!0,g-1>=0&&(d[g-1]=d[g-1]+1)),d[g]=-1):d[g]=i}return e.map(d,function(a){return""+a}).join(".")},QuadBackend.prototype._indexForPattern=function(a){for(var b=a.indexKey,c=0;c<this.indices.length;c++)for(var d=this.indices[c],f=this.componentOrders[d],g=0;g<f.length&&!1!==e.include(b,f[g]);g++)if(g==b.length-1)return d;return"SPOG"},QuadBackend.prototype.clear=function(a){var d,b=this,c=b.db.transaction([b.dbName],"readwrite");d=c.objectStore(b.dbName).clear(),d.onsuccess=function(){a()},d.onerror=function(){a()}},b.exports.QuadBackend=QuadBackend},{"./utils":126}],117:[function(a,b,c){var d=a("./quad_index").QuadIndex,e=a("./utils"),f=a("./utils");QuadBackend=function(a,b){if(0!==arguments){this.indexMap={},this.treeOrder=a.treeOrder,this.indices=["SPOG","GP","OGS","POG","GSP","OS"],this.componentOrders={SPOG:["subject","predicate","object","graph"],GP:["graph","predicate","subject","object"],OGS:["object","graph","subject","predicate"],POG:["predicate","object","graph","subject"],GSP:["graph","subject","predicate","object"],OS:["object","subject","predicate","graph"]};var c=this;e.eachSeries(this.indices,function(a,b){new d({order:c.treeOrder,componentOrder:c.componentOrders[a]},function(d){c.indexMap[a]=d,b()})},function(){b(c)})}},QuadBackend.prototype._indexForPattern=function(a){for(var b=a.indexKey,c=0;c<this.indices.length;c++)for(var d=this.indices[c],e=this.componentOrders[d],g=0;g<e.length&&!1!==f.include(b,e[g]);g++)if(g==b.length-1)return d;return"SPOG"},QuadBackend.prototype.index=function(a,b){var c=this;e.eachSeries(this.indices,function(b,d){c.indexMap[b].insert(a,function(){d()})},function(){b(c)})},QuadBackend.prototype.range=function(a,b){var c=this._indexForPattern(a);this.indexMap[c].range(a,function(a){b(a)})},QuadBackend.prototype.search=function(a,b){this.indexMap.SPOG.search(a,function(a){b(null!=a)})},QuadBackend.prototype.delete=function(a,b){var c=this;e.eachSeries(this.indices,function(b,d){c.indexMap[b].delete(a,function(){d()})},function(){b(c)})},QuadBackend.prototype.clear=function(a){var b=this;e.eachSeries(this.indices,function(a,c){new d({order:b.treeOrder,componentOrder:b.componentOrders[a]},function(d){b.indexMap[a]=d,c()})},function(){a(b)})},b.exports.QuadBackend=QuadBackend},{"./quad_index":118,"./utils":126}],118:[function(a,b,c){var d=a("./btree").Tree,e=a("./utils"),f=a("./utils");NodeKey=function(a,b){this.subject=a.subject,this.predicate=a.predicate,this.object=a.object,this.graph=a.graph,this.order=b},NodeKey.prototype.comparator=function(a){for(var b=0;b<this.order.length;b++){var c=this.order[b];if(null==a[c])return 0;if(this[c]<a[c])return-1;if(this[c]>a[c])return 1}return 0},Pattern=function(a){this.subject=a.subject,this.predicate=a.predicate,this.object=a.object,this.graph=a.graph,this.indexKey=[],this.keyComponents={};var b=[],c=[],d=this;e.forEach(["subject","predicate","object","graph"],function(a){"string"==typeof d[a]?(c.push(a),d.keyComponents[a]=null):(b.push(a),d.keyComponents[a]=d[a],d.indexKey.push(a))}),this.order=b.concat(c),this.key=new NodeKey(this.keyComponents,this.order)},QuadIndex=function(a,b){0!=arguments&&(this.componentOrder=a.componentOrder,d.call(this,a.order,function(a){a.comparator=function(b,c){for(var d=0;d<a.componentOrder.length;d++){var e=a.componentOrder[d],f=b[e],g=c[e];if(f<g)return-1;if(f>g)return 1}return 0},a.rangeComparator=function(b,c){for(var d=0;d<a.componentOrder.length;d++){var e=a.componentOrder[d];if(null==c[e]||null==b[e])return 0;if(b[e]<c[e])return-1;if(b[e]>c[e])return 1}return 0},b(a)}))},QuadIndex.prototype=e.create(d.prototype,{constructor:d}),QuadIndex.prototype.insert=function(a,b){d.prototype.insert.call(this,a,null,function(a){b(a)})},QuadIndex.prototype.search=function(a,b){d.prototype.search.call(this,a,function(a){b(a)},!0)},QuadIndex.prototype.range=function(a,b){this._rangeTraverse(this,this.root,a,b)},QuadIndex.prototype._rangeTraverse=function(a,b,c,d){var e=c.key,g=[],h=[b];f.whilst(function(){return h.length>0},function(b){for(var c=h.shift(),d=0;d<c.numberActives&&-1===a.rangeComparator(c.keys[d].key,e);)d++;if(!0===c.isLeaf){for(var i=d;i<c.numberActives&&0===a.rangeComparator(c.keys[i].key,e);)g.push(c.keys[i].key),i++;b()}else a._diskRead(c.children[d],function(i){h.push(i);var j=d;f.whilst(function(){return j<c.numberActives&&0===a.rangeComparator(c.keys[j].key,e)},function(b){g.push(c.keys[j].key),j++,a._diskRead(c.children[j],function(a){h.push(a),b()})},function(){b()})})},function(){d(g)})},b.exports={QuadIndex:QuadIndex,Pattern:Pattern,NodeKey:NodeKey}},{"./btree":109,"./utils":126}],119:[function(a,b,c){function o(a,b,c){this.name="BindExpressionError",this.bind=b,this.error=c,this.message=a}var d=a("./abstract_query_tree").AbstractQueryTree,e=a("./abstract_query_tree").NonSupportedSparqlFeatureError,f=a("./utils"),g=a("./quad_index"),h=a("./query_plan").QueryPlan,i=a("./query_filters").QueryFilters,j=a("./rdf_model"),k=a("./rdf_loader").RDFLoader,l=a("./graph_callbacks").CallbacksBackend,m=a("./utils"),n=a("./utils");o.prototype=new Error,o.constructor=o,QueryEngine=function(a){0!=arguments.length&&(this.backend=a.backend,this.lexicon=a.lexicon,this.eventsOnBatchLoad=a.eventsOnBatchLoad||!1,this.defaultPrefixes={},this.abstractQueryTree=new d,this.rdfLoader=new k(a.communication),this.callbacksBackend=new l(this),this.customFns=a.customFns||{})},QueryEngine.prototype.setCustomFunctions=function(a){this.customFns=a},QueryEngine.prototype.registerNsInEnvironment=function(a,b){var c=[];null!=a&&null!=a.prefixes&&(c=a.prefixes);var d={};for(var e in this.defaultPrefixes)d[e]=this.defaultPrefixes[e];for(var f=0;f<c.length;f++){var g=c[f];"prefix"===g.token&&(d[g.prefix]=g.local)}b.namespaces=d,null!=a&&a.base&&"object"==typeof a.base?b.base=a.base.value:b.base=null},QueryEngine.prototype.applyModifier=function(a,b){if("DISTINCT"==a){for(var c={},d=[],e=0;e<b.length;e++){var f=b[e],g="";for(var h in f){var i=f[h];null==i?g=g+h+"null":"literal"==i.token?(null!=i.value&&(g+=i.value),null!=i.lang&&(g+=i.lang),null!=i.type&&(g+=i.type)):g=i.value?g+h+i.value:g+h+i}null==c[g]&&(d.push(f),c[g]=!0)}return d}return b},QueryEngine.prototype.applyLimitOffset=function(a,b,c){return null==b&&null==a?c:(null==a&&(a=0),b=null==b?c.length:a+b,c.slice(a,b))},QueryEngine.prototype.applySingleOrderBy=function(a,b,c,d,e){var f=[],g=this;m.eachSeries(a,function(a,e){i.collect(a.expression,[b],c,d,g,function(a){f.push(a[0].value),e()})},function(){e({binding:b,value:f})})},QueryEngine.prototype.applyOrderBy=function(a,b,c,d,e){var f=this,g=[];null!=a&&a.length>0?m.eachSeries(b,function(b,e){f.applySingleOrderBy(a,b,c,d,function(a){g.push(a),e()})},function(){g.sort(function(b,c){return f.compareFilteredBindings(b,c,a,d)});for(var b=[],c=0;c<g.length;c++)b.push(g[c].binding);e(b)}):e(b)},QueryEngine.prototype.compareFilteredBindings=function(a,b,c,d){for(var e=!1,f=0;!e;){if(f==a.value.length)return 0;var h,g=c[f].direction;if(null!=a.value[f]||null!=b.value[f]){if(null==a.value[f])h={value:!1};else if(null==b.value[f])h={value:!0};else{if("blank"===a.value[f].token&&"blank"===b.value[f].token){f++;continue}if("blank"===a.value[f].token)h={value:!1};else if("blank"===b.value[f].token)h={value:!0};else if("uri"===a.value[f].token&&"uri"===b.value[f].token){if(1==i.runEqualityFunction(a.value[f],b.value[f],[],this,d).value){f++;continue}h=i.runTotalGtFunction(a.value[f],b.value[f],[])}else if("uri"===a.value[f].token)h={value:!1};else if("uri"===b.value[f].token)h={value:!0};else if("literal"===a.value[f].token&&"literal"===b.value[f].token&&null==a.value[f].type&&null==b.value[f].type){if(1==i.runEqualityFunction(a.value[f],b.value[f],[],this,d).value){f++;continue}h=i.runTotalGtFunction(a.value[f],b.value[f],[])}else if("literal"===a.value[f].token&&null==a.value[f].type)h={value:!1};else if("literal"===b.value[f].token&&null==b.value[f].type)h={value:!0};else{if(1==i.runEqualityFunction(a.value[f],b.value[f],[],this,d).value){f++;continue}h=i.runTotalGtFunction(a.value[f],b.value[f],[])}}return 1==h.value?"ASC"===g?1:-1:"ASC"===g?-1:1}f++}},QueryEngine.prototype.removeDefaultGraphBindings=function(a,b){for(var c=[],d={},e=0;e<b.named.length;e++)d[b.named[e].oid]=!0;for(e=0;e<b.implicit.length;e++)null==d[b.implicit[e].oid]&&c.push(b.implicit[e].oid);var f=[];for(e=0;e<a.length;e++){var g=a[e],h=!1;for(var i in g){for(var j=0;j<d.length;j++)if(g[i]===d[j]){h=!0;break}if(h)break}h||f.push(g)}return f},QueryEngine.prototype.aggregateBindings=function(a,b,c,d,e){this.copyDenormalizedBindings(b,d.outCache,function(b){for(var f={},g=0;g<a.length;g++){var h=i.runAggregator(a[g],b,this,c,d);a[g].alias?f[a[g].alias.value]=h:f[a[g].value.value]=h}e(f)})},QueryEngine.prototype.projectBindings=function(a,b,c){if("*"===a[0].kind)return b;for(var d=[],e=0;e<b.length;e++){for(var f=b[e],g={},h=!0,j=0;j<a.length;j++)if("variable"==a[j].token&&"aliased"!=a[j].kind)g[a[j].value.value]=f[a[j].value.value];else if("variable"==a[j].token&&"aliased"==a[j].kind){var k=i.runFilter(a[j].expression,f,this,c,{blanks:{},outCache:{}});if(i.isEbvError(k)){h=!1;break}g[a[j].alias.value]=k}!0===h&&d.push(g)}return d},QueryEngine.prototype.resolveNsInEnvironment=function(a,b){return b.namespaces[a]},QueryEngine.prototype.normalizeTerm=function(a,b,c,d){if("uri"===a.token){var e=f.lexicalFormBaseUri(a,b);null==e?d(null):c?this.lexicon.registerUri(e,d):this.lexicon.resolveUri(e,d)}else if("literal"===a.token){var g=f.lexicalFormLiteral(a,b);c?this.lexicon.registerLiteral(g,d):this.lexicon.resolveLiteral(g,d)}else if("blank"===a.token){var h=a.value,i=b.blanks[h];null!=i?d(i):c?this.lexicon.registerBlank(function(a){b.blanks[h]=a,d(a)}):this.lexicon.resolveBlank(function(a){b.blanks[h]=a,d(a)})}else d("var"===a.token?a.value:null)},QueryEngine.prototype.normalizeDatasets=function(a,b,c){var d=this;m.eachSeries(a,function(a,c){a.value===d.lexicon.defaultGraphUri?(a.oid=d.lexicon.defaultGraphOid,c()):d.normalizeTerm(a,b,!1,function(b){null!=b&&(a.oid=b),c()})},function(){c(!0)})},QueryEngine.prototype.normalizeQuad=function(a,b,c,d){var e=null,g=null,h=null,i=null,j=this,k=!1;m.seq(function(d){if(null==a.graph||a.graph.value===j.lexicon.defaultGraphUri)i=0,d();else{var e=f.lexicalFormBaseUri(a.graph,b);j.normalizeTerm(a.graph,b,c,function(b){null!=b?(i=b,!0===c&&"var"!=a.graph.token?j.lexicon.registerGraph(b,e,function(){d()}):d()):(k=!0,d())})}},function(d){!1===k?j.normalizeTerm(a.subject,b,c,function(a){null!=a?(e=a,d()):(k=!0,d())}):d()},function(d){!1===k?j.normalizeTerm(a.predicate,b,c,function(a){null!=a?(g=a,d()):(k=!0,d())}):d()},function(d){!1===k?j.normalizeTerm(a.object,b,c,function(a){null!=a?(h=a,d()):(k=!0,d())}):d()})(function(){d(!0===k?null:{subject:e,predicate:g,object:h,graph:i})})},QueryEngine.prototype.denormalizeBindingsList=function(a,b,c){var d=this,e=[];m.eachSeries(a,function(a,c){d.denormalizeBindings(a,b,function(a){e.push(a),c()})},function(){c(e)})},QueryEngine.prototype.copyDenormalizedBindings=function(a,b,c){var d=this,e=[];m.eachSeries(a,function(a,c){var f={},g=n.keys(a);m.eachSeries(g,function(c,e){var g=a[c];if(null==g)f[c]=null,e();else if("object"==typeof g)f[c]=g,e();else{var h=b[g];null!=h?(f[c]=h,e()):d.lexicon.retrieve(g,function(a){b[g]=a,f[c]=a,e()})}},function(){e.push(f),c()})},function(){c(e)})},QueryEngine.prototype.denormalizeBindings=function(a,b,c){var d=n.keys(a),e=b.outCache,f=this;m.eachSeries(d,function(c,d){var g=a[c];null==g?(a[c]=null,d()):"object"==typeof g?d():null!=e[g]?(a[c]=e[g],d()):f.lexicon.retrieve(g,function(e){a[c]=e,"blank"===e.token&&(b.blanks[e.value]=g),d()})},function(){c(a)})},QueryEngine.prototype.execute=function(a,b,c,d){a=f.normalizeUnicodeLiterals(a);var e=this.abstractQueryTree.parseQueryString(a);if(null==e)b(!1,"Error parsing query string");else if("query"===e.token&&"update"==e.kind){this.callbacksBackend.startGraphModification();var g=this;this.executeUpdate(e,function(a,c){g.lexicon.updateAfterWrite&&g.lexicon.updateAfterWrite(),a?(g.callbacksBackend.cancelGraphModification(),b(a,c)):g.callbacksBackend.endGraphModification(function(){b(a,c)})})}else"query"===e.token&&"query"==e.kind&&this.executeQuery(e,b,c,d)},QueryEngine.prototype.executeQuery=function(a,b,c,d){var e=a.prologue,f=a.units,g=this,h={blanks:{},outCache:{}};this.registerNsInEnvironment(e,h);var i=g.abstractQueryTree.parseExecutableUnit(f[0]);"select"===i.kind?this.executeSelect(i,h,c,d,function(a,c){null==a?"object"==typeof c&&!0===c.denorm?b(null,c.bindings):g.denormalizeBindingsList(c,h,function(a){b(null,a)}):b(a)}):"ask"===i.kind?(i.projection=[{token:"variable",kind:"*"}],this.executeSelect(i,h,c,d,function(a,c){null==a?c.length>0?b(null,!0):b(null,!1):b(a)})):"construct"===i.kind&&(i.projection=[{token:"variable",kind:"*"}],g=this,this.executeSelect(i,h,c,d,function(a,c){null==a?g.denormalizeBindingsList(c,h,function(a){if(null!=a){var c=new j.Graph;null==i.template&&(i.template={triplesContext:i.pattern});for(var d=1,e=[],f=0;f<a.length;f++){for(var k=a[f],l=0;l<e.length;l++)delete e[l].valuetmp;for(var l=0;l<i.template.triplesContext.length;l++){for(var m=["subject","predicate","object"],n=i.template.triplesContext[l],o=0;o<m.length;o++){var p=m[o];if("blank"===n[p].token)if(n[p].valuetmp&&null!=n[p].valuetmp);else{var q="_:b"+d;d++,n[p].valuetmp=q,e.push(n[p])}}var r=j.buildRDFResource(n.subject,k,g,h),o=j.buildRDFResource(n.predicate,k,g,h),s=j.buildRDFResource(n.object,k,g,h);if(null!=r&&null!=o&&null!=s){var t=new j.Triple(r,o,s);c.add(t)}}}b(null,c)}else b(new Error("Error denormalizing bindings."))}):b(a)}))},QueryEngine.prototype.executeSelect=function(a,b,c,d,e){if("select"===a.kind||"ask"===a.kind||"construct"===a.kind||"modify"===a.kind){var f=a.projection,g=a.dataset,h=a.modifier,i=a.limit,j=a.offset,k=a.order,l=this;null==c&&null==d||(g.implicit=c||[],g.named=d||[]),null!=g.implicit&&0===g.implicit.length&&null!=g.named&&0===g.named.length&&g.implicit.push(this.lexicon.defaultGraphUriTerm),l.normalizeDatasets(g.implicit.concat(g.named),b,function(){try{l.executeSelectUnit(f,g,a.pattern,b,function(c){if(null!=c){if(null!=a.group&&""===a.group){for(var d=!1,n=0;n<a.projection.length;n++)if(null!=a.projection[n].expression&&"aggregate"===a.projection[n].expression.expressionType){d=!0;break}!0===d&&(a.group="singleGroup")}a.group&&""!=a.group?l.checkGroupSemantics(a.group,f)?l.groupSolution(c,a.group,g,b,function(a){var c=[];m.eachSeries(a,function(a,d){l.aggregateBindings(f,a,g,b,function(a){c.push(a),d()})},function(){e(null,{bindings:c,denorm:!0})})}):e(new Error("Incompatible Group and Projection variables")):l.applyOrderBy(k,c,g,b,function(a){var b=l.projectBindings(f,a,g),c=l.applyModifier(h,b),d=l.applyLimitOffset(j,i,c),k=l.removeDefaultGraphBindings(d,g);e(null,k)})}else e(new Error("Error executing SELECT query."))})}catch(a){e(a)}})}else e(new Error("Cannot execute "+a.kind+" query as a select query"))},QueryEngine.prototype.groupSolution=function(a,b,c,d,e){var f=[],g=[],h=!1,j=this;"singleGroup"===b?e([a]):m.eachSeries(a,function(a,e){var k=!0;m.eachSeries(b,function(b,e){var g=null;if("var"===b.token)g=b.value,0==h&&f.push(g),e();else if("aliased_expression"===b.token){if(g=b.alias.value,0==h&&f.push(g),"var"===b.expression.primaryexpression)a[b.alias.value]=a[b.expression.value.value];else{var l=j.copyDenormalizedBindings([a],d.outCache),m=i.runFilter(b.expression,l[0],j,c,d);i.isEbvError(m)?k=!1:(null!=m.value&&(m.value=""+m.value),a[b.alias.value]=m)}e()}else j.copyDenormalizedBindings([a],d.outCache,function(c){var l=i.runFilter(b,c[0],j,d);i.isEbvError(l)?k=!1:(a["groupCondition"+env._i]=l,g="groupCondition"+env._i,0==h&&f.push(g)),e()})},function(){0==h&&(h=!0),!0===k&&g.push(a),e()})},function(){for(var a={},b={},c=0,d=0;d<g.length;d++){for(var h=g[d],i="",j=0;j<f.length;j++){var k=h[f[j]];i+="object"==typeof k?k.value:k}null==a[i]?(b[i]=c,a[i]=[h]):a[i].push(h)}var l=[];for(var m in a)l.push(a[m]);e(l)})},QueryEngine.prototype.executeSelectUnit=function(a,b,c,d,f){if("BGP"===c.kind)this.executeAndBGP(a,b,c,d,f);else if("UNION"===c.kind)this.executeUNION(a,b,c.value,d,f);else if("JOIN"===c.kind)this.executeJOIN(a,b,c,d,f);else if("LEFT_JOIN"===c.kind)this.executeLEFT_JOIN(a,b,c,d,f);else if("FILTER"===c.kind){var g=this;this.executeSelectUnit(a,b,c.value,d,function(a){null!=a?i.checkFilters(c,a,!1,b,d,g,f):f([])})}else{if("EMPTY_PATTERN"!==c.kind)throw new e(c.kind);f([])}},QueryEngine.prototype.executeUNION=function(a,b,c,d,e){var k,l,f=c[0],g=c[1],j=null;if(2!=c.length)throw"SPARQL algebra UNION with more than two components";var n=this;m.seq(function(c){try{n.executeSelectUnit(a,b,f,d,function(a){k=a,c()})}catch(a){j=a,c()}},function(c){if(null==j)try{n.executeSelectUnit(a,b,g,d,function(a){l=a,c()})}catch(a){j=a,c()}else c()})(function(){if(null!=j)e(j);else{var a=h.unionBindings(k,l);n.runBinds(c.binds,a,b,d,function(a,f){if(null!=a)throw new o("Error processing bind expressions",c.binds,a);i.checkFilters(c,f,!1,b,d,n,e)})}})},QueryEngine.prototype.executeAndBGP=function(a,b,c,d,e){var f=this;h.executeAndBGPsDPSize(c.value,b,this,d,function(a){null!=a?f.runBinds(c.binds,a,b,d,function(a,g){if(null!=a)throw new o("Error processing bind expressions",c.binds,a);i.checkFilters(c,g,!1,b,d,f,e)}):e(null)})},QueryEngine.prototype.executeLEFT_JOIN=function(a,b,c,d,e){var f=c.lvalue,g=c.rvalue;if("EMPTY_PATTERN"===f.kind)this.executeSelectUnit(a,b,g,d,e);else{var p,q,j=null,k=null,l=null,n=this;m.seq(function(c){try{n.executeSelectUnit(a,b,f,d,function(a){j=a,c()})}catch(a){l=a,c()}},function(c){if(null!=l)c();else try{n.executeSelectUnit(a,b,g,d,function(a){k=a,c()})}catch(a){l=a,c()}})(function(){if(null!=l)e(l);else{var a=h.leftOuterJoinBindings(j,k);n.runBinds(c.binds,a,b,d,function(f,g){if(null!=f)throw new o("Error processing bind expressions",c.binds,f);i.checkFilters(c,a,!0,b,d,n,function(a){if(j.length>1&&k.length>1){var b=[],c={};for(var d in j[0])c[d]=!0;for(d in k[0])1!=c[d]&&b.push(d);p=[],q={};for(var f=0;f<a.length;f++)if(!0===a[f].__nullify__){for(var g=0;g<b.length;g++)a[f].bindings[b[g]]=null;var h=[],i=[];for(var d in a[f].bindings)null!=a[f].bindings[d]&&(h.push(d+a[f].bindings[d]),h.sort(),i.push(h.join("")));if(null==q[h.join("")]){for(g=0;g<i.length;g++)q[i[g]]=!0;p.push(a[f].bindings)}}else{p.push(a[f]);var h=[],i=[];for(var d in a[f])h.push(d+a[f][d]),h.sort(),q[h.join("")]=!0}e(p)}else e(a)})})}})}},QueryEngine.prototype.executeJOIN=function(a,b,c,d,e){var f=c.lvalue,g=c.rvalue,j=null,k=null,l=null,n=this;m.seq(function(c){try{n.executeSelectUnit(a,b,f,d,function(a){j=a,c()})}catch(a){l=a,c()}},function(c){if(null!=l)c();else try{n.executeSelectUnit(a,b,g,d,function(a){k=a,c()})}catch(a){l=a,c()}})(function(){var a=null;if(null!=l)e(l);else if(0===j.length||0===k.length)e([]);else{var m={},p=[];for(var q in j[0])m[q]=!1;for(var q in k[0])!1===m[q]&&p.push(q);a=0==p.length?h.joinBindings(j,k):n.abstractQueryTree.treeWithUnion(f)||n.abstractQueryTree.treeWithUnion(g)?h.joinBindings(j,k):h.joinBindings2(p,j,k),n.runBinds(c.binds,a,b,d,function(a,f){if(null!=a)throw new o("Error processing bind expressions",c.binds,a);i.checkFilters(c,f,!1,b,d,n,e)})}})},QueryEngine.prototype.rangeQuery=function(a,b,c){var d=this;d.normalizeQuad(a,b,!1,function(a){null!=a?d.backend.range(new g.Pattern(a),function(a){c(null==a||0==a.length?[]:a)}):c(null)})},QueryEngine.prototype.executeUpdate=function(a,b){var c=a.prologue,d=a.units,e=this,g={blanks:{},outCache:{}};this.registerNsInEnvironment(c,g);for(var h=0;h<d.length;h++){var i=e.abstractQueryTree.parseExecutableUnit(d[h]);if("insertdata"===i.kind){var j=null;m.eachSeries(i.quads,function(a,b){null===j?e._executeQuadInsert(a,g,function(a){null!=a&&(j=a),b()}):b()},function(){null===j?b(null,!0):b(j)})}else if("deletedata"===i.kind){var j=null;m.eachSeries(i.quads,function(a,b){null===j?e._executeQuadDelete(a,g,function(a){null!=a&&(j=a),b()}):b()},function(){null===j?b(null,!0):b(j)})}else if("modify"===i.kind)this._executeModifyQuery(i,g,b);else if("create"===i.kind)b(!0);else if("load"===i.kind){var k={uri:f.lexicalFormBaseUri(i.sourceGraph,g)};null!=i.destinyGraph&&(k={uri:f.lexicalFormBaseUri(i.destinyGraph,g)});var e=this;this.rdfLoader.load(i.sourceGraph.value,k,function(a,c){a?b(new Error("error batch loading quads")):e.batchLoad(c,function(a){null!==a?b(null,a):b(new Error("Error batch loading quads"))})})}else if("drop"===i.kind)this._executeClearGraph(i.destinyGraph,g,b);else{if("clear"!==i.kind)throw new Error("not supported execution unit");this._executeClearGraph(i.destinyGraph,g,b)}}},QueryEngine.prototype.batchLoad=function(a,b){var c=0,d={},e=this;this.eventsOnBatchLoad&&this.callbacksBackend.startGraphModification();var f=function(a,b,c,f){var g,a;if(a[b].uri||"uri"===a[b].token){var i=a[b].uri||a[b].value;e.lexicon.registerUri(i,function(d){var g=function(){null!=a[b].uri&&(a[b]={token:"uri",value:a[b].uri},delete a[b].uri),c[b]=d,f()};"graph"===b?e.lexicon.registerGraph(d,i,function(){g()}):g()})}else a[b].literal||"literal"===a[b].token?e.lexicon.registerLiteral(a[b].literal||a[b].value,function(d){null!=a[b].literal&&(a[b]=e.lexicon.parseLiteral(a[b].literal),delete a[b].literal),c[b]=d,f()}):(g=d[a[b].blank||a[b].value],null==g?e.lexicon.registerBlank(function(e){d[a[b].blank||a[b].value]=e,null==a[b].token&&(a[b].token="blank",a[b].value=a[b].blank,delete a[b].blank),c[b]=e,f()}):(null==a[b].token&&(a[b].token="blank",a[b].value=a[b].blank,delete a[b].blank),c[b]=g,f()))};m.eachSeries(a,function(a,b){var d={};m.eachSeries(["subject","predicate","object","graph"],function(b,c){f(a,b,d,c)},function(){var f=a;a=d;var h=new g.NodeKey(a);e.backend.search(h,function(d){d?b():e.backend.index(h,function(d){d&&(e.eventsOnBatchLoad&&e.callbacksBackend.nextGraphModification(l.added,[f,a]),c+=1),b()})})})},function(){null!=e.lexicon.updateAfterWrite&&e.lexicon.updateAfterWrite();var a=function(){b(c)};e.eventsOnBatchLoad?e.callbacksBackend.endGraphModification(a()):a()})},QueryEngine.prototype._executeModifyQuery=function(a,b,c){var d=this,e=!0,f=new Error("Error executing modify query"),g=null,h=["subject","predicate","object","graph"];a.insert=null==a.insert?[]:a.insert,a.delete=null==a.delete?[]:a.delete,m.seq(function(c){var h=[],i=[];if(null!=a.with&&h.push(a.with),null!=a.using){i=[];for(var j=0;j<a.using.length;j++){var k=a.using[j];"named"===k.kind?i.push(k.uri):h.push(k.uri)}}a.dataset={},a.projection=[{token:"variable",kind:"*"}],d.executeSelect(a,b,h,i,function(a,h){if(a)return f=a,e=!1,c();d.denormalizeBindingsList(h,b,function(a){null!=a?g=a:(f=new Error("Error denormalizing bindings list"),e=!1),c()})})},function(c){var f=a.with;if(e){for(var i=[],j=0;j<a.delete.length;j++)for(var k=a.delete[j],l=0;l<g.length;l++){for(var n={},o=g[l],p=0;p<h.length;p++){var q=h[p];"graph"==q&&null==k[q]?n.graph=f:"var"===k[q].token?n[q]=o[k[q].value]:n[q]=k[q]}i.push(n)}m.eachSeries(i,function(a,c){d._executeQuadDelete(a,b,function(){c()})},function(){c()})}else c()},function(c){var f=a.with;if(e){for(var i=[],j=0;j<a.insert.length;j++)for(var k=a.insert[j],l=0;l<g.length;l++){for(var n={},o=g[l],p=0;p<h.length;p++){var q=h[p];"graph"==q&&null==k[q]?n.graph=f:"var"===k[q].token?n[q]=o[k[q].value]:n[q]=k[q]}i.push(n)}m.eachSeries(i,function(a,c){d._executeQuadInsert(a,b,function(){c()})},function(){c()})}else c()})(function(){c(e?null:f)})},QueryEngine.prototype._executeQuadInsert=function(a,b,c){var e,d=this,f=!1,h=null;m.seq(function(c){d.normalizeQuad(a,b,!0,function(a){null!=a?e=a:(f=!0,h="Error normalizing quad."),c()})},function(b){if(!1===f){var c=new g.NodeKey(e);d.backend.search(c,function(f){!0===f?b():d.backend.index(c,function(){d.callbacksBackend.nextGraphModification(l.added,[a,e]),b()})})}else b()})(function(){f?c(new Error(h)):c(null,!0)})},QueryEngine.prototype._executeQuadDelete=function(a,b,c){var e,h,i,d=this,f=!1;m.seq(function(c){d.normalizeQuad(a,b,!0,function(a){null!=a?e=a:(f=!0,h="Error normalizing quad."),c()})},function(a){!1===f?(i=new g.NodeKey(e),d.backend.delete(i,function(){a()})):a()},function(b){!1===f?d.lexicon.unregister(a,i,function(){d.callbacksBackend.nextGraphModification(l.deleted,[a,e]),b()}):b()})(function(){f?c(new Error(h)):c(null,!0)})},QueryEngine.prototype._executeClearGraph=function(a,b,c){var d=this;if("default"===a)this.execute("DELETE { ?s ?p ?o } WHERE { ?s ?p ?o }",c);else if("named"===a)d.lexicon.registeredGraphs(!0,function(a){if(null!=a){var b=!1;m.eachSeries(a,function(a,c){b?c():d.execute("DELETE { GRAPH <"+a+"> { ?s ?p ?o } } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",function(e,f){e?(b=e,c()):d.lexicon.resolveUri(a,function(e){-1!=e?d.lexicon.knownGraphs.delete(e,function(){c()}):(b="Cannot find graph "+a+" to clear it",c())})})},function(){c(!b)})}else c(!1,"Error deleting named graphs")});else if("all"===a){var d=this;this.execute("CLEAR DEFAULT",function(a,b){a?c(!1,b):d.execute("CLEAR NAMED",c)})}else if("uri"==a.token){var e=f.lexicalFormBaseUri(a,b);null!=e?(this.callbacksBackend.ongoingModification=!0,this.execute("DELETE { GRAPH <"+e+"> { ?s ?p ?o } } WHERE { GRAPH <"+e+"> { ?s ?p ?o } }",function(a){d.callbacksBackend.ongoingModification=!1,c(a)})):c(!1,"wrong graph URI")}else c(!1,"wrong graph URI")},QueryEngine.prototype.checkGroupSemantics=function(a,b){if("singleGroup"===a)return!0;for(var c={},d=0;d<a.length;d++){var e=a[d];"var"===e.token?c[e.value]=!0:"aliased_expression"===e.token&&(c[e.alias.value]=!0)}for(d=0;d<b.length;d++){var f=b[d];if("var"===f.kind){if(null==c[f.value.value])return!1}else if("aliased"===f.kind&&f.expression&&"var"===f.expression.primaryexpression&&null==c[f.expression.value.value])return!1}return!0},QueryEngine.prototype.runBinds=function(a,b,c,d,e){var f=this,g=b;null!=a&&a.length>0?f.copyDenormalizedBindings(b,d.outCache,function(h){for(var j=0;j<b.length;j++)for(var k=0;k<a.length;k++){var l=a[k],m=h[j],n=i.runFilter(l.expression,m,f,c,d);i.isEbvError(n)?e(n):g[j][l.as.value]=n}e(null,b)}):e(null,b)},QueryEngine.prototype.computeCosts=function(a,b,c){for(var d=0;d<a.length;d++)a[d]._cost=this.quadCost(a[d],b);c(a)},QueryEngine.prototype.quadCost=function(a,b){return 1},QueryEngine.prototype.registerDefaultNamespace=function(a,b){this.defaultPrefixes[a]=b},b.exports={QueryEngine:QueryEngine}},{"./abstract_query_tree":108,"./graph_callbacks":110,"./quad_index":118,"./query_filters":120,"./query_plan":121,"./rdf_loader":122,"./rdf_model":123,"./utils":126}],120:[function(a,b,c){var d=a("./utils"),e=d,f=a("./utils");QueryFilters={};var g="http://www.w3.org/2001/XMLSchema#";QueryFilters.checkFilters=function(a,b,c,d,e,g,h){var i=[];a.filter&&"function"!=typeof a.filter&&(i=a.filter);var j=[];if(null==i||0===i.length||null!=a.length)return h(b);QueryFilters.preprocessExistentialFilters(i,b,g,d,e,function(a){f.eachSeries(a,function(a,f){QueryFilters.run(a.value,b,c,d,e,g,function(a){for(var c=[],d=0;d<a.length;d++){var e=a[d];null!=e.__nullify__?j.push(e):c.push(e)}b=c,f()})},function(){h(b.concat(j))})})},QueryFilters.preprocessExistentialFilters=function(a,b,c,d,g,h){var i=[];f.eachSeries(a,function(a,h){if("builtincall"!==a.value.expressionType||"exists"!==a.value.builtincall&&"notexists"!==a.value.builtincall)i.push(a),h();else{var j=a.value.builtincall,k=a.value.args,l={};c.copyDenormalizedBindings(b,g.outCache,function(b){f.eachSeries(b,function(a,b){var f=e.clone(k[0],!0),h=c.abstractQueryTree.parseSelect({pattern:f},a);h=c.abstractQueryTree.bind(h.pattern,a),c.executeSelectUnit([{kind:"*"}],d,h,g,function(c){var d=null;d="exists"===j?QueryFilters.ebvBoolean(0!==c.length):QueryFilters.ebvBoolean(0===c.length);var e=[];for(var f in a)e.push(JSON.stringify(a[f]));e=e.sort().join(""),l[e]=d,b()})},function(){a.value.origArgs=a.value.args,a.value.args=l,i.push(a),h()})})}},function(){h(i)})},QueryFilters.boundVars=function(a){if(null==a.expressionType)throw"Cannot find bound expressions in a no expression token";var b=a.expressionType;if("relationalexpression"==b){var c=a.op1,d=a.op2;return QueryFilters.boundVars(c)+QueryFilters.boundVars(d)}if("conditionalor"==b||"conditionaland"==b){for(var e=[],f=0;f<a.operands;f++)e=e.concat(QueryFilters.boundVars(a.operands[f]));return e}if("builtincall"==b){if(null==a.args)return[];for(var g=[],f=0;f<a.args.length;f++)g=g.concat(QueryFilters.boundVars(a.args[f]));return g}if("multiplicativeexpression"==b){for(var g=QueryFilters.boundVars(a.factor),f=0;f<a.factors.length;f++)g=g.concat(QueryFilters.boundVars(a.factors[f].expression));return g}if("additiveexpression"==b){for(var g=QueryFilters.boundVars(a.summand),f=0;f<a.summands.length;f++)g=g.concat(QueryFilters.boundVars(a.summands[f].expression));return g}if("regex"==b){var g=QueryFilters.boundVars(a.expression1);return g.concat(QueryFilters.boundVars(a.expression2))}return"unaryexpression"==b?QueryFilters.boundVars(a.expression):"atomic"==b?"var"==a.primaryexpression?[a.value]:[]:void 0},QueryFilters.run=function(a,b,c,d,e,f,g){f.copyDenormalizedBindings(b,e.outCache,function(h){for(var i=[],j=0;j<b.length;j++){var k=h[j],l=QueryFilters.runFilter(a,k,f,d,e),l=QueryFilters.ebv(l);if(QueryFilters.isEbvError(l)){if(c){var m={__nullify__:!0,bindings:b[j]};i.push(m)}}else if(!0===l)i.push(b[j]);else if(c){var m={__nullify__:!0,bindings:b[j]};i.push(m)}}g(i)})},QueryFilters.collect=function(a,b,c,d,e,f){e.copyDenormalizedBindings(b,d.outCache,function(g){for(var h=[],i=0;i<g.length;i++){var j=g[i],k=QueryFilters.runFilter(a,j,e,c,d);h.push({binding:b[i],value:k})}return f(h)})},QueryFilters.runDistinct=function(a,b){},QueryFilters.runAggregator=function(a,b,c,e,f){if(null==b||0===b.length)return QueryFilters.ebvError();if("variable"===a.token&&"var"==a.kind)return b[0][a.value.value];if("variable"===a.token&&"aliased"===a.kind){if("atomic"===a.expression.expressionType&&"var"===a.expression.primaryexpression)return b[0][a.expression.value.value];if("aggregate"===a.expression.expressionType){if("max"===a.expression.aggregateType){for(var h=null,i=0;i<b.length;i++){var j=b[i],k=QueryFilters.runFilter(a.expression.expression,j,c,e,f);QueryFilters.isEbvError(k)||(null===h?h=k:!0===QueryFilters.runLtFunction(h,k).value&&(h=k))}return null===h?QueryFilters.ebvError():h}if("min"===a.expression.aggregateType){for(var l=null,i=0;i<b.length;i++){var j=b[i],k=QueryFilters.runFilter(a.expression.expression,j,c,e,f);QueryFilters.isEbvError(k)||(null===l?l=k:!0===QueryFilters.runGtFunction(l,k).value&&(l=k))}return null===l?QueryFilters.ebvError():l}if("count"===a.expression.aggregateType){var m={},n=0;if("*"===a.expression.expression)if(null!=a.expression.distinct&&""!=a.expression.distinct)for(var i=0;i<b.length;i++){var j=b[i],o=d.hashTerm(j);null==m[o]&&(m[o]=!0,n++)}else n=b.length;else for(var i=0;i<b.length;i++){var j=b[i],k=QueryFilters.runFilter(a.expression.expression,j,c,e,f);if(!QueryFilters.isEbvError(k))if(null!=a.expression.distinct&&""!=a.expression.distinct){var o=d.hashTerm(k);null==m[o]&&(m[o]=!0,n++)}else n++}return{token:"literal",type:g+"integer",value:""+n}}if("avg"===a.expression.aggregateType){for(var m={},p={token:"literal",type:g+"integer",value:"0"},n=0,i=0;i<b.length;i++){var j=b[i],k=QueryFilters.runFilter(a.expression.expression,j,c,e,f);if(!QueryFilters.isEbvError(k))if(null!=a.expression.distinct&&""!=a.expression.distinct){var o=d.hashTerm(k);null==m[o]&&(m[o]=!0,QueryFilters.isNumeric(k)&&(p=QueryFilters.runSumFunction(p,k),n++))}else QueryFilters.isNumeric(k)&&(p=QueryFilters.runSumFunction(p,k),n++)}var q=QueryFilters.runDivFunction(p,{token:"literal",type:g+"integer",value:""+n});return q.value=""+q.value,q}if("sum"===a.expression.aggregateType){for(var m={},p={token:"literal",type:g+"integer",value:"0"},i=0;i<b.length;i++){var j=b[i],k=QueryFilters.runFilter(a.expression.expression,j,c,e,f);if(!QueryFilters.isEbvError(k))if(null!=a.expression.distinct&&""!=a.expression.distinct){var o=d.hashTerm(k);null==m[o]&&(m[o]=!0,QueryFilters.isNumeric(k)&&(p=QueryFilters.runSumFunction(p,k)))}else QueryFilters.isNumeric(k)&&(p=QueryFilters.runSumFunction(p,k))}return p.value=""+p.value,p}var k=QueryFilters.runFilter(aggregate.expression,b[0],e,{blanks:{},outCache:{}});return k}}},QueryFilters.runFilter=function(a,b,c,e,f){if(null!=a.expressionType){var g=a.expressionType;if("relationalexpression"==g){var h=QueryFilters.runFilter(a.op1,b,c,e,f),i=QueryFilters.runFilter(a.op2,b,c,e,f);return QueryFilters.runRelationalFilter(a,h,i,b,c,e,f)}if("conditionalor"==g)return QueryFilters.runOrFunction(a,b,c,e,f);if("conditionaland"==g)return QueryFilters.runAndFunction(a,b,c,e,f);if("additiveexpression"==g)return QueryFilters.runAddition(a.summand,a.summands,b,c,e,f);if("builtincall"==g)return QueryFilters.runBuiltInCall(a.builtincall,a.args,b,c,e,f);if("multiplicativeexpression"==g)return QueryFilters.runMultiplication(a.factor,a.factors,b,c,e,f);if("unaryexpression"==g)return QueryFilters.runUnaryExpression(a.unaryexpression,a.expression,b,c,e,f);if("irireforfunction"==g)return QueryFilters.runIriRefOrFunction(a.iriref,a.args,b,c,e,f);if("regex"==g)return QueryFilters.runRegex(a.text,a.pattern,a.flags,b,c,e,f);if("custom"==g)return QueryFilters.runBuiltInCall(a.name,a.args,b,c,e,f);if("atomic"==g)return"var"==a.primaryexpression?b[a.value.value]:"object"!=typeof a.value?a.value:null==a.value.type||"object"!=typeof a.value.type?a.value:(a.value.type=d.lexicalFormBaseUri(a.value.type,f),a.value);throw"Unknown filter expression type"}throw"Cannot find bound expressions in a no expression token"},QueryFilters.isRDFTerm=function(a){return null!=a&&!!(a.token&&"literal"==a.token||a.token&&"uri"==a.token||a.token&&"blank"==a.token)},QueryFilters.RDFTermEquality=function(a,b,c,e){return"literal"===a.token&&"literal"===b.token?a.lang==b.lang&&a.type==b.type&&a.value==b.value||(null!=a.type&&null!=b.type?QueryFilters.ebvError():QueryFilters.isSimpleLiteral(a)&&null!=b.type?QueryFilters.ebvError():!(!QueryFilters.isSimpleLiteral(b)||null==a.type)&&QueryFilters.ebvError()):"uri"===a.token&&"uri"===b.token?d.lexicalFormBaseUri(a,e)==d.lexicalFormBaseUri(b,e):"blank"===a.token&&"blank"===b.token&&a.value==b.value},QueryFilters.isInteger=function(a){return null!=a&&("literal"===a.token&&(a.type==g+"integer"||a.type==g+"decimal"||a.type==g+"double"||a.type==g+"nonPositiveInteger"||a.type==g+"negativeInteger"||a.type==g+"long"||a.type==g+"int"||a.type==g+"short"||a.type==g+"byte"||a.type==g+"nonNegativeInteger"||a.type==g+"unsignedLong"||a.type==g+"unsignedInt"||a.type==g+"unsignedShort"||a.type==g+"unsignedByte"||a.type==g+"positiveInteger"))},QueryFilters.isFloat=function(a){return null!=a&&("literal"===a.token&&a.type==g+"float")},QueryFilters.isDecimal=function(a){return null!=a&&("literal"===a.token&&a.type==g+"decimal")},QueryFilters.isDouble=function(a){return null!=a&&("literal"===a.token&&a.type==g+"double")},QueryFilters.isNumeric=function(a){return null!=a&&("literal"===a.token&&(a.type==g+"integer"||a.type==g+"decimal"||a.type==g+"float"||a.type==g+"double"||a.type==g+"nonPositiveInteger"||a.type==g+"negativeInteger"||a.type==g+"long"||a.type==g+"int"||a.type==g+"short"||a.type==g+"byte"||a.type==g+"nonNegativeInteger"||a.type==g+"unsignedLong"||a.type==g+"unsignedInt"||a.type==g+"unsignedShort"||a.type==g+"unsignedByte"||a.type==g+"positiveInteger"))},QueryFilters.isSimpleLiteral=function(a){return!(!a||"literal"!=a.token)&&(null==a.type&&null==a.lang)},QueryFilters.isXsdType=function(a,b){return!(!b||"literal"!=b.token)&&b.type==g+""+a},QueryFilters.ebv=function(a){if(null==a||QueryFilters.isEbvError(a))return QueryFilters.ebvError();if(a.token&&"literal"===a.token){if(a.type==g+"integer"||a.type==g+"decimal"||a.type==g+"double"||a.type==g+"nonPositiveInteger"||a.type==g+"negativeInteger"||a.type==g+"long"||a.type==g+"int"||a.type==g+"short"||a.type==g+"byte"||a.type==g+"nonNegativeInteger"||a.type==g+"unsignedLong"||a.type==g+"unsignedInt"||a.type==g+"unsignedShort"||a.type==g+"unsignedByte"||a.type==g+"positiveInteger"){var b=parseFloat(a.value);return!isNaN(b)&&0!=parseFloat(a.value)}return a.type===g+"boolean"?"true"===a.value||!0===a.value||"True"===a.value:a.type===g+"string"?""!=a.value:a.type===g+"dateTime"?null!=new Date(a.value):QueryFilters.isEbvError(a)?a:null==a.type?""!=a.value:QueryFilters.ebvError()}return!0===a.value},QueryFilters.effectiveBooleanValue=QueryFilters.ebv,QueryFilters.ebvTrue=function(){return{token:"literal",type:g+"boolean",value:!0}},QueryFilters.ebvFalse=function(){return{token:"literal",type:g+"boolean",value:!1}},QueryFilters.ebvError=function(){return{token:"literal",type:"https://github.com/antoniogarrote/js-tools/types#error",value:null}},QueryFilters.isEbvError=function(a){return"object"==typeof a&&null!=a&&"https://github.com/antoniogarrote/js-tools/types#error"===a.type},QueryFilters.ebvBoolean=function(a){return QueryFilters.isEbvError(a)?a:!0===a?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.runRelationalFilter=function(a,b,c,d,e,f,g){var h=a.operator;if("="===h)return QueryFilters.runEqualityFunction(b,c,d,e,f,g);if("!="===h){var i=QueryFilters.runEqualityFunction(b,c,d,e,f,g);return QueryFilters.isEbvError(i)?i:(i.value=!i.value,i)}if("<"===h)return QueryFilters.runLtFunction(b,c,d);if(">"===h)return QueryFilters.runGtFunction(b,c,d);if("<="===h)return QueryFilters.runLtEqFunction(b,c,d);if(">="===h)return QueryFilters.runGtEqFunction(b,c,d);throw"Error applying relational filter, unknown operator"},QueryFilters.effectiveTypeValue=function(a){if("literal"!=a.token)throw console.log("not implemented yet"),console.log(a),"value not supported in operations yet";if(a.type==g+"integer"){var b=parseInt(a.value);return b}if(a.type==g+"decimal"){var b=parseFloat(a.value);return b}if(a.type==g+"float"){var b=parseFloat(a.value);return b}if(a.type==g+"double"){var b=parseFloat(a.value);return b}if(a.type==g+"nonPositiveInteger"){var b=parseFloat(a.value);return b}if(a.type==g+"negativeInteger"){var b=parseInt(a.value);return b}if(a.type==g+"long"){var b=parseInt(a.value);return b}if(a.type==g+"int"){var b=parseInt(a.value);return b}if(a.type==g+"short"){var b=parseInt(a.value);return b}if(a.type==g+"byte"){var b=parseInt(a.value);return b}if(a.type==g+"nonNegativeInteger"){var b=parseInt(a.value);return b}if(a.type==g+"unsignedLong"){var b=parseInt(a.value);return b}if(a.type==g+"unsignedInt"){var b=parseInt(a.value);return b}if(a.type==g+"unsignedShort"){var b=parseInt(a.value);return b}if(a.type==g+"unsignedByte"){var b=parseInt(a.value);return b}if(a.type==g+"positiveInteger"){var b=parseInt(a.value);return b}if(a.type!=g+"date"&&a.type!=g+"dateTime")return a.type==g+"boolean"?!0===a.value||"true"===a.value||"1"===a.value||1===a.value||!0===a.value||!1!==a.value&&"false"!==a.value&&"0"!==a.value&&0!==a.value&&!1!==a.value&&void 0:a.type==g+"string"?null===a.value||void 0===a.value?void 0:""+a.value:(a.type,a.value);try{return d.parseISO8601(a.value)}catch(a){return null}},QueryFilters.runOrFunction=function(a,b,c,d,e){for(var f=null,g=0;g<a.operands.length;g++){var h=QueryFilters.runFilter(a.operands[g],b,c,d,e);0==QueryFilters.isEbvError(h)&&(h=QueryFilters.ebv(h)),null==f?f=h:QueryFilters.isEbvError(h)?f=QueryFilters.isEbvError(f)?QueryFilters.ebvError():!0===f||QueryFilters.ebvError():!0===h?f=!0:QueryFilters.isEbvError(f)&&(f=QueryFilters.ebvError())}return QueryFilters.ebvBoolean(f)},QueryFilters.runAndFunction=function(a,b,c,d,e){for(var f=null,g=0;g<a.operands.length;g++){var h=QueryFilters.runFilter(a.operands[g],b,c,d,e);0==QueryFilters.isEbvError(h)&&(h=QueryFilters.ebv(h)),null==f?f=h:QueryFilters.isEbvError(h)?f=QueryFilters.isEbvError(f)?QueryFilters.ebvError():!0===f&&QueryFilters.ebvError():!0===h?QueryFilters.isEbvError(f)&&(f=QueryFilters.ebvError()):f=!1}return QueryFilters.ebvBoolean(f)},QueryFilters.runEqualityFunction=function(a,b,c,e,f,g){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b)){var h=QueryFilters.effectiveTypeValue(a),i=QueryFilters.effectiveTypeValue(b);return isNaN(h)||isNaN(i)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(a,b,e,g)):QueryFilters.ebvBoolean(h==i)}if((QueryFilters.isSimpleLiteral(a)||QueryFilters.isXsdType("string",a))&&(QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",b)))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)==QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("boolean",a)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)==QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",a)||QueryFilters.isXsdType("date",a))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isXsdType("date",b))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",a)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();var j=d.compareDateComponents(a.value,b.value);return null!=j?0==j?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.isRDFTerm(a)&&QueryFilters.isRDFTerm(b)?QueryFilters.ebvBoolean(QueryFilters.RDFTermEquality(a,b,e,g)):QueryFilters.ebvFalse()},QueryFilters.runGtFunction=function(a,b,c){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>QueryFilters.effectiveTypeValue(b));if(QueryFilters.isSimpleLiteral(a)&&QueryFilters.isSimpleLiteral(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("string",a)&&QueryFilters.isXsdType("string",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("boolean",a)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",a)||QueryFilters.isXsdType("date",a))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isXsdType("date",b))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",a)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();var e=d.compareDateComponents(a.value,b.value);return null!=e?1==e?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runTotalGtFunction=function(a,b){return QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b)?QueryFilters.ebvError():QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b)||QueryFilters.isSimpleLiteral(a)&&QueryFilters.isSimpleLiteral(b)||QueryFilters.isXsdType("string",a)&&QueryFilters.isSimpleLiteral("string",b)||QueryFilters.isXsdType("boolean",a)&&QueryFilters.isSimpleLiteral("boolean",b)||QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isSimpleLiteral("dateTime",b)?QueryFilters.runGtFunction(a,b,[]):a.token&&"uri"===a.token&&b.token&&"uri"===b.token?QueryFilters.ebvBoolean(a.value>b.value):a.token&&"literal"===a.token&&b.token&&"literal"===b.token?QueryFilters.ebvBoolean(""+a.value+a.type+a.lang>""+b.value+b.type+b.lang):a.token&&"blank"===a.token&&b.token&&"blank"===b.token?QueryFilters.ebvBoolean(a.value>b.value):a.value&&b.value?QueryFilters.ebvBoolean(a.value>b.value):QueryFilters.ebvTrue()},QueryFilters.runLtFunction=function(a,b,c){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<QueryFilters.effectiveTypeValue(b));if(QueryFilters.isSimpleLiteral(a)&&QueryFilters.isSimpleLiteral(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("string",a)&&QueryFilters.isXsdType("string",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("boolean",a)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",a)||QueryFilters.isXsdType("date",a))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isXsdType("date",b))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",a)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();var e=d.compareDateComponents(a.value,b.value);return null!=e?-1==e?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runGtEqFunction=function(a,b,c){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isSimpleLiteral(a)&&QueryFilters.isSimpleLiteral(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("string",a)&&QueryFilters.isXsdType("string",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("boolean",a)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)>=QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",a)||QueryFilters.isXsdType("date",a))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isXsdType("date",b))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",a)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();var e=d.compareDateComponents(a.value,b.value);return null!=e?-1!=e?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runLtEqFunction=function(a,b,c){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();if(QueryFilters.isNumeric(a)&&QueryFilters.isNumeric(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isSimpleLiteral(a)&&QueryFilters.isSimpleLiteral(b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("string",a)&&QueryFilters.isXsdType("string",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<=QueryFilters.effectiveTypeValue(b));if(QueryFilters.isXsdType("boolean",a)&&QueryFilters.isXsdType("boolean",b))return QueryFilters.ebvBoolean(QueryFilters.effectiveTypeValue(a)<=QueryFilters.effectiveTypeValue(b));if((QueryFilters.isXsdType("dateTime",a)||QueryFilters.isXsdType("date",a))&&(QueryFilters.isXsdType("dateTime",b)||QueryFilters.isXsdType("date",b))){if(QueryFilters.isXsdType("dateTime",a)&&QueryFilters.isXsdType("date",b))return QueryFilters.ebvFalse();if(QueryFilters.isXsdType("date",a)&&QueryFilters.isXsdType("dateTime",b))return QueryFilters.ebvFalse();var e=d.compareDateComponents(a.value,b.value);return null!=e?1!=e?QueryFilters.ebvTrue():QueryFilters.ebvFalse():QueryFilters.ebvError()}return QueryFilters.ebvFalse()},QueryFilters.runAddition=function(a,b,c,d,e,f){var g=QueryFilters.runFilter(a,c,d,e,f);if(QueryFilters.isEbvError(g))return QueryFilters.ebvError();var h=g;if(QueryFilters.isNumeric(g)){for(var i=0;i<b.length;i++){var j=QueryFilters.runFilter(b[i].expression,c,d,e,f);if(!QueryFilters.isNumeric(j))return QueryFilters.ebvFalse();"+"===b[i].operator?h=QueryFilters.runSumFunction(h,j):"-"===b[i].operator&&(h=QueryFilters.runSubFunction(h,j))}return h}return QueryFilters.ebvFalse()},QueryFilters.runSumFunction=function(a,b){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var c=QueryFilters.effectiveTypeValue(a)+QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(a)||QueryFilters.isDouble(b)?{token:"literal",type:g+"double",value:c}:QueryFilters.isFloat(a)||QueryFilters.isFloat(b)?{token:"literal",type:g+"float",value:c}:QueryFilters.isDecimal(a)||QueryFilters.isDecimal(b)?{token:"literal",type:g+"decimal",value:c}:{token:"literal",type:g+"integer",value:c}},QueryFilters.runSubFunction=function(a,b){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var c=QueryFilters.effectiveTypeValue(a)-QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(a)||QueryFilters.isDouble(b)?{token:"literal",type:g+"double",value:c}:QueryFilters.isFloat(a)||QueryFilters.isFloat(b)?{token:"literal",type:g+"float",value:c}:QueryFilters.isDecimal(a)||QueryFilters.isDecimal(b)?{token:"literal",type:g+"decimal",value:c}:{token:"literal",type:g+"integer",value:c}},QueryFilters.runMultiplication=function(a,b,c,d,e,f){var g=QueryFilters.runFilter(a,c,d,e,f);if(QueryFilters.isEbvError(g))return g;var h=g;if(QueryFilters.isNumeric(g)){for(var i=0;i<b.length;i++){var j=QueryFilters.runFilter(b[i].expression,c,d,e,f);if(QueryFilters.isEbvError(j))return g;if(!QueryFilters.isNumeric(j))return QueryFilters.ebvFalse();"*"===b[i].operator?h=QueryFilters.runMulFunction(h,j):"/"===b[i].operator&&(h=QueryFilters.runDivFunction(h,j))}return h}return QueryFilters.ebvFalse()},QueryFilters.runMulFunction=function(a,b){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var c=QueryFilters.effectiveTypeValue(a)*QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(a)||QueryFilters.isDouble(b)?{token:"literal",type:g+"double",value:c}:QueryFilters.isFloat(a)||QueryFilters.isFloat(b)?{token:"literal",type:g+"float",value:c}:QueryFilters.isDecimal(a)||QueryFilters.isDecimal(b)?{token:"literal",type:g+"decimal",value:c}:{token:"literal",type:g+"integer",value:c}},QueryFilters.runDivFunction=function(a,b){if(QueryFilters.isEbvError(a)||QueryFilters.isEbvError(b))return QueryFilters.ebvError();var c=QueryFilters.effectiveTypeValue(a)/QueryFilters.effectiveTypeValue(b);return QueryFilters.isDouble(a)||QueryFilters.isDouble(b)?{token:"literal",type:g+"double",value:c}:QueryFilters.isFloat(a)||QueryFilters.isFloat(b)?{token:"literal",type:g+"float",value:c}:QueryFilters.isDecimal(a)||QueryFilters.isDecimal(b)?{token:"literal",type:g+"decimal",value:c}:{token:"literal",type:g+"integer",value:c}},QueryFilters.runBuiltInCall=function(a,b,c,d,e,f){if("notexists"===a||"exists"===a){var g=[];for(var h in c)g.push(JSON.stringify(c[h]));return g=g.sort().join(""),b[g]}for(var i=[],j=0;j<b.length;j++)if("var"===b[j].token)i.push(b[j]);else{var k=QueryFilters.runFilter(b[j],c,d,e,f);if(QueryFilters.isEbvError(k))return k;i.push(k)}if("str"===a)return"literal"===i[0].token?{token:"literal",type:null,value:""+i[0].value}:"uri"===i[0].token?{token:"literal",type:null,value:i[0].value}:QueryFilters.ebvFalse();if("lang"===a)return"literal"===i[0].token?null!=i[0].lang?{token:"literal",value:""+i[0].lang}:{token:"literal",value:""}:QueryFilters.ebvError();if("datatype"===a){if("literal"===i[0].token){var l=i[0];return null!=l.type?"string"==typeof l.type?{token:"uri",value:l.type,prefix:null,suffix:null}:l.type:null==l.lang?{token:"uri",value:"http://www.w3.org/2001/XMLSchema#string",prefix:null,suffix:null}:QueryFilters.ebvError()}return QueryFilters.ebvError()}if("isliteral"===a)return"literal"===i[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isblank"===a)return"blank"===i[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("isuri"===a||"isiri"===a)return"uri"===i[0].token?QueryFilters.ebvTrue():QueryFilters.ebvFalse();if("sameterm"===a){var m=i[0],n=i[1],o=QueryFilters.RDFTermEquality(m,n,d,f);return QueryFilters.isEbvError(o)&&(o=!1),QueryFilters.ebvBoolean(o)}if("langmatches"===a){var p=i[0],q=i[1];return"literal"===p.token&&"literal"===q.token?"*"===q.value&&""!=p.value?QueryFilters.ebvTrue():QueryFilters.ebvBoolean(0===p.value.toLowerCase().indexOf(q.value.toLowerCase())):QueryFilters.ebvError()}if("bound"===a){var r=i[0].value;return null==r?QueryFilters.ebvError():null!=c[r]?QueryFilters.ebvTrue():QueryFilters.ebvFalse()}if(null!=d.customFns[a])return d.customFns[a](QueryFilters,i);throw"Builtin call "+a+" not implemented yet"},QueryFilters.runUnaryExpression=function(a,b,c,d,e,f){var g=QueryFilters.runFilter(b,c,d,e,f);if(QueryFilters.isEbvError(g))return g;if("!"===a){var h=QueryFilters.ebv(g);return QueryFilters.isEbvError(h)?QueryFilters.ebvFalse():(h=!h,QueryFilters.ebvBoolean(h))}if("+"===a)return QueryFilters.isNumeric(g)?g:QueryFilters.ebvError();if("-"===a){if(QueryFilters.isNumeric(g)){var i={};for(var j in g)i[j]=g[j];return i.value=-i.value,i}return QueryFilters.ebvError()}},QueryFilters.runRegex=function(a,b,c,d,e,f,g){if(null==a)return QueryFilters.ebvError();if(a=QueryFilters.runFilter(a,d,e,f,g),null==b)return QueryFilters.ebvError();if(b=QueryFilters.runFilter(b,d,e,f,g),null!=c&&(c=QueryFilters.runFilter(c,d,e,f,g)),null==b||"literal"!==b.token||null!=c&&"literal"!==c.token)return QueryFilters.ebvError();if(b=b.value,c=null==c?null:c.value,null!=a&&"var"==a.token){if(null==d[a.value])return QueryFilters.ebvError();a=d[a.value]}else{if(null==a||"literal"!==a.token)return QueryFilters.ebvError();if(null!=a.type&&!QueryFilters.isXsdType("string",a))return QueryFilters.ebvError();a=a.value}var h;return h=null==c?new RegExp(b):new RegExp(b,c.toLowerCase()),h.exec(a)?QueryFilters.ebvTrue():QueryFilters.ebvFalse()},QueryFilters.normalizeLiteralDatatype=function(a,b,c){return null==a.value.type||"object"!=typeof a.value.type?a:(a.value.type=d.lexicalFormBaseUri(a.value.type,c),a)},QueryFilters.runIriRefOrFunction=function(a,b,c,e,f,h){if(null==b)return a;for(var i=[],j=0;j<b.length;j++)i.push(QueryFilters.runFilter(b[j],c,e,f,h));var k=d.lexicalFormBaseUri(a,h);if(k==g+"integer"||k==g+"decimal"||k==g+"double"||k==g+"nonPositiveInteger"||k==g+"negativeInteger"||k==g+"long"||k==g+"int"||k==g+"short"||k==g+"byte"||k==g+"nonNegativeInteger"||k==g+"unsignedLong"||k==g+"unsignedInt"||k==g+"unsignedShort"||k==g+"unsignedByte"||k==g+"positiveInteger"){var l=i[0];if("literal"!==l.token)return QueryFilters.ebvError();if(l=QueryFilters.normalizeLiteralDatatype(l,e,h),l.type==g+"integer"||l.type==g+"decimal"||l.type==g+"double"||l.type==g+"nonPositiveInteger"||l.type==g+"negativeInteger"||l.type==g+"long"||l.type==g+"int"||l.type==g+"short"||l.type==g+"byte"||l.type==g+"nonNegativeInteger"||l.type==g+"unsignedLong"||l.type==g+"unsignedInt"||l.type==g+"unsignedShort"||l.type==g+"unsignedByte"||l.type==g+"positiveInteger")return l.type=k,l;if("http://www.w3.org/2001/XMLSchema#boolean"==l.type)return 1==QueryFilters.ebv(l)?(l.type=k,l.value=1):(l.type=k,l.value=0),l;if("http://www.w3.org/2001/XMLSchema#float"==l.type||"http://www.w3.org/2001/XMLSchema#double"==l.type)return l.type=k,l.value=parseInt(l.value),l;if("http://www.w3.org/2001/XMLSchema#string"!=l.type&&null!=l.type)return QueryFilters.ebvError();if(l.value.split(".").length>2)return QueryFilters.ebvError();if(l.value.split("-").length>2)return QueryFilters.ebvError();if(l.value.split("/").length>2)return QueryFilters.ebvError();if(l.value.split("+").length>2)return QueryFilters.ebvError();if(k==g+"decimal"&&(-1!=l.value.indexOf("e")||-1!=l.value.indexOf("E")))return QueryFilters.ebvError();if(!(k!=g+"int"&&k!=g+"integer"||-1==l.value.indexOf("e")&&-1==l.value.indexOf("E")&&-1==l.value.indexOf(".")))return QueryFilters.ebvError();try{return l.value=parseInt(parseFloat(l.value)),isNaN(l.value)?QueryFilters.ebvError():(l.type=k,l)}catch(a){return QueryFilters.ebvError()}}else{if(k==g+"boolean"){var l=i[0];return"literal"===l.token&&null==l.type?"true"===l.value||"1"===l.value?QueryFilters.ebvTrue():"false"===l.value||"0"===l.value?QueryFilters.ebvFalse():QueryFilters.ebvError():"literal"===l.token?QueryFilters.isEbvError(l)?l:QueryFilters.ebvBoolean(l):QueryFilters.ebvError()}if(k==g+"string"){var l=i[0];return"literal"===l.token?(l=QueryFilters.normalizeLiteralDatatype(l,e,h),l.type==g+"integer"||l.type==g+"decimal"||l.type==g+"double"||l.type==g+"nonPositiveInteger"||l.type==g+"negativeInteger"||l.type==g+"long"||l.type==g+"int"||l.type==g+"short"||l.type==g+"byte"||l.type==g+"nonNegativeInteger"||l.type==g+"unsignedLong"||l.type==g+"unsignedInt"||l.type==g+"unsignedShort"||l.type==g+"unsignedByte"||l.type==g+"positiveInteger"||l.type==g+"float"?(l.type=k,l.value=""+l.value,l):l.type==g+"string"?l:l.type==g+"boolean"?(QueryFilters.ebv(l)?(l.type=k,l.value="true"):(l.type=k,l.value="false"),l):l.type==g+"dateTime"||l.type==g+"date"?(l.type=k,"string"!=typeof l.value&&(l.value=d.iso8601(l.value)),l):null==l.type?(l.value=""+l.value,l.type=k,l):QueryFilters.ebvError()):"uri"===l.token?{token:"literal",value:d.lexicalFormBaseUri(l,h),type:k,lang:null}:QueryFilters.ebvError()}if(k==g+"dateTime"||k==g+"date"){if(l=i[0],l.type==g+"dateTime"||l.type==g+"date")return l;if(l.type!=g+"string"&&null!=l.type)return QueryFilters.ebvError();try{return l.value=d.iso8601(d.parseISO8601(l.value)),l.type=k,l}catch(a){return QueryFilters.ebvError()}}else{if(k!=g+"float")return null!=e.customFns[k]?e.customFns[k](QueryFilters,i):QueryFilters.ebvError();var l=i[0];if("literal"!==l.token)return QueryFilters.ebvError();if(l=QueryFilters.normalizeLiteralDatatype(l,e,h),"http://www.w3.org/2001/XMLSchema#decimal"==l.type||"http://www.w3.org/2001/XMLSchema#int"==l.type)return l.type=k,l.value=parseFloat(l.value),l;if("http://www.w3.org/2001/XMLSchema#boolean"==l.type)return 1==QueryFilters.ebv(l)?(l.type=k,l.value=1):(l.type=k,l.value=0),l;if("http://www.w3.org/2001/XMLSchema#float"==l.type||"http://www.w3.org/2001/XMLSchema#double"==l.type)return l.type=k,l.value=parseFloat(l.value),l;if("http://www.w3.org/2001/XMLSchema#string"==l.type)try{return l.value=parseFloat(l.value),isNaN(l.value)?QueryFilters.ebvError():(l.type=k,l)}catch(a){return QueryFilters.ebvError()}else{if(null!=l.type)return QueryFilters.ebvError();if(l.value.split(".").length>2)return QueryFilters.ebvError();if(l.value.split("-").length>2)return QueryFilters.ebvError();if(l.value.split("/").length>2)return QueryFilters.ebvError();if(l.value.split("+").length>2)return QueryFilters.ebvError();try{return l.value=parseFloat(l.value),isNaN(l.value)?QueryFilters.ebvError():(l.type=k,l)}catch(a){return QueryFilters.ebvError()}}}}},b.exports={QueryFilters:QueryFilters}},{"./utils":126}],121:[function(a,b,c){var d=a("./utils"),e=a("./utils"),g={};g.variablesInBGP=function(a){var b=a.variables;if(b)return b;var c=a.value||a;b=[];for(var d in c)c[d]&&"var"===c[d].token?b.push(c[d].value):c[d]&&"blank"===c[d].token&&b.push("blank:"+c[d].value);return a.variables=b,b},g.connected=function(a,b){for(var c="/"+a.vars.join("/")+"/",d=0;d<b.vars.length;d++)if(-1!=c.indexOf("/"+b.vars[d]+"/"))return!0;return!1};var h=function(a,b){for(var c={},d=0;d<a.lenght;d++)c[a[d]]=1;for(d=0;d<b.length;d++){var e=c[b[d]]||0;e++,c[b[d]]=e}var f=[];for(var g in c)2==c[g]&&f.push(c[g]);return f};g.variablesIntersectionBGP=function(a,b){return h(g.variablesInBGP(a),g.variablesInBGP(b))},g.executeAndBGPsGroups=function(a){for(var b={},c={},e=0,f=function(a,b){for(var c=0;c<a.length;c++){var d="/"+a[c]+"/";if(-1!=b.indexOf(d))return!0}return!1},h=function(a,d,e,f){var g=[],h="",i="";for(var j in d)h+=j,g=g.concat(b[j]),i+=c[j];i=i+m.join("/")+"/",g.push(a),e[h]=g,f[h]=i},i=0;i<a.length;i++){var j=a[i],k={},l={},m=g.variablesInBGP(j),n={};for(var o in c)f(m,c[o])?n[o]=!0:(k[o]=b[o],l[o]=c[o]);0===d.size(n)?(k["g"+e]=[j],l["g"+e]="/"+m.join("/")+"/",e++):h(j,n,k,l),b=k,c=l}return d.values(b)},g.intersectionSize=function(a,b){for(var c=b.i.split("_"),d=0;d<c.length;d++)if(""!=c[d]&&-1!=a.i.indexOf("_"+c[d]+"_"))return 1;return 0},g.createJoinTree=function(a,b){for(var c="/"+a.vars.join("/")+"/",e=a.vars.concat([]),f=[],g=0;g<b.vars.length;g++)-1!=c.indexOf("/"+b.vars[g]+"/")?0==b.vars[g].indexOf("_:")?f.push("blank:"+b.vars[g]):f.push(b.vars[g]):e.push(b.vars[g]);for(var h=b.i.split("_"),i=a.i.split("_"),j={},g=0;g<h.length;g++)""!=h[g]&&(j[h[g]]=!0);for(var g=0;g<i.length;g++)""!=i[g]&&(j[i[g]]=!0);var k=d.keys(j);return{left:a,right:b,cost:a.cost+b.cost,i:"_"+k.sort().join("_")+"_",vars:e,join:f}},g.executeBushyTree=function(a,b,c,d,e){null==a.left?g.executeEmptyJoinBGP(a.right,b,c,d,e):null==a.right?g.executeEmptyJoinBGP(a.left,b,c,d,e):g.executeBushyTree(a.left,b,c,d,function(f){null!=f?g.executeBushyTree(a.right,b,c,d,function(b){e(null!=b?g.joinBindings2(a.join,f,b):null)}):e(null)})},g.executeAndBGPsDPSize=function(a,b,c,d,f){var h=g.executeAndBGPsGroups(a),i=[];e.eachSeries(h,function(a,b){c.computeCosts(a,d,function(a){var c={},d={},e={},f=1,h=null,j={};e[1]=[];for(var k=0;k<a.length;k++){var l=[];delete a[k].variables;for(var m in a[k])"_cost"!=m&&("var"===a[k][m].token?l.push(a[k][m].value):"blank"===a[k][m].token&&l.push(a[k][m].value));d["_"+k+"_"]={left:a[k],right:null,cost:a[k]._cost,i:"_"+k+"_",vars:l};var n={left:a[k],right:null,cost:a[k]._cost,i:"_"+k+"_",vars:l};c["_"+k+"_"]=n,delete a[k]._cost,j["_"+k+"_"]=!0,e[1].push("_"+k+"_"),(null==h||h.cost>n.cost)&&(h=n)}for(var o=2;o<=a.length;o++)for(var p=1;p<o;p++)for(var q=o-p,r=e[""+p]||[],s=e[""+q]||[],k=0;k<r.length;k++)for(var t=0;t<s.length;t++)if(r[k]!==s[t]){var u=d[r[k]],v=d[s[t]];if(0==g.intersectionSize(u,v)&&g.connected(u,v)){f=o;var w=c[u.i],x=c[v.i],y=g.createJoinTree(w,x);if(!j[y.i]){j[y.i]=!0;var z=y.cost+1;null!=c[y.i]&&(z=c[y.i].cost);var A=e[o]||[];A.push(y.i),d[y.i]=y,e[o]=A,z>y.cost&&(f===o&&(h=y),c[y.i]=y)}}}i.push(h),b()})},function(){var a=null;e.eachSeries(i,function(e,f){g.executeBushyTree(e,b,c,d,function(b){b?null==a?(a=b,f()):(a=g.crossProductBindings(a,b),f()):f("Error executing bushy tree")})},function(b){b?f(null,b):f(a)})})},g.executeEmptyJoinBGP=function(a,b,c,d,e){return g.executeBGPDatasets(a,b,c,d,e)},g.executeBGPDatasets=function(a,b,c,d,f){var h={};if(null==a.graph){var i=[];e.eachSeries(b.implicit,function(b,e){null==h[b.oid]?(h[b.oid]=!0,a.graph=b,c.rangeQuery(a,d,function(b){b=g.buildBindingsFromRange(b,a),i.push(b),e()})):e()},function(){var a=g.unionManyBindings(i);f(a)})}else if("var"===a.graph.token){var j=a.graph.value,i=[];e.eachSeries(b.named,function(b,e){null==h[b.oid]?(h[b.oid]=!0,a.graph=b,null!=i?c.rangeQuery(a,d,function(c){if(null!=c){c=g.buildBindingsFromRange(c,a);for(var d=0;d<c.length;d++)c[d][j]=b.oid;i.push(c)}else i=null;e()}):e()):e()},function(){if(null==i)f(null);else{var a=g.unionManyBindings(i);f(a)}})}else c.rangeQuery(a,d,function(b){null!=b?(b=g.buildBindingsFromRange(b,a),f(b)):f(null)})},g.buildBindingsFromRange=function(a,b){g.variablesInBGP(b);var c=b.value||b,d={};for(k in c)c[k]&&"var"===c[k].token?d[k]=c[k].value:c[k]&&"blank"===c[k].token&&(d[k]="blank:"+c[k].value);var e=[];if(null!=a)for(var f=0;f<a.length;f++){var h={},i=a[f],j=!1;for(var k in d){var l=i[k];if(null!=h[d[k]]&&h[d[k]]!==l){j=!0;break}h[d[k]]=l}j||e.push(h)}return e},g.areCompatibleBindings=function(a,b){for(var c in a)if(null!=b[c]&&b[c]!=a[c])return!1;return!0},g.mergeBindings=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c},g.joinBindings2=function(a,b,c){for(var e,f,h,i,j,d={},k=[],l=0;l<b.length;l++){e=b[l],j=d;for(var m=0;m<a.length;m++)f=a[m],h=e[f],m==a.length-1?(i=j[h]||[],i.push(e),j[h]=i):(i=j[h]||{},j[h]=i,j=i)}for(var l=0;l<c.length;l++){e=c[l],j=d;for(var m=0;m<a.length;m++)if(f=a[m],h=e[f],null!=j[h])if(m==a.length-1)for(var n=0;n<j[h].length;n++)k.push(g.mergeBindings(j[h][n],e));else j=j[h]}return k},g.joinBindings=function(a,b){for(var c=[],d=0;d<a.length;d++)for(var e=a[d],f=0;f<b.length;f++){var h=b[f];g.areCompatibleBindings(e,h)&&c.push(g.mergeBindings(e,h))}return c},g.augmentMissingBindings=function(a,b){for(var c in b)null==a[c]&&(a[c]=null);return a},g.leftOuterJoinBindings=function(a,b){for(var c=[],d=0;d<a.length;d++){for(var e=a[d],f=!1,h=0;h<b.length;h++){var i=b[h];g.areCompatibleBindings(e,i)&&(f=!0,c.push(g.mergeBindings(e,i)))}!1===f&&(g.augmentMissingBindings(e,i),c.push(e))}return c},g.crossProductBindings=function(a,b){for(var c=[],d=0;d<a.length;d++)for(var e=a[d],f=0;f<b.length;f++){var h=b[f];c.push(g.mergeBindings(e,h))}return c},g.unionBindings=function(a,b){return a.concat(b)},g.unionManyBindings=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b=g.unionBindings(b,d)}return b},b.exports={QueryPlan:g}},{"./utils":126}],122:[function(a,b,c){var d=a("./network_transport").NetworkTransport,e=a("./rvn3_parser").RVN3Parser,f=a("./jsonld_parser").JSONLDParser,g=a("./utils"),h=function(a){if(this.precedences=["text/turtle","text/n3","application/ld+json","application/json"],this.parsers={"text/turtle":e.parser,"text/n3":e.parser,"application/ld+json":f.parser,"application/json":f.parser},"undefined"!=typeof RDFXMLParser&&(this.precedences.push("application/rdf+xml"),this.parsers["application/rdf+xml"]=RDFXMLParser.parser),null!=a)for(var b in a.parsers)this.parsers[b]=a.parsers[b];if(a&&null!=a.precedences){this.precedences=a.precedences;for(var b in a.parsers)g.include(this.precedences,b)||this.precedences.push(b)}this.acceptHeaderValue="";for(var c=0;c<this.precedences.length;c++)this.acceptHeaderValue=0!=c?this.acceptHeaderValue+","+this.precedences[c]:this.acceptHeaderValue+this.precedences[c]};h.prototype.registerParser=function(a,b){this.parsers[a]=b,this.precedences.push(a)},h.prototype.unregisterParser=function(a){delete this.parsers[a];for(var b=[],c=0;c<this.precedences.length;c++)this.precedences[c]!=a&&b.push(this.precedences[c]);this.precedences=b},h.prototype.setAcceptHeaderPrecedence=function(a){this.precedences=a},h.prototype.load=function(a,b,c){var e=this;d.load(a,this.acceptHeaderValue,function(d,f){if(d)c(d);else{var g=f.headers["Content-Type"]||f.headers["content-type"],h=f.data;if(null!=g){g=g.split(";")[0];for(var i in e.parsers)if(-1!=i.indexOf("/")){var j=i.split("/");if("*"===j[1]){if(-1!=g.indexOf(j[0]))return e.tryToParse(e.parsers[i],b,h,{documentURI:a},c)}else{if(-1!=g.indexOf(i))return e.tryToParse(e.parsers[i],b,h,{documentURI:a},c);if(-1!=g.indexOf(j[1]))return e.tryToParse(e.parsers[i],b,h,{documentURI:a},c)}}else if(-1!=g.indexOf(i))return e.tryToParse(e.parsers[i],b,h,{documentURI:a},c);c(new Error("Unknown media type : "+g))}else c(new Error("Uknown media type"))}})},h.prototype.loadFromFile=function(b,c,d,e){try{var f=this;a("fs").readFile(d.split("file:/")[1],function(a,g){if(a)e(a);else{var g=g.toString("utf8");f.tryToParse(b,c,g,{documentURI:d},e)}})}catch(a){e(a)}},h.prototype.tryToParse=function(a,b,c,d,e){try{"string"==typeof c&&(c=g.normalizeUnicodeLiterals(c)),a.parse(c,b,d,e)}catch(a){console.log(a.message),console.log(a.stack),e(a)}},b.exports={RDFLoader:h}},{"./jsonld_parser":111,"./network_transport":113,"./rvn3_parser":124,"./utils":126,fs:1}],123:[function(a,b,c){var d=a("./utils"),e=a("./query_filters").QueryFilters;RDFModel={},RDFModel.defaultContext={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",cal:"http://www.w3.org/2002/12/cal/ical#",vcard:"http://www.w3.org/2006/vcard/ns# ",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",cc:"http://creativecommons.org/ns#",sioc:"http://rdfs.org/sioc/ns#",doap:"http://usefulinc.com/ns/doap#",com:"http://purl.org/commerce#",ps:"http://purl.org/payswarm#",gr:"http://purl.org/goodrelations/v1#",sig:"http://purl.org/signature#",ccard:"http://purl.org/commerce/creditcard#",ldp:"http://www.w3.org/ns/ldp#"},RDFModel.UrisMap=function(){this.defaultNs="",this.interfaceProperties=["get","remove","set","setDefault","addAll","resolve","shrink"]},RDFModel.UrisMap.prototype.values=function(){var a={};for(var b in this)d.include(this.interfaceProperties,b)||"function"==typeof this[b]||"defaultNs"===b||"interfaceProperties"===b||(a[b]=this[b]);return a},RDFModel.UrisMap.prototype.get=function(a){if(-1!=a.indexOf(" "))throw"Prefix must not contain any whitespaces";return this[a]},RDFModel.UrisMap.prototype.remove=function(a){if(-1!=a.indexOf(" "))throw"Prefix must not contain any whitespaces";return delete this[a],null},RDFModel.UrisMap.prototype.set=function(a,b){if(-1!=a.indexOf(" "))throw"Prefix must not contain any whitespaces";this[a]=b},RDFModel.UrisMap.prototype.setDefault=function(a){this.defaultNs=a},RDFModel.UrisMap.prototype.addAll=function(a,b){for(var c in a)d.include(this.interfaceProperties,c)||(null!=this[c]?!0===b&&(this[c]=a[c]):this[c]=a[c]);return this},RDFModel.UrisMap.prototype.resolve=function(a){var b=a.split(":"),c=b[0],d=b[1];return""===c?null==this.defaultNs?null:this.defaultNs+d:null!=this[c]?this[c]+d:null},RDFModel.UrisMap.prototype.shrink=function(a){for(var b in this){var c=this[b];if(0===a.indexOf(c)&&""!==c&&"defaultNs"!=b){return b+":"+a.split(c)[1]}}return a},RDFModel.Profile=function(){this.prefixes=new RDFModel.UrisMap,this.terms=new RDFModel.UrisMap},RDFModel.Profile.prototype.importProfile=function(a,b){this.prefixes.addAll(a.prefixes,b),this.terms.addAll(a.terms,b)},RDFModel.Profile.prototype.resolve=function(a){return-1!=a.indexOf(":")?this.prefixes.resolve(a):null!=this.terms[a]?this.terms.resolve(a):null},RDFModel.Profile.prototype.setDefaultPrefix=function(a){this.prefixes.setDefault(a)},RDFModel.Profile.prototype.setDefaultVocabulary=function(a){this.terms.setDefault(a)},RDFModel.Profile.prototype.setPrefix=function(a,b){this.prefixes.set(a,b)},RDFModel.Profile.prototype.setTerm=function(a,b){this.terms.set(a,b)},RDFModel.RDFEnvironment=function(){RDFModel.Profile.call(this),this.blankNodeCounter=0;var a=this;this.filters={s:function(a){return function(b){return b.subject.equals(a)}},p:function(a){return function(b){return b.predicate.equals(a)}},o:function(a){return function(b){return b.object.equals(a)}},sp:function(a,b){return function(c){return c.subject.equals(a)&&c.predicate.equals(b)}},so:function(a,b){return function(c){return c.subject.equals(a)&&c.object.equals(b)}},po:function(a,b){return function(c){return c.predicate.equals(a)&&c.object.equals(b)}},spo:function(a,b,c){return function(d){return d.subject.equals(a)&&d.predicate.equals(b)&&d.object.equals(c)}},describes:function(a){return function(b){return b.subject.equals(a)||b.object.equals(a)}},type:function(b){var c=a.resolve("rdf:type");return function(a){return a.predicate.equals(c)&&a.object.equals(b)}}};for(var b in RDFModel.defaultContext)this.prefixes.set(b,RDFModel.defaultContext[b])},RDFModel.RDFEnvironment.prototype=d.create(RDFModel.Profile.prototype,{constructor:RDFModel.RDFEnvironment}),RDFModel.RDFEnvironment.prototype.createBlankNode=function(){var a=new RDFModel.BlankNode(this.blankNodeCounter);return this.blankNodeCounter++,a},RDFModel.RDFEnvironment.prototype.createNamedNode=function(a){var b=this.resolve(a);return null!=b?new RDFModel.NamedNode(b):new RDFModel.NamedNode(a)},RDFModel.RDFEnvironment.prototype.createLiteral=function(a,b,c){return null!=c?new RDFModel.Literal(a,b,c.toString()):new RDFModel.Literal(a,b,c)},RDFModel.RDFEnvironment.prototype.createTriple=function(a,b,c){return new RDFModel.Triple(a,b,c)},RDFModel.RDFEnvironment.prototype.createGraph=function(a){var b=new RDFModel.Graph;if(null!=a)for(var c=0;c<a.length;c++)b.add(a[c]);return b},RDFModel.RDFEnvironment.prototype.createAction=function(a,b){return function(c){return a(c)?b(c):c}},RDFModel.RDFEnvironment.prototype.createProfile=function(a){if(!0===a)return new RDFModel.RDFEnvironment.Profile;var b=new RDFModel.RDFEnvironment.Profile;return b.importProfile(this),b},RDFModel.RDFEnvironment.prototype.createTermMap=function(a){if(!0===a)return new RDFModel.UrisMap;var b=this.terms.values(),c=new RDFModel.UrisMap;for(var d in b)c[d]=b[d];return c},RDFModel.RDFEnvironment.prototype.createPrefixMap=function(a){if(!0===a)return new RDFModel.UrisMap;var b=this.prefixes.values(),c=new RDFModel.UrisMap;for(var d in b)c[d]=b[d];return c},RDFModel.RDFNode=function(a){this.interfaceName=a,this.attributes=["interfaceName","nominalValue"]},RDFModel.RDFNode.prototype.equals=function(a){if(null==a.interfaceName)return this.valueOf()==a;for(var b in this.attributes){var c=this.attributes[b];if(this[c]!=a[c])return!1}return!0},RDFModel.BlankNode=function(a){RDFModel.RDFNode.call(this,"BlankNode"),this.nominalValue="_:"+a,this.bnodeId=a},RDFModel.BlankNode.prototype=d.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.BlankNode}),RDFModel.BlankNode.prototype.toString=function(){return this.nominalValue},RDFModel.BlankNode.prototype.toNT=function(){return this.nominalValue},RDFModel.BlankNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Literal=function(a,b,c){RDFModel.RDFNode.call(this,"Literal"),this.nominalValue=a,null!=b?this.language=b:null!=c&&(this.datatype=c)},RDFModel.Literal.prototype=d.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.Literal}),RDFModel.Literal.prototype.toString=function(){var a='"'+this.nominalValue+'"';return null!=this.language?a=a+"@"+this.language:(null!=this.datatype||this.type)&&(a=a+"^^<"+(this.datatype||this.type)+">"),a},RDFModel.Literal.prototype.toNT=function(){return this.toString()},RDFModel.Literal.prototype.valueOf=function(){return e.effectiveTypeValue({token:"literal",type:this.type||this.datatype,value:this.nominalValue,language:this.language})},RDFModel.NamedNode=function(a){RDFModel.RDFNode.call(this,"NamedNode"),null!=a.value?this.nominalValue=a.value:this.nominalValue=a},RDFModel.NamedNode.prototype=d.create(RDFModel.RDFNode.prototype,{constructor:RDFModel.NamedNode}),RDFModel.NamedNode.prototype.toString=function(){return this.nominalValue},RDFModel.NamedNode.prototype.toNT=function(){return"<"+this.toString()+">"},RDFModel.NamedNode.prototype.valueOf=function(){return this.nominalValue},RDFModel.Triple=function(a,b,c){this.subject=a,this.predicate=b,this.object=c},RDFModel.Triple.prototype.equals=function(a){return this.subject.equals(a.subject)&&this.predicate.equals(a.predicate)&&this.object.equals(a.object)},RDFModel.Triple.prototype.toString=function(){return this.subject.toNT()+" "+this.predicate.toNT()+" "+this.object.toNT()+" . \r\n"},RDFModel.Graph=function(){this.triples=[],this.duplicates={},this.actions=[],this.length=0},RDFModel.Graph.prototype.add=function(a){for(var b=0;b<this.actions.length;b++)a=this.actions[b](a);var c=a.subject.toString()+a.predicate.toString()+a.object.toString();return this.duplicates[c]||(this.duplicates[c]=!0,this.triples.push(a)),this.length=this.triples.length,this},RDFModel.Graph.prototype.addAction=function(a,b){if(this.actions.push(a),1==b)for(var c=0;c<this.triples.length;c++)this.triples[c]=a(this.triples[c]);return this},RDFModel.Graph.prototype.addAll=function(a){for(var b=a.toArray(),c=0;c<b.length;c++)this.add(b[c]);return this.length=this.triples.length,this},RDFModel.Graph.prototype.remove=function(a){for(var b=null,c=0;c<this.triples.length;c++)if(this.triples[c].equals(a)){var d=a.subject.toString()+a.predicate.toString()+a.object.toString();delete this.duplicates[d],b=c;break}return null!=b&&this.triples.splice(b,1),this.length=this.triples.length,this},RDFModel.Graph.prototype.toArray=function(){return this.triples},RDFModel.Graph.prototype.some=function(a){for(var b=0;b<this.triples.length;b++)if(!0===a(this.triples[b],this))return!0;return!1},RDFModel.Graph.prototype.every=function(a){for(var b=0;b<this.triples.length;b++)if(!1===a(this.triples[b],this))return!1;return!0},RDFModel.Graph.prototype.filter=function(a){for(var b=new RDFModel.Graph,c=0;c<this.triples.length;c++)!0===a(this.triples[c],this)&&b.add(this.triples[c]);return b},RDFModel.Graph.prototype.forEach=function(a){for(var b=0;b<this.triples.length;b++)a(this.triples[b],this)},RDFModel.Graph.prototype.merge=function(a){for(var b=new RDFModel.Graph,c=0;c<this.triples.length;c++)b.add(this.triples[c]);return b},RDFModel.Graph.prototype.match=function(a,b,c,d){for(var e=new RDFModel.Graph,f=0,g=0;g<this.triples.length;g++){var h=this.triples[g];if((null==a||h.subject.equals(a))&&(null==b||h.predicate.equals(b))&&(null==c||h.object.equals(c))){if(!(null==d||f<d))return e;f++,e.add(h)}}return e},RDFModel.Graph.prototype.removeMatches=function(a,b,c){for(var d=[],e=0;e<this.triples.length;e++){var f=this.triples[e];(null==a||f.subject.equals(a))&&(null==b||f.predicate.equals(b))&&(null==c||f.object.equals(c))&&d.push(f)}for(var e=0;e<d.length;e++)this.remove(d[e]);return this},RDFModel.Graph.prototype.toNT=function(){var a="";return this.forEach(function(b){a+=b.toString()}),a},RDFModel.buildRDFResource=function(a,b,c,d){if("blank"===a.token)return RDFModel.buildBlankNode(a,b,c,d);if("literal"===a.token)return RDFModel.buildLiteral(a,b,c,d);if("uri"===a.token)return RDFModel.buildNamedNode(a,b,c,d);if("var"===a.token){var e=b[a.value];return null!=e?RDFModel.buildRDFResource(e,b,c,d):null}return null},RDFModel.buildBlankNode=function(a,b,c,d){return null!=a.valuetmp&&(a.value=a.valuetmp),0===a.value.indexOf("_:")&&(a.value=a.value.split("_:")[1]),new RDFModel.BlankNode(a.value)},RDFModel.buildLiteral=function(a,b,c,d){return new RDFModel.Literal(a.value,a.lang,a.type)},RDFModel.buildNamedNode=function(a,b,c,d){if(null!=a.value)return new RDFModel.NamedNode(a);if(null!=a.prefix){var e=c.resolveNsInEnvironment(a.prefix,d);return a.value=e+a.suffix,new RDFModel.NamedNode(a)}return new RDFModel.NamedNode(a)},RDFModel.rdf=new RDFModel.RDFEnvironment,b.exports=RDFModel},{"./query_filters":120,"./utils":126}],124:[function(a,b,c){function f(a){switch(a[0]){case'"':if(a.indexOf("^^")>0){var b=a.split("^^");return{literal:b[0]+"^^<"+b[1]+">"}}return{literal:a};case"_":return{blank:a.replace("b","")};default:return{token:"uri",value:a,prefix:null,suffix:null}}}var d=a("n3").Parser,e={};e.parser={async:!0,parse:function(a,b,c,e){e||(e=c,c=b,b=null),b&&"string"==typeof b&&(b={token:"uri",value:b,prefix:null,suffix:null}),c&&c.baseURI&&(c.documentIRI=c.baseURI);var g=[];new d(c).parse(a,function(a,c){a?e(a):c?g.push({subject:f(c.subject),predicate:f(c.predicate),object:f(c.object),graph:b}):e(!1,g)})},resetBlankNodeIds:function(){d._resetBlankNodeIds()}},b.exports={RVN3Parser:e}},{n3:78}],125:[function(a,b,c){(function(c){var d=a("./query_engine").QueryEngine,e=a("./quad_backend").QuadBackend,f=a("./persistent_quad_backend").QuadBackend,g=a("./lexicon").Lexicon,h=a("./persistent_lexicon").Lexicon,i=a("./rdf_model"),j=a("./utils");Store=function(a,b){var c=null,i=null;if(0==arguments.length)i={};else if(1==arguments.length)i={},c=a;else{if(!(arguments.length>1))throw"An optional argument map and a callback must be provided";i=a,c=b}null==i.treeOrder&&(i.treeOrder=15);var j=g,k=e;!0===i.persistent&&(j=h,k=f),this.functionMap={};var l=this;this.customFns={},new j(function(a){var b=function(){new k(i,function(b){var e=function(){i.backend=b,i.lexicon=a,l.engine=new d(i),c(null,l)};i.overwrite?b.clear(e):e()})};!0===i.overwrite?a.clear(b):b()},i.name)},Store.prototype.rdf=i.rdf,Store.prototype.rdf.api=i,Store.prototype.registerCustomFunction=function(a,b){this.customFns[a]=b,this.engine.setCustomFunctions(this.customFns)},Store.prototype.execute=function(){if(3===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2]);else if(4===arguments.length)this.executeWithEnvironment(arguments[0],arguments[1],arguments[2],arguments[3]);else{var a,b;if(1===arguments.length){a=arguments[0];var b=function(){}}else 2===arguments.length&&(a=arguments[0],b=arguments[1]);this.engine.execute(a,b)}},Store.prototype.executeWithEnvironment=function(){var a,b,c;if(3===arguments.length){a=arguments[0];var d=function(){};b=arguments[1],c=arguments[2]}else if(4===arguments.length){a=arguments[0];var d=arguments[3];b=arguments[1],c=arguments[2]}b=j.map(b,function(a){return{token:"uri",value:a}}),c=j.map(c,function(a){return{token:"uri",value:a}}),this.engine.execute(a,d,b,c)},Store.prototype.graph=function(){var a=null,b=null;if(1===arguments.length)b=arguments[0]||function(){},a=this.engine.lexicon.defaultGraphUri;else{if(2!==arguments.length)throw"An optional graph URI and a callback function must be provided";b=arguments[1]||function(){},a=arguments[0]}null!=this.rdf.resolve(a)&&(a=this.rdf.resolve(a)),this.engine.execute("CONSTRUCT { ?s ?p ?o } WHERE { GRAPH <"+a+"> { ?s ?p ?o } }",b)},Store.prototype.node=function(){var a=null,b=null,c=null;if(2===arguments.length)c=arguments[0],b=arguments[1]||function(){},a=this.engine.lexicon.defaultGraphUri;else{if(3!==arguments.length)throw"An optional graph URI, node URI and a callback function must be provided";c=arguments[0],a=arguments[1],b=arguments[2]||function(){}}null!=this.rdf.resolve(a)&&(a=this.rdf.resolve(a)),null!=this.rdf.resolve(c)&&(c=this.rdf.resolve(c)),this.engine.execute("CONSTRUCT { <"+c+"> ?p ?o } WHERE { GRAPH <"+a+"> { <"+c+"> ?p ?o } }",b)},Store.prototype.startObservingNode=function(){var a,b,c;2===arguments.length?(a=arguments[0],c=arguments[1],this.engine.callbacksBackend.observeNode(a,c,function(){})):3===arguments.length&&(a=arguments[0],b=arguments[1],c=arguments[2],this.engine.callbacksBackend.observeNode(a,b,c,function(){}))},Store.prototype.stopObservingNode=function(a){this.engine.callbacksBackend.stopObservingNode(a)},Store.prototype.startObservingQuery=function(){var a=arguments[0],b=arguments[1],c=arguments[2];null!=c?this.engine.callbacksBackend.observeQuery(a,b,c):this.engine.callbacksBackend.observeQuery(a,b,function(){})},Store.prototype.stopObservingQuery=function(a){this.engine.callbacksBackend.stopObservingQuery(a)},Store.prototype.subscribe=function(a,b,c,d,e){var f=this,g=function(a,b){var c=[],d={blanks:{},outCache:{}},g=[];j.each(b,function(a){var b=i.buildRDFResource(a.subject,g,f.engine,d),e=i.buildRDFResource(a.predicate,g,f.engine,d),h=i.buildRDFResource(a.object,g,f.engine,d);null!=b&&null!=e&&null!=h&&(a=new i.Triple(b,e,h),c.push(a))}),e(a,c)};this.functionMap[e]=g,this.engine.callbacksBackend.subscribe(a,b,c,d,g,function(){})},Store.prototype.unsubscribe=function(a){var b=this.functionMap[a];this.engine.callbacksBackend.unsubscribe(b),delete this.functionMap[a]},Store.prototype.setPrefix=function(a,b){this.rdf.setPrefix(a,b)},Store.prototype.setDefaultPrefix=function(a){this.rdf.setDefaultPrefix(a)},Store.prototype.insert=function(){var a,b,c;if(1===arguments.length)b=arguments[0],c=function(){};else if(2===arguments.length)b=arguments[0],c=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to insert, an optional graph and callback must be provided";b=arguments[0],a=this.rdf.createNamedNode(arguments[1]),c=arguments[2]||function(){}}var d="",e=this;b.forEach(function(a){d=d+e._nodeToQuery(a.subject)+e._nodeToQuery(a.predicate)+e._nodeToQuery(a.object)+"."}),d=null!=a?"INSERT DATA { GRAPH "+this._nodeToQuery(a)+" { "+d+" } }":"INSERT DATA { "+d+" }",this.engine.execute(d,c)},Store.prototype._nodeToQuery=function(a){if("NamedNode"===a.interfaceName){var b=this.rdf.resolve(a.valueOf());return null!=b?"<"+b+">":"<"+a.valueOf()+">"}return a.toString()},Store.prototype.delete=function(){var a,b,c;if(1===arguments.length)b=arguments[0],c=function(){};else if(2===arguments.length)b=arguments[0],c=arguments[1]||function(){};else{if(3!==arguments.length)throw"The triples to delete, an optional graph and callback must be provided";b=arguments[0],a=this.rdf.createNamedNode(arguments[1]),c=arguments[2]||function(){}}var d="",e=this;b.forEach(function(a){d=d+e._nodeToQuery(a.subject)+e._nodeToQuery(a.predicate)+e._nodeToQuery(a.object)+"."}),d=null!=a?"DELETE DATA { GRAPH "+this._nodeToQuery(a)+" { "+d+" } }":"DELETE DATA { "+d+" }",this.engine.execute(d,c)},Store.prototype.clear=function(){var a,b;if(0===arguments.length){a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri);var b=function(){}}else if(1===arguments.length)a=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),b=arguments[0]||function(){};else{if(2!==arguments.length)throw"The optional graph and a callback must be provided";a=this.rdf.createNamedNode(arguments[0]),b=arguments[1]||function(){}}var c="CLEAR GRAPH "+this._nodeToQuery(a);this.engine.execute(c,b)},Store.prototype.setBatchLoadEvents=function(a){this.engine.eventsOnBatchLoad=a},Store.prototype.registerDefaultNamespace=function(a,b){this.rdf.prefixes.set(a,b),this.engine.registerDefaultNamespace(a,b)},Store.prototype.registerDefaultProfileNamespaces=function(){var a=this.rdf.prefixes.values();for(var b in a)this.registerDefaultNamespace(b,a[b])},Store.prototype.load=function(){var a,b,c,d,e={};if(3===arguments.length)c=this.rdf.createNamedNode(this.engine.lexicon.defaultGraphUri),a=arguments[0],b=arguments[1],d=arguments[2]||function(){};else if(4===arguments.length)a=arguments[0],b=arguments[1],e=arguments[2],"string"==typeof e?(c=this.rdf.createNamedNode(e),e={}):(c=this.rdf.createNamedNode(e.graph||this.engine.lexicon.defaultGraphUri),delete e.graph),d=arguments[3]||function(){};else if(2===arguments.length)throw"The mediaType of the parser, the data a callback and an optional graph must be provided";if("remote"===a){b=this.rdf.createNamedNode(b);var f="LOAD <"+b.valueOf()+"> INTO GRAPH <"+c.valueOf()+">";this.engine.execute(f,d)}else{var g=this,h=this.engine.rdfLoader.parsers[a];if(!h)return d(new Error("Cannot find parser for the provided media type:"+a));var i=function(a,b){a?d(a,b):g.engine.batchLoad(b,function(a){null!=a?d(null,a):d(new Error("Erro batch-loading triples."))})},j=[h,{token:"uri",value:c.valueOf()},b,e,i];b&&"string"==typeof b&&0===b.indexOf("file://")?this.engine.rdfLoader.loadFromFile.apply(null,j):this.engine.rdfLoader.tryToParse.apply(null,j)}},Store.prototype.registerParser=function(a,b){this.engine.rdfLoader.registerParser(a,b)},Store.prototype.registeredGraphs=function(a){this.engine.lexicon.registeredGraphs(!0,function(b){var c=j.map(b,function(a){return new i.NamedNode(a)});a(null,c)})},Store.prototype.getNetworkTransport=function(){return NetworkTransport},Store.prototype.setNetworkTransport=function(a){NetworkTransport=a},Store.prototype.close=function(a){null==a&&(a=function(){}),this.engine.close?this.engine.close(a):a()},Store.VERSION="0.9.14";var k=function(){var d;1==arguments.length?(c,{},d=arguments[0]):2==arguments.length?("string"==typeof arguments[0]?(arguments[0],{}):(c+"/index.js",arguments[0]),d=arguments[1]):(arguments[0],arguments[1],d=arguments[2]),d(new Error("Store#connect is not supported in the 1.x series of the library"))},l=function(){return 1==arguments.length?new Store(arguments[0]):2==arguments.length?new Store(arguments[0],arguments[1]):new Store};Store.yieldFrequency=function(a){Utils.yieldFrequency(a)},b.exports.Store=Store,b.exports.create=l,b.exports.connect=k}).call(this,"/node_modules\\rdfstore\\src")},{"./lexicon":112,"./persistent_lexicon":115,"./persistent_quad_backend":116,"./quad_backend":117,"./query_engine":119,"./rdf_model":123,"./utils":126}],126:[function(require,module,exports){(function(process){var slowNextTick=function(){return void 0!==process&&process.nextTick?process.nextTick:"undefined"!=typeof window&&window.setImmediate?window.setImmediate:function(b){setTimeout(b,0)}}(),spin=0,yieldFrequency=100,nextTick=function(a){spin++,spin<yieldFrequency?a():(spin=0,slowNextTick(a))},hashTerm=function(a){try{if(null==a)return"";if("uri"===a.token)return"u"+a.value;if("blank"===a.token)return"b"+a.value;if("literal"===a.token){var b="l"+a.value;return b+=a.type||"",b+=a.lang||""}}catch(b){if("object"==typeof a){var c="";for(p in a)c=c+p+a[p];return c}return a}},lexicalFormBaseUri=function(a,b){var c=null;if(b=b||{},null==a.value){var d=a.prefix,e=a.suffix,f=b.namespaces[d];c=null!=f?f+e:d+":"+e}else c=a.value;return null===c?null:(-1==c.indexOf(":")&&(c=(b.base||"")+c),c)};parseISO8601=function(a){return Date.parse(a)},Date.prototype.toISOString||function(){function a(a){return a<10?"0"+a:a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),iso8601=function(a){return a.toISOString()},compareDateComponents=function(a,b){var c=parseISO8601(a),d=parseISO8601(b);return c==d?0:c<d?-1:1},lexicalFormLiteral=function(a,b){var c=a.value,d=a.lang,e=a.type,f=null;if(null!=c&&null!=e&&"string"!=typeof e){var g=e.value;if(null==g){var h=e.prefix,i=e.suffix,j=b.namespaces[h];a.type=j+i,g=j+i}f=-1!=g.indexOf("hexBinary")?'"'+a.value.toLowerCase()+'"^^<'+g+">":'"'+a.value+'"^^<'+g+">"}else f=null==d&&null==e?'"'+c+'"':null==e?'"'+c+'"@'+d:-1!=e.indexOf("hexBinary")?'"'+a.value.toLowerCase()+'"^^<'+e+">":'"'+a.value+'"^^<'+e+">";return f},normalizeUnicodeLiterals=function(string){for(var escapedUnicode=string.match(/\\u[0-9abcdefABCDEF]{4,4}/g)||[],dups={},i=0;i<escapedUnicode.length;i++)null==dups[escapedUnicode[i]]&&(dups[escapedUnicode[i]]=!0,string=string.replace(new RegExp("\\"+escapedUnicode[i],"g"),eval("'"+escapedUnicode[i]+"'")));return string},registerIndexedDB=function(a){if("undefined"==typeof window){var b=require("sqlite3"),c=require("indexeddb-js"),d=new b.Database(":memory:"),e=c.makeScope("sqlite3",d);a.indexedDB=e.indexedDB,a.IDBKeyRange=e.IDBKeyRange}else window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,window.indexedDB?(a.indexedDB=window.indexedDB,a.IDBKeyRange=window.IDBKeyRange):callback(null,new Error("The browser does not support IndexDB."))},guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},hashTerm=function(a){try{if(null==a)return"";if("uri"===a.token)return"u"+a.value;if("blank"===a.token)return"b"+a.value;if("literal"===a.token){var b="l"+a.value;return b+=a.type||"",b+=a.lang||""}}catch(b){if("object"==typeof a){var c="";for(p in a)c=c+p+a[p];return c}return a}};var reject=function(a,b){for(var c=[],d=0;d<a.length;d++)b(a[d])&&c.push(a[d]);return c},include=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0;return!1},each=function(a,b){if(a.forEach)a.forEach(b);else for(var c=0;c<a.length;c++)b(a[c])},map=function(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d]);return c},keys=function(a){var b=[];for(var c in a)b.push(c);return b},values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},size=function(a){if(a.length)return a.length;var b=0;for(var c in a)b++;return b};clone=function(a){return JSON.parse(JSON.stringify(a))};var isObject=function(a){var b=typeof a;return"function"==b||a&&"object"==b||!1},create=function(){function a(){}return function(b){if(isObject(b)){a.prototype=b;var c=new a;a.prototype=null}return c||a()}}(),whilst=function(a,b,c){a()?b(function(d){if(d)return c(d);whilst(a,b,c)}):c()},eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c():nextTick(e))})};e()},reduce=function(a,b,c,d){eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){d(a,b)})},seq=function(){var a=arguments;return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c.pop();reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){d.apply(b,[a].concat(c))})}};module.exports={nextTick:nextTick,hasTerm:hashTerm,lexicalFormBaseUri:lexicalFormBaseUri,parseISO8601:parseISO8601,compareDateComponents:compareDateComponents,iso8601:iso8601,normalizeUnicodeLiterals:normalizeUnicodeLiterals,lexicalFormLiteral:lexicalFormLiteral,registerIndexedDB:registerIndexedDB,guid:guid,hashTerm:hashTerm,keys:keys,values:values,size:size,map:map,each:each,forEach:each,include:include,reject:reject,remove:reject,clone:clone,create:create,whilst:whilst,eachSeries:eachSeries,seq:seq,yieldFrequency:function(a){yieldFrequency=a}}}).call(this,require("_process"))},{_process:15,"indexeddb-js":71,sqlite3:130}],127:[function(a,b,c){function e(a){var b="";for(var c in a.prefixes)b+="PREFIX "+c+": <"+a.prefixes[c]+">\n";return a.queryType&&(b+=a.queryType.toUpperCase()+" "),a.reduced&&(b+="REDUCED "),a.distinct&&(b+="DISTINCT "),a.variables?b+=o(a.variables,function(a){return n(a)?i(a):"("+h(a.expression)+" AS "+a.variable+")"})+" ":a.template&&(b+=g.group(a.template,!0)+"\n"),a.from&&(b+=o(a.from.default||[],function(a){return"FROM "+i(a)+"\n"},"")+o(a.from.named||[],function(a){return"FROM NAMED "+i(a)+"\n"},"")),a.where&&(b+="WHERE "+g.group(a.where,!0)+"\n"),a.updates&&(b+=o(a.updates,m,";\n")),a.group&&(b+="GROUP BY "+o(a.group,function(a){return n(a.expression)?a.expression:"("+h(a.expression)+")"})+"\n"),a.having&&(b+="HAVING ("+o(a.having,h)+")\n"),a.order&&(b+="ORDER BY "+o(a.order,function(a){var b=h(a.expression);return a.descending?"DESC("+b+")":b})+"\n"),a.offset&&(b+="OFFSET "+a.offset+"\n"),a.limit&&(b+="LIMIT "+a.limit+"\n"),a.values&&(b+=g.values(a)),b.trim()}function f(a){var b=a.type||a instanceof Array&&"array"||(a.subject&&a.predicate&&a.object?"triple":"");if(!(b in g))throw new Error("Unknown entry type: "+b);return g[b](a)}function h(a){if(n(a))return i(a);switch(a.type.toLowerCase()){case"aggregate":return a.aggregation.toUpperCase()+"("+(a.distinct?"DISTINCT ":"")+h(a.expression)+(a.separator?"; SEPARATOR = "+i('"'+a.separator+'"'):"")+")";case"functioncall":return i(a.function)+"("+o(a.args,h,", ")+")";case"operation":var b=a.operator.toUpperCase(),c=a.args||[],d=c[0];switch(a.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return o(c,function(a){return n(a)?i(a):"("+h(a)+")"}," "+b+" ");case"!":return"!"+h(d);case"notin":b="NOT IN";case"in":return h(d)+" "+b+"("+(n(d=c[1])?d:o(d,h,", "))+")";case"notexists":b="NOT EXISTS";case"exists":return b+" "+g.group(d,!0);default:return b+"("+o(c,h,", ")+")"}default:throw new Error("Unknown expression type: "+a.type)}}function i(a){if(n(a))switch(a[0]){case"?":case"$":case"*":case"_":return a;case'"':var b=a.match(/^"([^]*)"(?:(@.+)|\^\^(.+))?$/)||{},c=b[1]||"",e=b[2]||"",f=b[3];if(a='"'+c.replace(j,k)+'"'+e,f){if(f===d&&/^\d+$/.test(c))return c;a+="^^<"+f+">"}return a;default:return"<"+a+">"}else{var g=a.items.map(i),h=a.pathType;switch(h){case"^":case"!":return h+g[0];case"*":case"+":case"?":return g[0]+h;default:return"("+g.join(h)+")"}}}function m(a){switch(a.type||a.updateType){case"load":return"LOAD"+(a.source?" "+i(a.source):"")+(a.destination?" INTO GRAPH "+i(a.destination):"");case"insert":return"INSERT DATA "+g.group(a.insert,!0);case"delete":return"DELETE DATA "+g.group(a.delete,!0);case"deletewhere":return"DELETE WHERE "+g.group(a.delete,!0);case"insertdelete":return(a.graph?"WITH "+i(a.graph)+"\n":"")+(a.delete.length?"DELETE "+g.group(a.delete,!0)+"\n":"")+(a.insert.length?"INSERT "+g.group(a.insert,!0)+"\n":"")+"WHERE "+g.group(a.where,!0);case"add":case"copy":case"move":return a.type.toUpperCase()+(a.source.default?" DEFAULT ":" ")+"TO "+i(a.destination.name);default:throw new Error("Unknown update query type: "+a.type)}}function n(a){return"string"==typeof a}function o(a,b,c){return a.map(b).join(n(c)?c:" ")}function p(a){return a.replace(/^/gm,"  ")}var d="http://www.w3.org/2001/XMLSchema#integer";b.exports=function(){return{stringify:e}};var g={triple:function(a){return i(a.subject)+" "+i(a.predicate)+" "+i(a.object)+"."},array:function(a){return o(a,f,"\n")},bgp:function(a){return o(a.triples,g.triple,"\n")},graph:function(a){return"GRAPH "+i(a.name)+" "+g.group(a)},group:function(a,b){return a=!0!==b?g.array(a.patterns||a.triples):f("group"!==a.type?a:a.patterns),-1===a.indexOf("\n")?"{ "+a+" }":"{\n"+p(a)+"\n}"},query:function(a){return"{\n"+p(e(a))+"\n}"},filter:function(a){return"FILTER("+h(a.expression)+")"},bind:function(a){return"BIND("+h(a.expression)+" AS "+a.variable+")"},optional:function(a){return"OPTIONAL "+g.group(a)},union:function(a){return o(a.patterns,function(a){return g.group(a,!0)},"\nUNION\n")},minus:function(a){return"MINUS "+g.group(a)},values:function(a){var b=Object.keys(a.values.reduce(function(a,b){for(var c in b)a[c]=!0;return a},{}));return"VALUES ("+b.join(" ")+") {\n"+o(a.values,function(a){return"  ("+o(b,function(b){return void 0!==a[b]?i(a[b]):"UNDEF"})+")"},"\n")+"\n}"},service:function(a){return"SERVICE "+(a.silent?"SILENT ":"")+i(a.name)+" "+g.group(a)}},j=/["\\\t\n\r\b\f]/g,k=function(a){return l[a]},l={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"}},{}],128:[function(a,b,c){(function(d){var e=function(){function oc(a){return a.toLowerCase()}function pc(a,b){return a.push(b),a}function qc(a,b){return a.push.apply(a,b),a}function rc(a){a||(a={});for(var d,b=1,c=arguments.length;b<c&&(d=arguments[b]||{});b++)for(var e in d)a[e]=d[e];return a}function sc(){for(var a=[],b=0,c=arguments.length;b<c;b++)a=a.concat.apply(a,arguments[b]);return a}function tc(a){switch("<"===a[0]&&(a=a.substring(1,a.length-1)),a[0]){case void 0:return lc;case"#":return lc+a;case"?":return lc.replace(/(?:\?.*)?$/,a);case"/":return nc+a;default:return/^[a-z]+:/.test(a)?a:mc+a}}function uc(a){if(a){var b=a[0];if("?"===b)return a;if("$"===b)return"?"+a.substr(1)}return a}function vc(a,b){return{type:"operation",operator:a,args:b||[]}}function wc(a,b){var c={expression:a};if(b)for(var d in b)c[d]=b[d];return c}function xc(a,b){return{type:"path",pathType:a,items:b}}function yc(a,b){for(var e,c=0,d=b.length;c<d&&(e=b[c]);c++)a=vc(e[0],[a,e[1]]);return a}function zc(a){for(var e,b=[],c=[],d=a.length,f=0;f<d&&(e=a[f]);f++)(e.named?c:b).push(e.iri);return d?{from:{default:b,named:c}}:null}function Ac(a){return parseInt(a,10)}function Bc(a){return"group"===a.type&&1===a.patterns.length?a.patterns[0]:a}function Cc(a,b){return'"'+a+'"^^'+b}function Dc(a,b,c){var d={};return null!=a&&(d.subject=a),null!=b&&(d.predicate=b),null!=c&&(d.object=c),d}function Ec(){return"_:b"+Fc++}function Jc(a,b){a=a.substring(b,a.length-b);try{a=a.replace(Gc,function(a,b,c,d){var e;if(b){if(e=parseInt(b,16),isNaN(e))throw new Error;return Ic(e)}if(c){if(e=parseInt(c,16),isNaN(e))throw new Error;return e<65535?Ic(e):Ic(55296+((e-=65536)>>10),56320+(1023&e))}var f=Hc[d];if(!f)throw new Error;return f})}catch(a){return""}return'"'+a+'"'}function Kc(a){var e,b=Ec(),c=b,d=[],f=[];a.forEach(function(a){d.push(a.entity),qc(f,a.triples)});for(var g=0,h=0,i=d.length,e=Array(2*i);g<i;)e[h++]=Dc(c,bc,d[g]),e[h++]=Dc(c,cc,c=++g<i?Ec():dc);return{entity:b,triples:qc(e,f)}}function Lc(a){var b=Ec();return{entity:b,triples:a.map(function(a){return rc(Dc(b),a)})}}function Mc(a,b,c){var d=[],e=[];return b.forEach(function(b){d.push(Dc(null,a,b.entity)),qc(e,b.triples)}),sc(d,c||[],e)}function Oc(){this.yy={}}var a=function(a,b,c,d){for(c=c||{},d=a.length;d--;c[a[d]]=b);return c},b=[11,14,23,33,42,47,95,105,108,110,111,120,121,126,288,289,290,291,292],c=[95,105,108,110,111,120,121,126,288,289,290,291,292],d=[1,21],e=[1,25],f=[6,82],g=[37,38,50],h=[37,50],i=[1,55],j=[1,57],k=[1,53],l=[1,56],m=[27,28,283],n=[12,15,277],o=[107,129,286,293],p=[12,15,107,129,277],q=[1,76],r=[1,80],s=[1,82],t=[107,129,286,287,293],u=[12,15,107,129,277,287],v=[1,89],w=[2,229],x=[1,88],y=[12,15,27,28,79,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],z=[6,37,38,50,60,67,70,78,80,82],A=[6,12,15,27,37,38,50,60,67,70,78,80,82,277],B=[6,12,15,27,28,30,31,37,38,40,50,60,67,70,78,79,80,82,89,104,107,120,121,123,128,155,156,158,161,162,163,181,192,203,208,210,211,213,214,222,237,242,259,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,297,298,300,301,302,303,304,305,306,307,308,309],C=[1,104],D=[1,105],E=[6,12,15,27,28,38,40,79,82,107,155,156,158,161,162,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294],F=[27,31],G=[2,284],H=[1,118],I=[1,116],J=[6,192],K=[2,301],L=[2,289],M=[37,123],N=[6,40,67,70,78,80,82],O=[2,231],P=[1,132],Q=[1,134],R=[1,144],S=[1,150],T=[1,153],U=[1,149],V=[1,151],W=[1,147],X=[1,148],Y=[1,154],Z=[1,155],$=[1,158],_=[1,159],aa=[1,160],ba=[1,161],ca=[1,162],da=[1,163],ea=[1,164],fa=[1,165],ga=[1,166],ha=[1,167],ia=[1,168],ja=[1,169],ka=[6,60,67,70,78,80,82],la=[27,28,37,38,50],ma=[12,15,27,28,79,203,237,239,240,241,243,245,246,248,249,252,254,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,301,309,310,311,312,313,314],na=[2,374],oa=[12,15,40,79,89,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],pa=[6,104,192],qa=[40,107],ra=[6,40,70,78,80,82],sa=[2,313],ta=[2,305],ua=[12,15,27,181,277],va=[2,341],wa=[2,337],xa=[12,15,27,28,31,38,40,79,82,107,155,156,158,161,162,163,181,192,203,208,210,211,213,214,242,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294],ya=[12,15,27,28,30,31,38,40,79,82,89,107,155,156,158,161,162,163,181,192,203,208,210,211,213,214,222,237,242,259,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,298,301,302,303,304,305,306,307,308,309],za=[12,15,27,28,30,31,38,40,79,82,89,107,155,156,158,161,162,163,181,192,203,208,210,211,213,214,222,237,242,259,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,298,301,302,303,304,305,306,307,308,309],Aa=[1,227],Ba=[1,238],Ca=[6,40,78,80,82],Da=[1,249],Ea=[1,251],Fa=[1,252],Ga=[1,253],Ha=[1,254],Ia=[1,256],Ja=[1,257],Ka=[2,405],La=[1,260],Ma=[1,261],Na=[1,262],Oa=[1,268],Pa=[1,263],Qa=[1,264],Ra=[1,265],Sa=[1,266],Ta=[1,267],Ua=[1,274],Va=[1,273],Wa=[38,40,82,107,155,156,158,161,162],Xa=[1,282],Ya=[1,283],Za=[40,107,294],$a=[12,15,27,28,31,79,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],_a=[12,15,27,28,31,38,40,79,82,107,155,156,158,161,162,163,192,210,211,213,214,242,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294],ab=[12,15,27,28,79,239,240,241,243,245,246,248,249,252,254,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,309,310,311,312,313,314],bb=[2,398],cb=[1,301],db=[1,302],eb=[1,303],fb=[12,15,31,40,79,89,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],gb=[28,40],hb=[2,304],ib=[6,40,82],jb=[6,12,15,28,40,70,78,80,82,239,240,241,243,245,246,248,249,252,254,277,309,310,311,312,313,314],kb=[6,12,15,27,28,38,40,70,73,75,78,79,80,82,107,155,156,158,161,162,163,210,213,214,239,240,241,243,245,246,248,249,252,254,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294,309,310,311,312,313,314],lb=[6,12,15,27,28,30,31,38,40,67,70,73,75,78,79,80,82,107,155,156,158,161,162,163,192,210,213,214,222,237,239,240,241,242,243,245,246,248,249,252,254,259,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,298,301,302,303,304,305,306,307,308,309,310,311,312,313,314],mb=[1,326],nb=[1,325],ob=[1,332],pb=[1,331],qb=[28,163],rb=[6,12,15,27,28,40,67,70,78,80,82,239,240,241,243,245,246,248,249,252,254,277,309,310,311,312,313,314],sb=[6,12,15,27,28,30,31,38,40,60,67,70,73,75,78,79,80,82,107,155,156,158,161,162,163,192,210,213,214,222,237,239,240,241,242,243,245,246,248,249,252,254,259,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,295,298,301,302,303,304,305,306,307,308,309,310,311,312,313,314],tb=[12,15,28,181,203,208,277],ub=[2,355],vb=[1,354],wb=[38,40,82,107,155,156,158,161,162,294],xb=[2,343],yb=[12,15,27,28,31,38,40,79,82,107,155,156,158,161,162,163,181,192,210,211,213,214,242,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294],zb=[30,31,192,242,302,303],Ab=[30,31,192,222,237,242,259,271,272,273,274,275,276,301,302,303,304,305,306,307,308,309],Bb=[30,31,192,222,237,242,259,271,272,273,274,275,276,283,298,301,302,303,304,305,306,307,308,309],Cb=[1,387],Db=[1,402],Eb=[1,399],Fb=[1,400],Gb=[12,15,27,28,79,203,237,239,240,241,243,245,246,248,249,252,254,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,301,309,310,311,312,313,314],Hb=[12,15,27,28,38,40,79,82,107,155,156,158,161,162,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],Ib=[12,15,27,277],Jb=[12,15,27,28,38,40,79,82,107,155,156,158,161,162,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,294],Kb=[2,316],Lb=[12,15,27,181,192,277],Mb=[1,453],Nb=[1,454],Ob=[12,15,31,79,89,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],Pb=[6,12,15,27,28,40,73,75,78,80,82,239,240,241,243,245,246,248,249,252,254,277,309,310,311,312,313,314],Qb=[2,311],Rb=[12,15,28,181,203,277],Sb=[38,40,82,107,155,156,158,161,162,192,211,294],Tb=[12,15,27,28,40,79,107,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277],Ub=[12,15,27,28,31,79,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,297,298],Vb=[12,15,27,28,31,79,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,297,298,300,301],Wb=[1,545],Xb=[1,546],Yb=[2,299],Zb=[12,15,31,181,208,277],$b={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdateUnit:3,QueryOrUpdateUnit_repetition0:4,QueryOrUpdateUnit_group0:5,EOF:6,Query:7,Query_group0:8,Query_option0:9,BaseDecl:10,BASE:11,IRIREF:12,PrefixDecl:13,PREFIX:14,PNAME_NS:15,SelectQuery:16,SelectClause:17,SelectQuery_repetition0:18,WhereClause:19,SolutionModifier:20,SubSelect:21,SubSelect_option0:22,SELECT:23,SelectClause_option0:24,SelectClause_group0:25,SelectClauseItem:26,VAR:27,"(":28,Expression:29,AS:30,")":31,ConstructQuery:32,CONSTRUCT:33,ConstructTemplate:34,ConstructQuery_repetition0:35,ConstructQuery_repetition1:36,WHERE:37,"{":38,ConstructQuery_option0:39,"}":40,DescribeQuery:41,DESCRIBE:42,DescribeQuery_group0:43,DescribeQuery_repetition0:44,DescribeQuery_option0:45,AskQuery:46,ASK:47,AskQuery_repetition0:48,DatasetClause:49,FROM:50,DatasetClause_option0:51,iri:52,WhereClause_option0:53,GroupGraphPattern:54,SolutionModifier_option0:55,SolutionModifier_option1:56,SolutionModifier_option2:57,SolutionModifier_option3:58,GroupClause:59,GROUP:60,BY:61,GroupClause_repetition_plus0:62,GroupCondition:63,BuiltInCall:64,FunctionCall:65,HavingClause:66,HAVING:67,HavingClause_repetition_plus0:68,OrderClause:69,ORDER:70,OrderClause_repetition_plus0:71,OrderCondition:72,ASC:73,BrackettedExpression:74,DESC:75,Constraint:76,LimitOffsetClauses:77,LIMIT:78,INTEGER:79,OFFSET:80,ValuesClause:81,VALUES:82,InlineData:83,InlineData_repetition0:84,InlineData_repetition1:85,InlineData_repetition2:86,DataBlockValue:87,Literal:88,UNDEF:89,DataBlockValueList:90,DataBlockValueList_repetition0:91,Update:92,Update_repetition0:93,Update1:94,LOAD:95,Update1_option0:96,Update1_option1:97,Update1_group0:98,Update1_option2:99,GraphRefAll:100,Update1_group1:101,Update1_option3:102,GraphOrDefault:103,TO:104,CREATE:105,Update1_option4:106,GRAPH:107,INSERTDATA:108,QuadPattern:109,DELETEDATA:110,DELETEWHERE:111,Update1_option5:112,InsertClause:113,Update1_option6:114,Update1_repetition0:115,Update1_option7:116,DeleteClause:117,Update1_option8:118,Update1_repetition1:119,DELETE:120,INSERT:121,UsingClause:122,USING:123,UsingClause_option0:124,WithClause:125,WITH:126,IntoGraphClause:127,INTO:128,DEFAULT:129,GraphOrDefault_option0:130,GraphRefAll_group0:131,QuadPattern_option0:132,QuadPattern_repetition0:133,QuadsNotTriples:134,QuadsNotTriples_group0:135,QuadsNotTriples_option0:136,QuadsNotTriples_option1:137,QuadsNotTriples_option2:138,TriplesTemplate:139,TriplesTemplate_repetition0:140,TriplesSameSubject:141,TriplesTemplate_option0:142,GroupGraphPatternSub:143,GroupGraphPatternSub_option0:144,GroupGraphPatternSub_repetition0:145,GroupGraphPatternSubTail:146,GraphPatternNotTriples:147,GroupGraphPatternSubTail_option0:148,GroupGraphPatternSubTail_option1:149,TriplesBlock:150,TriplesBlock_repetition0:151,TriplesSameSubjectPath:152,TriplesBlock_option0:153,GraphPatternNotTriples_repetition0:154,OPTIONAL:155,MINUS:156,GraphPatternNotTriples_group0:157,SERVICE:158,GraphPatternNotTriples_option0:159,GraphPatternNotTriples_group1:160,FILTER:161,BIND:162,NIL:163,FunctionCall_option0:164,FunctionCall_repetition0:165,ExpressionList:166,ExpressionList_repetition0:167,ConstructTemplate_option0:168,ConstructTriples:169,ConstructTriples_repetition0:170,ConstructTriples_option0:171,VarOrTerm:172,PropertyListNotEmpty:173,TriplesNode:174,PropertyList:175,PropertyList_option0:176,PropertyListNotEmpty_repetition0:177,VerbObjectList:178,Verb:179,ObjectList:180,a:181,ObjectList_repetition0:182,GraphNode:183,PropertyListPathNotEmpty:184,TriplesNodePath:185,TriplesSameSubjectPath_option0:186,PropertyListPathNotEmpty_group0:187,PropertyListPathNotEmpty_repetition0:188,GraphNodePath:189,PropertyListPathNotEmpty_repetition1:190,PropertyListPathNotEmptyTail:191,";":192,PropertyListPathNotEmptyTail_group0:193,Path:194,Path_repetition0:195,PathSequence:196,PathSequence_repetition0:197,PathEltOrInverse:198,PathElt:199,PathPrimary:200,PathElt_option0:201,PathEltOrInverse_option0:202,"!":203,PathNegatedPropertySet:204,PathOneInPropertySet:205,PathNegatedPropertySet_repetition0:206,PathNegatedPropertySet_option0:207,"^":208,TriplesNode_repetition_plus0:209,"[":210,"]":211,TriplesNodePath_repetition_plus0:212,BLANK_NODE_LABEL:213,ANON:214,Expression_repetition0:215,ConditionalAndExpression:216,ConditionalAndExpression_repetition0:217,RelationalExpression:218,AdditiveExpression:219,RelationalExpression_group0:220,RelationalExpression_option0:221,IN:222,MultiplicativeExpression:223,AdditiveExpression_repetition0:224,AdditiveExpressionTail:225,AdditiveExpressionTail_group0:226,NumericLiteralPositive:227,AdditiveExpressionTail_repetition0:228,NumericLiteralNegative:229,AdditiveExpressionTail_repetition1:230,UnaryExpression:231,MultiplicativeExpression_repetition0:232,MultiplicativeExpressionTail:233,MultiplicativeExpressionTail_group0:234,UnaryExpression_option0:235,PrimaryExpression:236,"-":237,Aggregate:238,FUNC_ARITY0:239,FUNC_ARITY1:240,FUNC_ARITY2:241,",":242,IF:243,BuiltInCall_group0:244,BOUND:245,BNODE:246,BuiltInCall_option0:247,EXISTS:248,COUNT:249,Aggregate_option0:250,Aggregate_group0:251,FUNC_AGGREGATE:252,Aggregate_option1:253,GROUP_CONCAT:254,Aggregate_option2:255,Aggregate_option3:256,GroupConcatSeparator:257,SEPARATOR:258,"=":259,String:260,LANGTAG:261,"^^":262,DECIMAL:263,DOUBLE:264,true:265,false:266,STRING_LITERAL1:267,STRING_LITERAL2:268,STRING_LITERAL_LONG1:269,STRING_LITERAL_LONG2:270,INTEGER_POSITIVE:271,DECIMAL_POSITIVE:272,DOUBLE_POSITIVE:273,INTEGER_NEGATIVE:274,DECIMAL_NEGATIVE:275,DOUBLE_NEGATIVE:276,PNAME_LN:277,QueryOrUpdateUnit_repetition0_group0:278,SelectClause_option0_group0:279,DISTINCT:280,REDUCED:281,SelectClause_group0_repetition_plus0:282,"*":283,DescribeQuery_group0_repetition_plus0_group0:284,DescribeQuery_group0_repetition_plus0:285,NAMED:286,SILENT:287,CLEAR:288,DROP:289,ADD:290,MOVE:291,COPY:292,ALL:293,".":294,UNION:295,PropertyListNotEmpty_repetition0_repetition_plus0:296,"|":297,"/":298,PathElt_option0_group0:299,"?":300,"+":301,"||":302,"&&":303,"!=":304,"<":305,">":306,"<=":307,">=":308,NOT:309,CONCAT:310,COALESCE:311,SUBSTR:312,REGEX:313,REPLACE:314,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",11:"BASE",12:"IRIREF",14:"PREFIX",15:"PNAME_NS",23:"SELECT",27:"VAR",28:"(",30:"AS",31:")",33:"CONSTRUCT",37:"WHERE",38:"{",40:"}",42:"DESCRIBE",47:"ASK",50:"FROM",60:"GROUP",61:"BY",67:"HAVING",70:"ORDER",73:"ASC",75:"DESC",78:"LIMIT",79:"INTEGER",80:"OFFSET",82:"VALUES",89:"UNDEF",95:"LOAD",104:"TO",105:"CREATE",107:"GRAPH",108:"INSERTDATA",110:"DELETEDATA",111:"DELETEWHERE",120:"DELETE",121:"INSERT",123:"USING",126:"WITH",128:"INTO",129:"DEFAULT",155:"OPTIONAL",156:"MINUS",158:"SERVICE",161:"FILTER",162:"BIND",163:"NIL",181:"a",192:";",203:"!",208:"^",210:"[",211:"]",213:"BLANK_NODE_LABEL",214:"ANON",222:"IN",237:"-",239:"FUNC_ARITY0",240:"FUNC_ARITY1",241:"FUNC_ARITY2",242:",",243:"IF",245:"BOUND",246:"BNODE",248:"EXISTS",249:"COUNT",252:"FUNC_AGGREGATE",254:"GROUP_CONCAT",258:"SEPARATOR",259:"=",261:"LANGTAG",262:"^^",263:"DECIMAL",264:"DOUBLE",265:"true",266:"false",267:"STRING_LITERAL1",268:"STRING_LITERAL2",269:"STRING_LITERAL_LONG1",270:"STRING_LITERAL_LONG2",271:"INTEGER_POSITIVE",272:"DECIMAL_POSITIVE",273:"DOUBLE_POSITIVE",274:"INTEGER_NEGATIVE",275:"DECIMAL_NEGATIVE",276:"DOUBLE_NEGATIVE",277:"PNAME_LN",280:"DISTINCT",281:"REDUCED",283:"*",286:"NAMED",287:"SILENT",288:"CLEAR",289:"DROP",290:"ADD",291:"MOVE",292:"COPY",293:"ALL",294:".",295:"UNION",297:"|",298:"/",300:"?",301:"+",302:"||",303:"&&",304:"!=",305:"<",306:">",307:"<=",308:">=",309:"NOT",310:"CONCAT",311:"COALESCE",312:"SUBSTR",313:"REGEX",314:"REPLACE"},productions_:[0,[3,3],[7,2],[10,2],[13,3],[16,4],[21,4],[17,3],[26,1],[26,5],[32,5],[32,7],[41,5],[46,4],[49,3],[19,2],[20,4],[59,3],[63,1],[63,1],[63,3],[63,5],[63,1],[66,2],[69,3],[72,2],[72,2],[72,1],[72,1],[77,2],[77,2],[77,4],[77,4],[81,2],[83,4],[83,6],[87,1],[87,1],[87,1],[90,3],[92,2],[94,4],[94,3],[94,5],[94,4],[94,2],[94,2],[94,2],[94,6],[94,6],[117,2],[113,2],[122,3],[125,2],[127,3],[103,1],[103,2],[100,2],[100,1],[109,4],[134,7],[139,3],[54,3],[54,3],[143,2],[146,3],[150,3],[147,2],[147,2],[147,2],[147,3],[147,4],[147,2],[147,6],[147,1],[76,1],[76,1],[76,1],[65,2],[65,6],[166,1],[166,4],[34,3],[169,3],[141,2],[141,2],[175,1],[173,2],[178,2],[179,1],[179,1],[179,1],[180,2],[152,2],[152,2],[184,4],[191,1],[191,3],[194,2],[196,2],[199,2],[198,2],[200,1],[200,1],[200,2],[200,3],[204,1],[204,1],[204,4],[205,1],[205,1],[205,2],[205,2],[174,3],[174,3],[185,3],[185,3],[183,1],[183,1],[189,1],[189,1],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[29,2],[216,2],[218,1],[218,3],[218,4],[219,2],[225,2],[225,2],[225,2],[223,2],[233,2],[231,2],[231,2],[231,2],[236,1],[236,1],[236,1],[236,1],[236,1],[236,1],[74,3],[64,1],[64,2],[64,4],[64,6],[64,8],[64,2],[64,4],[64,2],[64,4],[64,3],[238,5],[238,5],[238,6],[257,4],[88,1],[88,2],[88,3],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[88,1],[260,1],[260,1],[260,1],[260,1],[227,1],[227,1],[227,1],[229,1],[229,1],[229,1],[52,1],[52,1],[52,1],[278,1],[278,1],[4,0],[4,2],[5,1],[5,1],[8,1],[8,1],[8,1],[8,1],[9,0],[9,1],[18,0],[18,2],[22,0],[22,1],[279,1],[279,1],[24,0],[24,1],[282,1],[282,2],[25,1],[25,1],[35,0],[35,2],[36,0],[36,2],[39,0],[39,1],[284,1],[284,1],[285,1],[285,2],[43,1],[43,1],[44,0],[44,2],[45,0],[45,1],[48,0],[48,2],[51,0],[51,1],[53,0],[53,1],[55,0],[55,1],[56,0],[56,1],[57,0],[57,1],[58,0],[58,1],[62,1],[62,2],[68,1],[68,2],[71,1],[71,2],[84,0],[84,2],[85,0],[85,2],[86,0],[86,2],[91,0],[91,2],[93,0],[93,3],[96,0],[96,1],[97,0],[97,1],[98,1],[98,1],[99,0],[99,1],[101,1],[101,1],[101,1],[102,0],[102,1],[106,0],[106,1],[112,0],[112,1],[114,0],[114,1],[115,0],[115,2],[116,0],[116,1],[118,0],[118,1],[119,0],[119,2],[124,0],[124,1],[130,0],[130,1],[131,1],[131,1],[131,1],[132,0],[132,1],[133,0],[133,2],[135,1],[135,1],[136,0],[136,1],[137,0],[137,1],[138,0],[138,1],[140,0],[140,3],[142,0],[142,1],[144,0],[144,1],[145,0],[145,2],[148,0],[148,1],[149,0],[149,1],[151,0],[151,3],[153,0],[153,1],[154,0],[154,3],[157,1],[157,1],[159,0],[159,1],[160,1],[160,1],[164,0],[164,1],[165,0],[165,3],[167,0],[167,3],[168,0],[168,1],[170,0],[170,3],[171,0],[171,1],[176,0],[176,1],[296,1],[296,2],[177,0],[177,3],[182,0],[182,3],[186,0],[186,1],[187,1],[187,1],[188,0],[188,3],[190,0],[190,2],[193,1],[193,1],[195,0],[195,3],[197,0],[197,3],[299,1],[299,1],[299,1],[201,0],[201,1],[202,0],[202,1],[206,0],[206,3],[207,0],[207,1],[209,1],[209,2],[212,1],[212,2],[215,0],[215,3],[217,0],[217,3],[220,1],[220,1],[220,1],[220,1],[220,1],[220,1],[221,0],[221,1],[224,0],[224,2],[226,1],[226,1],[228,0],[228,2],[230,0],[230,2],[232,0],[232,2],[234,1],[234,1],[235,0],[235,1],[244,1],[244,1],[244,1],[244,1],[244,1],[247,0],[247,1],[250,0],[250,1],[251,1],[251,1],[253,0],[253,1],[255,0],[255,1],[256,0],[256,1]],performAction:function(b,c,d,e,f,g,h){var i=g.length-1;switch(f){case 1:return g[i-1].prefixes=Oc.prefixes,Oc.prefixes=null,lc=mc=nc="",g[i-1];case 2:this.$=rc(g[i-1],g[i],{type:"query"});break;case 3:lc=tc(g[i]),mc=lc.replace(/[^\/]*$/,""),nc=lc.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0];break;case 4:Oc.prefixes||(Oc.prefixes={}),g[i-1]=g[i-1].substr(0,g[i-1].length-1),g[i]=tc(g[i]),Oc.prefixes[g[i-1]]=g[i];break;case 5:this.$=rc(g[i-3],zc(g[i-2]),g[i-1],g[i]);break;case 6:this.$=rc({type:"query"},g[i-3],g[i-2],g[i-1],g[i]);break;case 7:this.$=rc({queryType:"SELECT",variables:"*"===g[i]?["*"]:g[i]},g[i-1]&&(g[i-2]=oc(g[i-1]),g[i-1]={},g[i-1][g[i-2]]=!0,g[i-1]));break;case 8:case 89:case 121:case 146:this.$=uc(g[i]);break;case 9:case 21:this.$=wc(g[i-3],{variable:uc(g[i-1])});break;case 10:this.$=rc({queryType:"CONSTRUCT",template:g[i-3]},zc(g[i-2]),g[i-1],g[i]);break;case 11:this.$=rc({queryType:"CONSTRUCT",template:g[i-2]=g[i-2]?g[i-2].triples:[]},zc(g[i-5]),{where:[{type:"bgp",triples:qc([],g[i-2])}]},g[i]);break;case 12:this.$=rc({queryType:"DESCRIBE",variables:"*"===g[i-3]?["*"]:g[i-3].map(uc)},zc(g[i-2]),g[i-1],g[i]);break;case 13:this.$=rc({queryType:"ASK"},zc(g[i-2]),g[i-1],g[i]);break;case 14:case 52:this.$={iri:g[i],named:!!g[i-1]};break;case 15:this.$={where:g[i].patterns};break;case 16:this.$=rc(g[i-3],g[i-2],g[i-1],g[i]);break;case 17:this.$={group:g[i]};break;case 18:case 19:case 25:case 27:this.$=wc(g[i]);break;case 20:this.$=wc(g[i-1]);break;case 22:case 28:this.$=wc(uc(g[i]));break;case 23:this.$={having:g[i]};break;case 24:this.$={order:g[i]};break;case 26:this.$=wc(g[i],{descending:!0});break;case 29:this.$={limit:Ac(g[i])};break;case 30:this.$={offset:Ac(g[i])};break;case 31:this.$={limit:Ac(g[i-2]),offset:Ac(g[i])};break;case 32:this.$={limit:Ac(g[i]),offset:Ac(g[i-2])};break;case 33:this.$={type:"values",values:g[i]};break;case 34:g[i-3]=uc(g[i-3]),this.$=g[i-1].map(function(a){var b={};return b[g[i-3]]=a,b});break;case 35:var j=g[i-4].length;g[i-4]=g[i-4].map(uc),this.$=g[i-1].map(function(a){if(a.length!==j)throw Error("Inconsistent VALUES length");for(var b={},c=0;c<j;c++)b[g[i-4][c]]=a[c];return b});break;case 38:this.$=void 0;break;case 39:case 62:case 82:case 105:case 147:this.$=g[i-1];break;case 40:this.$={type:"update",updates:pc(g[i-1],g[i])};break;case 41:this.$=rc({type:"load",silent:!!g[i-2],source:g[i-1]},g[i]&&{destination:g[i]});break;case 42:this.$={type:oc(g[i-2]),silent:!!g[i-1],graph:g[i]};break;case 43:this.$={type:oc(g[i-4]),silent:!!g[i-3],source:g[i-2],destination:g[i]};break;case 44:this.$={type:"create",silent:!!g[i-2],graph:g[i-1]};break;case 45:this.$={updateType:"insert",insert:g[i]};break;case 46:this.$={updateType:"delete",delete:g[i]};break;case 47:this.$={updateType:"deletewhere",delete:g[i]};break;case 48:this.$=rc({updateType:"insertdelete"},g[i-5],{insert:g[i-4]||[]},{delete:g[i-3]||[]},zc(g[i-2]),{where:g[i].patterns});break;case 49:this.$=rc({updateType:"insertdelete"},g[i-5],{delete:g[i-4]||[]},{insert:g[i-3]||[]},zc(g[i-2]),{where:g[i].patterns});break;case 50:case 51:case 54:case 138:this.$=g[i];break;case 53:this.$={graph:g[i]};break;case 55:this.$={type:"graph",default:!0};break;case 56:case 57:this.$={type:"graph",name:g[i]};break;case 58:this.$={},this.$[oc(g[i])]=!0;break;case 59:this.$=g[i-2]?sc(g[i-1],[g[i-2]]):sc(g[i-1]);break;case 60:var k=rc(g[i-3]||{triples:[]},{type:"graph",name:uc(g[i-5])});this.$=g[i]?[k,g[i]]:[k];break;case 61:case 66:this.$={type:"bgp",triples:sc(g[i-2],[g[i-1]])};break;case 63:if(g[i-1].length>1){for(var m,p,l=[],n=[],o=0;p=g[i-1][o];o++)switch(p.type){case"bgp":p.triples.length&&(m?qc(m.triples,p.triples):pc(l,m=p));break;case"filter":pc(n,p);break;default:(!p.patterns||p.patterns.length>0)&&(pc(l,p),m=null)}g[i-1]=qc(l,n)}this.$={type:"group",patterns:g[i-1]};break;case 64:this.$=g[i-1]?sc([g[i-1]],g[i]):sc(g[i]);break;case 65:this.$=g[i]?[g[i-2],g[i]]:g[i-2];break;case 67:this.$=g[i-1].length?{type:"union",patterns:sc(g[i-1].map(Bc),[Bc(g[i])])}:Bc(g[i]);break;case 68:this.$=rc(g[i],{type:"optional"});break;case 69:this.$=rc(g[i],{type:"minus"});break;case 70:this.$=rc(g[i],{type:"graph",name:uc(g[i-1])});break;case 71:this.$=rc(g[i],{type:"service",name:uc(g[i-1]),silent:!!g[i-2]});break;case 72:this.$={type:"filter",expression:g[i]};break;case 73:this.$={type:"bind",variable:uc(g[i-1]),expression:g[i-3]};break;case 78:this.$={type:"functionCall",function:g[i-1],args:[]};break;case 79:this.$={type:"functionCall",function:g[i-5],args:pc(g[i-2],g[i-1]),distinct:!!g[i-3]};break;case 80:case 96:case 107:case 187:case 197:case 209:case 211:case 221:case 225:case 245:case 247:case 249:case 251:case 253:case 274:case 280:case 291:case 301:case 307:case 313:case 317:case 327:case 329:case 333:case 341:case 343:case 349:case 351:case 355:case 357:case 366:case 374:case 376:case 386:case 390:case 392:case 394:this.$=[];break;case 81:this.$=pc(g[i-2],g[i-1]);break;case 83:this.$=sc(g[i-2],[g[i-1]]);break;case 84:case 93:this.$=g[i].map(function(a){return rc(Dc(g[i-1]),a)});break;case 85:this.$=qc(g[i].map(function(a){return rc(Dc(g[i-1].entity),a)}),g[i-1].triples);break;case 87:this.$=sc(g[i-1],[g[i]]);break;case 88:this.$=Mc(g[i-1],g[i]);break;case 91:case 103:case 110:this.$=ac;break;case 92:this.$=pc(g[i-1],g[i]);break;case 94:this.$=g[i]?qc(g[i].map(function(a){return rc(Dc(g[i-1].entity),a)}),g[i-1].triples):g[i-1].triples;break;case 95:this.$=Mc(uc(g[i-3]),pc(g[i-2],g[i-1]),g[i]);break;case 97:this.$=Mc(uc(g[i-1]),g[i]);break;case 98:this.$=g[i-1].length?xc("|",pc(g[i-1],g[i])):g[i];break;case 99:this.$=g[i-1].length?xc("/",pc(g[i-1],g[i])):g[i];break;case 100:this.$=g[i]?xc(g[i],[g[i-1]]):g[i-1];break;case 101:this.$=g[i-1]?xc(g[i-1],[g[i]]):g[i];break;case 104:case 111:this.$=xc(g[i-1],[g[i]]);break;case 108:this.$=xc("|",pc(g[i-2],g[i-1]));break;case 112:this.$=xc(g[i-1],[ac]);break;case 113:case 115:this.$=Kc(g[i-1]);break;case 114:case 116:this.$=Lc(g[i-1]);break;case 117:case 119:this.$={entity:g[i],triples:[]};break;case 125:this.$=Ec();break;case 126:this.$=dc;break;case 127:this.$=g[i-1].length?vc("||",pc(g[i-1],g[i])):g[i];break;case 128:this.$=g[i-1].length?vc("&&",pc(g[i-1],g[i])):g[i];break;case 130:this.$=vc(g[i-1],[g[i-2],g[i]]);break;case 131:this.$=vc(g[i-2]?"notin":"in",[g[i-3],g[i]]);break;case 132:case 136:this.$=yc(g[i-1],g[i]);break;case 133:case 137:this.$=[g[i-1],g[i]];break;case 134:this.$=["+",yc(g[i-1],g[i])];break;case 135:this.$=["-",yc(g[i-1].replace("-",""),g[i])];break;case 139:this.$=vc(g[i-1],[g[i]]);break;case 140:this.$=vc("UMINUS",[g[i]]);break;case 149:this.$=vc(oc(g[i-1]));break;case 150:this.$=vc(oc(g[i-3]),[g[i-1]]);break;case 151:this.$=vc(oc(g[i-5]),[g[i-3],g[i-1]]);break;case 152:this.$=vc(oc(g[i-7]),[g[i-5],g[i-3],g[i-1]]);break;case 153:this.$=vc(oc(g[i-1]),g[i]);break;case 154:this.$=vc("bound",[uc(g[i-1])]);break;case 155:this.$=vc(g[i-1],[]);break;case 156:this.$=vc(g[i-3],[g[i-1]]);break;case 157:this.$=vc(g[i-2]?"notexists":"exists",[Bc(g[i])]);break;case 158:case 159:this.$=wc(g[i-1],{type:"aggregate",aggregation:oc(g[i-4]),distinct:!!g[i-2]});break;case 160:this.$=wc(g[i-2],{type:"aggregate",aggregation:oc(g[i-5]),distinct:!!g[i-3],separator:g[i-1]||" "});break;case 161:this.$=g[i].substr(1,g[i].length-2);break;case 163:this.$=g[i-1]+oc(g[i]);break;case 164:this.$=g[i-2]+"^^"+g[i];break;case 165:case 179:this.$=Cc(g[i],fc);break;case 166:case 180:this.$=Cc(g[i],gc);break;case 167:case 181:this.$=Cc(oc(g[i]),hc);break;case 170:this.$=jc;break;case 171:this.$=kc;break;case 172:case 173:this.$=Jc(g[i],1);break;case 174:case 175:this.$=Jc(g[i],3);break;case 176:this.$=Cc(g[i].substr(1),fc);break;case 177:this.$=Cc(g[i].substr(1),gc);break;case 178:this.$=Cc(g[i].substr(1).toLowerCase(),hc);break;case 182:this.$=tc(g[i]);break;case 183:var q=g[i].indexOf(":"),r=g[i].substr(0,q),s=Oc.prefixes[r];if(!s)throw new Error("Unknown prefix: "+r);this.$=tc(s+g[i].substr(q+1));break;case 184:if(g[i]=g[i].substr(0,g[i].length-1),!(g[i]in Oc.prefixes))throw new Error("Unknown prefix: "+g[i]);this.$=tc(Oc.prefixes[g[i]]);break;case 188:case 198:case 206:case 210:case 212:case 218:case 222:case 226:case 240:case 242:case 244:case 246:case 248:case 250:case 252:case 275:case 281:case 292:case 308:case 340:case 352:case 371:case 373:case 387:case 391:case 393:case 395:g[i-1].push(g[i]);break;case 205:case 217:case 239:case 241:case 243:case 339:case 370:case 372:this.$=[g[i]];break;case 254:case 302:case 314:case 318:case 328:case 330:case 334:case 342:case 344:case 350:case 356:case 358:case 367:case 375:case 377:g[i-2].push(g[i-1])}},table:[a(b,[2,187],{3:1,4:2}),{1:[3]},a(c,[2,253],{5:3,278:4,7:5,92:6,10:7,13:8,8:9,93:10,16:13,32:14,41:15,46:16,17:17,11:[1,11],14:[1,12],23:d,33:[1,18],42:[1,19],47:[1,20]}),{6:[1,22]},a(b,[2,188]),{6:[2,189]},{6:[2,190]},a(b,[2,185]),a(b,[2,186]),{6:[2,195],9:23,81:24,82:e},{94:26,95:[1,27],98:28,101:29,105:[1,30],108:[1,31],110:[1,32],111:[1,33],112:34,116:35,120:[2,276],121:[2,270],125:41,126:[1,42],288:[1,36],289:[1,37],290:[1,38],291:[1,39],292:[1,40]},{12:[1,43]},{15:[1,44]},a(f,[2,191]),a(f,[2,192]),a(f,[2,193]),a(f,[2,194]),a(g,[2,197],{18:45}),a(h,[2,211],{34:46,36:47,38:[1,48]}),{12:i,15:j,27:k,43:49,52:54,277:l,283:[1,51],284:52,285:50},a(g,[2,225],{48:58}),a(m,[2,203],{24:59,279:60,280:[1,61],281:[1,62]}),{1:[2,1]},{6:[2,2]},{6:[2,196]},{27:[1,64],28:[1,65],83:63},{6:[2,40],192:[1,66]},a(n,[2,255],{96:67,287:[1,68]}),a(o,[2,261],{99:69,287:[1,70]}),a(p,[2,266],{102:71,287:[1,72]}),{106:73,107:[2,268],287:[1,74]},{38:q,109:75},{38:q,109:77},{38:q,109:78},{113:79,121:r},{117:81,120:s},a(t,[2,259]),a(t,[2,260]),a(u,[2,263]),a(u,[2,264]),a(u,[2,265]),{120:[2,277],121:[2,271]},{12:i,15:j,52:83,277:l},a(b,[2,3]),{12:[1,84]},{19:85,37:v,38:w,49:86,50:x,53:87},a(g,[2,209],{35:90}),{37:[1,91],49:92,50:x},a(y,[2,333],{168:93,169:94,170:95,40:[2,331]}),a(z,[2,221],{44:96}),a(z,[2,219],{52:54,284:97,12:i,15:j,27:k,277:l}),a(z,[2,220]),a(A,[2,217]),a(A,[2,215]),a(A,[2,216]),a(B,[2,182]),a(B,[2,183]),a(B,[2,184]),{19:98,37:v,38:w,49:99,50:x,53:87},{25:100,26:103,27:C,28:D,282:101,283:[1,102]},a(m,[2,204]),a(m,[2,201]),a(m,[2,202]),a(E,[2,33]),{38:[1,106]},a(F,[2,247],{85:107}),a(c,[2,254]),{12:i,15:j,52:108,277:l},a(n,[2,256]),{100:109,107:[1,110],129:[1,112],131:111,286:[1,113],293:[1,114]},a(o,[2,262]),a(n,G,{103:115,130:117,107:H,129:I}),a(p,[2,267]),{107:[1,119]},{107:[2,269]},a(J,[2,45]),a(y,K,{132:120,139:121,140:122,40:L,107:L}),a(J,[2,46]),a(J,[2,47]),a(M,[2,272],{114:123,117:124,120:s}),{38:q,109:125},a(M,[2,278],{118:126,113:127,121:r}),{38:q,109:128},a([120,121],[2,53]),a(b,[2,4]),a(N,O,{20:129,55:130,59:131,60:P}),a(g,[2,198]),{38:Q,54:133},a(n,[2,227],{51:135,286:[1,136]}),{38:[2,230]},{19:137,37:v,38:w,49:138,50:x,53:87},{38:[1,139]},a(h,[2,212]),{40:[1,140]},{40:[2,332]},{12:i,15:j,27:R,28:S,52:145,79:T,88:146,141:141,163:U,172:142,174:143,210:V,213:W,214:X,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},a(ka,[2,223],{53:87,45:170,49:171,19:172,37:v,38:w,50:x}),a(A,[2,218]),a(N,O,{55:130,59:131,20:173,60:P}),a(g,[2,226]),a(g,[2,7]),a(g,[2,207],{26:174,27:C,28:D}),a(g,[2,208]),a(la,[2,205]),a(la,[2,8]),a(ma,na,{29:175,215:176}),a(oa,[2,245],{84:177}),{27:[1,179],31:[1,178]},a(J,[2,257],{97:180,127:181,128:[1,182]}),a(J,[2,42]),{12:i,15:j,52:183,277:l},a(J,[2,58]),a(J,[2,286]),a(J,[2,287]),a(J,[2,288]),{104:[1,184]},a(pa,[2,55]),{12:i,15:j,52:185,277:l},a(n,[2,285]),{12:i,15:j,52:186,277:l},a(qa,[2,291],{133:187}),a(qa,[2,290]),{12:i,15:j,27:R,28:S,52:145,79:T,88:146,141:188,163:U,172:142,174:143,210:V,213:W,214:X,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},a(M,[2,274],{115:189}),a(M,[2,273]),a([37,120,123],[2,51]),a(M,[2,280],{119:190}),a(M,[2,279]),a([37,121,123],[2,50]),a(f,[2,5]),a(ra,[2,233],{56:191,66:192,67:[1,193]}),a(N,[2,232]),{61:[1,194]},a([6,40,60,67,70,78,80,82],[2,15]),a(y,sa,{21:195,143:196,17:197,144:198,150:199,151:200,23:d,38:ta,40:ta,82:ta,107:ta,155:ta,156:ta,158:ta,161:ta,162:ta}),{12:i,15:j,52:201,277:l},a(n,[2,228]),a(N,O,{55:130,59:131,20:202,60:P}),a(g,[2,210]),a(y,K,{140:122,39:203,139:204,40:[2,213]}),a(g,[2,82]),{40:[2,335],171:205,294:[1,206]},a(ua,va,{173:207,177:208}),a(ua,va,{177:208,175:209,176:210,173:211,40:wa,107:wa,294:wa}),a(xa,[2,121]),a(xa,[2,122]),a(xa,[2,123]),a(xa,[2,124]),a(xa,[2,125]),a(xa,[2,126]),{12:i,15:j,27:R,28:S,52:145,79:T,88:146,163:U,172:214,174:215,183:213,209:212,210:V,213:W,214:X,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},a(ua,va,{177:208,173:216}),a(ya,[2,162],{261:[1,217],262:[1,218]}),a(ya,[2,165]),a(ya,[2,166]),a(ya,[2,167]),a(ya,[2,168]),a(ya,[2,169]),a(ya,[2,170]),a(ya,[2,171]),a(za,[2,172]),a(za,[2,173]),a(za,[2,174]),a(za,[2,175]),a(ya,[2,176]),a(ya,[2,177]),a(ya,[2,178]),a(ya,[2,179]),a(ya,[2,180]),a(ya,[2,181]),a(N,O,{55:130,59:131,20:219,60:P}),a(z,[2,222]),a(ka,[2,224]),a(f,[2,13]),a(la,[2,206]),{30:[1,220]},a(ma,[2,376],{216:221,217:222}),{12:i,15:j,40:[1,223],52:225,79:T,87:224,88:226,89:Aa,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},{38:[1,228]},a(F,[2,248]),a(J,[2,41]),a(J,[2,258]),{107:[1,229]},a(J,[2,57]),a(n,G,{130:117,103:230,107:H,129:I}),a(pa,[2,56]),a(J,[2,44]),{40:[1,231],107:[1,233],134:232},a(qa,[2,303],{142:234,294:[1,235]}),{37:[1,236],122:237,123:Ba},{37:[1,239],122:240,123:Ba},a(Ca,[2,235],{57:241,69:242,70:[1,243]}),a(ra,[2,234]),{12:i,15:j,28:Da,52:259,64:247,65:248,68:244,74:246,76:245,238:250,239:Ea,240:Fa,241:Ga,243:Ha,244:255,245:Ia,246:Ja,247:258,248:Ka,249:La,252:Ma,254:Na,277:l,309:Oa,310:Pa,311:Qa,312:Ra,313:Sa,314:Ta},{12:i,15:j,27:Ua,28:Va,52:259,62:269,63:270,64:271,65:272,238:250,239:Ea,240:Fa,241:Ga,243:Ha,244:255,245:Ia,246:Ja,247:258,248:Ka,249:La,252:Ma,254:Na,277:l,309:Oa,310:Pa,311:Qa,312:Ra,313:Sa,314:Ta},{40:[1,275]},{40:[1,276]},{19:277,37:v,38:w,53:87},a(Wa,[2,307],{145:278}),a(Wa,[2,306]),{12:i,15:j,27:R,28:Xa,52:145,79:T,88:146,152:279,163:U,172:280,185:281,210:Ya,213:W,214:X,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},a(z,[2,14]),a(f,[2,10]),{40:[1,284]},{40:[2,214]},{40:[2,83]},a(y,[2,334],{40:[2,336]}),a(Za,[2,84]),{12:i,15:j,27:[1,287],52:288,178:285,179:286,181:[1,289],277:l},a(Za,[2,85]),a(Za,[2,86]),a(Za,[2,338]),{12:i,15:j,27:R,28:S,31:[1,290],52:145,79:T,88:146,163:U,172:214,174:215,183:291,210:V,213:W,214:X,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},a($a,[2,370]),a(_a,[2,117]),a(_a,[2,118]),{211:[1,292]},a(ya,[2,163]),{12:i,15:j,52:293,277:l},a(f,[2,12]),{27:[1,294]},a([30,31,192,242],[2,127],{302:[1,295]}),a(ab,bb,{218:296,219:297,223:298,231:299,235:300,203:cb,237:db,301:eb}),a(E,[2,34]),a(oa,[2,246]),a(fb,[2,36]),a(fb,[2,37]),a(fb,[2,38]),a(gb,[2,249],{86:304}),{12:i,15:j,52:305,277:l},a(J,[2,43]),a([6,37,120,121,123,192],[2,59]),a(qa,[2,292]),{12:i,15:j,27:[1,307],52:308,135:306,277:l},a(qa,[2,61]),a(y,[2,302],{40:hb,107:hb}),{38:Q,54:309},a(M,[2,275]),a(n,[2,282],{124:310,286:[1,311]}),{38:Q,54:312},a(M,[2,281]),a(ib,[2,237],{58:313,77:314,78:[1,315],80:[1,316]}),a(Ca,[2,236]),{61:[1,317]},a(ra,[2,23],{74:246,64:247,65:248,238:250,244:255,247:258,52:259,76:318,12:i,15:j,28:Da,239:Ea,240:Fa,241:Ga,243:Ha,245:Ia,246:Ja,248:Ka,249:La,252:Ma,254:Na,277:l,309:Oa,310:Pa,311:Qa,312:Ra,313:Sa,314:Ta}),a(jb,[2,241]),a(kb,[2,75]),a(kb,[2,76]),a(kb,[2,77]),a(ma,na,{215:176,29:319}),a(lb,[2,148]),{163:[1,320]},{28:[1,321]},{28:[1,322]},{28:[1,323]},{28:mb,163:nb,166:324},{28:[1,327]},{28:[1,329],163:[1,328]},{248:[1,330]},{28:ob,163:pb},{28:[1,333]},{28:[1,334]},{28:[1,335]},a(qb,[2,400]),a(qb,[2,401]),a(qb,[2,402]),a(qb,[2,403]),a(qb,[2,404]),{248:[2,406]},a(N,[2,17],{238:250,244:255,247:258,52:259,64:271,65:272,63:336,12:i,15:j,27:Ua,28:Va,239:Ea,240:Fa,241:Ga,243:Ha,245:Ia,246:Ja,248:Ka,249:La,252:Ma,254:Na,277:l,309:Oa,310:Pa,311:Qa,312:Ra,313:Sa,314:Ta}),a(rb,[2,239]),a(rb,[2,18]),a(rb,[2,19]),a(ma,na,{215:176,29:337}),a(rb,[2,22]),a(sb,[2,62]),a(sb,[2,63]),a(N,O,{55:130,59:131,20:338,60:P}),{38:[2,317],40:[2,64],81:348,82:e,107:[1,344],146:339,147:340,154:341,155:[1,342],156:[1,343],158:[1,345],161:[1,346],162:[1,347]},a(Wa,[2,315],{153:349,294:[1,350]}),a(tb,ub,{184:351,187:352,194:353,195:355,27:vb}),a(wb,[2,345],{187:352,194:353,195:355,186:356,184:357,12:ub,15:ub,28:ub,181:ub,203:ub,208:ub,277:ub,27:vb}),{12:i,15:j,27:R,28:Xa,52:145,79:T,88:146,163:U,172:360,185:361,189:359,210:Ya,212:358,213:W,214:X,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},a(tb,ub,{187:352,194:353,195:355,184:362,27:vb}),a(N,O,{55:130,59:131,20:363,60:P}),a([40,107,211,294],[2,87],{296:364,192:[1,365]}),a(y,xb,{180:366,182:367}),a(y,[2,89]),a(y,[2,90]),a(y,[2,91]),a(yb,[2,113]),a($a,[2,371]),a(yb,[2,114]),a(ya,[2,164]),{31:[1,368]},a(ma,[2,375]),a([30,31,192,242,302],[2,128],{303:[1,369]}),a(zb,[2,129],{220:370,221:371,222:[2,384],259:[1,372],304:[1,373],305:[1,374],306:[1,375],307:[1,376],308:[1,377],309:[1,378]}),a(Ab,[2,386],{224:379}),a(Bb,[2,394],{232:380}),{12:i,15:j,27:Cb,28:Da,52:384,64:383,65:385,74:382,79:T,88:386,227:156,229:157,236:381,238:250,239:Ea,240:Fa,241:Ga,243:Ha,244:255,245:Ia,246:Ja,247:258,248:Ka,249:La,252:Ma,254:Na,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l,309:Oa,310:Pa,311:Qa,312:Ra,313:Sa,314:Ta},{12:i,15:j,27:Cb,28:Da,52:384,64:383,65:385,74:382,79:T,88:386,227:156,229:157,236:388,238:250,239:Ea,240:Fa,241:Ga,243:Ha,244:255,245:Ia,246:Ja,247:258,248:Ka,249:La,252:Ma,254:Na,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l,309:Oa,310:Pa,311:Qa,312:Ra,313:Sa,314:Ta},{12:i,15:j,27:Cb,28:Da,52:384,64:383,65:385,74:382,79:T,88:386,227:156,229:157,236:389,238:250,239:Ea,240:Fa,241:Ga,243:Ha,244:255,245:Ia,246:Ja,247:258,248:Ka,249:La,252:Ma,254:Na,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l,309:Oa,310:Pa,311:Qa,312:Ra,313:Sa,314:Ta},a(ab,[2,399]),{28:[1,392],40:[1,390],90:391},a(J,[2,54]),{38:[1,393]},{38:[2,293]},{38:[2,294]},a(J,[2,48]),{12:i,15:j,52:394,277:l},a(n,[2,283]),a(J,[2,49]),a(ib,[2,16]),a(ib,[2,238]),{79:[1,395]},{79:[1,396]},{12:i,15:j,27:Db,28:Da,52:259,64:247,65:248,71:397,72:398,73:Eb,74:246,75:Fb,76:401,238:250,239:Ea,240:Fa,241:Ga,243:Ha,244:255,245:Ia,246:Ja,247:258,248:Ka,249:La,252:Ma,254:Na,277:l,309:Oa,310:Pa,311:Qa,312:Ra,313:Sa,314:Ta},a(jb,[2,242]),{31:[1,403]},a(lb,[2,149]),a(ma,na,{215:176,29:404}),a(ma,na,{215:176,29:405}),a(ma,na,{215:176,29:406}),a(lb,[2,153]),a(lb,[2,80]),a(ma,[2,329],{167:407}),{27:[1,408]},a(lb,[2,155]),a(ma,na,{215:176,29:409}),{38:Q,54:410},a(lb,[2,78]),a(ma,[2,325],{164:411,280:[1,412]}),a(Gb,[2,407],{250:413,280:[1,414]}),a(ma,[2,411],{253:415,280:[1,416]}),a(ma,[2,413],{255:417,280:[1,418]}),a(rb,[2,240]),{30:[1,420],31:[1,419]},{22:421,40:[2,199],81:422,82:e},a(Wa,[2,308]),a(Hb,[2,309],{148:423,294:[1,424]}),{38:Q,54:425},{38:Q,54:426},{38:Q,54:427},{12:i,15:j,27:[1,429],52:430,157:428,277:l},a(Ib,[2,321],{159:431,287:[1,432]}),{12:i,15:j,28:Da,52:259,64:247,65:248,74:246,76:433,238:250,239:Ea,240:Fa,241:Ga,243:Ha,244:255,245:Ia,246:Ja,247:258,248:Ka,249:La,252:Ma,254:Na,277:l,309:Oa,310:Pa,311:Qa,312:Ra,313:Sa,314:Ta},{28:[1,434]},a(Jb,[2,74]),a(Wa,[2,66]),a(y,[2,314],{38:Kb,40:Kb,82:Kb,107:Kb,155:Kb,156:Kb,158:Kb,161:Kb,162:Kb}),a(wb,[2,93]),a(y,[2,349],{188:435}),a(y,[2,347]),a(y,[2,348]),a(tb,[2,357],{196:436,197:437}),a(wb,[2,94]),a(wb,[2,346]),{12:i,15:j,27:R,28:Xa,31:[1,438],52:145,79:T,88:146,163:U,172:360,185:361,189:439,210:Ya,213:W,214:X,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},a($a,[2,372]),a(_a,[2,119]),a(_a,[2,120]),{211:[1,440]},a(f,[2,11]),a(ua,[2,342],{192:[1,441]}),a(Lb,[2,339]),a([40,107,192,211,294],[2,88]),{12:i,15:j,27:R,28:S,52:145,79:T,88:146,163:U,172:214,174:215,183:442,210:V,213:W,214:X,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},a(la,[2,9]),a(ma,[2,377]),a(ab,bb,{223:298,231:299,235:300,219:443,203:cb,237:db,301:eb}),{222:[1,444]},a(ma,[2,378]),a(ma,[2,379]),a(ma,[2,380]),a(ma,[2,381]),a(ma,[2,382]),a(ma,[2,383]),{222:[2,385]},a([30,31,192,222,242,259,302,303,304,305,306,307,308,309],[2,132],{225:445,226:446,227:447,229:448,237:[1,450],271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,301:[1,449]}),a(Ab,[2,136],{233:451,234:452,283:Mb,298:Nb}),a(Bb,[2,138]),a(Bb,[2,141]),a(Bb,[2,142]),a(Bb,[2,143],{28:ob,163:pb}),a(Bb,[2,144]),a(Bb,[2,145]),a(Bb,[2,146]),a(Bb,[2,139]),a(Bb,[2,140]),a(E,[2,35]),a(gb,[2,250]),a(Ob,[2,251],{91:455}),a(y,K,{140:122,136:456,139:457,40:[2,295]}),a(M,[2,52]),a(ib,[2,29],{80:[1,458]}),a(ib,[2,30],{78:[1,459]}),a(Ca,[2,24],{74:246,64:247,65:248,238:250,244:255,247:258,52:259,76:401,72:460,12:i,15:j,27:Db,28:Da,73:Eb,75:Fb,239:Ea,240:Fa,241:Ga,243:Ha,245:Ia,246:Ja,248:Ka,249:La,252:Ma,254:Na,277:l,309:Oa,310:Pa,311:Qa,312:Ra,313:Sa,314:Ta}),a(Pb,[2,243]),{28:Da,74:461},{28:Da,74:462},a(Pb,[2,27]),a(Pb,[2,28]),a([6,12,15,27,28,30,31,38,40,70,73,75,78,79,80,82,107,155,156,158,161,162,163,192,210,213,214,222,237,239,240,241,242,243,245,246,248,249,252,254,259,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,283,294,298,301,302,303,304,305,306,307,308,309,310,311,312,313,314],[2,147]),{31:[1,463]},{242:[1,464]},{242:[1,465]},a(ma,na,{215:176,29:466}),{31:[1,467]},{31:[1,468]},a(lb,[2,157]),a(ma,[2,327],{165:469}),a(ma,[2,326]),a(ma,na,{215:176,251:470,29:472,283:[1,471]}),a(Gb,[2,408]),a(ma,na,{215:176,29:473}),a(ma,[2,412]),a(ma,na,{215:176,29:474}),a(ma,[2,414]),a(rb,[2,20]),{27:[1,475]},{40:[2,6]},{40:[2,200]},a(y,sa,{151:200,149:476,150:477,38:Qb,40:Qb,82:Qb,107:Qb,155:Qb,156:Qb,158:Qb,161:Qb,162:Qb}),a(Hb,[2,310]),a(Jb,[2,67],{295:[1,478]}),a(Jb,[2,68]),a(Jb,[2,69]),{38:Q,54:479},{38:[2,319]},{38:[2,320]},{12:i,15:j,27:[1,481],52:482,160:480,277:l},a(Ib,[2,322]),a(Jb,[2,72]),a(ma,na,{215:176,29:483}),{12:i,15:j,27:R,28:Xa,52:145,79:T,88:146,163:U,172:360,185:361,189:484,210:Ya,213:W,214:X,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},a($a,[2,98],{297:[1,485]}),a(Rb,[2,364],{198:486,202:487,208:[1,488]}),a(xa,[2,115]),a($a,[2,373]),a(xa,[2,116]),a(Lb,[2,340]),a(Sb,[2,92],{242:[1,489]}),a(zb,[2,130]),{28:mb,163:nb,166:490},a(Ab,[2,387]),a(ab,bb,{231:299,235:300,223:491,203:cb,237:db,301:eb}),a(Bb,[2,390],{228:492}),a(Bb,[2,392],{230:493}),a(ma,[2,388]),a(ma,[2,389]),a(Bb,[2,395]),a(ab,bb,{235:300,231:494,203:cb,237:db,301:eb}),a(ma,[2,396]),a(ma,[2,397]),{12:i,15:j,31:[1,495],52:225,79:T,87:496,88:226,89:Aa,227:156,229:157,260:152,263:Y,264:Z,265:$,266:_,267:aa,268:ba,269:ca,270:da,271:ea,272:fa,273:ga,274:ha,275:ia,276:ja,277:l},{40:[1,497]},{40:[2,296]},{79:[1,498]},{79:[1,499]},a(Pb,[2,244]),a(Pb,[2,25]),a(Pb,[2,26]),a(lb,[2,150]),a(ma,na,{215:176,29:500}),a(ma,na,{215:176,29:501}),{31:[1,502],242:[1,503]},a(lb,[2,154]),a(lb,[2,156]),a(ma,na,{215:176,29:504}),{31:[1,505]},{31:[2,409]},{31:[2,410]},{31:[1,506]},{31:[2,415],192:[1,509],256:507,257:508},{31:[1,510]},a(Wa,[2,65]),a(Wa,[2,312]),{38:[2,318]},a(Jb,[2,70]),{38:Q,54:511},{38:[2,323]},{38:[2,324]},{30:[1,512]},a(Sb,[2,351],{190:513,242:[1,514]}),a(tb,[2,356]),a([12,15,27,28,31,79,163,210,213,214,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,297],[2,99],{298:[1,515]}),{12:i,15:j,28:[1,521],52:518,181:[1,519],199:516,200:517,203:[1,520],277:l},a(Rb,[2,365]),a(y,[2,344]),a(zb,[2,131]),a(Ab,[2,133]),a(Ab,[2,134],{234:452,233:522,283:Mb,298:Nb}),a(Ab,[2,135],{234:452,233:523,283:Mb,298:Nb}),a(Bb,[2,137]),a(gb,[2,39]),a(Ob,[2,252]),a(Tb,[2,297],{137:524,294:[1,525]}),a(ib,[2,31]),a(ib,[2,32]),{31:[1,526]},{242:[1,527]},a(lb,[2,81]),a(ma,[2,330]),{31:[1,528],242:[1,529]},a(lb,[2,158]),a(lb,[2,159]),{31:[1,530]},{31:[2,416]},{258:[1,531]},a(rb,[2,21]),a(Jb,[2,71]),{27:[1,532]},a([38,40,82,107,155,156,158,161,162,211,294],[2,95],{191:533,192:[1,534]}),a(y,[2,350]),a(tb,[2,358]),a(Ub,[2,101]),a(Ub,[2,362],{201:535,299:536,283:[1,538],300:[1,537],301:[1,539]}),a(Vb,[2,102]),a(Vb,[2,103]),{12:i,15:j,28:[1,543],52:544,163:[1,542],181:Wb,204:540,205:541,208:Xb,277:l},a(tb,ub,{195:355,194:547}),a(Bb,[2,391]),a(Bb,[2,393]),a(y,K,{140:122,138:548,139:549,40:Yb,107:Yb}),a(Tb,[2,298]),a(lb,[2,151]),a(ma,na,{215:176,29:550}),a(lb,[2,79]),a(ma,[2,328]),a(lb,[2,160]),{259:[1,551]},{31:[1,552]},a(Sb,[2,352]),a(Sb,[2,96],{195:355,193:553,194:554,12:ub,15:ub,28:ub,181:ub,203:ub,208:ub,277:ub,27:[1,555]}),a(Ub,[2,100]),a(Ub,[2,363]),a(Ub,[2,359]),a(Ub,[2,360]),a(Ub,[2,361]),a(Vb,[2,104]),a(Vb,[2,106]),a(Vb,[2,107]),a(Zb,[2,366],{206:556}),a(Vb,[2,109]),a(Vb,[2,110]),{12:i,15:j,52:557,181:[1,558],277:l},{31:[1,559]},a(qa,[2,60]),a(qa,[2,300]),{31:[1,560]},{260:561,267:aa,268:ba,269:ca,270:da},a(Jb,[2,73]),a(y,xb,{182:367,180:562}),a(y,[2,353]),a(y,[2,354]),{12:i,15:j,31:[2,368],52:544,181:Wb,205:564,207:563,208:Xb,277:l},a(Vb,[2,111]),a(Vb,[2,112]),a(Vb,[2,105]),a(lb,[2,152]),{31:[2,161]},a(Sb,[2,97]),{31:[1,565]},{31:[2,369],297:[1,566]},a(Vb,[2,108]),a(Zb,[2,367])],defaultActions:{5:[2,189],6:[2,190],22:[2,1],23:[2,2],24:[2,196],74:[2,269],89:[2,230],94:[2,332],204:[2,214],205:[2,83],268:[2,406],307:[2,293],308:[2,294],378:[2,385],421:[2,6],422:[2,200],429:[2,319],430:[2,320],457:[2,296],471:[2,409],472:[2,410],478:[2,318],481:[2,323],482:[2,324],508:[2,416],561:[2,161]},parseError:function(b,c){if(!c.recoverable)throw new Error(b);this.trace(b)},parse:function(b){function v(){var a;return a=p.lex()||n,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],f=[null],g=[],h=this.table,i="",j=0,k=0,l=0,m=2,n=1,o=g.slice.call(arguments,1),p=Object.create(this.lexer),q={yy:{}};for(var r in this.yy)Object.prototype.hasOwnProperty.call(this.yy,r)&&(q.yy[r]=this.yy[r]);p.setInput(b,q.yy),q.yy.lexer=p,q.yy.parser=this,void 0===p.yylloc&&(p.yylloc={});var s=p.yylloc;g.push(s);var t=p.options&&p.options.ranges;"function"==typeof q.yy.parseError?this.parseError=q.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var w,x,y,z,B,D,E,F,G,C={};;){if(y=d[d.length-1],this.defaultActions[y]?z=this.defaultActions[y]:(null!==w&&void 0!==w||(w=v()),z=h[y]&&h[y][w]),void 0===z||!z.length||!z[0]){var H="";G=[];for(D in h[y])this.terminals_[D]&&D>m&&G.push("'"+this.terminals_[D]+"'");H=p.showPosition?"Parse error on line "+(j+1)+":\n"+p.showPosition()+"\nExpecting "+G.join(", ")+", got '"+(this.terminals_[w]||w)+"'":"Parse error on line "+(j+1)+": Unexpected "+(w==n?"end of input":"'"+(this.terminals_[w]||w)+"'"),this.parseError(H,{text:p.match,token:this.terminals_[w]||w,line:p.yylineno,loc:s,expected:G})}if(z[0]instanceof Array&&z.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+w);switch(z[0]){case 1:d.push(w),f.push(p.yytext),g.push(p.yylloc),d.push(z[1]),w=null,x?(w=x,x=null):(k=p.yyleng,i=p.yytext,j=p.yylineno,s=p.yylloc,l>0&&l--);break;case 2:if(E=this.productions_[z[1]][1],C.$=f[f.length-E],C._$={first_line:g[g.length-(E||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(E||1)].first_column,last_column:g[g.length-1].last_column},t&&(C._$.range=[g[g.length-(E||1)].range[0],g[g.length-1].range[1]]),void 0!==(B=this.performAction.apply(C,[i,k,j,q.yy,z[1],f,g].concat(o))))return B;E&&(d=d.slice(0,-1*E*2),f=f.slice(0,-1*E),g=g.slice(0,-1*E)),d.push(this.productions_[z[1]][0]),f.push(C.$),g.push(C._$),F=h[d[d.length-2]][d[d.length-1]],d.push(F);break;case 3:return!0}}return!0}},_b="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ac=_b+"type",bc=_b+"first",cc=_b+"rest",dc=_b+"nil",ec="http://www.w3.org/2001/XMLSchema#",fc=ec+"integer",gc=ec+"decimal",hc=ec+"double",ic=ec+"boolean",jc='"true"^^'+ic,kc='"false"^^'+ic,lc="",mc="",nc="",Fc=0;Oc._resetBlanks=function(){Fc=0};var Gc=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Hc={"\\":"\\","'":"'",'"':'"',t:"\t",b:"\b",n:"\n",r:"\r",f:"\f"},Ic=String.fromCharCode,Nc=function(){return{EOF:1,parseError:function(b,c){if(!this.yy.parser)throw new Error(b);this.yy.parser.parseError(b,c)},setInput:function(a,b){return this.yy=b||this.yy||{},this._input=a,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];return this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a,a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},test_match:function(a,b){var c,d,e;if(this.options.backtrack_lexer&&(e={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(e.yylloc.range=this.yylloc.range.slice(0))),d=a[0].match(/(?:\r\n?|\n).*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length},this.yytext+=a[0],this.match+=a[0],this.matches=a,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(a[0].length),this.matched+=a[0],c=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),c)return c;if(this._backtrack){for(var f in e)this[f]=e[f];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d;this._more||(this.yytext="",this.match="");for(var e=this._currentRules(),f=0;f<e.length;f++)if((c=this._input.match(this.rules[e[f]]))&&(!b||c[0].length>b[0].length)){if(b=c,d=f,this.options.backtrack_lexer){if(!1!==(a=this.test_match(c,e[f])))return a;if(this._backtrack){b=!1;continue}return!1}if(!this.options.flex)break}return b?!1!==(a=this.test_match(b,e[d]))&&a:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var b=this.next();return b||this.lex()},begin:function(b){this.conditionStack.push(b)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(b){return b=this.conditionStack.length-1-Math.abs(b||0),b>=0?this.conditionStack[b]:"INITIAL"},pushState:function(b){this.begin(b)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(b,c,d,e){switch(d){case 0:break;case 1:return 11;case 2:return 14;case 3:return 23;case 4:return 280;case 5:return 281;case 6:return 28;case 7:return 30;case 8:return 31;case 9:return 283;case 10:return 33;case 11:return 37;case 12:return 38;case 13:return 40;case 14:return 42;case 15:return 47;case 16:return 50;case 17:return 286;case 18:return 60;case 19:return 61;case 20:return 67;case 21:return 70;case 22:return 73;case 23:return 75;case 24:return 78;case 25:return 80;case 26:return 82;case 27:return 192;case 28:return 95;case 29:return 287;case 30:return 128;case 31:return 288;case 32:return 289;case 33:return 105;case 34:return 290;case 35:return 104;case 36:return 291;case 37:return 292;case 38:return 108;case 39:return 110;case 40:return 111;case 41:return 126;case 42:return 120;case 43:return 121;case 44:return 123;case 45:return 129;case 46:return 107;case 47:return 293;case 48:return 294;case 49:return 155;case 50:return 158;case 51:return 162;case 52:return 89;case 53:return 156;case 54:return 295;case 55:return 161;case 56:return 242;case 57:return 181;case 58:return 297;case 59:return 298;case 60:return 208;case 61:return 300;case 62:return 301;case 63:return 203;case 64:return 210;case 65:return 211;case 66:return 302;case 67:return 303;case 68:return 259;case 69:return 304;case 70:return 305;case 71:return 306;case 72:return 307;case 73:return 308;case 74:return 222;case 75:return 309;case 76:return 237;case 77:return 245;case 78:return 246;case 79:return 239;case 80:return 240;case 81:return 241;case 82:return 310;case 83:return 311;case 84:return 243;case 85:return 313;case 86:return 312;case 87:return 314;case 88:return 248;case 89:return 249;case 90:return 252;case 91:return 254;case 92:return 258;case 93:return 262;case 94:return 265;case 95:return 266;case 96:return 12;case 97:return 15;case 98:return 277;case 99:return 213;case 100:return 27;case 101:return 261;case 102:return 79;case 103:return 263;case 104:return 264;case 105:return 271;case 106:return 272;case 107:return 273;case 108:return 274;case 109:return 275;case 110:return 276;case 111:return"EXPONENT";case 112:return 267;case 113:return 268;case 114:return 269;case 115:return 270;case 116:return 163;case 117:return 214;case 118:return 6;case 119:return"INVALID";case 120:console.log(c.yytext)}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT\s+DATA)/i,/^(?:DELETE\s+DATA)/i,/^(?:DELETE\s+WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(<([^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?))/i,/^(?:([\?\$]((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(([^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*'))/i,/^(?:("(([^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*"))/i,/^(?:('''(('|'')?([^'\\]|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))))*'''))/i,/^(?:("""(("|"")?([^\"\\]|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],inclusive:!0}}}}();return $b.lexer=Nc,Oc.prototype=$b,$b.Parser=Oc,new Oc}();void 0!==a&&void 0!==c&&(c.parser=e,c.Parser=e.Parser,c.parse=function(){return e.parse.apply(e,arguments)},c.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),d.exit(1));var f=a("fs").readFileSync(a("path").normalize(e[1]),"utf8");return c.parser.parse(f)},void 0!==b&&a.main===b&&c.main(d.argv.slice(1)))}).call(this,a("_process"))},{_process:3,fs:3,path:3}],129:[function(a,b,c){var d=a("./lib/SparqlParser").Parser,e=a("./lib/SparqlGenerator");b.exports={Parser:function(a){var b={};for(var c in a||{})b[c]=a[c];var e=new d;return e.parse=function(){return d.prefixes=Object.create(b),d.prototype.parse.apply(e,arguments)},e._resetBlanks=d._resetBlanks,e},Generator:e}},{"./lib/SparqlGenerator":127,"./lib/SparqlParser":128}],130:[function(a,b,c){(function(d,e){function l(a){return function(b){var c,d=Array.prototype.slice.call(arguments,1);if("function"==typeof d[d.length-1]){var e=d[d.length-1];c=function(a){a&&e(a)}}var f=new o(this,b,c);return a.call(this,f,d)}}function m(a,b){for(var c in b.prototype)a.prototype[c]=b.prototype[c]}var f=a("node-pre-gyp"),g=a("path"),h=f.find(g.resolve(g.join(e,"../package.json"))),i=a(h),j=b.exports=c=i,k=a("events").EventEmitter;j.cached={Database:function(a,b,c){function f(){h.call(e,null)}if(""===a||":memory:"===a)return new n(a,b,c);var e;if(a=g.resolve(a),j.cached.objects[a]){e=j.cached.objects[a];var h="number"==typeof b?c:b;"function"==typeof h&&(e.open?d.nextTick(f):e.once("open",f))}else e=j.cached.objects[a]=new n(a,b,c);return e},objects:{}};var n=j.Database,o=j.Statement;m(n,k),m(o,k),n.prototype.prepare=l(function(a,b){return b.length?a.bind.apply(a,b):a}),n.prototype.run=l(function(a,b){return a.run.apply(a,b).finalize(),this}),n.prototype.get=l(function(a,b){return a.get.apply(a,b).finalize(),this}),n.prototype.all=l(function(a,b){return a.all.apply(a,b).finalize(),this}),n.prototype.each=l(function(a,b){return a.each.apply(a,b).finalize(),this}),n.prototype.map=l(function(a,b){return a.map.apply(a,b).finalize(),this}),o.prototype.map=function(){var a=Array.prototype.slice.call(arguments),b=a.pop();return a.push(function(a,c){if(a)return b(a);var d={};if(c.length){var e=Object.keys(c[0]),f=e[0];if(e.length>2)for(var g=0;g<c.length;g++)d[c[g][f]]=c[g];else{var h=e[1];for(g=0;g<c.length;g++)d[c[g][f]]=c[g][h]}}b(a,d)}),this.all.apply(this,a)};var p=!1,q=["trace","profile","insert","update","delete"];n.prototype.addListener=n.prototype.on=function(a){var b=k.prototype.addListener.apply(this,arguments);return q.indexOf(a)>=0&&this.configure(a,!0),b},n.prototype.removeListener=function(a){var b=k.prototype.removeListener.apply(this,arguments);return q.indexOf(a)>=0&&!this._events[a]&&this.configure(a,!1),b},n.prototype.removeAllListeners=function(a){var b=k.prototype.removeAllListeners.apply(this,arguments);return q.indexOf(a)>=0&&this.configure(a,!1),b},j.verbose=function(){if(!p){var b=a("./trace");["prepare","get","run","all","each","map","close","exec"].forEach(function(a){b.extendTrace(n.prototype,a)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(a){b.extendTrace(o.prototype,a)}),p=!0}return this}}).call(this,a("_process"),"/node_modules\\sqlite3\\lib")},{"./trace":131,_process:15,events:8,"node-pre-gyp":132,path:14}],131:[function(a,b,c){(function(b){function e(a,b,c){var e=a[b];a[b]=function(){var g=new Error,h=a.constructor.name+"#"+b+"("+Array.prototype.slice.call(arguments).map(function(a){return d.inspect(a,!1,0)}).join(", ")+")";void 0===c&&(c=-1),c<0&&(c+=arguments.length);var i=arguments[c];return"function"==typeof arguments[c]&&(arguments[c]=function(){try{return i.apply(this,arguments)}catch(a){throw a&&a.stack&&!a.__augmented&&(a.stack=f(a).join("\n"),a.stack+="\n--> in "+h,a.stack+="\n"+f(g).slice(1).join("\n"),a.__augmented=!0),a}}),e.apply(this,arguments)}}function f(a){return a.stack.split("\n").filter(function(a){return a.indexOf(b)<0})}var d=a("util");c.extendTrace=e}).call(this,"/node_modules\\sqlite3\\lib\\trace.js")},{util:43}],132:[function(a,b,c){(function(d,e){"use strict";function m(){var b=this;this.commands={},k.forEach(function(c){b.commands[c]=function(d,e){return h.verbose("command",c,d),a("./"+c)(b,d,e)}})}b.exports=c;var f=a("path"),g=a("nopt"),h=a("npmlog"),i=a("events").EventEmitter,j=a("util").inherits,k=["clean","install","reinstall","build","rebuild","package","testpackage","publish","unpublish","info","testbinary","reveal","configure"],l={};h.heading="node-pre-gyp",c.find=a("./pre-binding").find,j(m,i),c.Run=m;var n=m.prototype;n.package=a("../package"),n.configDefs={help:Boolean,arch:String,debug:Boolean,directory:String,proxy:String,loglevel:String},n.shorthands={release:"--no-debug",C:"--directory",debug:"--debug",j:"--jobs",silent:"--loglevel=silent",silly:"--loglevel=silly",verbose:"--loglevel=verbose"},n.aliases=l,n.parseArgv=function(b){this.opts=g(this.configDefs,this.shorthands,b),this.argv=this.opts.argv.remain.slice();var c=this.todo=[];b=this.argv.map(function(a){return a in this.aliases&&(a=this.aliases[a]),a},this),b.slice().forEach(function(a){if(a in this.commands){var d=b.splice(0,b.indexOf(a));b.shift(),c.length>0&&(c[c.length-1].args=d),c.push({name:a,args:[]})}},this),c.length>0&&(c[c.length-1].args=b.splice(0));var e="npm_config_";Object.keys(d.env).forEach(function(a){if(0===a.indexOf(e)){var b=d.env[a];a===e+"loglevel"?h.level=b:(a=a.substring(e.length),"argv"===a?this.opts.argv&&this.opts.argv.remain&&this.opts.argv.remain.length||(this.opts[a]=b):this.opts[a]=b)}},this),this.opts.loglevel&&(h.level=this.opts.loglevel),h.resume()},n.usage=function(){return["","  Usage: node-pre-gyp <command> [options]","","  where <command> is one of:",k.map(function(b){return"    - "+b+" - "+a("./"+b).usage}).join("\n"),"","node-pre-gyp@"+this.version+"  "+f.resolve(e,".."),"node@"+d.versions.node].join("\n")},Object.defineProperty(n,"version",{get:function(){return this.package.version},enumerable:!0})}).call(this,a("_process"),"/node_modules\\sqlite3\\node_modules\\node-pre-gyp\\lib")},{"../package":190,"./pre-binding":133,_process:15,events:8,nopt:136,npmlog:138,path:14,util:43}],133:[function(a,b,c){"use strict";var d=a("../lib/util/versioning.js"),e=a("fs").existsSync||a("path").existsSync,f=a("path");b.exports=c,c.usage="Finds the require path for the node-pre-gyp installed module",c.validate=function(a){d.validate_config(a)},c.find=function(b,c){if(!e(b))throw new Error("package.json does not exist at "+b);var g=a(b);return d.validate_config(g),c=c||{},c.module_root||(c.module_root=f.dirname(b)),d.evaluate(g,c).module}},{"../lib/util/versioning.js":135,fs:1,path:14}],134:[function(a,b,c){b.exports={"0.1.14":{node_abi:null,v8:"1.3"},"0.1.15":{node_abi:null,v8:"1.3"},"0.1.16":{node_abi:null,v8:"1.3"},"0.1.17":{node_abi:null,v8:"1.3"},"0.1.18":{node_abi:null,v8:"1.3"},"0.1.19":{node_abi:null,v8:"2.0"},"0.1.20":{node_abi:null,v8:"2.0"},"0.1.21":{node_abi:null,v8:"2.0"},"0.1.22":{node_abi:null,v8:"2.0"},"0.1.23":{node_abi:null,v8:"2.0"},"0.1.24":{node_abi:null,v8:"2.0"},"0.1.25":{node_abi:null,v8:"2.0"},"0.1.26":{node_abi:null,v8:"2.0"},"0.1.27":{node_abi:null,v8:"2.1"},"0.1.28":{node_abi:null,v8:"2.1"},"0.1.29":{node_abi:null,v8:"2.1"},"0.1.30":{node_abi:null,v8:"2.1"},"0.1.31":{node_abi:null,v8:"2.1"},"0.1.32":{node_abi:null,v8:"2.1"},"0.1.33":{node_abi:null,v8:"2.1"},"0.1.90":{node_abi:null,v8:"2.2"},"0.1.91":{node_abi:null,v8:"2.2"},"0.1.92":{node_abi:null,v8:"2.2"},"0.1.93":{node_abi:null,v8:"2.2"},"0.1.94":{node_abi:null,v8:"2.2"},"0.1.95":{node_abi:null,v8:"2.2"},"0.1.96":{node_abi:null,v8:"2.2"},"0.1.97":{node_abi:null,v8:"2.2"},"0.1.98":{node_abi:null,v8:"2.2"},"0.1.99":{node_abi:null,v8:"2.2"},"0.1.100":{node_abi:null,v8:"2.2"},"0.1.101":{node_abi:null,v8:"2.3"},"0.1.102":{node_abi:null,v8:"2.3"},"0.1.103":{node_abi:null,v8:"2.3"},"0.1.104":{node_abi:null,v8:"2.3"},"0.2.0":{node_abi:1,v8:"2.3"},"0.2.1":{node_abi:1,v8:"2.3"},"0.2.2":{node_abi:1,v8:"2.3"},"0.2.3":{node_abi:1,v8:"2.3"},"0.2.4":{node_abi:1,v8:"2.3"},"0.2.5":{node_abi:1,v8:"2.3"},"0.2.6":{node_abi:1,v8:"2.3"},"0.3.0":{node_abi:1,v8:"2.5"},"0.3.1":{node_abi:1,v8:"2.5"},"0.3.2":{node_abi:1,v8:"3.0"},"0.3.3":{node_abi:1,v8:"3.0"},"0.3.4":{node_abi:1,v8:"3.0"},"0.3.5":{node_abi:1,v8:"3.0"},"0.3.6":{node_abi:1,v8:"3.0"},"0.3.7":{node_abi:1,v8:"3.0"},"0.3.8":{node_abi:1,v8:"3.1"},"0.4.0":{node_abi:1,v8:"3.1"},"0.4.1":{node_abi:1,v8:"3.1"},"0.4.2":{node_abi:1,v8:"3.1"},"0.4.3":{node_abi:1,v8:"3.1"},"0.4.4":{node_abi:1,v8:"3.1"},"0.4.5":{node_abi:1,v8:"3.1"},"0.4.6":{node_abi:1,v8:"3.1"},"0.4.7":{node_abi:1,v8:"3.1"},"0.4.8":{node_abi:1,v8:"3.1"},"0.4.9":{node_abi:1,v8:"3.1"},"0.4.10":{node_abi:1,v8:"3.1"},"0.4.11":{node_abi:1,v8:"3.1"},"0.4.12":{node_abi:1,v8:"3.1"},"0.5.0":{node_abi:1,v8:"3.1"},"0.5.1":{node_abi:1,v8:"3.4"},"0.5.2":{node_abi:1,v8:"3.4"},"0.5.3":{node_abi:1,v8:"3.4"},"0.5.4":{node_abi:1,v8:"3.5"},"0.5.5":{node_abi:1,v8:"3.5"},"0.5.6":{node_abi:1,v8:"3.6"},"0.5.7":{node_abi:1,v8:"3.6"},"0.5.8":{node_abi:1,v8:"3.6"},"0.5.9":{node_abi:1,v8:"3.6"},"0.5.10":{node_abi:1,v8:"3.7"},"0.6.0":{node_abi:1,v8:"3.6"},"0.6.1":{node_abi:1,v8:"3.6"},"0.6.2":{node_abi:1,v8:"3.6"},"0.6.3":{node_abi:1,v8:"3.6"},"0.6.4":{node_abi:1,v8:"3.6"},"0.6.5":{node_abi:1,v8:"3.6"},"0.6.6":{node_abi:1,v8:"3.6"},"0.6.7":{node_abi:1,v8:"3.6"},"0.6.8":{node_abi:1,v8:"3.6"},"0.6.9":{node_abi:1,v8:"3.6"},"0.6.10":{node_abi:1,v8:"3.6"},"0.6.11":{node_abi:1,v8:"3.6"},"0.6.12":{node_abi:1,v8:"3.6"},"0.6.13":{node_abi:1,v8:"3.6"},"0.6.14":{node_abi:1,v8:"3.6"},"0.6.15":{node_abi:1,v8:"3.6"},"0.6.16":{node_abi:1,v8:"3.6"},"0.6.17":{node_abi:1,v8:"3.6"},"0.6.18":{node_abi:1,v8:"3.6"},"0.6.19":{node_abi:1,v8:"3.6"},"0.6.20":{node_abi:1,v8:"3.6"},"0.6.21":{node_abi:1,v8:"3.6"},"0.7.0":{node_abi:1,v8:"3.8"},"0.7.1":{node_abi:1,v8:"3.8"},"0.7.2":{node_abi:1,v8:"3.8"},"0.7.3":{node_abi:1,v8:"3.9"},"0.7.4":{node_abi:1,v8:"3.9"},"0.7.5":{node_abi:1,v8:"3.9"},"0.7.6":{node_abi:1,v8:"3.9"},"0.7.7":{node_abi:1,v8:"3.9"},"0.7.8":{node_abi:1,v8:"3.9"},"0.7.9":{node_abi:1,v8:"3.11"},"0.7.10":{node_abi:1,v8:"3.9"},"0.7.11":{node_abi:1,v8:"3.11"},"0.7.12":{node_abi:1,v8:"3.11"},"0.8.0":{node_abi:1,v8:"3.11"},"0.8.1":{node_abi:1,v8:"3.11"},"0.8.2":{node_abi:1,v8:"3.11"},"0.8.3":{node_abi:1,v8:"3.11"},"0.8.4":{node_abi:1,v8:"3.11"},"0.8.5":{node_abi:1,v8:"3.11"},"0.8.6":{node_abi:1,v8:"3.11"},"0.8.7":{node_abi:1,v8:"3.11"},"0.8.8":{node_abi:1,v8:"3.11"},"0.8.9":{node_abi:1,v8:"3.11"},"0.8.10":{node_abi:1,v8:"3.11"},"0.8.11":{node_abi:1,v8:"3.11"},"0.8.12":{node_abi:1,v8:"3.11"},"0.8.13":{node_abi:1,v8:"3.11"},"0.8.14":{node_abi:1,v8:"3.11"},"0.8.15":{node_abi:1,v8:"3.11"},"0.8.16":{node_abi:1,v8:"3.11"},"0.8.17":{node_abi:1,v8:"3.11"},"0.8.18":{node_abi:1,v8:"3.11"},"0.8.19":{node_abi:1,v8:"3.11"},"0.8.20":{node_abi:1,v8:"3.11"},"0.8.21":{node_abi:1,v8:"3.11"},"0.8.22":{node_abi:1,v8:"3.11"},"0.8.23":{node_abi:1,v8:"3.11"},"0.8.24":{node_abi:1,v8:"3.11"},"0.8.25":{node_abi:1,v8:"3.11"},"0.8.26":{node_abi:1,v8:"3.11"},"0.8.27":{node_abi:1,v8:"3.11"},"0.8.28":{node_abi:1,v8:"3.11"},"0.9.0":{node_abi:1,v8:"3.11"},"0.9.1":{node_abi:10,v8:"3.11"},"0.9.2":{node_abi:10,v8:"3.11"},"0.9.3":{node_abi:10,v8:"3.13"},"0.9.4":{node_abi:10,v8:"3.13"},"0.9.5":{node_abi:10,v8:"3.13"},"0.9.6":{node_abi:10,v8:"3.15"},"0.9.7":{node_abi:10,v8:"3.15"},"0.9.8":{node_abi:10,v8:"3.15"},"0.9.9":{node_abi:11,v8:"3.15"},"0.9.10":{node_abi:11,v8:"3.15"},"0.9.11":{node_abi:11,v8:"3.14"},"0.9.12":{node_abi:11,v8:"3.14"},"0.10.0":{node_abi:11,v8:"3.14"},"0.10.1":{node_abi:11,v8:"3.14"},"0.10.2":{node_abi:11,v8:"3.14"},"0.10.3":{node_abi:11,v8:"3.14"},"0.10.4":{node_abi:11,v8:"3.14"},"0.10.5":{node_abi:11,v8:"3.14"},"0.10.6":{node_abi:11,v8:"3.14"},"0.10.7":{node_abi:11,v8:"3.14"},"0.10.8":{node_abi:11,v8:"3.14"},"0.10.9":{node_abi:11,v8:"3.14"},"0.10.10":{node_abi:11,v8:"3.14"},"0.10.11":{node_abi:11,v8:"3.14"},"0.10.12":{node_abi:11,v8:"3.14"},"0.10.13":{node_abi:11,v8:"3.14"},"0.10.14":{node_abi:11,v8:"3.14"},"0.10.15":{node_abi:11,v8:"3.14"},"0.10.16":{node_abi:11,v8:"3.14"},"0.10.17":{node_abi:11,v8:"3.14"},"0.10.18":{node_abi:11,v8:"3.14"},"0.10.19":{node_abi:11,v8:"3.14"},"0.10.20":{node_abi:11,v8:"3.14"},"0.10.21":{node_abi:11,v8:"3.14"},"0.10.22":{node_abi:11,v8:"3.14"},"0.10.23":{node_abi:11,v8:"3.14"},"0.10.24":{node_abi:11,v8:"3.14"},"0.10.25":{node_abi:11,v8:"3.14"},"0.10.26":{node_abi:11,v8:"3.14"},"0.10.27":{node_abi:11,v8:"3.14"},"0.10.28":{node_abi:11,v8:"3.14"},"0.10.29":{node_abi:11,v8:"3.14"},"0.10.30":{node_abi:11,v8:"3.14"},"0.10.31":{node_abi:11,v8:"3.14"},"0.10.32":{node_abi:11,v8:"3.14"},"0.10.33":{node_abi:11,v8:"3.14"},"0.10.34":{node_abi:11,v8:"3.14"},"0.10.35":{node_abi:11,v8:"3.14"},"0.10.36":{node_abi:11,v8:"3.14"},"0.10.37":{node_abi:11,v8:"3.14"},"0.10.38":{node_abi:11,v8:"3.14"},"0.10.39":{node_abi:11,v8:"3.14"},"0.10.40":{node_abi:11,v8:"3.14"},"0.10.41":{node_abi:11,v8:"3.14"},"0.10.42":{node_abi:11,v8:"3.14"},"0.10.43":{node_abi:11,v8:"3.14"},"0.10.44":{node_abi:11,v8:"3.14"},"0.10.45":{node_abi:11,v8:"3.14"},"0.10.46":{node_abi:11,v8:"3.14"},"0.10.47":{node_abi:11,v8:"3.14"},"0.10.48":{node_abi:11,v8:"3.14"},"0.11.0":{node_abi:12,v8:"3.17"},"0.11.1":{node_abi:12,v8:"3.18"},"0.11.2":{node_abi:12,v8:"3.19"},"0.11.3":{node_abi:12,v8:"3.19"},"0.11.4":{node_abi:12,v8:"3.20"},"0.11.5":{node_abi:12,v8:"3.20"},"0.11.6":{node_abi:12,v8:"3.20"},"0.11.7":{node_abi:12,v8:"3.20"},"0.11.8":{node_abi:13,v8:"3.21"},"0.11.9":{node_abi:13,v8:"3.22"},"0.11.10":{node_abi:13,v8:"3.22"},"0.11.11":{node_abi:14,v8:"3.22"},"0.11.12":{node_abi:14,v8:"3.22"},"0.11.13":{node_abi:14,v8:"3.25"},"0.11.14":{node_abi:14,v8:"3.26"},"0.11.15":{node_abi:14,v8:"3.28"},"0.11.16":{node_abi:14,v8:"3.28"},"0.12.0":{node_abi:14,v8:"3.28"},"0.12.1":{node_abi:14,v8:"3.28"},"0.12.2":{node_abi:14,v8:"3.28"},"0.12.3":{node_abi:14,v8:"3.28"},"0.12.4":{node_abi:14,v8:"3.28"},"0.12.5":{node_abi:14,v8:"3.28"},"0.12.6":{node_abi:14,v8:"3.28"},"0.12.7":{node_abi:14,v8:"3.28"},"0.12.8":{node_abi:14,v8:"3.28"},"0.12.9":{node_abi:14,v8:"3.28"},"0.12.10":{node_abi:14,v8:"3.28"},"0.12.11":{node_abi:14,v8:"3.28"},"0.12.12":{node_abi:14,v8:"3.28"},"0.12.13":{node_abi:14,v8:"3.28"},"0.12.14":{node_abi:14,v8:"3.28"},"0.12.15":{node_abi:14,v8:"3.28"},"0.12.16":{node_abi:14,v8:"3.28"},"0.12.17":{node_abi:14,v8:"3.28"},"1.0.0":{node_abi:42,v8:"3.31"},"1.0.1":{node_abi:42,v8:"3.31"},"1.0.2":{node_abi:42,v8:"3.31"},"1.0.3":{node_abi:42,v8:"4.1"},"1.0.4":{node_abi:42,v8:"4.1"},"1.1.0":{node_abi:43,v8:"4.1"},"1.2.0":{node_abi:43,v8:"4.1"},"1.3.0":{node_abi:43,v8:"4.1"},"1.4.1":{node_abi:43,v8:"4.1"},"1.4.2":{node_abi:43,v8:"4.1"},"1.4.3":{node_abi:43,v8:"4.1"},"1.5.0":{node_abi:43,v8:"4.1"},"1.5.1":{node_abi:43,v8:"4.1"},"1.6.0":{node_abi:43,v8:"4.1"},"1.6.1":{node_abi:43,v8:"4.1"},"1.6.2":{node_abi:43,v8:"4.1"},"1.6.3":{node_abi:43,v8:"4.1"},"1.6.4":{node_abi:43,v8:"4.1"},"1.7.1":{node_abi:43,v8:"4.1"},"1.8.1":{node_abi:43,v8:"4.1"},"1.8.2":{node_abi:43,v8:"4.1"},"1.8.3":{node_abi:43,v8:"4.1"},"1.8.4":{node_abi:43,v8:"4.1"},"2.0.0":{node_abi:44,v8:"4.2"},"2.0.1":{node_abi:44,v8:"4.2"},"2.0.2":{node_abi:44,v8:"4.2"},"2.1.0":{node_abi:44,v8:"4.2"},"2.2.0":{node_abi:44,v8:"4.2"},"2.2.1":{node_abi:44,v8:"4.2"},"2.3.0":{node_abi:44,v8:"4.2"},"2.3.1":{node_abi:44,v8:"4.2"},"2.3.2":{node_abi:44,v8:"4.2"},"2.3.3":{node_abi:44,v8:"4.2"},"2.3.4":{node_abi:44,v8:"4.2"},"2.4.0":{node_abi:44,v8:"4.2"},"2.5.0":{node_abi:44,v8:"4.2"},"3.0.0":{node_abi:45,v8:"4.4"},"3.1.0":{node_abi:45,v8:"4.4"},"3.2.0":{node_abi:45,v8:"4.4"},"3.3.0":{node_abi:45,v8:"4.4"},"3.3.1":{node_abi:45,v8:"4.4"},"4.0.0":{node_abi:46,v8:"4.5"},"4.1.0":{node_abi:46,v8:"4.5"},"4.1.1":{node_abi:46,v8:"4.5"},"4.1.2":{node_abi:46,v8:"4.5"},"4.2.0":{node_abi:46,v8:"4.5"},"4.2.1":{node_abi:46,v8:"4.5"},"4.2.2":{node_abi:46,v8:"4.5"},"4.2.3":{node_abi:46,v8:"4.5"},"4.2.4":{node_abi:46,v8:"4.5"},"4.2.5":{node_abi:46,v8:"4.5"},"4.2.6":{node_abi:46,v8:"4.5"},"4.3.0":{node_abi:46,v8:"4.5"},"4.3.1":{node_abi:46,v8:"4.5"},"4.3.2":{node_abi:46,v8:"4.5"},"4.4.0":{node_abi:46,v8:"4.5"},"4.4.1":{node_abi:46,v8:"4.5"},"4.4.2":{node_abi:46,v8:"4.5"},"4.4.3":{node_abi:46,v8:"4.5"},"4.4.4":{node_abi:46,v8:"4.5"},"4.4.5":{node_abi:46,v8:"4.5"},"4.4.6":{node_abi:46,v8:"4.5"},"4.4.7":{node_abi:46,v8:"4.5"},"4.5.0":{node_abi:46,v8:"4.5"},"4.6.0":{node_abi:46,v8:"4.5"},"4.6.1":{node_abi:46,v8:"4.5"},"5.0.0":{node_abi:47,v8:"4.6"},"5.1.0":{node_abi:47,v8:"4.6"},"5.1.1":{node_abi:47,v8:"4.6"},"5.2.0":{node_abi:47,v8:"4.6"},"5.3.0":{node_abi:47,v8:"4.6"},"5.4.0":{node_abi:47,v8:"4.6"},"5.4.1":{node_abi:47,v8:"4.6"},"5.5.0":{node_abi:47,v8:"4.6"},"5.6.0":{node_abi:47,v8:"4.6"},"5.7.0":{node_abi:47,v8:"4.6"},"5.7.1":{node_abi:47,v8:"4.6"},"5.8.0":{node_abi:47,v8:"4.6"},"5.9.0":{node_abi:47,v8:"4.6"},"5.9.1":{node_abi:47,v8:"4.6"},"5.10.0":{node_abi:47,v8:"4.6"},"5.10.1":{node_abi:47,v8:"4.6"},"5.11.0":{node_abi:47,v8:"4.6"},"5.11.1":{node_abi:47,v8:"4.6"},"5.12.0":{node_abi:47,v8:"4.6"},"6.0.0":{node_abi:48,v8:"5.0"},"6.1.0":{node_abi:48,v8:"5.0"},"6.2.0":{node_abi:48,v8:"5.0"},"6.2.1":{node_abi:48,v8:"5.0"},"6.2.2":{node_abi:48,v8:"5.0"},"6.3.0":{node_abi:48,v8:"5.0"},"6.3.1":{node_abi:48,v8:"5.0"},"6.4.0":{node_abi:48,v8:"5.0"},"6.5.0":{node_abi:48,v8:"5.1"},"6.6.0":{node_abi:48,v8:"5.1"},"6.7.0":{node_abi:48,v8:"5.1"},"6.8.0":{node_abi:48,v8:"5.1"},"6.8.1":{node_abi:48,v8:"5.1"},"6.9.0":{node_abi:48,v8:"5.1"},"6.9.1":{node_abi:48,v8:"5.1"}}},{}],135:[function(a,b,c){(function(d){"use strict";function i(a,b){if(!a)throw new Error("get_electron_abi requires valid runtime arg");if(void 0===b)throw new Error("Empty target version is not supported if electron is the target.");var c=f.parse(b);return a+"-v"+c.major+"."+c.minor}function j(a,b){if(!a)throw new Error("get_node_webkit_abi requires valid runtime arg");if(void 0===b)throw new Error("Empty target version is not supported if node-webkit is the target.");return a+"-v"+b}function k(a,b){if(!a)throw new Error("get_node_abi requires valid runtime arg");if(!b)throw new Error("get_node_abi requires valid process.versions object");var c=f.parse(b.node);return 0===c.major&&c.minor%2?a+"-v"+b.node:b.modules?a+"-v"+ +b.modules:"v8-"+b.v8.split(".").slice(0,2).join(".")}function l(a,b){if(!a)throw new Error("get_runtime_abi requires valid runtime arg");if("node-webkit"===a)return j(a,b||d.versions["node-webkit"]);if("electron"===a)return i(a,b||d.versions.electron);if("node"!=a)throw new Error("Unknown Runtime: '"+a+"'");if(b){var c;if(h[b])c=h[b];else{var e=b.split(".").map(function(a){return+a});if(3!=e.length)throw new Error("Unknown target version: "+b);var f=e[0],g=e[1],l=e[2];if(1===f)for(;;){g>0&&--g,l>0&&--l;var m=f+"."+g+"."+l;if(h[m]){c=h[m],console.log("Warning: node-pre-gyp could not find exact match for "+b),console.log("Warning: but node-pre-gyp successfully choose "+m+" as ABI compatible target");break}if(0===g&&0===l)break}else if(0===f&&e[1]%2==0)for(;--l>0;){var n=f+"."+g+"."+l;if(h[n]){c=h[n],console.log("Warning: node-pre-gyp could not find exact match for "+b),console.log("Warning: but node-pre-gyp successfully choose "+n+" as ABI compatible target");break}}}if(!c)throw new Error("Unsupported target version: "+b);return k(a,{node:b,v8:c.v8+".0",modules:c.node_abi>1?c.node_abi:void 0})}return k(a,d.versions)}function n(a){var b=a.name+" package.json is not node-pre-gyp ready:\n",c=[];a.main||c.push("main"),a.version||c.push("version"),a.name||c.push("name"),a.binary||c.push("binary");var d=a.binary;if(m.forEach(function(a){c.indexOf("binary")>-1&&c.pop("binary"),d&&void 0!==d[a]||c.push("binary."+a)}),c.length>=1)throw new Error(b+"package.json must declare these properties: \n"+c.join("\n"));if(d){var e=g.parse(d.host).protocol;if("http:"===e)throw new Error("'host' protocol ("+e+") is invalid - only 'https:' is accepted")}}function o(a,b){return Object.keys(b).forEach(function(c){for(var d="{"+c+"}";a.indexOf(d)>-1;)a=a.replace(d,b[c])}),a}function p(a){return"/"!=a.slice(-1)?a+"/":a}function q(a){return a.replace(/\/\//g,"/")}function r(a){var b="node";return a["node-webkit"]?b="node-webkit":a.electron&&(b="electron"),b}b.exports=c;var h,e=a("path"),f=a("semver"),g=a("url");h=a(d.env.NODE_PRE_GYP_ABI_CROSSWALK?d.env.NODE_PRE_GYP_ABI_CROSSWALK:"./abi_crosswalk.json"),b.exports.get_electron_abi=i,b.exports.get_node_webkit_abi=j,b.exports.get_node_abi=k,b.exports.get_runtime_abi=l;var m=["module_name","module_path","host"];b.exports.validate_config=n,b.exports.get_process_runtime=r,b.exports.evaluate=function(a,b){b=b||{},n(a);var c=a.version,h=f.parse(c),i=b.runtime||r(d.versions),j={name:a.name,configuration:Boolean(b.debug)?"Debug":"Release",debug:b.debug,module_name:a.binary.module_name,version:h.version,prerelease:h.prerelease.length?h.prerelease.join("."):"",build:h.build.length?h.build.join("."):"",major:h.major,minor:h.minor,patch:h.patch,runtime:i,node_abi:l(i,b.target),target:b.target||"",platform:b.target_platform||d.platform,target_platform:b.target_platform||d.platform,arch:b.target_arch||d.arch,target_arch:b.target_arch||d.arch,module_main:a.main,toolset:b.toolset||""},k=d.env["npm_config_"+j.module_name+"_binary_host_mirror"]||a.binary.host;j.host=p(o(k,j)),j.module_path=o(a.binary.module_path,j),b.module_root?j.module_path=e.join(b.module_root,j.module_path):j.module_path=e.resolve(j.module_path),j.module=e.join(j.module_path,j.module_name+".node"),j.remote_path=a.binary.remote_path?q(p(o(a.binary.remote_path,j))):"";var m=a.binary.package_name?a.binary.package_name:"{module_name}-v{version}-{node_abi}-{platform}-{arch}.tar.gz";return j.package_name=o(m,j),j.staged_tarball=e.join("build/stage",j.remote_path,j.package_name),j.hosted_path=g.resolve(j.host,j.remote_path),j.hosted_tarball=g.resolve(j.hosted_path,j.package_name),j}}).call(this,a("_process"))},{"./abi_crosswalk.json":134,_process:15,path:14,semver:189,url:40}],136:[function(a,b,c){(function(d){function j(a,b,f,g){f=f||d.argv,a=a||{},b=b||{},"number"!=typeof g&&(g=2),e(a,b,f,g),f=f.slice(g);var h={},j=[],l=f,m=f.slice(0);return t(f,h,j,a,b),k(h,a,c.typeDefs),h.argv={remain:j,cooked:l,original:m},Object.defineProperty(h.argv,"toString",{value:function(){return this.original.map(JSON.stringify).join(" ")},enumerable:!1}),h}function k(a,b,d){d=d||c.typeDefs;var f={},g=[!1,!0,null,String,Array];Object.keys(a).forEach(function(h){if("argv"!==h){var i=a[h],j=Array.isArray(i),k=b[h];j||(i=[i]),k||(k=g),k===Array&&(k=g.concat(Array)),Array.isArray(k)||(k=[k]),e("val=%j",i),e("types=",k),i=i.map(function(g){if("string"==typeof g&&(e("string %j",g),g=g.trim(),"null"===g&&~k.indexOf(null)||"true"===g&&(~k.indexOf(!0)||~k.indexOf(Boolean))||"false"===g&&(~k.indexOf(!1)||~k.indexOf(Boolean))?(g=JSON.parse(g),e("jsonable %j",g)):~k.indexOf(Number)&&!isNaN(g)?(e("convert to number",g),g=+g):~k.indexOf(Date)&&!isNaN(Date.parse(g))&&(e("convert to date",g),g=new Date(g))),!b.hasOwnProperty(h))return g;!1!==g||!~k.indexOf(null)||~k.indexOf(!1)||~k.indexOf(Boolean)||(g=null);var i={};return i[h]=g,e("prevalidated val",i,g,b[h]),s(i,h,g,b[h],d)?(e("validated val",i,g,b[h]),i[h]):(c.invalidHandler?c.invalidHandler(h,g,b[h],a):!1!==c.invalidHandler&&e("invalid: "+h+"="+g,b[h]),f)}).filter(function(a){return a!==f}),i.length?j?(e(j,a[h],i),a[h]=i):a[h]=i[0]:delete a[h],e("k=%s val=%j",h,i,a[h])}})}function l(a,b,c){a[b]=String(c)}function m(a,b,c){if(!0===c)return!1;if(null===c)return!0;c=String(c);var e="win32"===d.platform?/^~(\/|\\)/:/^~\//;return c.match(e)&&d.env.HOME&&(c=g.resolve(d.env.HOME,c.substr(2))),a[b]=g.resolve(String(c)),!0}function n(a,b,c){if(e("validate Number %j %j %j",b,c,isNaN(c)),isNaN(c))return!1;a[b]=+c}function o(a,b,c){e("validate Date %j %j %j",b,c,Date.parse(c));var d=Date.parse(c);if(isNaN(d))return!1;a[b]=new Date(c)}function p(a,b,c){c=c instanceof Boolean?c.valueOf():"string"==typeof c?isNaN(c)?"null"!==c&&"false"!==c:!!+c:!!c,a[b]=c}function q(a,b,c){if(c=f.parse(String(c)),!c.host)return!1;a[b]=c.href}function r(a,b,c){if(!(c instanceof h))return!1;a[b]=c}function s(a,b,c,d,f){if(Array.isArray(d)){for(var g=0,h=d.length;g<h;g++)if(d[g]!==Array&&s(a,b,c,d[g],f))return!0;return delete a[b],!1}if(d===Array)return!0;if(d!==d)return e("Poison NaN",b,c,d),delete a[b],!1;if(c===d)return e("Explicitly allowed %j",c),a[b]=c,!0;for(var i=!1,j=Object.keys(f),g=0,h=j.length;g<h;g++){e("test type %j %j %j",b,c,j[g]);var k=f[j[g]];if(k&&(d&&d.name&&k.type&&k.type.name?d.name===k.type.name:d===k.type)){var l={};if(i=!1!==k.validate(l,b,c),c=l[b],i){a[b]=c;break}}}return e("OK? %j (%j %j %j)",i,b,c,j[g]),i||delete a[b],i}function t(a,b,c,d,f){e("parse",a,b,c);for(var h=i(Object.keys(d)),j=i(Object.keys(f)),k=0;k<a.length;k++){var l=a[k];if(e("arg",l),l.match(/^-{2,}$/)){c.push.apply(c,a.slice(k+1)),a[k]="--";break}var m=!1;if("-"===l.charAt(0)&&l.length>1){if(-1!==l.indexOf("=")){m=!0;var n=l.split("=");l=n.shift(),n=n.join("="),a.splice.apply(a,[k,1].concat([l,n]))}var o=u(l,f,j,h);if(e("arg=%j shRes=%j",l,o),o&&(e(l,o),a.splice.apply(a,[k,1].concat(o)),l!==o[0])){k--;continue}l=l.replace(/^-+/,"");for(var p=null;0===l.toLowerCase().indexOf("no-");)p=!p,l=l.substr(3);h[l]&&(l=h[l]);var q=d[l]===Array||Array.isArray(d[l])&&-1!==d[l].indexOf(Array);!d.hasOwnProperty(l)&&b.hasOwnProperty(l)&&(Array.isArray(b[l])||(b[l]=[b[l]]),q=!0);var r,s=a[k+1];if("boolean"==typeof p||d[l]===Boolean||Array.isArray(d[l])&&-1!==d[l].indexOf(Boolean)||void 0===d[l]&&!m||"false"===s&&(null===d[l]||Array.isArray(d[l])&&~d[l].indexOf(null))){r=!p,"true"!==s&&"false"!==s||(r=JSON.parse(s),s=null,p&&(r=!r),k++),Array.isArray(d[l])&&s&&(~d[l].indexOf(s)?(r=s,k++):"null"===s&&~d[l].indexOf(null)?(r=null,k++):s.match(/^-{2,}[^-]/)||isNaN(s)||!~d[l].indexOf(Number)?!s.match(/^-[^-]/)&&~d[l].indexOf(String)&&(r=s,k++):(r=+s,k++)),q?(b[l]=b[l]||[]).push(r):b[l]=r;continue}d[l]===String&&void 0===s&&(s=""),s&&s.match(/^-{2,}$/)&&(s=void 0,k--),r=void 0===s||s,q?(b[l]=b[l]||[]).push(r):b[l]=r,k++}else c.push(l)}}function u(a,b,c,d){if(a=a.replace(/^-+/,""),d[a]===a)return null;if(b[a])return b[a]&&!Array.isArray(b[a])&&(b[a]=b[a].split(/\s+/)),b[a];var f=b.___singles;f||(f=Object.keys(b).filter(function(a){return 1===a.length}).reduce(function(a,b){return a[b]=!0,a},{}),b.___singles=f,e("shorthand singles",f));var g=a.split("").filter(function(a){return f[a]});return g.join("")===a?g.map(function(a){return b[a]}).reduce(function(a,b){return a.concat(b)},[]):d[a]&&!b[a]?null:(c[a]&&(a=c[a]),b[a]&&!Array.isArray(b[a])&&(b[a]=b[a].split(/\s+/)),b[a])}var e=d.env.DEBUG_NOPT||d.env.NOPT_DEBUG?function(){console.error.apply(console,arguments)}:function(){},f=a("url"),g=a("path"),h=a("stream").Stream,i=a("abbrev");b.exports=c=j,c.clean=k,c.typeDefs={String:{type:String,validate:l},Boolean:{type:Boolean,validate:p},url:{type:f,validate:q},Number:{type:Number,validate:n},path:{type:g,validate:m},Stream:{type:h,validate:r},Date:{type:Date,validate:o}}}).call(this,a("_process"))},{_process:15,abbrev:137,path:14,stream:33,url:40}],137:[function(a,b,c){function d(){Object.defineProperty(Array.prototype,"abbrev",{value:function(){return e(this)},enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(Object.prototype,"abbrev",{value:function(){return e(Object.keys(this))},enumerable:!1,configurable:!0,writable:!0})}function e(a){1===arguments.length&&Array.isArray(a)||(a=Array.prototype.slice.call(arguments,0));for(var b=0,c=a.length,d=[];b<c;b++)d[b]="string"==typeof a[b]?a[b]:String(a[b]);d=d.sort(f);for(var e={},g="",b=0,c=d.length;b<c;b++){var h=d[b],i=d[b+1]||"",j=!0,k=!0;if(h!==i){for(var l=0,m=h.length;l<m;l++){var n=h.charAt(l);if(j=j&&n===i.charAt(l),k=k&&n===g.charAt(l),!j&&!k){l++;break}}if(g=h,l!==m)for(var o=h.substr(0,l);l<=m;l++)e[o]=h,o+=h.charAt(l);else e[h]=h}}return e}function f(a,b){return a===b?0:a>b?1:-1}b.exports=e.abbrev=e,e.monkeyPatch=d},{}],138:[function(a,b,c){(function(d){"use strict";var e=a("are-we-there-yet"),f=a("gauge"),g=a("events").EventEmitter,h=c=b.exports=new g,i=a("util"),j=a("set-blocking"),k=a("console-control-strings");j(!0);var l=d.stderr;Object.defineProperty(h,"stream",{set:function(a){l=a,this.gauge&&this.gauge.setWriteTo(l,l)},get:function(){return l}});var m;h.useColor=function(){return null!=m?m:l.isTTY},h.enableColor=function(){m=!0,this.gauge.setTheme({hasColor:m,hasUnicode:n})},h.disableColor=function(){m=!1,this.gauge.setTheme({hasColor:m,hasUnicode:n})},h.level="info",h.gauge=new f(l,{theme:{hasColor:h.useColor()},template:[{type:"progressbar",length:20},{type:"activityIndicator",kerning:1,length:1},{type:"section",default:""},":",{type:"logline",kerning:1,default:""}]}),h.tracker=new e.TrackerGroup,h.progressEnabled=!1;var n;h.enableUnicode=function(){n=!0,this.gauge.setTheme({hasColor:this.useColor(),hasUnicode:n})},h.disableUnicode=function(){n=!1,this.gauge.setTheme({hasColor:this.useColor(),hasUnicode:n})},h.setGaugeThemeset=function(a){this.gauge.setThemeset(a)},h.setGaugeTemplate=function(a){this.gauge.setTemplate(a)},h.enableProgress=function(){this.progressEnabled||(this.progressEnabled=!0,this._pause||(this.tracker.on("change",this.showProgress),this.gauge.enable(),this.showProgress()))},h.disableProgress=function(){this.progressEnabled&&(this.clearProgress(),this.progressEnabled=!1,this.tracker.removeListener("change",this.showProgress),this.gauge.disable())};var o=["newGroup","newItem","newStream"],p=function(a){return Object.keys(h).forEach(function(b){if("_"!==b[0]&&!o.filter(function(a){return a===b}).length&&!a[b]&&"function"==typeof h[b]){var c=h[b];a[b]=function(){return c.apply(h,arguments)}}}),a instanceof e.TrackerGroup&&o.forEach(function(b){var c=a[b];a[b]=function(){return p(c.apply(a,arguments))}}),a};o.forEach(function(a){h[a]=function(){return p(this.tracker[a].apply(this.tracker,arguments))}}),h.clearProgress=function(a){if(!this.progressEnabled)return a&&d.nextTick(a);this.gauge.hide(a)},h.showProgress=function(a,b){if(this.progressEnabled){var c={};a&&(c.section=a);var d=h.record[h.record.length-1];if(d){c.subsection=d.prefix;var e=h.disp[d.level]||d.level,f=this._format(e,h.style[d.level]);d.prefix&&(f+=" "+this._format(d.prefix,this.prefixStyle)),f+=" "+d.message.split(/\r?\n/)[0],c.logline=f}c.completed=b||this.tracker.completed(),this.gauge.show(c)}}.bind(h),h.pause=function(){this._paused=!0},h.resume=function(){if(this._paused){this._paused=!1;var a=this._buffer;this._buffer=[],a.forEach(function(a){this.emitLog(a)},this),this.progressEnabled&&this.enableProgress()}},h._buffer=[];var q=0;h.record=[],h.maxRecordSize=1e4,h.log=function(a,b,c){if(void 0===this.levels[a])return this.emit("error",new Error(i.format("Undefined log level: %j",a)));for(var e=new Array(arguments.length-2),f=null,g=2;g<arguments.length;g++){var h=e[g-2]=arguments[g];"object"==typeof h&&h&&h instanceof Error&&h.stack&&(h.stack=f=h.stack+"")}f&&e.unshift(f+"\n"),c=i.format.apply(i,e);var j={id:q++,level:a,prefix:String(b||""),message:c,messageRaw:e};this.emit("log",j),this.emit("log."+a,j),j.prefix&&this.emit(j.prefix,j),this.record.push(j);var k=this.maxRecordSize;if(this.record.length-k>k/10){var m=Math.floor(.9*k);this.record=this.record.slice(-1*m)}this.emitLog(j)}.bind(h),h.emitLog=function(a){if(this._paused)return void this._buffer.push(a);this.progressEnabled&&this.gauge.pulse(a.prefix);var b=this.levels[a.level];if(void 0!==b&&!(b<this.levels[this.level])&&(!(b>0)||isFinite(b))){var c=null!=h.disp[a.level]?h.disp[a.level]:a.level;this.clearProgress(),a.message.split(/\r?\n/).forEach(function(b){this.heading&&(this.write(this.heading,this.headingStyle),this.write(" ")),this.write(c,h.style[a.level]);var d=a.prefix||"";d&&this.write(" "),this.write(d,this.prefixStyle),this.write(" "+b+"\n")},this),this.showProgress()}},h._format=function(a,b){if(l){var c="";if(this.useColor()){b=b||{};var d=[];b.fg&&d.push(b.fg),b.bg&&d.push("bg"+b.bg[0].toUpperCase()+b.bg.slice(1)),b.bold&&d.push("bold"),b.underline&&d.push("underline"),b.inverse&&d.push("inverse"),d.length&&(c+=k.color(d)),b.beep&&(c+=k.beep())}return c+=a,this.useColor()&&(c+=k.color("reset")),c}},h.write=function(a,b){l&&l.write(this._format(a,b))},h.addLevel=function(a,b,c,d){null==d&&(d=a),this.levels[a]=b,this.style[a]=c,this[a]||(this[a]=function(){var b=new Array(arguments.length+1);b[0]=a;for(var c=0;c<arguments.length;c++)b[c+1]=arguments[c];return this.log.apply(this,b)}.bind(this)),this.disp[a]=d},h.prefixStyle={fg:"magenta"},h.headingStyle={fg:"white",bg:"black"},h.style={},h.levels={},h.disp={},h.addLevel("silly",-1/0,{inverse:!0},"sill"),h.addLevel("verbose",1e3,{fg:"blue",bg:"black"},"verb"),h.addLevel("info",2e3,{fg:"green"}),h.addLevel("http",3e3,{fg:"green",bg:"black"}),h.addLevel("warn",4e3,{fg:"black",bg:"yellow"},"WARN"),h.addLevel("error",5e3,{fg:"red",bg:"black"},"ERR!"),h.addLevel("silent",1/0),h.on("error",function(){})}).call(this,a("_process"))},{_process:15,"are-we-there-yet":139,"console-control-strings":159,events:8,gauge:163,"set-blocking":188,util:43}],139:[function(a,b,c){"use strict";c.TrackerGroup=a("./tracker-group.js"),c.Tracker=a("./tracker.js"),c.TrackerStream=a("./tracker-stream.js")},{"./tracker-group.js":156,"./tracker-stream.js":157,"./tracker.js":158}],140:[function(a,b,c){function d(a,b){if(!(this instanceof d))return new d(a,b);this.proto=a,this.target=b,this.methods=[],this.getters=[],this.setters=[],this.fluents=[]}b.exports=d,d.prototype.method=function(a){var b=this.proto,c=this.target;return this.methods.push(a),b[a]=function(){return this[c][a].apply(this[c],arguments)},this},d.prototype.access=function(a){return this.getter(a).setter(a)},d.prototype.getter=function(a){var b=this.proto,c=this.target;return this.getters.push(a),b.__defineGetter__(a,function(){return this[c][a]}),this},d.prototype.setter=function(a){var b=this.proto,c=this.target;return this.setters.push(a),b.__defineSetter__(a,function(b){return this[c][a]=b}),this},d.prototype.fluent=function(a){var b=this.proto,c=this.target;return this.fluents.push(a),b[a]=function(b){return void 0!==b?(this[c][a]=b,this):this[c][a]},this}},{}],141:[function(a,b,c){"use strict";function l(a){if(!(this instanceof l))return new l(a);g.call(this,a),h.call(this,a),a&&!1===a.readable&&(this.readable=!1),a&&!1===a.writable&&(this.writable=!1),this.allowHalfOpen=!0,a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",m)}function m(){this.allowHalfOpen||this._writableState.ended||e(n,this)}function n(a){a.end()}var d=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};b.exports=l;var e=a("process-nextick-args"),f=a("core-util-is");f.inherits=a("inherits");var g=a("./_stream_readable"),h=a("./_stream_writable");f.inherits(l,g);for(var i=d(h.prototype),j=0;j<i.length;j++){var k=i[j];l.prototype[k]||(l.prototype[k]=h.prototype[k])}},{"./_stream_readable":143,"./_stream_writable":145,"core-util-is":148,inherits:149,"process-nextick-args":151}],142:[function(a,b,c){"use strict";function f(a){if(!(this instanceof f))return new f(a);d.call(this,a)}b.exports=f;var d=a("./_stream_transform"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(f,d),f.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":144,"core-util-is":148,inherits:149}],143:[function(a,b,c){(function(c){"use strict";function p(a,b,c){if("function"==typeof a.prependListener)return a.prependListener(b,c);a._events&&a._events[b]?e(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]]:a.on(b,c)}function r(b,c){q=q||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof q&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.buffer=new n,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(o||(o=a("string_decoder/").StringDecoder),this.decoder=new o(b.encoding),this.encoding=b.encoding)}function s(b){if(q=q||a("./_stream_duplex"),!(this instanceof s))return new s(b);this._readableState=new r(b,this),this.readable=!0,b&&"function"==typeof b.read&&(this._read=b.read),h.call(this)}function t(a,b,c,d,e){var f=y(b,c);if(f)a.emit("error",f);else if(null===c)b.reading=!1,z(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var g=new Error("stream.push() after EOF");a.emit("error",g)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else{var i;!b.decoder||e||d||(c=b.decoder.write(c),i=!b.objectMode&&0===c.length),e||(b.reading=!1),i||(b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&A(a))),C(a,b)}else e||(b.reading=!1);return u(b)}function u(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function w(a){return a>=v?a=v:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function x(a,b){return a<=0||0===b.length&&b.ended?0:b.objectMode?1:a!==a?b.flowing&&b.length?b.buffer.head.data.length:b.length:(a>b.highWaterMark&&(b.highWaterMark=w(a)),a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0))}function y(a,b){var c=null;return i.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function z(a,b){if(!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,A(a)}}function A(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(m("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?d(B,a):B(a))}function B(a){m("emit readable"),a.emit("readable"),I(a)}function C(a,b){b.readingMore||(b.readingMore=!0,d(D,a,b))}function D(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(m("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function E(a){return function(){var b=a._readableState;m("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&g(a,"data")&&(b.flowing=!0,I(a))}}function F(a){m("readable nexttick read 0"),a.read(0)}function G(a,b){b.resumeScheduled||(b.resumeScheduled=!0,d(H,a,b))}function H(a,b){b.reading||(m("resume read 0"),a.read(0)),b.resumeScheduled=!1,b.awaitDrain=0,a.emit("resume"),I(a),b.flowing&&!b.reading&&a.read(0)}function I(a){var b=a._readableState;for(m("flow",b.flowing);b.flowing&&null!==a.read(););}function J(a,b){if(0===b.length)return null;var c;return b.objectMode?c=b.buffer.shift():!a||a>=b.length?(c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),b.buffer.clear()):c=K(a,b.buffer,b.decoder),c}function K(a,b,c){var d;return a<b.head.data.length?(d=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a)):d=a===b.head.data.length?b.shift():c?L(a,b):M(a,b),d}function L(a,b){var c=b.head,d=1,e=c.data;for(a-=e.length;c=c.next;){var f=c.data,g=a>f.length?f.length:a;if(g===f.length?e+=f:e+=f.slice(0,a),0===(a-=g)){g===f.length?(++d,c.next?b.head=c.next:b.head=b.tail=null):(b.head=c,c.data=f.slice(g));break}++d}return b.length-=d,e}function M(a,b){var c=j.allocUnsafe(a),d=b.head,e=1;for(d.data.copy(c),a-=d.data.length;d=d.next;){var f=d.data,g=a>f.length?f.length:a;if(f.copy(c,c.length-a,0,g),0===(a-=g)){g===f.length?(++e,d.next?b.head=d.next:b.head=b.tail=null):(b.head=d,d.data=f.slice(g));break}++e}return b.length-=e,c}function N(a){var b=a._readableState;if(b.length>0)throw new Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,d(O,b,a))}function O(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function P(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function Q(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}b.exports=s;var d=a("process-nextick-args"),e=a("isarray");s.ReadableState=r;var h,g=(a("events").EventEmitter,function(a,b){return a.listeners(b).length});!function(){try{h=a("stream")}catch(a){}finally{h||(h=a("events").EventEmitter)}}();var i=a("buffer").Buffer,j=a("buffer-shims"),k=a("core-util-is");k.inherits=a("inherits");var l=a("util"),m=void 0;m=l&&l.debuglog?l.debuglog("stream"):function(){};var o,n=a("./internal/streams/BufferList");k.inherits(s,h);var q,q;s.prototype.push=function(a,b){var c=this._readableState;return c.objectMode||"string"!=typeof a||(b=b||c.defaultEncoding)!==c.encoding&&(a=j.from(a,b),b=""),t(this,c,a,b,!1)},s.prototype.unshift=function(a){return t(this,this._readableState,a,"",!0)},s.prototype.isPaused=function(){return!1===this._readableState.flowing},s.prototype.setEncoding=function(b){return o||(o=a("string_decoder/").StringDecoder),this._readableState.decoder=new o(b),this._readableState.encoding=b,this};var v=8388608;s.prototype.read=function(a){m("read",a),a=parseInt(a,10);var b=this._readableState,c=a;if(0!==a&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return m("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?N(this):A(this),null;if(0===(a=x(a,b))&&b.ended)return 0===b.length&&N(this),null;var d=b.needReadable;m("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,m("length less than watermark",d)),b.ended||b.reading?(d=!1,m("reading or ended",d)):d&&(m("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=x(c,b)));var e;return e=a>0?J(a,b):null,null===e?(b.needReadable=!0,a=0):b.length-=a,0===b.length&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&N(this)),null!==e&&this.emit("data",e),e},s.prototype._read=function(a){this.emit("error",new Error("not implemented"))},s.prototype.pipe=function(a,b){function j(a){m("onunpipe"),a===e&&o()}function k(){m("onend"),a.end()}function o(){m("cleanup"),a.removeListener("close",t),a.removeListener("finish",u),a.removeListener("drain",l),a.removeListener("error",s),a.removeListener("unpipe",j),e.removeListener("end",k),e.removeListener("end",o),e.removeListener("data",r),n=!0,!f.awaitDrain||a._writableState&&!a._writableState.needDrain||l()}function r(b){m("ondata"),q=!1,!1!==a.write(b)||q||((1===f.pipesCount&&f.pipes===a||f.pipesCount>1&&-1!==Q(f.pipes,a))&&!n&&(m("false write response, pause",e._readableState.awaitDrain),e._readableState.awaitDrain++,q=!0),e.pause())}function s(b){m("onerror",b),v(),a.removeListener("error",s),0===g(a,"error")&&a.emit("error",b)}function t(){a.removeListener("finish",u),v()}function u(){m("onfinish"),a.removeListener("close",t),v()}function v(){m("unpipe"),e.unpipe(a)}var e=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=a;break;case 1:f.pipes=[f.pipes,a];break;default:f.pipes.push(a)}f.pipesCount+=1,m("pipe count=%d opts=%j",f.pipesCount,b);var h=(!b||!1!==b.end)&&a!==c.stdout&&a!==c.stderr,i=h?k:o;f.endEmitted?d(i):e.once("end",i),a.on("unpipe",j);var l=E(e);a.on("drain",l);var n=!1,q=!1;return e.on("data",r),p(a,"error",s),a.once("close",t),a.once("finish",u),a.emit("pipe",e),f.flowing||(m("pipe resume"),e.resume()),a},s.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;e<d;e++)c[e].emit("unpipe",this);return this}var f=Q(b.pipes,a);return-1===f?this:(b.pipes.splice(f,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},s.prototype.on=function(a,b){var c=h.prototype.on.call(this,a,b);if("data"===a)!1!==this._readableState.flowing&&this.resume();else if("readable"===a){var e=this._readableState;e.endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.emittedReadable=!1,e.reading?e.length&&A(this,e):d(F,this))}return c},s.prototype.addListener=s.prototype.on,s.prototype.resume=function(){var a=this._readableState;return a.flowing||(m("resume"),a.flowing=!0,G(this,a)),this},s.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},s.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(m("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(m("wrapped data"),b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){d.push(e)||(c=!0,a.pause())}});for(var e in a)void 0===this[e]&&"function"==typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));return P(["error","close","destroy","pause","resume"],function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){m("wrapped _read",b),c&&(c=!1,a.resume())},d},s._fromList=J}).call(this,a("_process"))},{"./_stream_duplex":141,"./internal/streams/BufferList":146,_process:15,buffer:4,"buffer-shims":147,"core-util-is":148,events:8,inherits:149,isarray:150,"process-nextick-args":151,"string_decoder/":152,util:3}],144:[function(a,b,c){"use strict";function f(a){this.afterTransform=function(b,c){return g(a,b,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function g(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function h(a){if(!(this instanceof h))return new h(a);d.call(this,a),this._transformState=new f(this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(a){i(b,a)}):i(b)})}function i(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("Calling transform done when ws.length != 0");if(d.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}b.exports=h;var d=a("./_stream_duplex"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(h,d),h.prototype.push=function(a,b){return this._transformState.needTransform=!1,d.prototype.push.call(this,a,b)},h.prototype._transform=function(a,b,c){throw new Error("Not implemented")},h.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},h.prototype._read=function(a){var b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./_stream_duplex":141,"core-util-is":148,inherits:149}],145:[function(a,b,c){(function(c){"use strict";function k(){}function l(a,b,c){this.chunk=a,this.encoding=b,this.callback=c,this.next=null}function n(b,c){m=m||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof m&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var f=!1===b.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){w(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function o(b){if(m=m||a("./_stream_duplex"),!(this instanceof o||this instanceof m))return new o(b);this._writableState=new n(b,this),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev)),h.call(this)}function p(a,b){var c=new Error("write after end");a.emit("error",c),d(b,c)}function q(a,b,c,e){var f=!0,g=!1;return null===c?g=new TypeError("May not write null values to stream"):i.isBuffer(c)||"string"==typeof c||void 0===c||b.objectMode||(g=new TypeError("Invalid non-string/buffer chunk")),g&&(a.emit("error",g),d(e,g),f=!1),f}function r(a,b,c){return a.objectMode||!1===a.decodeStrings||"string"!=typeof b||(b=j.from(b,c)),b}function s(a,b,c,d,e){c=r(b,c,d),i.isBuffer(c)&&(d="buffer");var f=b.objectMode?1:c.length;b.length+=f;var g=b.length<b.highWaterMark;if(g||(b.needDrain=!0),b.writing||b.corked){var h=b.lastBufferedRequest;b.lastBufferedRequest=new l(c,d,e),h?h.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else t(a,b,!1,f,c,d,e);return g}function t(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function u(a,b,c,e,f){--b.pendingcb,c?d(f,e):f(e),a._writableState.errorEmitted=!0,a.emit("error",e)}function v(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function w(a,b){var c=a._writableState,d=c.sync,f=c.writecb;if(v(c),b)u(a,c,d,b,f);else{var g=A(c);g||c.corked||c.bufferProcessing||!c.bufferedRequest||z(a,c),d?e(x,a,c,g,f):x(a,c,g,f)}}function x(a,b,c,d){c||y(a,b),b.pendingcb--,d(),C(a,b)}function y(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function z(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=b.bufferedRequestCount,e=new Array(d),f=b.corkedRequestsFree;f.entry=c;for(var g=0;c;)e[g]=c,c=c.next,g+=1;t(a,b,!0,b.length,e,"",f.finish),b.pendingcb++,b.lastBufferedRequest=null,f.next?(b.corkedRequestsFree=f.next,f.next=null):b.corkedRequestsFree=new E(b)}else{for(;c;){var h=c.chunk,i=c.encoding,j=c.callback;if(t(a,b,!1,b.objectMode?1:h.length,h,i,j),c=c.next,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequestCount=0,b.bufferedRequest=c,b.bufferProcessing=!1}function A(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function B(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function C(a,b){var c=A(b);return c&&(0===b.pendingcb?(B(a,b),b.finished=!0,a.emit("finish")):B(a,b)),c}function D(a,b,c){b.ending=!0,C(a,b),c&&(b.finished?d(c):a.once("finish",c)),b.ended=!0,a.writable=!1}function E(a){var b=this;this.next=null,this.entry=null,this.finish=function(c){var d=b.entry;for(b.entry=null;d;){var e=d.callback;a.pendingcb--,e(c),d=d.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}b.exports=o;var d=a("process-nextick-args"),e=!c.browser&&["v0.10","v0.9."].indexOf(c.version.slice(0,5))>-1?setImmediate:d;o.WritableState=n;var f=a("core-util-is");f.inherits=a("inherits");var h,g={deprecate:a("util-deprecate")};!function(){try{h=a("stream")}catch(a){}finally{h||(h=a("events").EventEmitter)}}();var i=a("buffer").Buffer,j=a("buffer-shims");f.inherits(o,h);var m;n.prototype.getBuffer=function(){for(var b=this.bufferedRequest,c=[];b;)c.push(b),b=b.next;return c},function(){try{Object.defineProperty(n.prototype,"buffer",{get:g.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(a){}}();var m;o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},o.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return"function"==typeof b&&(c=b,b=null),i.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),"function"!=typeof c&&(c=k),d.ended?p(this,c):q(this,d,a,c)&&(d.pendingcb++,e=s(this,d,a,b,c)),e},o.prototype.cork=function(){this._writableState.corked++},o.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||z(this,a))},o.prototype.setDefaultEncoding=function(b){if("string"==typeof b&&(b=b.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((b+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+b);return this._writableState.defaultEncoding=b,this},o.prototype._write=function(a,b,c){c(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!==a&&void 0!==a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||D(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":141,_process:15,buffer:4,"buffer-shims":147,"core-util-is":148,events:8,inherits:149,"process-nextick-args":151,"util-deprecate":153}],146:[function(a,b,c){"use strict";function f(){this.head=null,this.tail=null,this.length=0}var e=(a("buffer").Buffer,a("buffer-shims"));b.exports=f,f.prototype.push=function(a){var b={data:a,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length},f.prototype.unshift=function(a){var b={data:a,next:this.head};0===this.length&&(this.tail=b),this.head=b,++this.length},f.prototype.shift=function(){if(0!==this.length){var a=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,a}},f.prototype.clear=function(){this.head=this.tail=null,this.length=0},f.prototype.join=function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c},f.prototype.concat=function(a){if(0===this.length)return e.alloc(0);if(1===this.length)return this.head.data;for(var b=e.allocUnsafe(a>>>0),c=this.head,d=0;c;)c.data.copy(b,d),d+=c.data.length,c=c.next;return b}},{buffer:4,"buffer-shims":147}],147:[function(a,b,c){(function(b){"use strict";var d=a("buffer"),e=d.Buffer,f=d.SlowBuffer,g=d.kMaxLength||2147483647;c.alloc=function(b,c,d){if("function"==typeof e.alloc)return e.alloc(b,c,d);if("number"==typeof d)throw new TypeError("encoding must not be number");if("number"!=typeof b)throw new TypeError("size must be a number");if(b>g)throw new RangeError("size is too large");var f=d,h=c;void 0===h&&(f=void 0,h=0);var i=new e(b);if("string"==typeof h)for(var j=new e(h,f),k=j.length,l=-1;++l<b;)i[l]=j[l%k];else i.fill(h);return i},c.allocUnsafe=function(b){if("function"==typeof e.allocUnsafe)return e.allocUnsafe(b);if("number"!=typeof b)throw new TypeError("size must be a number");if(b>g)throw new RangeError("size is too large");return new e(b)},c.from=function(c,d,f){if("function"==typeof e.from&&(!b.Uint8Array||Uint8Array.from!==e.from))return e.from(c,d,f);if("number"==typeof c)throw new TypeError('"value" argument must not be a number');if("string"==typeof c)return new e(c,d);if("undefined"!=typeof ArrayBuffer&&c instanceof ArrayBuffer){var g=d;if(1===arguments.length)return new e(c);void 0===g&&(g=0);var h=f;if(void 0===h&&(h=c.byteLength-g),g>=c.byteLength)throw new RangeError("'offset' is out of bounds");if(h>c.byteLength-g)throw new RangeError("'length' is out of bounds");return new e(c.slice(g,g+h))}if(e.isBuffer(c)){var i=new e(c.length);return c.copy(i,0,0,c.length),i}if(c){if(Array.isArray(c)||"undefined"!=typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return new e(c);if("Buffer"===c.type&&Array.isArray(c.data))return new e(c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},c.allocUnsafeSlow=function(b){if("function"==typeof e.allocUnsafeSlow)return e.allocUnsafeSlow(b);if("number"!=typeof b)throw new TypeError("size must be a number");if(b>=g)throw new RangeError("size is too large");return new f(b)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:4}],148:[function(a,b,c){(function(a){function b(a){return Array.isArray?Array.isArray(a):"[object Array]"===q(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return"[object RegExp]"===q(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return"[object Date]"===q(a)}function n(a){return"[object Error]"===q(a)||a instanceof Error}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||void 0===a}function q(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=a.isBuffer}).call(this,{isBuffer:a("../../../../../../../../../../../../../../../../../AppData/Roaming/npm/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../../../../../../../../../../../../../../AppData/Roaming/npm/node_modules/browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":11}],149:[function(a,b,c){arguments[4][10][0].apply(c,arguments)},{dup:10}],150:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],151:[function(a,b,c){(function(a){"use strict";function c(b,c,d,e){if("function"!=typeof b)throw new TypeError('"callback" argument must be a function');var g,h,f=arguments.length;switch(f){case 0:case 1:return a.nextTick(b);case 2:return a.nextTick(function(){b.call(null,c)});case 3:return a.nextTick(function(){b.call(null,c,d)});case 4:return a.nextTick(function(){b.call(null,c,d,e)});default:for(g=new Array(f-1),h=0;h<g.length;)g[h++]=arguments[h];return a.nextTick(function(){b.apply(null,g)})}}!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?b.exports=c:b.exports=a.nextTick}).call(this,a("_process"))},{_process:15}],152:[function(a,b,c){arguments[4][39][0].apply(c,arguments)},{buffer:4,dup:39}],153:[function(a,b,c){arguments[4][28][0].apply(c,arguments)},{dup:28}],154:[function(a,b,c){(function(d){var e=function(){try{return a("stream")}catch(a){}}();c=b.exports=a("./lib/_stream_readable.js"),c.Stream=e||c,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js"),!d.browser&&"disable"===d.env.READABLE_STREAM&&e&&(b.exports=e)}).call(this,a("_process"))},{"./lib/_stream_duplex.js":141,"./lib/_stream_passthrough.js":142,"./lib/_stream_readable.js":143,"./lib/_stream_transform.js":144,"./lib/_stream_writable.js":145,_process:15}],155:[function(a,b,c){"use strict";var d=a("events").EventEmitter,e=a("util"),f=0,g=b.exports=function(a){d.call(this),this.id=++f,this.name=a};e.inherits(g,d)},{events:8,util:43}],156:[function(a,b,c){"use strict";function i(a){return function(b,c,d){a.completion[d.id]=c,a.finished||a.emit("change",b||a.name,a.completed(),a)}}var d=a("util"),e=a("./tracker-base.js"),f=a("./tracker.js"),g=a("./tracker-stream.js"),h=b.exports=function(a){e.call(this,a),this.parentGroup=null,this.trackers=[],this.completion={},this.weight={},this.totalWeight=0,this.finished=!1,this.bubbleChange=i(this)};d.inherits(h,e),h.prototype.nameInTree=function(){for(var a=[],b=this;b;)a.unshift(b.name),b=b.parentGroup;return a.join("/")},h.prototype.addUnit=function(a,b){if(a.addUnit){for(var c=this;c;){if(a===c)throw new Error("Attempted to add tracker group "+a.name+" to tree that already includes it "+this.nameInTree(this));c=c.parentGroup}a.parentGroup=this}return this.weight[a.id]=b||1,this.totalWeight+=this.weight[a.id],this.trackers.push(a),this.completion[a.id]=a.completed(),a.on("change",this.bubbleChange),this.finished||this.emit("change",a.name,this.completion[a.id],a),a},h.prototype.completed=function(){if(0===this.trackers.length)return 0;for(var a=1/this.totalWeight,b=0,c=0;c<this.trackers.length;c++){var d=this.trackers[c].id;b+=a*this.weight[d]*this.completion[d]}return b},h.prototype.newGroup=function(a,b){return this.addUnit(new h(a),b)},h.prototype.newItem=function(a,b,c){return this.addUnit(new f(a,b),c)},h.prototype.newStream=function(a,b,c){return this.addUnit(new g(a,b),c)},h.prototype.finish=function(){this.finished=!0,this.trackers.length||this.addUnit(new f,1,!0);for(var a=0;a<this.trackers.length;a++){var b=this.trackers[a];b.finish(),b.removeListener("change",this.bubbleChange)}this.emit("change",this.name,1,this)},h.prototype.debug=function(a){a=a||0;var b=a?"                                  ".substr(0,a):"",c=b+(this.name||"top")+": "+this.completed()+"\n";return this.trackers.forEach(function(d){c+=d instanceof h?d.debug(a+1):b+" "+d.name+": "+d.completed()+"\n"}),c}},{"./tracker-base.js":155,"./tracker-stream.js":157,"./tracker.js":158,util:43}],157:[function(a,b,c){"use strict";function i(a){return function(b,c,d){a.emit("change",b,c,a)}}var d=a("util"),e=a("readable-stream"),f=a("delegates"),g=a("./tracker.js"),h=b.exports=function(a,b,c){e.Transform.call(this,c),this.tracker=new g(a,b),this.name=a,this.id=this.tracker.id,this.tracker.on("change",i(this))};d.inherits(h,e.Transform),h.prototype._transform=function(a,b,c){this.tracker.completeWork(a.length?a.length:1),this.push(a),c()},h.prototype._flush=function(a){this.tracker.finish(),a()},f(h.prototype,"tracker").method("completed").method("addWork")},{"./tracker.js":158,delegates:140,"readable-stream":154,util:43}],158:[function(a,b,c){"use strict";var d=a("util"),e=a("./tracker-base.js"),f=b.exports=function(a,b){e.call(this,a),this.workDone=0,this.workTodo=b||0};d.inherits(f,e),f.prototype.completed=function(){return 0===this.workTodo?0:this.workDone/this.workTodo},f.prototype.addWork=function(a){this.workTodo+=a,this.emit("change",this.name,this.completed(),this)},f.prototype.completeWork=function(a){this.workDone+=a,this.workDone>this.workTodo&&(this.workDone=this.workTodo),this.emit("change",this.name,this.completed(),this)},f.prototype.finish=function(){this.workTodo=this.workDone=1,this.emit("change",this.name,1,this)}},{"./tracker-base.js":155,util:43}],159:[function(a,b,c){"use strict";function f(a){if(null!=e[a])return e[a];throw new Error("Unknown color or style name: "+a)}var d="[";c.up=function(b){return d+(b||"")+"A"},c.down=function(b){return d+(b||"")+"B"},c.forward=function(b){return d+(b||"")+"C"},c.back=function(b){return d+(b||"")+"D"},c.nextLine=function(b){return d+(b||"")+"E"},c.previousLine=function(b){return d+(b||"")+"F"},c.horizontalAbsolute=function(b){if(null==b)throw new Error("horizontalAboslute requires a column to position to");return d+b+"G"},c.eraseData=function(){return d+"J"},c.eraseLine=function(){return d+"K"},c.goto=function(a,b){return d+b+";"+a+"H"},c.gotoSOL=function(){return"\r"},c.beep=function(){return""},c.hideCursor=function(){return d+"?25l"},c.showCursor=function(){return d+"?25h"};var e={reset:0,bold:1,italic:3,underline:4,inverse:7,stopBold:22,stopItalic:23,stopUnderline:24,stopInverse:27,white:37,black:30,blue:34,cyan:36,green:32,magenta:35,red:31,yellow:33,bgWhite:47,bgBlack:40,bgBlue:44,bgCyan:46,bgGreen:42,bgMagenta:45,bgRed:41,bgYellow:43,grey:90,brightBlack:90,brightRed:91,brightGreen:92,brightYellow:93,brightBlue:94,brightMagenta:95,brightCyan:96,brightWhite:97,bgGrey:100,bgBrightBlack:100,bgBrightRed:101,bgBrightGreen:102,bgBrightYellow:103,bgBrightBlue:104,bgBrightMagenta:105,bgBrightCyan:106,bgBrightWhite:107};c.color=function(b){return 1===arguments.length&&Array.isArray(b)||(b=Array.prototype.slice.call(arguments)),d+b.map(f).join(";")+"m"}},{}],160:[function(a,b,c){"use strict";var d=a("./spin.js"),e=a("./progress-bar.js");b.exports={activityIndicator:function(a,b,c){if(null!=a.spun)return d(b,a.spun)},progressbar:function(a,b,c){if(null!=a.completed)return e(b,c,a.completed)}}},{"./progress-bar.js":179,"./spin.js":183}],161:[function(a,b,c){"use strict";var d=a("util"),e=c.User=function a(b){var c=new Error(b);return Error.captureStackTrace(c,a),c.code="EGAUGE",c};c.MissingTemplateValue=function a(b,c){var f=new e(d.format('Missing template value "%s"',b.type));return Error.captureStackTrace(f,a),f.template=b,f.values=c,f},c.Internal=function a(b){var c=new Error(b);return Error.captureStackTrace(c,a),c.code="EGAUGEINTERNAL",c}},{util:43}],162:[function(a,b,c){(function(a){"use strict";function c(){return"win32"===a.platform}function d(){var b=/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i;return!!a.env.COLORTERM||b.test(a.env.TERM)}b.exports=c()||d()}).call(this,a("_process"))},{_process:15}],163:[function(a,b,c){"use strict";function l(a,b){return function(){return b.call(a)}}function m(a,b){var c,e;a&&a.write?(e=a,c=b||{}):b&&b.write?(e=b,c=a||{}):(e=j.stderr,c=a||b||{}),this._status={spun:0,section:"",subsection:""},this._paused=!1,this._disabled=!0,this._showing=!1,this._onScreen=!1,this._needsRedraw=!1,this._hideCursor=null==c.hideCursor||c.hideCursor,this._fixedFramerate=null==c.fixedFramerate?!/^v0\.8\./.test(j.version):c.fixedFramerate,this._lastUpdateAt=null,this._updateInterval=null==c.updateInterval?50:c.updateInterval,this._themes=c.themes||h,this._theme=c.theme;var f=this._computeTheme(c.theme),i=c.template||[{type:"progressbar",length:20},{type:"activityIndicator",kerning:1,length:1},{type:"section",kerning:1,default:""},{type:"subsection",kerning:1,default:""}];this.setWriteTo(e,c.tty);var k=c.Plumbing||d;this._gauge=new k(f,i,this.getWidth()),this._$$doRedraw=l(this,this._doRedraw),this._$$handleSizeChange=l(this,this._handleSizeChange),(null==c.cleanupOnExit||c.cleanupOnExit)&&g(l(this,this.disable)),c.enabled||null==c.enabled&&this._tty&&this._tty.isTTY?this.enable():this.disable()}var d=a("./plumbing.js"),e=a("has-unicode"),f=a("./has-color.js"),g=a("signal-exit"),h=a("./themes"),i=a("./set-interval.js"),j=a("./process.js"),k=a("./set-immediate");b.exports=m,m.prototype={},m.prototype.setTemplate=function(a){this._gauge.setTemplate(a),this._showing&&this._requestRedraw()},m.prototype._computeTheme=function(a){if(a||(a={}),!a||0!==Object.keys(a).length&&null==a.hasUnicode&&null==a.hasColor)"string"==typeof a&&(a=this._themes.getTheme(a));else{var b=null==a.hasUnicode?e():a.hasUnicode,c=null==a.hasColor?f:a.hasColor;a=this._themes.getDefault({hasUnicode:b,hasColor:c,platform:a.platform})}return a},m.prototype.setThemeset=function(a){this._themes=a,this.setTheme(this._theme)},m.prototype.setTheme=function(a){this._gauge.setTheme(this._computeTheme(a)),this._showing&&this._requestRedraw(),this._theme=a},m.prototype._requestRedraw=function(){this._needsRedraw=!0,this._fixedFramerate||this._doRedraw()},m.prototype.getWidth=function(){return(this._tty&&this._tty.columns||80)-1},m.prototype.setWriteTo=function(a,b){var c=!this._disabled;c&&this.disable(),this._writeTo=a,this._tty=b||a===j.stderr&&j.stdout.isTTY&&j.stdout||a.isTTY&&a||this._tty,this._gauge&&this._gauge.setWidth(this.getWidth()),c&&this.enable()},m.prototype.enable=function(){this._disabled&&(this._disabled=!1,this._tty&&this._enableEvents(),this._showing&&this.show())},m.prototype.disable=function(){this._disabled||(this._showing&&(this._lastUpdateAt=null,this._showing=!1,this._doRedraw(),this._showing=!0),this._disabled=!0,this._tty&&this._disableEvents())},m.prototype._enableEvents=function(){this._tty.on("resize",this._$$handleSizeChange),this._fixedFramerate&&(this.redrawTracker=i(this._$$doRedraw,this._updateInterval),this.redrawTracker.unref&&this.redrawTracker.unref())},m.prototype._disableEvents=function(){this._tty.removeListener("resize",this._$$handleSizeChange),this._fixedFramerate&&clearInterval(this.redrawTracker)},m.prototype.hide=function(a){return this._disabled?a&&j.nextTick(a):this._showing?(this._showing=!1,this._doRedraw(),void(a&&k(a))):a&&j.nextTick(a)},m.prototype.show=function(a,b){if(!this._disabled){if(this._showing=!0,"string"==typeof a)this._status.section=a;else if("object"==typeof a)for(var c=Object.keys(a),d=0;d<c.length;++d){var e=c[d];this._status[e]=a[e]}null!=b&&(this._status.completed=b),this._requestRedraw()}},m.prototype.pulse=function(a){this._disabled||this._showing&&(this._status.subsection=a||"",this._status.spun++,this._requestRedraw())},m.prototype._handleSizeChange=function(){this._gauge.setWidth(this._tty.columns-1),this._requestRedraw()},m.prototype._doRedraw=function(){if(!this._disabled&&!this._paused){if(!this._fixedFramerate){var a=Date.now();if(this._lastUpdateAt&&a-this._lastUpdateAt<this._updateInterval)return;this._lastUpdateAt=a}if(!this._showing&&this._onScreen){this._onScreen=!1;var b=this._gauge.hide();return this._hideCursor&&(b+=this._gauge.showCursor()),this._writeTo.write(b)}(this._showing||this._onScreen)&&(this._showing&&!this._onScreen&&(this._onScreen=!0,this._needsRedraw=!0,this._hideCursor&&this._writeTo.write(this._gauge.hideCursor())),this._needsRedraw&&(this._writeTo.write(this._gauge.show(this._status))||(this._paused=!0,this._writeTo.on("drain",l(this,function(){this._paused=!1,this._doRedraw()})))))}}},{"./has-color.js":162,"./plumbing.js":177,"./process.js":178,"./set-immediate":181,"./set-interval.js":182,"./themes":186,"has-unicode":165,"signal-exit":167}],164:[function(a,b,c){"use strict";function d(a){return"object"==typeof a&&a.hasOwnProperty("callee")}function g(a){return k("EMISSINGARG","Missing required argument #"+(a+1))}function h(a,b){return k("EUNKNOWNTYPE","Unknown type "+b+" in argument #"+(a+1))}function i(a,b,c){var d;return Object.keys(e).forEach(function(a){e[a][1](c)&&(d=e[a][0])}),k("EINVALIDTYPE","Argument #"+(a+1)+": Expected "+b+" but got "+d)}function j(a,b){return k("ETOOMANYARGS","Too many arguments, expected "+a+" and got "+b)}function k(a,b){var c=new Error(b);return c.code=a,Error.captureStackTrace(c,f),c}var e={"*":["any",function(){return!0}],A:["array",function(a){return Array.isArray(a)||d(a)}],S:["string",function(a){return"string"==typeof a}],N:["number",function(a){return"number"==typeof a}],F:["function",function(a){return"function"==typeof a}],O:["object",function(a){return"object"==typeof a&&!e.A[1](a)&&!e.E[1](a)}],B:["boolean",function(a){return"boolean"==typeof a}],E:["error",function(a){return a instanceof Error}]},f=b.exports=function(a,b){if(!a)throw g(0,"schema");if(!b)throw g(1,"args");if(!e.S[1](a))throw i(0,"string",a);if(!e.A[1](b))throw i(1,"array",b);for(var c=0;c<a.length;++c){var d=a[c];if(!e[d])throw h(c,d);var f=e[d][0],k=e[d][1];if("E"!==d||null!=b[c]){if(null==b[c])throw g(c);if(!k(b[c]))throw i(c,f,b[c]);if("E"===d)return}}if(a.length<b.length)throw j(a.length,b.length)}},{}],165:[function(a,b,c){(function(c){"use strict";var d=a("os");b.exports=function(){if("Windows_NT"==d.type())return!1;var a=/UTF-?8$/i,b=c.env.LC_ALL||c.env.LC_CTYPE||c.env.LANG;return a.test(b)}}).call(this,a("_process"))},{_process:15,os:13}],166:[function(a,b,c){"use strict";function f(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function g(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var e={};return"abcdefghijklmnopqrst".split("").forEach(function(a){e[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},e)).join("")}catch(a){return!1}}var d=Object.prototype.hasOwnProperty,e=Object.prototype.propertyIsEnumerable;b.exports=g()?Object.assign:function(a,b){for(var c,h,g=f(a),i=1;i<arguments.length;i++){c=Object(arguments[i]);for(var j in c)d.call(c,j)&&(g[j]=c[j]);if(Object.getOwnPropertySymbols){h=Object.getOwnPropertySymbols(c);for(var k=0;k<h.length;k++)e.call(c,h[k])&&(g[h[k]]=c[h[k]])}}return g}},{}],167:[function(a,b,c){(function(c){function h(){k&&(k=!1,e.forEach(function(a){try{c.removeListener(a,j[a])}catch(a){}}),c.emit=o,c.reallyExit=m,g.count-=1)}function i(a,b,c){g.emitted[a]||(g.emitted[a]=!0,g.emit(a,b,c))}function l(){k||(k=!0,g.count+=1,e=e.filter(function(a){try{return c.on(a,j[a]),!0}catch(a){return!1}}),c.emit=p,c.reallyExit=n)}function n(a){c.exitCode=a||0,i("exit",c.exitCode,null),i("afterexit",c.exitCode,null),m.call(c,c.exitCode)}function p(a,b){if("exit"===a){void 0!==b&&(c.exitCode=b);var d=o.apply(this,arguments);return i("exit",c.exitCode,null),i("afterexit",c.exitCode,null),d}return o.apply(this,arguments)}var d=a("assert"),e=a("./signals.js"),f=a("events");"function"!=typeof f&&(f=f.EventEmitter);var g;c.__signal_exit_emitter__?g=c.__signal_exit_emitter__:(g=c.__signal_exit_emitter__=new f,g.count=0,g.emitted={}),b.exports=function(a,b){d.equal(typeof a,"function","a callback must be provided for exit handler"),!1===k&&l();var c="exit";b&&b.alwaysLast&&(c="afterexit");var e=function(){g.removeListener(c,a),0===g.listeners("exit").length&&0===g.listeners("afterexit").length&&h()};return g.on(c,a),e},b.exports.unload=h;var j={};e.forEach(function(a){j[a]=function(){c.listeners(a).length===g.count&&(h(),i("exit",null,a),i("afterexit",null,a),c.kill(c.pid,a))}}),b.exports.signals=function(){return e},b.exports.load=l;var k=!1,m=c.reallyExit,o=c.emit}).call(this,a("_process"))},{"./signals.js":168,_process:15,assert:2,events:8}],168:[function(a,b,c){(function(a){b.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==a.platform&&b.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===a.platform&&b.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")}).call(this,a("_process"))},{_process:15}],169:[function(a,b,c){"use strict";var d=a("strip-ansi"),e=a("code-point-at"),f=a("is-fullwidth-code-point");b.exports=function(a){if("string"!=typeof a||0===a.length)return 0;var b=0;a=d(a);for(var c=0;c<a.length;c++){var g=e(a,c);g<=31||g>=127&&g<=159||(g>=65536&&c++,f(g)?b+=2:b++)}return b}},{"code-point-at":170,"is-fullwidth-code-point":172,"strip-ansi":174}],170:[function(a,b,c){"use strict";var d=a("number-is-nan");b.exports=function(a,b){if(null===a||void 0===a)throw TypeError();a=String(a);var c=a.length,e=b?Number(b):0;if(d(e)&&(e=0),!(e<0||e>=c)){var f=a.charCodeAt(e);if(f>=55296&&f<=56319&&c>e+1){var g=a.charCodeAt(e+1);if(g>=56320&&g<=57343)return 1024*(f-55296)+g-56320+65536}return f}}},{"number-is-nan":171}],171:[function(a,b,c){"use strict";b.exports=Number.isNaN||function(a){return a!==a}},{}],172:[function(a,b,c){"use strict";var d=a("number-is-nan");b.exports=function(a){return!d(a)&&(a>=4352&&(a<=4447||9001===a||9002===a||11904<=a&&a<=12871&&12351!==a||12880<=a&&a<=19903||19968<=a&&a<=42182||43360<=a&&a<=43388||44032<=a&&a<=55203||63744<=a&&a<=64255||65040<=a&&a<=65049||65072<=a&&a<=65131||65281<=a&&a<=65376||65504<=a&&a<=65510||110592<=a&&a<=110593||127488<=a&&a<=127569||131072<=a&&a<=262141))}},{"number-is-nan":173}],173:[function(a,b,c){arguments[4][171][0].apply(c,arguments)},{dup:171}],174:[function(a,b,c){"use strict";var d=a("ansi-regex")();b.exports=function(a){return"string"==typeof a?a.replace(d,""):a}},{"ansi-regex":175}],175:[function(a,b,c){arguments[4][62][0].apply(c,arguments)},{dup:62}],176:[function(a,b,c){"use strict";function e(a){var b="",c=" ",d=a;do{d%2&&(b+=c),d=Math.floor(d/2),c+=c}while(d);return b}function f(a,b){var c=a.trimRight();if(0===c.length&&a.length>=b)return a;var f="",g=d(c);return g<b&&(f=e(b-g)),c+f}function g(a,b){var c=a.trimLeft();if(0===c.length&&a.length>=b)return a;var f="",g=d(c);return g<b&&(f=e(b-g)),f+c}function h(a,b){var c=a.trim();if(0===c.length&&a.length>=b)return a;var f="",g="",h=d(c);if(h<b){var i=parseInt((b-h)/2,10);f=e(i),g=e(b-(h+i))}return f+c+g}var d=a("string-width");c.center=h,c.left=f,c.right=g},{"string-width":169}],177:[function(a,b,c){"use strict";var d=a("console-control-strings"),e=a("./render-template.js"),f=a("aproba"),g=b.exports=function(a,b,c){c||(c=80),f("OAN",[a,b,c]),this.showing=!1,this.theme=a,this.width=c,this.template=b};g.prototype={},g.prototype.setTheme=function(a){f("O",[a]),this.theme=a},g.prototype.setTemplate=function(a){f("A",[a]),this.template=a},g.prototype.setWidth=function(a){f("N",[a]),this.width=a},g.prototype.hide=function(){return d.gotoSOL()+d.eraseLine()},g.prototype.hideCursor=d.hideCursor,g.prototype.showCursor=d.showCursor,g.prototype.show=function(a){var b=Object.create(this.theme);for(var c in a)b[c]=a[c];return e(this.width,this.template,b).trim()+d.eraseLine()+d.gotoSOL()}},{"./render-template.js":180,aproba:164,"console-control-strings":159}],178:[function(a,b,c){(function(a){"use strict";b.exports=a}).call(this,a("_process"))},{_process:15}],179:[function(a,b,c){"use strict";function h(a,b){var c="",d=b;do{d%2&&(c+=a),d=Math.floor(d/2),a+=a}while(d&&g(c)<b);return f(c,b)}var d=a("aproba"),e=a("./render-template.js"),f=a("./wide-truncate"),g=a("string-width");b.exports=function(a,b,c){if(d("ONN",[a,b,c]),c<0&&(c=0),c>1&&(c=1),b<=0)return"";var f=Math.round(b*c),g=b-f,i=[{type:"complete",value:h(a.complete,f),length:f},{type:"remaining",value:h(a.remaining,g),length:g}];return e(b,i,a)}},{"./render-template.js":180,"./wide-truncate":187,aproba:164,"string-width":169}],180:[function(a,b,c){"use strict";function j(a){return function(b){return r(b,a)}}function l(a){return"pre"+(a.type[0].toUpperCase()+a.type.slice(1))}function m(a){return"post"+(a.type[0].toUpperCase()+a.type.slice(1))}function n(a,b){if(a.type)return b[l(a)]||b[m(a)]}function o(a,b){var c=f({},a),d=Object.create(b),e=[],g=l(c),h=m(c);return d[g]&&(e.push({value:d[g]}),d[g]=null),c.minLength=null,c.length=null,c.maxLength=null,e.push(c),d[c.type]=d[c.type],d[h]&&(e.push({value:d[h]}),d[h]=null),function(a,b,c){return k(c,e,d)}}function p(a,b,c){function d(b,d,e){var f=new i(b,a),g=f.type;if(null==f.value)if(g in c)f.value=c[g];else{if(null==f.default)throw new h.MissingTemplateValue(f,c);f.value=f.default}return null==f.value||""===f.value?null:(f.index=d,f.first=0===d,f.last=d===e.length-1,n(f,c)&&(f.value=o(f,c)),f)}function k(a){a>g&&(a=g),f+=a,g-=a}function l(a,b){if(a.finished)throw new h.Internal("Tried to finish template item that was already finished");if(b===1/0)throw new h.Internal("Length of template item cannot be infinity");if(null!=b&&(a.length=b),a.minLength=null,a.maxLength=null,--j,a.finished=!0,null==a.length&&(a.length=a.getBaseLength()),null==a.length)throw new h.Internal("Finished template items must have a length");k(a.getLength())}var e=b.map(d).filter(function(a){return null!=a}),f=0,g=a,j=e.length;e.forEach(function(a){if(a.kerning){var b=a.first?0:e[a.index-1].padRight;!a.first&&b<a.kerning&&(a.padLeft=a.kerning-b),a.last||(a.padRight=a.kerning)}}),e.forEach(function(a){null!=a.getBaseLength()&&l(a)});var p,q,m=0;do{p=!1,q=Math.round(g/j),e.forEach(function(a){a.finished||a.maxLength&&a.getMaxLength()<q&&(l(a,a.maxLength),p=!0)})}while(p&&m++<e.length);if(p)throw new h.Internal("Resize loop iterated too many times while determining maxLength");m=0;do{p=!1,q=Math.round(g/j),e.forEach(function(a){a.finished||a.minLength&&a.getMinLength()>=q&&(l(a,a.minLength),p=!0)})}while(p&&m++<e.length);if(p)throw new h.Internal("Resize loop iterated too many times while determining minLength");return q=Math.round(g/j),e.forEach(function(a){a.finished||l(a,q)}),e}function q(a,b,c){return e("OON",arguments),a.type?a.value(b,b[a.type+"Theme"]||{},c):a.value(b,{},c)}function r(a,b){var c=a.getBaseLength(),e="function"==typeof a.value?q(a,b,c):a.value;if(null==e||""===e)return"";var f=d[a.align]||d.left,h=a.padLeft?d.left("",a.padLeft):"",i=a.padRight?d.right("",a.padRight):"";return h+f(g(String(e),c),c)+i}var d=a("wide-align"),e=a("aproba"),f=a("object-assign"),g=a("./wide-truncate"),h=a("./error"),i=a("./template-item"),k=b.exports=function(a,b,c){var e=p(a,b,c),f=e.map(j(c)).join("");return d.left(g(f,a),a)}},{"./error":161,"./template-item":184,"./wide-truncate":187,aproba:164,"object-assign":166,"wide-align":176}],181:[function(a,b,c){"use strict";var d=a("./process");try{b.exports=setImmediate}catch(a){b.exports=d.nextTick}},{"./process":178}],182:[function(a,b,c){"use strict";b.exports=setInterval},{}],183:[function(a,b,c){"use strict";b.exports=function(b,c){return b[c%b.length]}},{}],184:[function(a,b,c){"use strict";function e(a){return"string"==typeof a&&"%"===a.slice(-1)}function f(a){return Number(a.slice(0,-1))/100}function g(a,b){if(this.overallOutputLength=b,this.finished=!1,this.type=null,this.value=null,this.length=null,this.maxLength=null,this.minLength=null,this.kerning=null,this.align="left",this.padLeft=0,this.padRight=0,this.index=null,this.first=null,this.last=null,"string"==typeof a)this.value=a;else for(var c in a)this[c]=a[c];return e(this.length)&&(this.length=Math.round(this.overallOutputLength*f(this.length))),e(this.minLength)&&(this.minLength=Math.round(this.overallOutputLength*f(this.minLength))),e(this.maxLength)&&(this.maxLength=Math.round(this.overallOutputLength*f(this.maxLength))),this}var d=a("string-width");b.exports=g,g.prototype={},g.prototype.getBaseLength=function(){var a=this.length;return null==a&&"string"==typeof this.value&&null==this.maxLength&&null==this.minLength&&(a=d(this.value)),a},g.prototype.getLength=function(){var a=this.getBaseLength();return null==a?null:a+this.padLeft+this.padRight},g.prototype.getMaxLength=function(){return null==this.maxLength?null:this.maxLength+this.padLeft+this.padRight},g.prototype.getMinLength=function(){return null==this.minLength?null:this.minLength+this.padLeft+this.padRight}},{"string-width":169}],185:[function(a,b,c){(function(c){"use strict";var d=a("object-assign");b.exports=function(){return e.newThemeSet()};var e={};e.baseTheme=a("./base-theme.js"),e.newTheme=function(a,b){return b||(b=a,a=this.baseTheme),d({},a,b)},e.getThemeNames=function(){return Object.keys(this.themes)},e.addTheme=function(a,b,c){this.themes[a]=this.newTheme(b,c)},e.addToAllThemes=function(a){var b=this.themes;Object.keys(b).forEach(function(c){d(b[c],a)}),d(this.baseTheme,a)},e.getTheme=function(a){if(!this.themes[a])throw this.newMissingThemeError(a);return this.themes[a]},e.setDefault=function(a,b){null==b&&(b=a,a={});var c=null==a.platform?"fallback":a.platform,d=!!a.hasUnicode,e=!!a.hasColor;this.defaults[c]||(this.defaults[c]={true:{},false:{}}),this.defaults[c][d][e]=b},e.getDefault=function(a){a||(a={});var b=a.platform||c.platform,e=this.defaults[b]||this.defaults.fallback,f=!!a.hasUnicode,g=!!a.hasColor;if(!e)throw this.newMissingDefaultThemeError(b,f,g);if(!e[f][g])if(f&&g&&e[!f][g])f=!1;else if(f&&g&&e[f][!g])g=!1;else if(f&&g&&e[!f][!g])f=!1,g=!1;else if(f&&!g&&e[!f][g])f=!1;else if(!f&&g&&e[f][!g])g=!1;else if(e===this.defaults.fallback)throw this.newMissingDefaultThemeError(b,f,g);return e[f][g]?this.getTheme(e[f][g]):this.getDefault(d({},a,{platform:"fallback"}))},e.newMissingThemeError=function a(b){var c=new Error('Could not find a gauge theme named "'+b+'"');return Error.captureStackTrace.call(c,a),c.theme=b,c.code="EMISSINGTHEME",c},e.newMissingDefaultThemeError=function a(b,c,d){var e=new Error("Could not find a gauge theme for your platform/unicode/color use combo:\n    platform = "+b+"\n    hasUnicode = "+c+"\n    hasColor = "+d);return Error.captureStackTrace.call(e,a),e.platform=b,e.hasUnicode=c,e.hasColor=d,e.code="EMISSINGTHEME",e},e.newThemeSet=function(){var a=function(b){return a.getDefault(b)};return d(a,e,{themes:d({},this.themes),baseTheme:d({},this.baseTheme),defaults:JSON.parse(JSON.stringify(this.defaults||{}))})}}).call(this,a("_process"))},{"./base-theme.js":160,_process:15,"object-assign":166}],186:[function(a,b,c){"use strict";var d=a("console-control-strings"),e=a("./theme-set.js"),f=b.exports=new e;f.addTheme("ASCII",{preProgressbar:"[",postProgressbar:"]",progressbarTheme:{complete:"#",remaining:"."},activityIndicatorTheme:"-\\|/",preSubsection:">"}),f.addTheme("colorASCII",f.getTheme("ASCII"),{progressbarTheme:{preComplete:d.color("inverse"),complete:" ",postComplete:d.color("stopInverse"),preRemaining:d.color("brightBlack"),remaining:".",postRemaining:d.color("reset")}}),f.addTheme("brailleSpinner",{preProgressbar:"",postProgressbar:"",progressbarTheme:{complete:"",remaining:""},activityIndicatorTheme:"",preSubsection:">"}),f.addTheme("colorBrailleSpinner",f.getTheme("brailleSpinner"),{progressbarTheme:{preComplete:d.color("inverse"),complete:" ",postComplete:d.color("stopInverse"),preRemaining:d.color("brightBlack"),remaining:"",postRemaining:d.color("reset")}}),f.setDefault({},"ASCII"),f.setDefault({hasColor:!0},"colorASCII"),f.setDefault({platform:"darwin",hasUnicode:!0},"brailleSpinner"),f.setDefault({platform:"darwin",hasUnicode:!0,hasColor:!0},"colorBrailleSpinner")},{"./theme-set.js":185,"console-control-strings":159}],187:[function(a,b,c){"use strict";function f(a,b){if(0===d(a))return a;if(b<=0)return"";if(d(a)<=b)return a;for(var c=e(a),f=a.length+c.length,g=a.slice(0,b+f);d(g)>b;)g=g.slice(0,-1);return g}var d=a("string-width"),e=a("strip-ansi");b.exports=f},{"string-width":169,"strip-ansi":174}],188:[function(a,b,c){(function(a){b.exports=function(b){[a.stdout,a.stderr].forEach(function(a){a._handle&&a.isTTY&&"function"==typeof a._handle.setBlocking&&a._handle.setBlocking(b)})}}).call(this,a("_process"))},{_process:15}],189:[function(a,b,c){(function(a){function X(a,b){if(a instanceof $)return a;if("string"!=typeof a)return null;if(a.length>e)return null;if(!(b?g[x]:g[u]).test(a))return null;try{return new $(a,b)}catch(a){return null}}function Y(a,b){var c=X(a,b);return c?c.version:null}function Z(a,b){var c=X(a.trim().replace(/^[=v]+/,""),b);return c?c.version:null}function $(a,b){if(a instanceof $){if(a.loose===b)return a;a=a.version}else if("string"!=typeof a)throw new TypeError("Invalid Version: "+a);if(a.length>e)throw new TypeError("version is longer than "+e+" characters");if(!(this instanceof $))return new $(a,b);d("SemVer",a,b),this.loose=b;var c=a.trim().match(b?g[x]:g[u]);if(!c)throw new TypeError("Invalid Version: "+a);if(this.raw=a,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.major>f||this.major<0)throw new TypeError("Invalid major version");if(this.minor>f||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>f||this.patch<0)throw new TypeError("Invalid patch version");c[4]?this.prerelease=c[4].split(".").map(function(a){if(/^[0-9]+$/.test(a)){var b=+a;if(b>=0&&b<f)return b}return a}):this.prerelease=[],this.build=c[5]?c[5].split("."):[],this.format()}function _(a,b,c,d){"string"==typeof c&&(d=c,c=void 0);try{return new $(a,c).inc(b,d).version}catch(a){return null}}function aa(a,b){if(oa(a,b))return null;var c=X(a),d=X(b);if(c.prerelease.length||d.prerelease.length){for(var e in c)if(("major"===e||"minor"===e||"patch"===e)&&c[e]!==d[e])return"pre"+e;return"prerelease"}for(var e in c)if(("major"===e||"minor"===e||"patch"===e)&&c[e]!==d[e])return e}function ca(a,b){var c=ba.test(a),d=ba.test(b);return c&&d&&(a=+a,b=+b),c&&!d?-1:d&&!c?1:a<b?-1:a>b?1:0}function da(a,b){return ca(b,a)}function ea(a,b){return new $(a,b).major}function fa(a,b){return new $(a,b).minor}function ga(a,b){return new $(a,b).patch}function ha(a,b,c){return new $(a,c).compare(b)}function ia(a,b){return ha(a,b,!0)}function ja(a,b,c){return ha(b,a,c)}function ka(a,b){return a.sort(function(a,d){return c.compare(a,d,b)})}function la(a,b){return a.sort(function(a,d){return c.rcompare(a,d,b)})}function ma(a,b,c){return ha(a,b,c)>0}function na(a,b,c){return ha(a,b,c)<0}function oa(a,b,c){return 0===ha(a,b,c)}function pa(a,b,c){return 0!==ha(a,b,c)}function qa(a,b,c){return ha(a,b,c)>=0}function ra(a,b,c){return ha(a,b,c)<=0}function sa(a,b,c,d){var e;switch(b){case"===":"object"==typeof a&&(a=a.version),"object"==typeof c&&(c=c.version),e=a===c;break;case"!==":"object"==typeof a&&(a=a.version),"object"==typeof c&&(c=c.version),e=a!==c;break;case"":case"=":case"==":e=oa(a,c,d);break;case"!=":e=pa(a,c,d);break;case">":e=ma(a,c,d);break;case">=":e=qa(a,c,d);break;case"<":e=na(a,c,d);break;case"<=":e=ra(a,c,d);break;default:throw new TypeError("Invalid operator: "+b)}return e}function ta(a,b){if(a instanceof ta){if(a.loose===b)return a;a=a.value}if(!(this instanceof ta))return new ta(a,b);d("comparator",a,b),this.loose=b,this.parse(a),this.semver===ua?this.value="":this.value=this.operator+this.semver.version,d("comp",this)}function va(a,b){if(a instanceof va&&a.loose===b)return a;if(!(this instanceof va))return new va(a,b);if(this.loose=b,this.raw=a,this.set=a.split(/\s*\|\|\s*/).map(function(a){return this.parseRange(a.trim())},this).filter(function(a){return a.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+a);this.format()}function wa(a,b){return new va(a,b).set.map(function(a){return a.map(function(a){return a.value}).join(" ").trim().split(" ")})}function xa(a,b){return d("comp",a),a=Ba(a,b),d("caret",a),a=za(a,b),d("tildes",a),a=Da(a,b),d("xrange",a),a=Fa(a,b),d("stars",a),a}function ya(a){return!a||"x"===a.toLowerCase()||"*"===a}function za(a,b){return a.trim().split(/\s+/).map(function(a){return Aa(a,b)}).join(" ")}function Aa(a,b){var c=b?g[J]:g[I];return a.replace(c,function(b,c,e,f,g){d("tilde",a,b,c,e,f,g);var h;return ya(c)?h="":ya(e)?h=">="+c+".0.0 <"+(+c+1)+".0.0":ya(f)?h=">="+c+"."+e+".0 <"+c+"."+(+e+1)+".0":g?(d("replaceTilde pr",g),"-"!==g.charAt(0)&&(g="-"+g),h=">="+c+"."+e+"."+f+g+" <"+c+"."+(+e+1)+".0"):h=">="+c+"."+e+"."+f+" <"+c+"."+(+e+1)+".0",d("tilde return",h),h})}function Ba(a,b){return a.trim().split(/\s+/).map(function(a){return Ca(a,b)}).join(" ")}function Ca(a,b){d("caret",a,b);var c=b?g[O]:g[N];return a.replace(c,function(b,c,e,f,g){d("caret",a,b,c,e,f,g);var h;return ya(c)?h="":ya(e)?h=">="+c+".0.0 <"+(+c+1)+".0.0":ya(f)?h="0"===c?">="+c+"."+e+".0 <"+c+"."+(+e+1)+".0":">="+c+"."+e+".0 <"+(+c+1)+".0.0":g?(d("replaceCaret pr",g),"-"!==g.charAt(0)&&(g="-"+g),h="0"===c?"0"===e?">="+c+"."+e+"."+f+g+" <"+c+"."+e+"."+(+f+1):">="+c+"."+e+"."+f+g+" <"+c+"."+(+e+1)+".0":">="+c+"."+e+"."+f+g+" <"+(+c+1)+".0.0"):(d("no pr"),h="0"===c?"0"===e?">="+c+"."+e+"."+f+" <"+c+"."+e+"."+(+f+1):">="+c+"."+e+"."+f+" <"+c+"."+(+e+1)+".0":">="+c+"."+e+"."+f+" <"+(+c+1)+".0.0"),d("caret return",h),h})}function Da(a,b){return d("replaceXRanges",a,b),a.split(/\s+/).map(function(a){return Ea(a,b)}).join(" ")}function Ea(a,b){a=a.trim();var c=b?g[E]:g[D];return a.replace(c,function(b,c,e,f,g,h){d("xRange",a,b,c,e,f,g,h);var i=ya(e),j=i||ya(f),k=j||ya(g),l=k;return"="===c&&l&&(c=""),i?b=">"===c||"<"===c?"<0.0.0":"*":c&&l?(j&&(f=0),k&&(g=0),">"===c?(c=">=",j?(e=+e+1,f=0,g=0):k&&(f=+f+1,g=0)):"<="===c&&(c="<",j?e=+e+1:f=+f+1),b=c+e+"."+f+"."+g):j?b=">="+e+".0.0 <"+(+e+1)+".0.0":k&&(b=">="+e+"."+f+".0 <"+e+"."+(+f+1)+".0"),d("xRange return",b),b})}function Fa(a,b){return d("replaceStars",a,b),a.trim().replace(g[V],"")}function Ga(a,b,c,d,e,f,g,h,i,j,k,l,m){return b=ya(c)?"":ya(d)?">="+c+".0.0":ya(e)?">="+c+"."+d+".0":">="+b,h=ya(i)?"":ya(j)?"<"+(+i+1)+".0.0":ya(k)?"<"+i+"."+(+j+1)+".0":l?"<="+i+"."+j+"."+k+"-"+l:"<="+h,(b+" "+h).trim()}function Ha(a,b){for(var c=0;c<a.length;c++)if(!a[c].test(b))return!1;if(b.prerelease.length){for(var c=0;c<a.length;c++)if(d(a[c].semver),a[c].semver!==ua&&a[c].semver.prerelease.length>0){var e=a[c].semver;if(e.major===b.major&&e.minor===b.minor&&e.patch===b.patch)return!0}return!1}return!0}function Ia(a,b,c){try{b=new va(b,c)}catch(a){return!1}return b.test(a)}function Ja(a,b,c){return a.filter(function(a){return Ia(a,b,c)}).sort(function(a,b){return ja(a,b,c)})[0]||null}function Ka(a,b,c){return a.filter(function(a){return Ia(a,b,c)}).sort(function(a,b){return ha(a,b,c)})[0]||null}function La(a,b){try{return new va(a,b).range||"*"}catch(a){return null}}function Ma(a,b,c){return Oa(a,b,"<",c)}function Na(a,b,c){return Oa(a,b,">",c)}function Oa(a,b,c,d){a=new $(a,d),b=new va(b,d);var e,f,g,h,i;switch(c){case">":e=ma,f=ra,g=na,h=">",i=">=";break;case"<":e=na,f=qa,g=ma,h="<",i="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ia(a,b,d))return!1;for(var j=0;j<b.set.length;++j){var k=b.set[j],l=null,m=null;if(k.forEach(function(a){a.semver===ua&&(a=new ta(">=0.0.0")),l=l||a,m=m||a,e(a.semver,l.semver,d)?l=a:g(a.semver,m.semver,d)&&(m=a)}),l.operator===h||l.operator===i)return!1;if((!m.operator||m.operator===h)&&f(a,m.semver))return!1;if(m.operator===i&&g(a,m.semver))return!1}return!0}function Pa(a,b){var c=X(a,b);return c&&c.prerelease.length?c.prerelease:null}c=b.exports=$;var d;d="object"==typeof a&&a.env&&a.env.NODE_DEBUG&&/\bsemver\b/i.test(a.env.NODE_DEBUG)?function(){var a=Array.prototype.slice.call(arguments,0);a.unshift("SEMVER"),console.log.apply(console,a)}:function(){},c.SEMVER_SPEC_VERSION="2.0.0";var e=256,f=Number.MAX_SAFE_INTEGER||9007199254740991,g=c.re=[],h=c.src=[],i=0,j=i++;h[j]="0|[1-9]\\d*";var k=i++;h[k]="[0-9]+";var l=i++;h[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var m=i++;h[m]="("+h[j]+")\\.("+h[j]+")\\.("+h[j]+")";var n=i++;h[n]="("+h[k]+")\\.("+h[k]+")\\.("+h[k]+")";var o=i++;h[o]="(?:"+h[j]+"|"+h[l]+")";var p=i++;h[p]="(?:"+h[k]+"|"+h[l]+")";var q=i++;h[q]="(?:-("+h[o]+"(?:\\."+h[o]+")*))";var r=i++;h[r]="(?:-?("+h[p]+"(?:\\."+h[p]+")*))";var s=i++;h[s]="[0-9A-Za-z-]+";var t=i++;h[t]="(?:\\+("+h[s]+"(?:\\."+h[s]+")*))";var u=i++,v="v?"+h[m]+h[q]+"?"+h[t]+"?";h[u]="^"+v+"$";var w="[v=\\s]*"+h[n]+h[r]+"?"+h[t]+"?",x=i++;h[x]="^"+w+"$";var y=i++;h[y]="((?:<|>)?=?)";var z=i++;h[z]=h[k]+"|x|X|\\*";var A=i++;h[A]=h[j]+"|x|X|\\*";var B=i++;h[B]="[v=\\s]*("+h[A]+")(?:\\.("+h[A]+")(?:\\.("+h[A]+")(?:"+h[q]+")?"+h[t]+"?)?)?";var C=i++;h[C]="[v=\\s]*("+h[z]+")(?:\\.("+h[z]+")(?:\\.("+h[z]+")(?:"+h[r]+")?"+h[t]+"?)?)?";var D=i++;h[D]="^"+h[y]+"\\s*"+h[B]+"$";var E=i++;h[E]="^"+h[y]+"\\s*"+h[C]+"$";var F=i++;h[F]="(?:~>?)";var G=i++;h[G]="(\\s*)"+h[F]+"\\s+",g[G]=new RegExp(h[G],"g");var H="$1~",I=i++;h[I]="^"+h[F]+h[B]+"$";var J=i++;h[J]="^"+h[F]+h[C]+"$";var K=i++;h[K]="(?:\\^)";var L=i++;h[L]="(\\s*)"+h[K]+"\\s+",g[L]=new RegExp(h[L],"g");var M="$1^",N=i++;h[N]="^"+h[K]+h[B]+"$";var O=i++;h[O]="^"+h[K]+h[C]+"$";var P=i++;h[P]="^"+h[y]+"\\s*("+w+")$|^$";var Q=i++;h[Q]="^"+h[y]+"\\s*("+v+")$|^$";var R=i++;h[R]="(\\s*)"+h[y]+"\\s*("+w+"|"+h[B]+")",g[R]=new RegExp(h[R],"g");var S="$1$2$3",T=i++;h[T]="^\\s*("+h[B]+")\\s+-\\s+("+h[B]+")\\s*$";var U=i++;h[U]="^\\s*("+h[C]+")\\s+-\\s+("+h[C]+")\\s*$";var V=i++;h[V]="(<|>)?=?\\s*\\*";for(var W=0;W<i;W++)d(W,h[W]),g[W]||(g[W]=new RegExp(h[W]));c.parse=X,c.valid=Y,c.clean=Z,c.SemVer=$,$.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},$.prototype.toString=function(){return this.version},$.prototype.compare=function(a){return d("SemVer.compare",this.version,this.loose,a),a instanceof $||(a=new $(a,this.loose)),this.compareMain(a)||this.comparePre(a)},$.prototype.compareMain=function(a){return a instanceof $||(a=new $(a,this.loose)),ca(this.major,a.major)||ca(this.minor,a.minor)||ca(this.patch,a.patch)},$.prototype.comparePre=function(a){if(a instanceof $||(a=new $(a,this.loose)),this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;var b=0;do{var c=this.prerelease[b],e=a.prerelease[b];if(d("prerelease compare",b,c,e),void 0===c&&void 0===e)return 0;if(void 0===e)return 1;if(void 0===c)return-1;if(c!==e)return ca(c,e)}while(++b)},$.prototype.inc=function(a,b){switch(a){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",b);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",b);break;case"prepatch":this.prerelease.length=0,this.inc("patch",b),this.inc("pre",b);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",b),this.inc("pre",b);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var c=this.prerelease.length;--c>=0;)"number"==typeof this.prerelease[c]&&(this.prerelease[c]++,c=-2);-1===c&&this.prerelease.push(0)}b&&(this.prerelease[0]===b?isNaN(this.prerelease[1])&&(this.prerelease=[b,0]):this.prerelease=[b,0]);break;default:throw new Error("invalid increment argument: "+a)}return this.format(),this.raw=this.version,this},c.inc=_,c.diff=aa,c.compareIdentifiers=ca;var ba=/^[0-9]+$/;c.rcompareIdentifiers=da,c.major=ea,c.minor=fa,c.patch=ga,c.compare=ha,c.compareLoose=ia,c.rcompare=ja,c.sort=ka,c.rsort=la,c.gt=ma,c.lt=na,c.eq=oa,c.neq=pa,c.gte=qa,c.lte=ra,c.cmp=sa,c.Comparator=ta;var ua={};ta.prototype.parse=function(a){var b=this.loose?g[P]:g[Q],c=a.match(b);if(!c)throw new TypeError("Invalid comparator: "+a);this.operator=c[1],"="===this.operator&&(this.operator=""),c[2]?this.semver=new $(c[2],this.loose):this.semver=ua},ta.prototype.toString=function(){return this.value},ta.prototype.test=function(a){return d("Comparator.test",a,this.loose),this.semver===ua||("string"==typeof a&&(a=new $(a,this.loose)),sa(a,this.operator,this.semver,this.loose))},c.Range=va,va.prototype.format=function(){return this.range=this.set.map(function(a){return a.join(" ").trim()}).join("||").trim(),this.range},va.prototype.toString=function(){return this.range},va.prototype.parseRange=function(a){var b=this.loose;a=a.trim(),d("range",a,b);var c=b?g[U]:g[T];a=a.replace(c,Ga),d("hyphen replace",a),a=a.replace(g[R],S),d("comparator trim",a,g[R]),a=a.replace(g[G],H),a=a.replace(g[L],M),a=a.split(/\s+/).join(" ");var e=b?g[P]:g[Q],f=a.split(" ").map(function(a){return xa(a,b)}).join(" ").split(/\s+/);return this.loose&&(f=f.filter(function(a){return!!a.match(e)})),f=f.map(function(a){return new ta(a,b)})},c.toComparators=wa,va.prototype.test=function(a){if(!a)return!1;"string"==typeof a&&(a=new $(a,this.loose));for(var b=0;b<this.set.length;b++)if(Ha(this.set[b],a))return!0;return!1},c.satisfies=Ia,c.maxSatisfying=Ja,c.minSatisfying=Ka,c.validRange=La,c.ltr=Ma,c.gtr=Na,c.outside=Oa,c.prerelease=Pa}).call(this,a("_process"))},{_process:15}],190:[function(a,b,c){b.exports={_from:"node-pre-gyp@~0.6.31",_id:"node-pre-gyp@0.6.31",_location:"/sqlite3/node-pre-gyp",_phantomChildren:{},_requiredBy:["/sqlite3"],_shasum:"d8a00ddaa301a940615dbcc8caad4024d58f6017",_shrinkwrap:null,author:{name:"Dane Springmeyer",email:"dane@mapbox.com"},bin:{"node-pre-gyp":"./bin/node-pre-gyp"},bugs:{url:"https://github.com/mapbox/node-pre-gyp/issues"},dependencies:{mkdirp:"~0.5.1",nopt:"~3.0.6",npmlog:"^4.0.0",rc:"~1.1.6",request:"^2.75.0",rimraf:"~2.5.4",semver:"~5.3.0",tar:"~2.2.1","tar-pack":"~3.3.0"},description:"Node.js native addon binary install tool",devDependencies:{"aws-sdk":"2.x",jshint:"2.x",mocha:"3.x",retire:"1.2.10"},gitHead:"2c32561503c33728cb8de5a445e76a28868826a8",homepage:"https://github.com/mapbox/node-pre-gyp#readme",jshintConfig:{node:!0,globalstrict:!0,undef:!0,unused:!0,noarg:!0,mocha:!0},keywords:["native","addon","module","c","c++","bindings","binary"],license:"BSD-3-Clause",main:"./lib/node-pre-gyp.js",name:"node-pre-gyp",optionalDependencies:{},readme:'# node-pre-gyp\n\n#### node-pre-gyp makes it easy to publish and install Node.js C++ addons from binaries\n\n[![NPM](https://nodei.co/npm/node-pre-gyp.png?downloads=true&downloadRank=true)](https://nodei.co/npm/node-pre-gyp/)\n\n[![Build Status](https://api.travis-ci.org/mapbox/node-pre-gyp.svg)](https://travis-ci.org/mapbox/node-pre-gyp)\n[![Build status](https://ci.appveyor.com/api/projects/status/3nxewb425y83c0gv)](https://ci.appveyor.com/project/Mapbox/node-pre-gyp)\n[![Dependencies](https://david-dm.org/mapbox/node-pre-gyp.svg)](https://david-dm.org/mapbox/node-pre-gyp)\n\n`node-pre-gyp` stands between [npm](https://github.com/npm/npm) and [node-gyp](https://github.com/Tootallnate/node-gyp) and offers a cross-platform method of binary deployment.\n\n### Features\n\n - A command line tool called `node-pre-gyp` that can install your package\'s C++ module from a binary.\n - A variety of developer targeted commands for packaging, testing, and publishing binaries.\n - A JavaScript module that can dynamically require your installed binary: `require(\'node-pre-gyp\').find`\n\nFor a hello world example of a module packaged with `node-pre-gyp` see <https://github.com/springmeyer/node-addon-example> and [the wiki ](https://github.com/mapbox/node-pre-gyp/wiki/Modules-using-node-pre-gyp) for real world examples.\n\n## Credits\n\n - The module is modeled after [node-gyp](https://github.com/Tootallnate/node-gyp) by [@Tootallnate](https://github.com/Tootallnate)\n - Motivation for initial development came from [@ErisDS](https://github.com/ErisDS) and the [Ghost Project](https://github.com/TryGhost/Ghost).\n - Development is sponsored by [Mapbox](https://www.mapbox.com/)\n\n## FAQ\n\nSee the [Frequently Ask Questions](https://github.com/mapbox/node-pre-gyp/wiki/FAQ).\n\n## Depends\n\n - Node.js >= node v0.10.x\n\n## Install\n\n`node-pre-gyp` is designed to be installed as a local dependency of your Node.js C++ addon and accessed like:\n\n    ./node_modules/.bin/node-pre-gyp --help\n\nBut you can also install it globally:\n\n    npm install node-pre-gyp -g\n\n## Usage\n\n### Commands\n\nView all possible commands:\n\n    node-pre-gyp --help\n\n- clean - Remove the entire folder containing the compiled .node module\n- install - Install pre-built binary for module\n- reinstall - Run "clean" and "install" at once\n- build - Compile the module by dispatching to node-gyp or nw-gyp\n- rebuild - Run "clean" and "build" at once\n- package - Pack binary into tarball\n- testpackage - Test that the staged package is valid\n- publish - Publish pre-built binary\n- unpublish - Unpublish pre-built binary\n- info - Fetch info on published binaries\n\nYou can also chain commands:\n\n    node-pre-gyp clean build unpublish publish info\n\n### Options\n\nOptions include:\n\n - `-C/--directory`: run the command in this directory\n - `--build-from-source`: build from source instead of using pre-built binary\n - `--update-binary`: reinstall by replacing previously installed local binary with remote binary\n - `--runtime=node-webkit`: customize the runtime: `node`, `electron` and `node-webkit` are the valid options\n - `--fallback-to-build`: fallback to building from source if pre-built binary is not available\n - `--target=0.10.25`: Pass the target node or node-webkit version to compile against\n - `--target_arch=ia32`: Pass the target arch and override the host `arch`. Valid values are \'ia32\',\'x64\', or `arm`.\n - `--target_platform=win32`: Pass the target platform and override the host `platform`. Valid values are `linux`, `darwin`, `win32`, `sunos`, `freebsd`, `openbsd`, and `aix`.\n\nBoth `--build-from-source` and `--fallback-to-build` can be passed alone or they can provide values. You can pass `--fallback-to-build=false` to override the option as declared in package.json. In addition to being able to pass `--build-from-source` you can also pass `--build-from-source=myapp` where `myapp` is the name of your module.\n\nFor example: `npm install --build-from-source=myapp`. This is useful if:\n\n - `myapp` is referenced in the package.json of a larger app and therefore `myapp` is being installed as a dependent with `npm install`.\n - The larger app also depends on other modules installed with `node-pre-gyp`\n - You only want to trigger a source compile for `myapp` and the other modules.\n\n### Configuring\n\nThis is a guide to configuring your module to use node-pre-gyp.\n\n#### 1) Add new entries to your `package.json`\n\n - Add `node-pre-gyp` to `dependencies`\n - Add `aws-sdk` as a `devDependency`\n - Add a custom `install` script\n - Declare a `binary` object\n\nThis looks like:\n\n```js\n    "dependencies"  : {\n      "node-pre-gyp": "0.6.x"\n    },\n    "devDependencies": {\n      "aws-sdk": "2.x"\n    }\n    "scripts": {\n        "preinstall": "npm install node-pre-gyp",\n        "install": "node-pre-gyp install --fallback-to-build"\n    },\n    "binary": {\n        "module_name": "your_module",\n        "module_path": "./lib/binding/",\n        "host": "https://your_module.s3-us-west-1.amazonaws.com"\n    }\n```\n\nFor a full example see [node-addon-examples\'s package.json](https://github.com/springmeyer/node-addon-example/blob/master/package.json).\n\n##### The `binary` object has three required properties\n\n###### module_name\n\nThe name of your native node module. This value must:\n\n - Match the name passed to [the NODE_MODULE macro](http://nodejs.org/api/addons.html#addons_hello_world)\n - Must be a valid C variable name (e.g. it cannot contain `-`)\n - Should not include the `.node` extension.\n\n###### module_path\n\nThe location your native module is placed after a build. This should be an empty directory without other Javascript files. This entire directory will be packaged in the binary tarball. When installing from a remote package this directory will be overwritten with the contents of the tarball.\n\nNote: This property supports variables based on [Versioning](#versioning).\n\n###### host\n\nA url to the remote location where you\'ve published tarball binaries (must be `https` not `http`).\n\nIt is highly recommended that you use Amazon S3. The reasons are:\n\n  - Various node-pre-gyp commands like `publish` and `info` only work with an S3 host.\n  - S3 is a very solid hosting platform for distributing large files.\n  - We provide detail documentation for using [S3 hosting](#s3-hosting) with node-pre-gyp.\n\nWhy then not require S3? Because while some applications using node-pre-gyp need to distribute binaries as large as 20-30 MB, others might have very small binaries and might wish to store them in a GitHub repo. This is not recommended, but if an author really wants to host in a non-s3 location then it should be possible.\n\nIt should also be mentioned that there is an optional and entirely separate npm module called [node-pre-gyp-github](https://github.com/bchr02/node-pre-gyp-github) which is intended to complement node-pre-gyp and be installed along with it. It provides the ability to store and publish your binaries within your repositories GitHub Releases if you would rather not use S3 directly. Installation and usage instructions can be found [here](https://github.com/bchr02/node-pre-gyp-github), but the basic premise is that instead of using the ```node-pre-gyp publish``` command you would use ```node-pre-gyp-github publish```.\n\n##### The `binary` object has two optional properties\n\n###### remote_path\n\nIt **is recommended** that you customize this property. This is an extra path to use for publishing and finding remote tarballs. The default value for `remote_path` is `""` meaning that if you do not provide it then all packages will be published at the base of the `host`. It is recommended to provide a value like `./{name}/v{version}` to help organize remote packages in the case that you choose to publish multiple node addons to the same `host`.\n\nNote: This property supports variables based on [Versioning](#versioning).\n\n###### package_name\n\nIt is **not recommended** to override this property unless you are also overriding the `remote_path`. This is the versioned name of the remote tarball containing the binary `.node` module and any supporting files you\'ve placed inside the `module_path` directory. Unless you specify `package_name` in your `package.json` then it defaults to `{module_name}-v{version}-{node_abi}-{platform}-{arch}.tar.gz` which allows your binary to work across node versions, platforms, and architectures. If you are using `remote_path` that is also versioned by `./{module_name}/v{version}` then you could remove these variables from the `package_name` and just use: `{node_abi}-{platform}-{arch}.tar.gz`. Then your remote tarball will be looked up at, for example, `https://example.com/your-module/v0.1.0/node-v11-linux-x64.tar.gz`.\n\nAvoiding the version of your module in the `package_name` and instead only embedding in a directory name can be useful when you want to make a quick tag of your module that does not change any C++ code. In this case you can just copy binaries to the new version behind the scenes like:\n\n```sh\naws s3 sync --acl public-read s3://mapbox-node-binary/sqlite3/v3.0.3/ s3://mapbox-node-binary/sqlite3/v3.0.4/\n```\n\nNote: This property supports variables based on [Versioning](#versioning).\n\n#### 2) Add a new target to binding.gyp\n\n`node-pre-gyp` calls out to `node-gyp` to compile the module and passes variables along like [module_name](#module_name) and [module_path](#module_path).\n\nA new target must be added to `binding.gyp` that moves the compiled `.node` module from `./build/Release/module_name.node` into the directory specified by `module_path`.\n\nAdd a target like this at the end of your `targets` list:\n\n```js\n    {\n      "target_name": "action_after_build",\n      "type": "none",\n      "dependencies": [ "<(module_name)" ],\n      "copies": [\n        {\n          "files": [ "<(PRODUCT_DIR)/<(module_name).node" ],\n          "destination": "<(module_path)"\n        }\n      ]\n    }\n```\n\nFor a full example see [node-addon-example\'s binding.gyp](https://github.com/springmeyer/node-addon-example/blob/2ff60a8ded7f042864ad21db00c3a5a06cf47075/binding.gyp).\n\n#### 3) Dynamically require your `.node`\n\nInside the main js file that requires your addon module you are likely currently doing:\n\n```js\nvar binding = require(\'../build/Release/binding.node\');\n```\n\nor:\n\n```js\nvar bindings = require(\'./bindings\')\n```\n\nChange those lines to:\n\n```js\nvar binary = require(\'node-pre-gyp\');\nvar path = require(\'path\');\nvar binding_path = binary.find(path.resolve(path.join(__dirname,\'./package.json\')));\nvar binding = require(binding_path);\n```\n\nFor a full example see [node-addon-example\'s index.js](https://github.com/springmeyer/node-addon-example/blob/2ff60a8ded7f042864ad21db00c3a5a06cf47075/index.js#L1-L4)\n\n#### 4) Build and package your app\n\nNow build your module from source:\n\n    npm install --build-from-source\n\nThe `--build-from-source` tells `node-pre-gyp` to not look for a remote package and instead dispatch to node-gyp to build.\n\nNow `node-pre-gyp` should now also be installed as a local dependency so the command line tool it offers can be found at `./node_modules/.bin/node-pre-gyp`.\n\n#### 5) Test\n\nNow `npm test` should work just as it did before.\n\n#### 6) Publish the tarball\n\nThen package your app:\n\n    ./node_modules/.bin/node-pre-gyp package\n\nOnce packaged, now you can publish:\n\n    ./node_modules/.bin/node-pre-gyp publish\n\nCurrently the `publish` command pushes your binary to S3. This requires:\n\n - You have installed `aws-sdk` with `npm install aws-sdk`\n - You have created a bucket already.\n - The `host` points to an S3 http or https endpoint.\n - You have configured node-pre-gyp to read your S3 credentials (see [S3 hosting](#s3-hosting) for details).\n\nYou can also host your binaries elsewhere. To do this requires:\n\n - You manually publish the binary created by the `package` command to an `https` endpoint\n - Ensure that the `host` value points to your custom `https` endpoint.\n\n#### 7) Automate builds\n\nNow you need to publish builds for all the platforms and node versions you wish to support. This is best automated.\n\n - See [Appveyor Automation](#appveyor-automation) for how to auto-publish builds on Windows.\n - See [Travis Automation](#travis-automation) for how to auto-publish builds on OS X and Linux.\n\n#### 8) You\'re done!\n\nNow publish your module to the npm registry. Users will now be able to install your module from a binary.\n\nWhat will happen is this:\n\n1. `npm install <your package>` will pull from the npm registry\n2. npm will run the `install` script which will call out to `node-pre-gyp`\n3. `node-pre-gyp` will fetch the binary `.node` module and unpack in the right place\n4. Assuming that all worked, you are done\n\nIf a a binary was not available for a given platform and `--fallback-to-build` was used then `node-gyp rebuild` will be called to try to source compile the module.\n\n## S3 Hosting\n\nYou can host wherever you choose but S3 is cheap, `node-pre-gyp publish` expects it, and S3 can be integrated well with [Travis.ci](http://travis-ci.org) to automate builds for OS X and Ubuntu, and with [Appveyor](http://appveyor.com) to automate builds for Windows. Here is an approach to do this:\n\nFirst, get setup locally and test the workflow:\n\n#### 1) Create an S3 bucket\n\nAnd have your **key** and **secret key** ready for writing to the bucket.\n\nIt is recommended to create a IAM user with a policy that only gives permissions to the specific bucket you plan to publish to. This can be done in the [IAM console](https://console.aws.amazon.com/iam/) by: 1) adding a new user, 2) choosing `Attach User Policy`, 3) Using the `Policy Generator`, 4) selecting `Amazon S3` for the service, 5) adding the actions: `DeleteObject`, `GetObject`, `GetObjectAcl`, `ListBucket`, `PutObject`, `PutObjectAcl`, 6) adding an ARN of `arn:aws:s3:::bucket/*` (replacing `bucket` with your bucket name), and finally 7) clicking `Add Statement` and saving the policy. It should generate a policy like:\n\n```js\n{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Sid": "Stmt1394587197000",\n      "Effect": "Allow",\n      "Action": [\n        "s3:DeleteObject",\n        "s3:GetObject",\n        "s3:GetObjectAcl",\n        "s3:ListBucket",\n        "s3:PutObject",\n        "s3:PutObjectAcl"\n      ],\n      "Resource": [\n        "arn:aws:s3:::node-pre-gyp-tests/*"\n      ]\n    }\n  ]\n}\n```\n\n#### 2) Install node-pre-gyp\n\nEither install it globally:\n\n    npm install node-pre-gyp -g\n\nOr put the local version on your PATH\n\n    export PATH=`pwd`/node_modules/.bin/:$PATH\n\n#### 3) Configure AWS credentials\n\nThere are several ways to do this.\n\nYou can use any of the methods described at http://docs.aws.amazon.com/AWSJavaScriptSDK/guide/node-configuring.html.\n\nOr you can create a `~/.node_pre_gyprc`\n\nOr pass options in any way supported by [RC](https://github.com/dominictarr/rc#standards)\n\nA `~/.node_pre_gyprc` looks like:\n\n```js\n{\n    "accessKeyId": "xxx",\n    "secretAccessKey": "xxx"\n}\n```\n\nAnother way is to use your environment:\n\n    export node_pre_gyp_accessKeyId=xxx\n    export node_pre_gyp_secretAccessKey=xxx\n\nYou may also need to specify the `region` if it is not explicit in the `host` value you use. The `bucket` can also be specified but it is optional because `node-pre-gyp` will detect it from the `host` value.\n\n#### 4) Package and publish your build\n\nInstall the `aws-sdk`:\n\n    npm install aws-sdk\n\nThen publish:\n\n    node-pre-gyp package publish\n\nNote: if you hit an error like `Hostname/IP doesn\'t match certificate\'s altnames` it may mean that you need to provide the `region` option in your config.\n\n## Appveyor Automation\n\n[Appveyor](http://www.appveyor.com/) can build binaries and publish the results per commit and supports:\n\n - Windows Visual Studio 2013 and related compilers\n - Both 64 bit (x64) and 32 bit (x86) build configurations\n - Multiple Node.js versions\n\nFor an example of doing this see [node-sqlite3\'s appveyor.yml](https://github.com/mapbox/node-sqlite3/blob/master/appveyor.yml).\n\nBelow is a guide to getting set up:\n\n#### 1) Create a free Appveyor account\n\nGo to https://ci.appveyor.com/signup/free and sign in with your GitHub account.\n\n#### 2) Create a new project\n\nGo to https://ci.appveyor.com/projects/new and select the GitHub repo for your module\n\n#### 3) Add appveyor.yml and push it\n\nOnce you have committed an `appveyor.yml` ([appveyor.yml reference](http://www.appveyor.com/docs/appveyor-yml)) to your GitHub repo and pushed it AppVeyor should automatically start building your project.\n\n#### 4) Create secure variables\n\nEncrypt your S3 AWS keys by going to <https://ci.appveyor.com/tools/encrypt> and hitting the `encrypt` button.\n\nThen paste the result into your `appveyor.yml`\n\n```yml\nenvironment:\n  node_pre_gyp_accessKeyId:\n    secure: Dn9HKdLNYvDgPdQOzRq/DqZ/MPhjknRHB1o+/lVU8MA=\n  node_pre_gyp_secretAccessKey:\n    secure: W1rwNoSnOku1r+28gnoufO8UA8iWADmL1LiiwH9IOkIVhDTNGdGPJqAlLjNqwLnL\n```\n\nNOTE: keys are per account but not per repo (this is difference than Travis where keys are per repo but not related to the account used to encrypt them).\n\n#### 5) Hook up publishing\n\nJust put `node-pre-gyp package publish` in your `appveyor.yml` after `npm install`.\n\n#### 6) Publish when you want\n\nYou might wish to publish binaries only on a specific commit. To do this you could borrow from the [Travis CI idea of commit keywords](http://about.travis-ci.org/docs/user/how-to-skip-a-build/) and add special handling for commit messages with `[publish binary]`:\n\n    SET CM=%APPVEYOR_REPO_COMMIT_MESSAGE%\n    if not "%CM%" == "%CM:[publish binary]=%" node-pre-gyp --msvs_version=2013 publish\n\nIf your commit message contains special characters (e.g. `&`) this method might fail. An alternative is to use PowerShell, which gives you additional possibilities, like ignoring case by using `ToLower()`:\n\n    ps: if($env:APPVEYOR_REPO_COMMIT_MESSAGE.ToLower().Contains(\'[publish binary]\')) { node-pre-gyp --msvs_version=2013 publish }\n\nRemember this publishing is not the same as `npm publish`. We\'re just talking about the binary module here and not your entire npm package.\n\n## Travis Automation\n\n[Travis](https://travis-ci.org/) can push to S3 after a successful build and supports both:\n\n - Ubuntu Precise and OS X (64 bit)\n - Multiple Node.js versions\n\nFor an example of doing this see [node-add-example\'s .travis.yml](https://github.com/springmeyer/node-addon-example/blob/2ff60a8ded7f042864ad21db00c3a5a06cf47075/.travis.yml).\n\nNote: if you need 32 bit binaries, this can be done from a 64 bit Travis machine. See [the node-sqlite3 scripts for an example of doing this](https://github.com/mapbox/node-sqlite3/blob/bae122aa6a2b8a45f6b717fab24e207740e32b5d/scripts/build_against_node.sh#L54-L74).\n\nBelow is a guide to getting set up:\n\n#### 1) Install the Travis gem\n\n    gem install travis\n\n#### 2) Create secure variables\n\nMake sure you run this command from within the directory of your module.\n\nUse `travis-encrypt` like:\n\n    travis encrypt node_pre_gyp_accessKeyId=${node_pre_gyp_accessKeyId}\n    travis encrypt node_pre_gyp_secretAccessKey=${node_pre_gyp_secretAccessKey}\n\nThen put those values in your `.travis.yml` like:\n\n```yaml\nenv:\n  global:\n    - secure: F+sEL/v56CzHqmCSSES4pEyC9NeQlkoR0Gs/ZuZxX1ytrj8SKtp3MKqBj7zhIclSdXBz4Ev966Da5ctmcTd410p0b240MV6BVOkLUtkjZJyErMBOkeb8n8yVfSoeMx8RiIhBmIvEn+rlQq+bSFis61/JkE9rxsjkGRZi14hHr4M=\n    - secure: o2nkUQIiABD139XS6L8pxq3XO5gch27hvm/gOdV+dzNKc/s2KomVPWcOyXNxtJGhtecAkABzaW8KHDDi5QL1kNEFx6BxFVMLO8rjFPsMVaBG9Ks6JiDQkkmrGNcnVdxI/6EKTLHTH5WLsz8+J7caDBzvKbEfTux5EamEhxIWgrI=\n```\n\nMore details on Travis encryption at http://about.travis-ci.org/docs/user/encryption-keys/.\n\n#### 3) Hook up publishing\n\nJust put `node-pre-gyp package publish` in your `.travis.yml` after `npm install`.\n\n##### OS X publishing\n\nIf you want binaries for OS X in addition to linux you can enable [multi-os for Travis](http://docs.travis-ci.com/user/multi-os/#Setting-.travis.yml)\n\nUse a configuration like:\n\n```yml\n\nlanguage: cpp\n\nos:\n- linux\n- osx\n\nenv:\n  matrix:\n    - NODE_VERSION="0.10"\n    - NODE_VERSION="0.11.14"\n\nbefore_install:\n- rm -rf ~/.nvm/ && git clone --depth 1 https://github.com/creationix/nvm.git ~/.nvm\n- source ~/.nvm/nvm.sh\n- nvm install $NODE_VERSION\n- nvm use $NODE_VERSION\n```\n\nSee [Travis OS X Gotchas](#travis-os-x-gotchas) for why we replace `language: node_js` and `node_js:` sections with `language: cpp` and a custom matrix.\n\nAlso create platform specific sections for any deps that need install. For example if you need libpng:\n\n```yml\n- if [ $(uname -s) == \'Linux\' ]; then apt-get install libpng-dev; fi;\n- if [ $(uname -s) == \'Darwin\' ]; then brew install libpng; fi;\n```\n\nFor detailed multi-OS examples see [node-mapnik](https://github.com/mapnik/node-mapnik/blob/master/.travis.yml) and [node-sqlite3](https://github.com/mapbox/node-sqlite3/blob/master/.travis.yml).\n\n##### Travis OS X Gotchas\n\nFirst, unlike the Travis Linux machines, the OS X machines do not put `node-pre-gyp` on PATH by default. To do so you will need to:\n\n```sh\nexport PATH=$(pwd)/node_modules/.bin:${PATH}\n```\n\nSecond, the OS X machines do not support using a matrix for installing different Node.js versions. So you need to bootstrap the installation of Node.js in a cross platform way.\n\nBy doing:\n\n```yml\nenv:\n  matrix:\n    - NODE_VERSION="0.10"\n    - NODE_VERSION="0.11.14"\n\nbefore_install:\n - rm -rf ~/.nvm/ && git clone --depth 1 https://github.com/creationix/nvm.git ~/.nvm\n - source ~/.nvm/nvm.sh\n - nvm install $NODE_VERSION\n - nvm use $NODE_VERSION\n```\n\nYou can easily recreate the previous behavior of this matrix:\n\n```yml\nnode_js:\n  - "0.10"\n  - "0.11.14"\n```\n\n#### 4) Publish when you want\n\nYou might wish to publish binaries only on a specific commit. To do this you could borrow from the [Travis CI idea of commit keywords](http://about.travis-ci.org/docs/user/how-to-skip-a-build/) and add special handling for commit messages with `[publish binary]`:\n\n    COMMIT_MESSAGE=$(git log --format=%B --no-merges -n 1 | tr -d \'\\n\')\n    if [[ ${COMMIT_MESSAGE} =~ "[publish binary]" ]]; then node-pre-gyp publish; fi;\n\nThen you can trigger new binaries to be built like:\n\n    git commit -a -m "[publish binary]"\n\nOr, if you don\'t have any changes to make simply run:\n\n    git commit --allow-empty -m "[publish binary]"\n\nWARNING: if you are working in a pull request and publishing binaries from there then you will want to avoid double publishing when Travis CI builds both the `push` and `pr`. You only want to run the publish on the `push` commit. See https://github.com/Project-OSRM/node-osrm/blob/8eb837abe2e2e30e595093d16e5354bc5c573575/scripts/is_pr_merge.sh which is called from https://github.com/Project-OSRM/node-osrm/blob/8eb837abe2e2e30e595093d16e5354bc5c573575/scripts/publish.sh for an example of how to do this.\n\nRemember this publishing is not the same as `npm publish`. We\'re just talking about the binary module here and not your entire npm package. To automate the publishing of your entire package to npm on Travis see http://about.travis-ci.org/docs/user/deployment/npm/\n\n# Versioning\n\nThe `binary` properties of `module_path`, `remote_path`, and `package_name` support variable substitution. The strings are evaluated by `node-pre-gyp` depending on your system and any custom build flags you passed.\n\n - `node_abi`: The node C++ `ABI` number. This value is available in Javascript as `process.versions.modules` as of [`>= v0.10.4 >= v0.11.7`](https://github.com/joyent/node/commit/ccabd4a6fa8a6eb79d29bc3bbe9fe2b6531c2d8e) and in C++ as the `NODE_MODULE_VERSION` define much earlier. For versions of Node before this was available we fallback to the V8 major and minor version.\n - `platform` matches node\'s `process.platform` like `linux`, `darwin`, and `win32` unless the user passed the `--target_platform` option to override.\n - `arch` matches node\'s `process.arch` like `x64` or `ia32` unless the user passes the `--target_arch` option to override.\n - `configuration` - Either \'Release\' or \'Debug\' depending on if `--debug` is passed during the build.\n - `module_name` - the `binary.module_name` attribute from `package.json`.\n - `version` - the semver `version` value for your module from `package.json` (NOTE: ignores the `semver.build` property).\n - `major`, `minor`, `patch`, and `prelease` match the individual semver values for your module\'s `version`\n - `build` - the sevmer `build` value. For example it would be `this.that` if your package.json `version` was `v1.0.0+this.that`\n - `prerelease` - the semver `prerelease` value. For example it would be `alpha.beta` if your package.json `version` was `v1.0.0-alpha.beta`\n\n\nThe options are visible in the code at <https://github.com/mapbox/node-pre-gyp/blob/612b7bca2604508d881e1187614870ba19a7f0c5/lib/util/versioning.js#L114-L127>\n\n# Download binary files from a mirror\n\nS3 is broken in China for the well known reason.\n\nUsing the `npm` config argument: `--{module_name}_binary_host_mirror` can download binary files through a mirror.\n\ne.g.: Install [v8-profiler](https://www.npmjs.com/package/v8-profiler) from `npm`.\n\n```bash\n$ npm install v8-profiler --profiler_binary_host_mirror=https://npm.taobao.org/mirrors/node-inspector/\n```\n',readmeFilename:"README.md",repository:{type:"git",url:"git://github.com/mapbox/node-pre-gyp.git"},scripts:{prepublish:"retire -n && npm ls && jshint test/build.test.js test/s3_setup.test.js test/versioning.test.js",test:"jshint lib lib/util scripts bin/node-pre-gyp && mocha -R spec --timeout 500000","update-crosswalk":"node scripts/abi_crosswalk.js"},version:"0.6.31"}},{}],191:[function(a,b,c){arguments[4][174][0].apply(c,arguments)},{"ansi-regex":62,dup:174}],192:[function(a,b,c){(function(a){"use strict";var c=a.argv,d=c.indexOf("--"),e=function(a){a="--"+a;var b=c.indexOf(a);return-1!==b&&(-1===d||b<d)};b.exports=function(){return"FORCE_COLOR"in a.env||!(e("no-color")||e("no-colors")||e("color=false"))&&(!!(e("color")||e("colors")||e("color=true")||e("color=always"))||!(a.stdout&&!a.stdout.isTTY)&&("win32"===a.platform||("COLORTERM"in a.env||"dumb"!==a.env.TERM&&!!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(a.env.TERM))))}()}).call(this,a("_process"))},{_process:15}],193:[function(a,b,c){function d(a){this.options=a||{locator:{}}}function e(a,b,c){function g(b){var f=a[b];!f&&e&&(f=2==a.length?function(c){a(b,c)}:a),d[b]=f&&function(a){f("[xmldom "+b+"]\t"+a+h(c))}||function(){}}if(!a){if(b instanceof f)return b;a=b}var d={},e=a instanceof Function;return c=c||{},g("warning"),g("error"),g("fatalError"),d}function f(){this.cdata=!1}function g(a,b){b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber}function h(a){if(a)return"\n@"+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function i(a,b,c){return"string"==typeof a?a.substr(b,c):a.length>=b+c||b?new java.lang.String(a,b,c)+"":a}function j(a,b){a.currentElement?a.currentElement.appendChild(b):a.document.appendChild(b)}if(d.prototype.parseFromString=function(a,b){var c=this.options,d=new k,g=c.domBuilder||new f,h=c.errorHandler,i=c.locator,j=c.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return i&&g.setDocumentLocator(i),d.errorHandler=e(h,g,i),d.domBuilder=c.domBuilder||g,/\/x?html?$/.test(b)&&(l.nbsp="",l.copy="",j[""]="http://www.w3.org/1999/xhtml"),j.xml=j.xml||"http://www.w3.org/XML/1998/namespace",a?d.parse(a,j,l):d.errorHandler.error("invalid document source"),g.document},f.prototype={startDocument:function(){this.document=(new l).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(a,b,c,d){var e=this.document,f=e.createElementNS(a,c||b),h=d.length;j(this,f),this.currentElement=f,this.locator&&g(this.locator,f);for(var i=0;i<h;i++){var a=d.getURI(i),k=d.getValue(i),c=d.getQName(i),l=e.createAttributeNS(a,c);l.getOffset&&g(l.getOffset(1),l),l.value=l.nodeValue=k,f.setAttributeNode(l)}},endElement:function(a,b,c){var d=this.currentElement;d.tagName;this.currentElement=d.parentNode},startPrefixMapping:function(a,b){},endPrefixMapping:function(a){},processingInstruction:function(a,b){var c=this.document.createProcessingInstruction(a,b);this.locator&&g(this.locator,c),j(this,c)},ignorableWhitespace:function(a,b,c){},characters:function(a,b,c){if(a=i.apply(this,arguments),this.currentElement&&a){if(this.cdata){var d=this.document.createCDATASection(a);this.currentElement.appendChild(d)}else{var d=this.document.createTextNode(a);this.currentElement.appendChild(d)}this.locator&&g(this.locator,d)}},skippedEntity:function(a){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,b,c){a=i.apply(this,arguments);var d=this.document.createComment(a);this.locator&&g(this.locator,d),j(this,d)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,b,c){var d=this.document.implementation;if(d&&d.createDocumentType){var e=d.createDocumentType(a,b,c);this.locator&&g(this.locator,e),j(this,e)}},warning:function(a){console.warn("[xmldom warning]\t"+a,h(this.locator))},error:function(a){console.error("[xmldom error]\t"+a,h(this.locator))},fatalError:function(a){throw console.error("[xmldom fatalError]\t"+a,h(this.locator)),a}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){f.prototype[a]=function(){return null}}),"function"==typeof a){var k=a("./sax").XMLReader,l=c.DOMImplementation=a("./dom").DOMImplementation;c.XMLSerializer=a("./dom").XMLSerializer,c.DOMParser=d}},{"./dom":194,"./sax":195}],194:[function(a,b,c){function d(a,b){for(var c in a)b[c]=a[c]}function e(a,b){function f(){}var c=a.prototype;if(Object.create){var e=Object.create(b.prototype);c.__proto__=e}c instanceof b||(f.prototype=b.prototype,f=new f,d(c,f),a.prototype=c=f),c.constructor!=a&&("function"!=typeof a&&console.error("unknow Class:"+a),c.constructor=a)}function K(a,b){if(b instanceof Error)var c=b;else c=this,Error.call(this,u[a]),this.message=u[a],Error.captureStackTrace&&Error.captureStackTrace(this,K);return c.code=a,b&&(this.message=this.message+": "+b),c}function L(){}function M(a,b){this._node=a,this._refresh=b,N(this)}function N(a){var b=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=b){var c=a._refresh(a._node);ra(a,"length",c.length),d(c,a),a._inc=b}}function O(){}function P(a,b){for(var c=a.length;c--;)if(a[c]===b)return c}function Q(a,b,c,d){if(d?b[P(b,d)]=c:b[b.length++]=c,a){c.ownerElement=a;var e=a.ownerDocument;e&&(d&&Y(e,a,d),X(e,a,c))}}function R(a,b,c){var d=P(b,c);if(!(d>=0))throw K(C,new Error);for(var e=b.length-1;d<e;)b[d]=b[++d];if(b.length=e,a){var f=a.ownerDocument;f&&(Y(f,a,c),c.ownerElement=null)}}function S(a){if(this._features={},a)for(var b in a)this._features=a[b]}function T(){}function U(a){return"<"==a&&"&lt;"||">"==a&&"&gt;"||"&"==a&&"&amp;"||'"'==a&&"&quot;"||"&#"+a.charCodeAt()+";"}function V(a,b){if(b(a))return!0;if(a=a.firstChild)do{if(V(a,b))return!0}while(a=a.nextSibling)}function W(){}function X(a,b,c){a&&a._inc++,"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&(b._nsMap[c.prefix?c.localName:""]=c.value)}function Y(a,b,c,d){a&&a._inc++,"http://www.w3.org/2000/xmlns/"==c.namespaceURI&&delete b._nsMap[c.prefix?c.localName:""]}function Z(a,b,c){if(a&&a._inc){a._inc++;var d=b.childNodes;if(c)d[d.length++]=c;else{for(var e=b.firstChild,f=0;e;)d[f++]=e,e=e.nextSibling;d.length=f}}}function $(a,b){var c=b.previousSibling,d=b.nextSibling;return c?c.nextSibling=d:a.firstChild=d,d?d.previousSibling=c:a.lastChild=c,Z(a.ownerDocument,a),b}function _(a,b,c){var d=b.parentNode;if(d&&d.removeChild(b),b.nodeType===r){var e=b.firstChild;if(null==e)return b;var f=b.lastChild}else e=f=b;var g=c?c.previousSibling:a.lastChild;e.previousSibling=g,f.nextSibling=c,g?g.nextSibling=e:a.firstChild=e,null==c?a.lastChild=f:c.previousSibling=f;do{e.parentNode=a}while(e!==f&&(e=e.nextSibling));return Z(a.ownerDocument||a,a),b.nodeType==r&&(b.firstChild=b.lastChild=null),b}function aa(a,b){var c=b.parentNode;if(c){var d=a.lastChild;c.removeChild(b);var d=a.lastChild}var d=a.lastChild;return b.parentNode=a,b.previousSibling=d,b.nextSibling=null,d?d.nextSibling=b:a.firstChild=b,a.lastChild=b,Z(a.ownerDocument,a,b),b}function ba(){this._nsMap={}}function ca(){}function da(){}function ea(){}function fa(){}function ga(){}function ha(){}function ia(){}function ja(){}function ka(){}function la(){}function ma(){}function na(){}function oa(a,b,c,d){switch(a.nodeType){case h:var e=a.attributes,g=e.length,m=a.firstChild,s=a.tagName;d=f===a.namespaceURI||d,b.push("<",s),c&&b.sort.apply(e,c);for(var t=0;t<g;t++)oa(e.item(t),b,c,d);if(m||d&&!/^(?:meta|link|img|br|hr|input|button)$/i.test(s)){if(b.push(">"),d&&/^script$/i.test(s))m&&b.push(m.data);else for(;m;)oa(m,b,c,d),m=m.nextSibling;b.push("</",s,">")}else b.push("/>");return;case p:case r:for(var m=a.firstChild;m;)oa(m,b,c,d),m=m.nextSibling;return;case i:return b.push(" ",a.name,'="',a.value.replace(/[<&"]/g,U),'"');case j:return b.push(a.data.replace(/[<&]/g,U));case k:return b.push("<![CDATA[",a.data,"]]>");case o:return b.push("<!--",a.data,"-->");case q:var u=a.publicId,v=a.systemId;if(b.push("<!DOCTYPE ",a.name),u)b.push(' PUBLIC "',u),v&&"."!=v&&b.push('" "',v),b.push('">');else if(v&&"."!=v)b.push(' SYSTEM "',v,'">');else{var w=a.internalSubset;w&&b.push(" [",w,"]"),b.push(">")}return;case n:return b.push("<?",a.target," ",a.data,"?>");case l:return b.push("&",a.nodeName,";");default:b.push("??",a.nodeName)}}function pa(a,b,c){var d;switch(b.nodeType){case h:d=b.cloneNode(!1),d.ownerDocument=a;case r:break;case i:c=!0}if(d||(d=b.cloneNode(!1)),d.ownerDocument=a,d.parentNode=null,c)for(var e=b.firstChild;e;)d.appendChild(pa(a,e,c)),e=e.nextSibling;return d}function qa(a,b,c){var d=new b.constructor;for(var e in b){var f=b[e];"object"!=typeof f&&f!=d[e]&&(d[e]=f)}switch(b.childNodes&&(d.childNodes=new L),d.ownerDocument=a,d.nodeType){case h:var g=b.attributes,j=d.attributes=new O,k=g.length;j._ownerElement=d;for(var l=0;l<k;l++)d.setAttributeNode(qa(a,g.item(l),!0));break;case i:c=!0}if(c)for(var m=b.firstChild;m;)d.appendChild(qa(a,m,c)),m=m.nextSibling;return d}function ra(a,b,c){a[b]=c}function sa(a){switch(a.nodeType){case 1:case 11:var b=[];for(a=a.firstChild;a;)7!==a.nodeType&&8!==a.nodeType&&b.push(sa(a)),a=a.nextSibling;return b.join("");default:return a.nodeValue}}var f="http://www.w3.org/1999/xhtml",g={},h=g.ELEMENT_NODE=1,i=g.ATTRIBUTE_NODE=2,j=g.TEXT_NODE=3,k=g.CDATA_SECTION_NODE=4,l=g.ENTITY_REFERENCE_NODE=5,m=g.ENTITY_NODE=6,n=g.PROCESSING_INSTRUCTION_NODE=7,o=g.COMMENT_NODE=8,p=g.DOCUMENT_NODE=9,q=g.DOCUMENT_TYPE_NODE=10,r=g.DOCUMENT_FRAGMENT_NODE=11,s=g.NOTATION_NODE=12,t={},u={},C=(t.INDEX_SIZE_ERR=(u[1]="Index size error",1),t.DOMSTRING_SIZE_ERR=(u[2]="DOMString size error",2),t.HIERARCHY_REQUEST_ERR=(u[3]="Hierarchy request error",3),t.WRONG_DOCUMENT_ERR=(u[4]="Wrong document",4),t.INVALID_CHARACTER_ERR=(u[5]="Invalid character",5),t.NO_DATA_ALLOWED_ERR=(u[6]="No data allowed",6),t.NO_MODIFICATION_ALLOWED_ERR=(u[7]="No modification allowed",7),t.NOT_FOUND_ERR=(u[8]="Not found",8)),E=(t.NOT_SUPPORTED_ERR=(u[9]="Not supported",9),t.INUSE_ATTRIBUTE_ERR=(u[10]="Attribute in use",10));t.INVALID_STATE_ERR=(u[11]="Invalid state",11),t.SYNTAX_ERR=(u[12]="Syntax error",12),t.INVALID_MODIFICATION_ERR=(u[13]="Invalid modification",13),t.NAMESPACE_ERR=(u[14]="Invalid namespace",14),t.INVALID_ACCESS_ERR=(u[15]="Invalid access",15);K.prototype=Error.prototype,d(t,K),L.prototype={length:0,item:function(a){return this[a]||null},toString:function(){for(var a=[],b=0;b<this.length;b++)oa(this[b],a);return a.join("")}},M.prototype.item=function(a){return N(this),this[a]},e(M,L),O.prototype={length:0,item:L.prototype.item,getNamedItem:function(a){for(var b=this.length;b--;){var c=this[b];if(c.nodeName==a)return c}},setNamedItem:function(a){var b=a.ownerElement;if(b&&b!=this._ownerElement)throw new K(E);var c=this.getNamedItem(a.nodeName);return Q(this._ownerElement,this,a,c),c},setNamedItemNS:function(a){var c,b=a.ownerElement;if(b&&b!=this._ownerElement)throw new K(E);return c=this.getNamedItemNS(a.namespaceURI,a.localName),Q(this._ownerElement,this,a,c),c},removeNamedItem:function(a){var b=this.getNamedItem(a);return R(this._ownerElement,this,b),b},removeNamedItemNS:function(a,b){var c=this.getNamedItemNS(a,b);return R(this._ownerElement,this,c),c},getNamedItemNS:function(a,b){for(var c=this.length;c--;){var d=this[c];if(d.localName==b&&d.namespaceURI==a)return d}return null}},S.prototype={hasFeature:function(a,b){var c=this._features[a.toLowerCase()];return!(!c||b&&!(b in c))},createDocument:function(a,b,c){var d=new W;if(d.implementation=this,d.childNodes=new L,d.doctype=c,c&&d.appendChild(c),b){var e=d.createElementNS(a,b);d.appendChild(e)}return d},createDocumentType:function(a,b,c){var d=new ha;return d.name=a,d.nodeName=a,d.publicId=b,d.systemId=c,d}},T.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,b){return _(this,a,b)},replaceChild:function(a,b){this.insertBefore(a,b),b&&this.removeChild(b)},removeChild:function(a){return $(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(a){return qa(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var b=a.nextSibling;b&&b.nodeType==j&&a.nodeType==j?(this.removeChild(b),a.appendData(b.data)):(a.normalize(),a=b)}},isSupported:function(a,b){return this.ownerDocument.implementation.hasFeature(a,b)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(a){for(var b=this;b;){var c=b._nsMap;if(c)for(var d in c)if(c[d]==a)return d;b=2==b.nodeType?b.ownerDocument:b.parentNode}return null},lookupNamespaceURI:function(a){for(var b=this;b;){var c=b._nsMap;if(c&&a in c)return c[a];b=2==b.nodeType?b.ownerDocument:b.parentNode}return null},isDefaultNamespace:function(a){return null==this.lookupPrefix(a)}},d(g,T),d(g,T.prototype),W.prototype={nodeName:"#document",nodeType:p,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,b){if(a.nodeType==r){for(var c=a.firstChild;c;){var d=c.nextSibling;this.insertBefore(c,b),c=d}return a}return null==this.documentElement&&1==a.nodeType&&(this.documentElement=a),_(this,a,b),a.ownerDocument=this,a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),$(this,a)},importNode:function(a,b){return pa(this,a,b)},getElementById:function(a){var b=null;return V(this.documentElement,function(c){if(1==c.nodeType&&c.getAttribute("id")==a)return b=c,!0}),b},createElement:function(a){var b=new ba;return b.ownerDocument=this,b.nodeName=a,b.tagName=a,b.childNodes=new L,(b.attributes=new O)._ownerElement=b,b},createDocumentFragment:function(){var a=new la;return a.ownerDocument=this,a.childNodes=new L,a},createTextNode:function(a){var b=new ea;return b.ownerDocument=this,b.appendData(a),b},createComment:function(a){var b=new fa;return b.ownerDocument=this,b.appendData(a),b},createCDATASection:function(a){var b=new ga;return b.ownerDocument=this,b.appendData(a),b},createProcessingInstruction:function(a,b){var c=new ma;return c.ownerDocument=this,c.tagName=c.target=a,c.nodeValue=c.data=b,c},createAttribute:function(a){var b=new ca;return b.ownerDocument=this,b.name=a,b.nodeName=a,b.localName=a,b.specified=!0,b},createEntityReference:function(a){var b=new ka;return b.ownerDocument=this,b.nodeName=a,b},createElementNS:function(a,b){var c=new ba,d=b.split(":"),e=c.attributes=new O;return c.childNodes=new L,c.ownerDocument=this,c.nodeName=b,c.tagName=b,c.namespaceURI=a,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,e._ownerElement=c,c},createAttributeNS:function(a,b){var c=new ca,d=b.split(":");return c.ownerDocument=this,c.nodeName=b,c.name=b,c.namespaceURI=a,c.specified=!0,2==d.length?(c.prefix=d[0],c.localName=d[1]):c.localName=b,c}},e(W,T),ba.prototype={nodeType:h,hasAttribute:function(a){return null!=this.getAttributeNode(a)},getAttribute:function(a){var b=this.getAttributeNode(a);return b&&b.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,b){var c=this.ownerDocument.createAttribute(a);c.value=c.nodeValue=""+b,this.setAttributeNode(c)},removeAttribute:function(a){var b=this.getAttributeNode(a);b&&this.removeAttributeNode(b)},appendChild:function(a){return a.nodeType===r?this.insertBefore(a,null):aa(this,a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);c&&this.removeAttributeNode(c)},hasAttributeNS:function(a,b){return null!=this.getAttributeNodeNS(a,b)},getAttributeNS:function(a,b){var c=this.getAttributeNodeNS(a,b);return c&&c.value||""},setAttributeNS:function(a,b,c){var d=this.ownerDocument.createAttributeNS(a,b);d.value=d.nodeValue=""+c,this.setAttributeNode(d)},getAttributeNodeNS:function(a,b){return this.attributes.getNamedItemNS(a,b)},getElementsByTagName:function(a){return new M(this,function(b){var c=[];return V(b,function(d){d===b||d.nodeType!=h||"*"!==a&&d.tagName!=a||c.push(d)}),c})},getElementsByTagNameNS:function(a,b){return new M(this,function(c){var d=[];return V(c,function(e){e===c||e.nodeType!==h||"*"!==a&&e.namespaceURI!==a||"*"!==b&&e.localName!=b||d.push(e)}),d})}},W.prototype.getElementsByTagName=ba.prototype.getElementsByTagName,W.prototype.getElementsByTagNameNS=ba.prototype.getElementsByTagNameNS,e(ba,T),ca.prototype.nodeType=i,e(ca,T),da.prototype={data:"",substringData:function(a,b){return this.data.substring(a,a+b)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,b){this.replaceData(a,0,b)},appendChild:function(a){throw new Error(u[3])},deleteData:function(a,b){this.replaceData(a,b,"")},replaceData:function(a,b,c){c=this.data.substring(0,a)+c+this.data.substring(a+b),this.nodeValue=this.data=c,this.length=c.length}},e(da,T),ea.prototype={nodeName:"#text",nodeType:j,splitText:function(a){var b=this.data,c=b.substring(a);b=b.substring(0,a),this.data=this.nodeValue=b,this.length=b.length;var d=this.ownerDocument.createTextNode(c);return this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling),d}},e(ea,da),fa.prototype={nodeName:"#comment",nodeType:o},e(fa,da),ga.prototype={nodeName:"#cdata-section",nodeType:k},e(ga,da),ha.prototype.nodeType=q,e(ha,T),ia.prototype.nodeType=s,e(ia,T),ja.prototype.nodeType=m,e(ja,T),ka.prototype.nodeType=l,e(ka,T),la.prototype.nodeName="#document-fragment",la.prototype.nodeType=r,e(la,T),ma.prototype.nodeType=n,e(ma,T),na.prototype.serializeToString=function(a,b){return a.toString(b)},T.prototype.toString=function(a){var b=[];return oa(this,b,a),b.join("")};try{Object.defineProperty&&(Object.defineProperty(M.prototype,"length",{get:function(){return N(this),this.$$length}}),Object.defineProperty(T.prototype,"textContent",{get:function(){return sa(this)},set:function(a){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(a||String(a))&&this.appendChild(this.ownerDocument.createTextNode(a));break;default:this.data=a,this.value=value,this.nodeValue=a}}}),ra=function(a,b,c){a["$$"+b]=c})}catch(a){}"function"==typeof a&&(c.DOMImplementation=S,c.XMLSerializer=na)},{}],195:[function(a,b,c){function o(){}function p(a,b,c,d,e){function f(a){if(a>65535){a-=65536;var b=55296+(a>>10),c=56320+(1023&a);return String.fromCharCode(b,c)}return String.fromCharCode(a)}function g(a){var b=a.slice(1,-1);return b in c?c[b]:"#"===b.charAt(0)?f(parseInt(b.substr(1).replace("x","0x"))):(e.error("entity not found:"+a),a)}function h(b){if(b>p){var c=a.substring(p,b).replace(/&#?\w+;/g,g);m&&i(p),d.characters(c,0,b-p),p=b}}function i(b,c){for(;b>=k&&(c=l.exec(a));)j=c.index,k=j+c[0].length,m.lineNumber++;m.columnNumber=b-j+1}for(var j=0,k=0,l=/.+(?:\r\n?|\n)|.*$/g,m=d.locator,n=[{currentNSMap:b}],o={},p=0;;){try{var v=a.indexOf("<",p);if(v<0){if(!a.substr(p).match(/^\s*$/)){var z=d.document,A=z.createTextNode(a.substr(p));z.appendChild(A),d.currentElement=A}return}switch(v>p&&h(v),a.charAt(v+1)){case"/":var B=a.indexOf(">",v+3),C=a.substring(v+2,B),D=n.pop(),E=D.localNSMap;if(D.tagName!=C&&e.fatalError("end tag name: "+C+" is not match the current start tagName:"+D.tagName),d.endElement(D.uri,D.localName,C),E)for(var F in E)d.endPrefixMapping(F);B++;break;case"?":m&&i(v),B=x(a,v,d);break;case"!":m&&i(v),B=w(a,v,d,e);break;default:m&&i(v);var G=new y,B=r(a,v,G,g,e),H=G.length;if(m){if(H)for(var I=0;I<H;I++){var J=G[I];i(J.offset),J.offset=q(m,{})}i(B)}!G.closed&&u(a,B,G.tagName,o)&&(G.closed=!0,c.nbsp||e.warning("unclosed xml attribute")),s(G,d,n),"http://www.w3.org/1999/xhtml"!==G.uri||G.closed?B++:B=t(a,B,G.tagName,g,d)}}catch(a){e.error("element parse error: "+a),B=-1}B>p?p=B:h(Math.max(v,p)+1)}}function q(a,b){return b.lineNumber=a.lineNumber,b.columnNumber=a.columnNumber,b}function r(a,b,c,d,e){for(var f,o,p=++b,q=g;;){var r=a.charAt(p);switch(r){case"=":if(q===h)f=a.slice(b,p),q=j;else{if(q!==i)throw new Error("attribute equal must after attrName");q=j}break;case"'":case'"':if(q===j){if(b=p+1,!((p=a.indexOf(r,b))>0))throw new Error("attribute value no end '"+r+"' match");o=a.slice(b,p).replace(/&#?\w+;/g,d),c.add(f,o,b-1),q=l}else{if(q!=k)throw new Error('attribute value must after "="');o=a.slice(b,p).replace(/&#?\w+;/g,d),c.add(f,o,b),e.warning('attribute "'+f+'" missed start quot('+r+")!!"),b=p+1,q=l}break;case"/":switch(q){case g:c.setTagName(a.slice(b,p));case l:case m:case n:q=n,c.closed=!0;case k:case h:case i:break;default:throw new Error("attribute invalid close char('/')")}break;case"":e.error("unexpected end of input");case">":switch(q){case g:c.setTagName(a.slice(b,p));case l:case m:case n:break;case k:case h:o=a.slice(b,p),"/"===o.slice(-1)&&(c.closed=!0,o=o.slice(0,-1));case i:q===i&&(o=f),q==k?(e.warning('attribute "'+o+'" missed quot(")!!'),c.add(f,o.replace(/&#?\w+;/g,d),b)):(e.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),c.add(o,o,b));break;case j:throw new Error("attribute value missed!!")}return p;case"":r=" ";default:if(r<=" ")switch(q){case g:c.setTagName(a.slice(b,p)),q=m;break;case h:f=a.slice(b,p),q=i;break;case k:var o=a.slice(b,p).replace(/&#?\w+;/g,d);e.warning('attribute "'+o+'" missed quot(")!!'),c.add(f,o,b);case l:q=m}else switch(q){case i:e.warning('attribute "'+f+'" missed value!! "'+f+'" instead!!'),c.add(f,f,b),b=p,q=h;break;case l:e.warning('attribute space is required"'+f+'"!!');case m:q=h,b=p;break;case j:q=k,b=p;break;case n:throw new Error("elements closed character '/' and '>' must be connected to")}}p++}}function s(a,b,c){for(var d=a.tagName,e=null,f=c[c.length-1].currentNSMap,g=a.length;g--;){var h=a[g],i=h.qName,j=h.value,k=i.indexOf(":");if(k>0)var l=h.prefix=i.slice(0,k),m=i.slice(k+1),n="xmlns"===l&&m;else m=i,l=null,n="xmlns"===i&&"";h.localName=m,!1!==n&&(null==e&&(e={},v(f,f={})),f[n]=e[n]=j,h.uri="http://www.w3.org/2000/xmlns/",b.startPrefixMapping(n,j))}for(var g=a.length;g--;){h=a[g];var l=h.prefix;l&&("xml"===l&&(h.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(h.uri=f[l]))}var k=d.indexOf(":");k>0?(l=a.prefix=d.slice(0,k),m=a.localName=d.slice(k+1)):(l=null,m=a.localName=d);var o=a.uri=f[l||""];if(b.startElement(o,m,d,a),a.closed){if(b.endElement(o,m,d),e)for(l in e)b.endPrefixMapping(l)}else a.currentNSMap=f,a.localNSMap=e,c.push(a)}function t(a,b,c,d,e){if(/^(?:script|textarea)$/i.test(c)){var f=a.indexOf("</"+c+">",b),g=a.substring(b+1,f);if(/[&<]/.test(g))return/^script$/i.test(c)?(e.characters(g,0,g.length),f):(g=g.replace(/&#?\w+;/g,d),e.characters(g,0,g.length),f)}return b+1}function u(a,b,c,d){var e=d[c];return null==e&&(e=d[c]=a.lastIndexOf("</"+c+">")),e<b}function v(a,b){for(var c in a)b[c]=a[c]}function w(a,b,c,d){switch(a.charAt(b+2)){case"-":if("-"===a.charAt(b+3)){var f=a.indexOf("-->",b+4);return f>b?(c.comment(a,b+4,f-b-4),f+3):(d.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==a.substr(b+3,6)){var f=a.indexOf("]]>",b+9);return c.startCDATA(),c.characters(a,b+9,f-b-9),c.endCDATA(),f+3}var g=A(a,b),h=g.length;if(h>1&&/!doctype/i.test(g[0][0])){var i=g[1][0],j=h>3&&/^public$/i.test(g[2][0])&&g[3][0],k=h>4&&g[4][0],l=g[h-1];return c.startDTD(i,j&&j.replace(/^(['"])(.*?)\1$/,"$2"),k&&k.replace(/^(['"])(.*?)\1$/,"$2")),c.endDTD(),l.index+l[0].length}}return-1}function x(a,b,c){var d=a.indexOf("?>",b);if(d){var e=a.substring(b,d).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(e){e[0].length;return c.processingInstruction(e[1],e[2]),d+2}return-1}return-1}function y(a){}function z(a,b){return a.__proto__=b,a}function A(a,b){var c,d=[],e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(e.lastIndex=b,e.exec(a);c=e.exec(a);)if(d.push(c),c[1])return d}var d=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,e=new RegExp("[\\-\\.0-9"+d.source.slice(1,-1)+"-\\u203F-]"),f=new RegExp("^"+d.source+e.source+"*(?::"+d.source+e.source+"*)?$"),g=0,h=1,i=2,j=3,k=4,l=5,m=6,n=7;o.prototype={parse:function(a,b,c){var d=this.domBuilder;d.startDocument(),v(b,b={}),p(a,b,c,d,this.errorHandler),d.endDocument()}},y.prototype={setTagName:function(a){if(!f.test(a))throw new Error("invalid tagName:"+a);this.tagName=a},add:function(a,b,c){if(!f.test(a))throw new Error("invalid attribute:"+a);this[this.length++]={qName:a,value:b,offset:c}},length:0,getLocalName:function(a){return this[a].localName},getOffset:function(a){return this[a].offset},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}},z({},z.prototype)instanceof z||(z=function(a,b){function c(){}c.prototype=b,c=new c;for(b in a)c[b]=a[b];return c}),"function"==typeof a&&(c.XMLReader=o)},{}]},{},[60]);